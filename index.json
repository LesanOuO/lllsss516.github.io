[{"categories":["æ”¶è—åˆ†äº«"],"content":"åœ¨ç”¨threejsæ¸²æŸ“3Dæ¨¡å‹æ—¶ï¼Œå¾€å¾€éœ€è¦é€‰æ‹©ä¸€ä¸ªæœ€é€‚åˆçš„æ¨¡å‹æ ¼å¼ï¼Œé€šå¸¸éƒ½æ˜¯ä½¿ç”¨GLBä½œä¸ºWebæ¸²æŸ“æ¨¡å‹ã€‚ç„¶è€Œè®¸å¤šå·¥ä¸šçš„æ¨¡å‹å¾€å¾€éƒ½æ˜¯ä»¥STEPæˆ–è€…IGESä½œä¸ºå¯¼å‡ºæ ¼å¼ï¼Œè¿™ç§æ ¼å¼å¯¹äºç›®å‰ä¸»æµçš„3Dæ¸²æŸ“åº“æ”¯æŒå¹¶ä¸å¥½ï¼Œæ‰€ä»¥éœ€è¦è½¬æ¢æ¨¡å‹æ ¼å¼ã€‚æœ¬ç¯‡æ–‡ç« ä¸ºä¸ªäººé€šè¿‡æŸ¥æ‰¾æ€»ç»“çš„è½¬æ¢æ–¹æ³•ï¼Œè™½ç„¶å¹¶ä¸æ˜¯æœ€ä¼˜è§£ğŸ™ƒã€‚ ","date":"2022-11-26","objectID":"/stepigesstl%E7%AD%893d%E6%A8%A1%E5%9E%8B%E8%BD%AC%E6%8D%A2%E4%B8%BAglb/:0:0","tags":["3D"],"title":"STEPã€IGESã€STLç­‰3Dæ¨¡å‹è½¬æ¢ä¸ºGLB","uri":"/stepigesstl%E7%AD%893d%E6%A8%A1%E5%9E%8B%E8%BD%AC%E6%8D%A2%E4%B8%BAglb/"},{"categories":["æ”¶è—åˆ†äº«"],"content":"å„ç§3Dæ¨¡å‹æ ¼å¼ ","date":"2022-11-26","objectID":"/stepigesstl%E7%AD%893d%E6%A8%A1%E5%9E%8B%E8%BD%AC%E6%8D%A2%E4%B8%BAglb/:1:0","tags":["3D"],"title":"STEPã€IGESã€STLç­‰3Dæ¨¡å‹è½¬æ¢ä¸ºGLB","uri":"/stepigesstl%E7%AD%893d%E6%A8%A1%E5%9E%8B%E8%BD%AC%E6%8D%A2%E4%B8%BAglb/"},{"categories":["æ”¶è—åˆ†äº«"],"content":"STEP \u0026 IGES ç®€å•æ¥è¯´ï¼Œè¿™ä¸¤ç§æ ¼å¼éƒ½æ˜¯CADçš„ä¸€ç§æ–‡ä»¶æ ‡å‡†ï¼Œåœ¨å·¥ä¸šä¸Šä½¿ç”¨æ¯”è¾ƒå¹¿æ³›ï¼ŒSTEPæ¯”IGESå‡ºç°å¾—æ›´æ™šä¸€äº›ï¼Œç”±äºIGESæ ¼å¼çš„æœ€æ–°ç‰ˆæœ¬æ˜¯96å¹´å‘å¸ƒçš„ï¼Œç°åœ¨å¤šç”±æ›´é«˜æ•ˆçš„STEPç­‰æ–°æ ¼å¼æ›¿ä»£ï¼Œä¸æ”¯æŒæè´¨ã€‚ IGES å¯ä»¥å®‰è£… iges viewer å…è´¹å·¥å…·æŸ¥çœ‹ã€‚ ä½†æ˜¯ï¼Œç°è¡Œä¸»æµçš„web3dåº“ï¼Œæ¯”å¦‚ three.jsã€Babylon å‡ä¸æ”¯æŒ STEP å’Œ IGES æ¨¡å‹ï¼Œéœ€è¦è§£å†³è¿™ä¸ªé—®é¢˜æœ‰ä¸¤ä¸ªæ€è·¯ï¼š æ·±å…¥äº†è§£æ ¼å¼å«ä¹‰ï¼Œç¼–å†™ä»£ç ç»™å¯¹åº”åº“æäº¤å¯¹åº”çš„è§£ææ–¹æ¡ˆï¼ˆæƒ³æ³•å¾ˆå¥½ï¼Œä½†æ˜¯å®è·µä¸æ˜“ï¼‰ å°†æ ¼å¼è½¬æ¢ä¸ºé€‚åˆwebå±•ç¤ºçš„æ ¼å¼ï¼Œæ¯”å¦‚ç§°ä¸º3dç•ŒJPGçš„ GLTF æ ¼å¼ï¼ˆæœ¬æ–‡å°±æ˜¯è®²è¿™ä¸ªçš„ï¼‰ ","date":"2022-11-26","objectID":"/stepigesstl%E7%AD%893d%E6%A8%A1%E5%9E%8B%E8%BD%AC%E6%8D%A2%E4%B8%BAglb/:1:1","tags":["3D"],"title":"STEPã€IGESã€STLç­‰3Dæ¨¡å‹è½¬æ¢ä¸ºGLB","uri":"/stepigesstl%E7%AD%893d%E6%A8%A1%E5%9E%8B%E8%BD%AC%E6%8D%A2%E4%B8%BAglb/"},{"categories":["æ”¶è—åˆ†äº«"],"content":"STL STLæ ¼å¼æ›´å¤šå‡ºç°åœ¨3Dæ‰“å°ä¸­ï¼Œåªèƒ½ç”¨æ¥è¡¨ç¤ºå°é—­çš„ä½“æˆ–è€…é¢ï¼Œä¸”æ–‡ä»¶å†…éƒ¨éƒ½ç”¨ä¸‰è§’å½¢è¡¨ç¤ºï¼Œæ‰€ä»¥è½¬æ¢ç²¾åº¦æ¯”è¾ƒç²—çš„è¯ï¼Œçœ‹èµ·æ¥æ•ˆæœæ¯”è¾ƒè¯¡å¼‚ï¼ŒåŒ…æ‹¬ Ascii ç¼–ç å’ŒäºŒè¿›åˆ¶ä¸¤ç§ç¼–ç æ¨¡å¼ï¼Œä¸€èˆ¬é‡‡ç”¨äºŒè¿›åˆ¶ï¼Œå› ä¸ºä½“ç§¯ç›¸å¯¹è¾ƒå°ï¼Œå¹¶ä¸”ä¸STEPå’ŒIGESä¸€æ ·ä¸æ”¯æŒæè´¨ æ¯”å¦‚åŒä¸€ä¸ªæ¨¡å‹ï¼ˆSTEPå¤§å°ï¼š4.81Mï¼‰ï¼Œè½¬æ¢ç²¾åº¦ä¸åŒå¯èƒ½å°±æ˜¯å¦‚ä¸‹ä¸¤ç§æ•ˆæœ ç²—ç²¾åº¦ï¼ˆAsciiç¼–ç ï¼š3.7Mï¼‰ï¼›ç»†ç²¾åº¦ï¼ˆAsciiç¼–ç ï¼š63.3Mï¼ŒäºŒè¿›åˆ¶ç¼–ç ï¼š12.1Mï¼‰ ","date":"2022-11-26","objectID":"/stepigesstl%E7%AD%893d%E6%A8%A1%E5%9E%8B%E8%BD%AC%E6%8D%A2%E4%B8%BAglb/:1:2","tags":["3D"],"title":"STEPã€IGESã€STLç­‰3Dæ¨¡å‹è½¬æ¢ä¸ºGLB","uri":"/stepigesstl%E7%AD%893d%E6%A8%A1%E5%9E%8B%E8%BD%AC%E6%8D%A2%E4%B8%BAglb/"},{"categories":["æ”¶è—åˆ†äº«"],"content":"GLTF ç®€å•æ¥è¯´ï¼Œå°±æ˜¯æœ€å°åŒ–çš„æŠŠæ¨¡å‹èµ„æºæ•´ç†èµ·æ¥ï¼Œç§°ä¸º3dæ¨¡å‹ç•Œçš„JPGï¼Œæ”¯æŒæè´¨è´´å›¾ç­‰ï¼Œåœ¨å„ä¸ªWeb3Dåº“ä¸­å¾—åˆ°äº†å¹¿æ³›æ”¯æŒï¼Œå…·ä½“æ€ä¹ˆåŠ è½½è¿™é‡Œå°±ä¸èµ˜è¿°äº†ï¼Œç½‘ä¸Šdemoå¾ˆå¤š Githubä¸Šçš„æ ¼å¼ä»‹ç»å’Œç›¸å…³æŠ€æœ¯æ±‡æ€»: https://github.com/mrdoob/three.js/pull/14308 GLTFçš„è¯¦ç»†ä»‹ç»ä¸­æ–‡èµ„æ–™: https://zhuanlan.zhihu.com/p/65265611 ","date":"2022-11-26","objectID":"/stepigesstl%E7%AD%893d%E6%A8%A1%E5%9E%8B%E8%BD%AC%E6%8D%A2%E4%B8%BAglb/:1:3","tags":["3D"],"title":"STEPã€IGESã€STLç­‰3Dæ¨¡å‹è½¬æ¢ä¸ºGLB","uri":"/stepigesstl%E7%AD%893d%E6%A8%A1%E5%9E%8B%E8%BD%AC%E6%8D%A2%E4%B8%BAglb/"},{"categories":["æ”¶è—åˆ†äº«"],"content":"æ ¼å¼è½¬æ¢ æ•´ä½“æ€è·¯å¦‚ä¸‹ï¼š ä½¿ç”¨ pythonocc å°† STEP/IGES/Asciiçš„STLæ–‡ä»¶ ç»Ÿä¸€è½¬æ¢ä¸ºäºŒè¿›åˆ¶æ¨¡å¼çš„ STLï¼Œ å†ä½¿ç”¨ stl2gltf å°†STLè½¬æ¢è½¬æ¢ä¸º gltf æ ¼å¼ï¼Œ æœ€åä½¿ç”¨ gltf-pipeline å°†glbæ–‡ä»¶å‹ç¼©è¾“å‡ºå³å¯ ","date":"2022-11-26","objectID":"/stepigesstl%E7%AD%893d%E6%A8%A1%E5%9E%8B%E8%BD%AC%E6%8D%A2%E4%B8%BAglb/:2:0","tags":["3D"],"title":"STEPã€IGESã€STLç­‰3Dæ¨¡å‹è½¬æ¢ä¸ºGLB","uri":"/stepigesstl%E7%AD%893d%E6%A8%A1%E5%9E%8B%E8%BD%AC%E6%8D%A2%E4%B8%BAglb/"},{"categories":["æ”¶è—åˆ†äº«"],"content":"ç¯å¢ƒå®‰è£… pythonoccç¯å¢ƒ Pythonoccæ˜¯pythonçš„CADï¼Œå®‰è£…å’Œä½¿ç”¨éƒ½å¾ˆæ–¹ä¾¿ ä¸‹è½½å¹¶å®‰è£…AnaCondaï¼šhttps://www.anaconda.com/distribution/#download-section åˆ›å»ºpythonocc ç¯å¢ƒï¼šconda create -n pythonocct -c dlr-sc -c pythonocc pythonocc-core=7.4.0rc1 gltf-pipelineç¯å¢ƒ ä¸‹è½½å¹¶å®‰è£…nodejsï¼šhttps://nodejs.org/zh-cn/ å®‰è£…gltf-pipelineï¼šnpm install -g gltf-pipeline ","date":"2022-11-26","objectID":"/stepigesstl%E7%AD%893d%E6%A8%A1%E5%9E%8B%E8%BD%AC%E6%8D%A2%E4%B8%BAglb/:2:1","tags":["3D"],"title":"STEPã€IGESã€STLç­‰3Dæ¨¡å‹è½¬æ¢ä¸ºGLB","uri":"/stepigesstl%E7%AD%893d%E6%A8%A1%E5%9E%8B%E8%BD%AC%E6%8D%A2%E4%B8%BAglb/"},{"categories":["æ”¶è—åˆ†äº«"],"content":"å®ç°è½¬æ¢ï¼ˆæ–¹æ³•1ï¼‰ pythonoccè¯»å–è½¬æ¢STP/IGS/STL åœ¨ Anaconda Prompt ä¸­æ‰§è¡Œè¿›å…¥ç¯å¢ƒå‘½ä»¤ activate pythonocct STPè½¬æ¢ä¸º STL æ–‡ä»¶ï¼ˆStpConverter.pyï¼‰ import os from OCC.Extend.DataExchange import read_iges_file,read_step_file,write_stl_file input_file = 'temp2.stp' output_file = 'out.stl' if not os.path.exists(input_file): print('Input file need exists') exit() shapes=read_step_file(input_file) write_stl_file(shapes, output_file, 'binary', 0.03, 0.5) IGESè½¬æ¢ä¸º STL æ–‡ä»¶ï¼ˆIgsConverter.pyï¼‰ import os from OCC.Extend.DataExchange import read_iges_file,read_step_file,write_stl_file input_file = 'temp2.stp' output_file = 'out.stl' if not os.path.exists(input_file): print('Input file need exists') exit() shapes=read_step_file(input_file) write_stl_file(shapes, output_file, 'binary', 0.03, 0.5) stl2gltfï¼ˆå°†STLè½¬æ¢ä¸ºGLTFï¼‰ å°†äºŒè¿›åˆ¶æ¨¡å¼çš„ STL æ–‡ä»¶è½¬æ¢ä¸º GLTF æ–‡ä»¶ï¼Œæ”¯æŒæµè§ˆå™¨æœ¬åœ°è½¬æ¢ã€Pythonè„šæœ¬ä»¥åŠC++æºç  stl2gltf.py æ‰§è¡Œè½¬æ¢å‘½ä»¤python stl2gltf.py out.stl out.glb -b ","date":"2022-11-26","objectID":"/stepigesstl%E7%AD%893d%E6%A8%A1%E5%9E%8B%E8%BD%AC%E6%8D%A2%E4%B8%BAglb/:2:2","tags":["3D"],"title":"STEPã€IGESã€STLç­‰3Dæ¨¡å‹è½¬æ¢ä¸ºGLB","uri":"/stepigesstl%E7%AD%893d%E6%A8%A1%E5%9E%8B%E8%BD%AC%E6%8D%A2%E4%B8%BAglb/"},{"categories":["æ”¶è—åˆ†äº«"],"content":"å®ç°è½¬æ¢ï¼ˆæ–¹æ³•2ï¼‰ ä½¿ç”¨åœ¨çº¿è½¬æ¢ç½‘å€å¾—åˆ°GLBæ–‡ä»¶(3Dæ¨¡å‹åœ¨çº¿è½¬æ¢) ","date":"2022-11-26","objectID":"/stepigesstl%E7%AD%893d%E6%A8%A1%E5%9E%8B%E8%BD%AC%E6%8D%A2%E4%B8%BAglb/:2:3","tags":["3D"],"title":"STEPã€IGESã€STLç­‰3Dæ¨¡å‹è½¬æ¢ä¸ºGLB","uri":"/stepigesstl%E7%AD%893d%E6%A8%A1%E5%9E%8B%E8%BD%AC%E6%8D%A2%E4%B8%BAglb/"},{"categories":["æ”¶è—åˆ†äº«"],"content":"GLBæ–‡ä»¶å‹ç¼© ç›´æ¥è½¬æ¢å‡ºæ¥çš„ glb æ–‡ä»¶å¯èƒ½æ¯”è¾ƒå¤§ï¼Œå¯¹äºWEBæ¥è¯´è¿˜æ˜¯å¤ªå¤§äº†ï¼Œéœ€ä½¿ç”¨ gltf-pipeline è¿›è¡Œæ–‡ä»¶å‹ç¼© æ‰§è¡Œå‹ç¼©å‘½ä»¤gltf-pipeline -i out.glb -o out.glb -b -d glb/gltfæ ¼å¼æ¨¡å‹æ–‡ä»¶å‹ç¼©â€“gltf-pipelineç›¸å…³å‚æ•°è¯´æ˜ æœ¬æ–‡å‚è€ƒè‡ªï¼šhttps://www.codeleading.com/article/26425971329/ ","date":"2022-11-26","objectID":"/stepigesstl%E7%AD%893d%E6%A8%A1%E5%9E%8B%E8%BD%AC%E6%8D%A2%E4%B8%BAglb/:2:4","tags":["3D"],"title":"STEPã€IGESã€STLç­‰3Dæ¨¡å‹è½¬æ¢ä¸ºGLB","uri":"/stepigesstl%E7%AD%893d%E6%A8%A1%E5%9E%8B%E8%BD%AC%E6%8D%A2%E4%B8%BAglb/"},{"categories":["å®è·µç¬”è®°"],"content":"ç®€ä»‹ æœåŠ¡ç«¯å‘å®¢æˆ·ç«¯æ¨é€æ¶ˆæ¯ï¼Œå…¶å®é™¤äº†å¯ä»¥ç”¨WebSocketè¿™ç§è€³ç†Ÿèƒ½è¯¦çš„æœºåˆ¶å¤–ï¼Œè¿˜æœ‰ä¸€ç§æœåŠ¡å™¨å‘é€äº‹ä»¶(Server-sent events)ï¼Œç®€ç§°SSEã€‚ SSEå®ƒæ˜¯åŸºäºHTTPåè®®çš„ï¼Œæˆ‘ä»¬çŸ¥é“ä¸€èˆ¬æ„ä¹‰ä¸Šçš„HTTPåè®®æ˜¯æ— æ³•åšåˆ°æœåŠ¡ç«¯ä¸»åŠ¨å‘å®¢æˆ·ç«¯æ¨é€æ¶ˆæ¯çš„ï¼Œä½†SSEæ˜¯ä¸ªä¾‹å¤–ï¼Œå®ƒå˜æ¢äº†ä¸€ç§æ€è·¯ã€‚ SSEåœ¨æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯ä¹‹é—´æ‰“å¼€ä¸€ä¸ªå•å‘é€šé“ï¼ŒæœåŠ¡ç«¯å“åº”çš„ä¸å†æ˜¯ä¸€æ¬¡æ€§çš„æ•°æ®åŒ…è€Œæ˜¯text/event-streamç±»å‹çš„æ•°æ®æµä¿¡æ¯ï¼Œåœ¨æœ‰æ•°æ®å˜æ›´æ—¶ä»æœåŠ¡å™¨æµå¼ä¼ è¾“åˆ°å®¢æˆ·ç«¯ã€‚ æ•´ä½“çš„å®ç°æ€è·¯æœ‰ç‚¹ç±»ä¼¼äºåœ¨çº¿è§†é¢‘æ’­æ”¾ï¼Œè§†é¢‘æµä¼šè¿ç»­ä¸æ–­çš„æ¨é€åˆ°æµè§ˆå™¨ï¼Œä½ ä¹Ÿå¯ä»¥ç†è§£æˆï¼Œå®¢æˆ·ç«¯åœ¨å®Œæˆä¸€æ¬¡ç”¨æ—¶å¾ˆé•¿ï¼ˆç½‘ç»œä¸ç•…ï¼‰çš„ä¸‹è½½ã€‚ SSEä¸WebSocketä½œç”¨ç›¸ä¼¼ï¼Œéƒ½å¯ä»¥å»ºç«‹æœåŠ¡ç«¯ä¸æµè§ˆå™¨ä¹‹é—´çš„é€šä¿¡ï¼Œå®ç°æœåŠ¡ç«¯å‘å®¢æˆ·ç«¯æ¨é€æ¶ˆæ¯ï¼Œä½†è¿˜æ˜¯æœ‰äº›è®¸ä¸åŒï¼š SSE æ˜¯åŸºäºHTTPåè®®çš„ï¼Œå®ƒä»¬ä¸éœ€è¦ç‰¹æ®Šçš„åè®®æˆ–æœåŠ¡å™¨å®ç°å³å¯å·¥ä½œï¼›WebSocketéœ€å•ç‹¬æœåŠ¡å™¨æ¥å¤„ç†åè®®ã€‚ SSE å•å‘é€šä¿¡ï¼Œåªèƒ½ç”±æœåŠ¡ç«¯å‘å®¢æˆ·ç«¯å•å‘é€šä¿¡ï¼›webSocketå…¨åŒå·¥é€šä¿¡ï¼Œå³é€šä¿¡çš„åŒæ–¹å¯ä»¥åŒæ—¶å‘é€å’Œæ¥å—ä¿¡æ¯ã€‚ SSE å®ç°ç®€å•å¼€å‘æˆæœ¬ä½ï¼Œæ— éœ€å¼•å…¥å…¶ä»–ç»„ä»¶ï¼›WebSocketä¼ è¾“æ•°æ®éœ€åšäºŒæ¬¡è§£æï¼Œå¼€å‘é—¨æ§›é«˜ä¸€äº›ã€‚ SSE é»˜è®¤æ”¯æŒæ–­çº¿é‡è¿ï¼›WebSocketåˆ™éœ€è¦è‡ªå·±å®ç°ã€‚ SSE åªèƒ½ä¼ é€æ–‡æœ¬æ¶ˆæ¯ï¼ŒäºŒè¿›åˆ¶æ•°æ®éœ€è¦ç»è¿‡ç¼–ç åä¼ é€ï¼›WebSocketé»˜è®¤æ”¯æŒä¼ é€äºŒè¿›åˆ¶æ•°æ®ã€‚ SSE ä¸ WebSocket è¯¥å¦‚ä½•é€‰æ‹©ï¼Ÿ SSEå¥½åƒä¸€ç›´ä¸è¢«å¤§å®¶æ‰€ç†ŸçŸ¥ï¼Œä¸€éƒ¨åˆ†åŸå› æ˜¯å‡ºç°äº†WebSocketï¼Œè¿™ä¸ªæä¾›äº†æ›´ä¸°å¯Œçš„åè®®æ¥æ‰§è¡ŒåŒå‘ã€å…¨åŒå·¥é€šä¿¡ã€‚å¯¹äºæ¸¸æˆã€å³æ—¶é€šä¿¡ä»¥åŠéœ€è¦åŒå‘è¿‘ä¹å®æ—¶æ›´æ–°çš„åœºæ™¯ï¼Œæ‹¥æœ‰åŒå‘é€šé“æ›´å…·å¸å¼•åŠ›ã€‚ ä½†æ˜¯ï¼Œåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œä¸éœ€è¦ä»å®¢æˆ·ç«¯å‘é€æ•°æ®ã€‚è€Œä½ åªéœ€è¦ä¸€äº›æœåŠ¡å™¨æ“ä½œçš„æ›´æ–°ã€‚æ¯”å¦‚ï¼šç«™å†…ä¿¡ã€æœªè¯»æ¶ˆæ¯æ•°ã€çŠ¶æ€æ›´æ–°ã€è‚¡ç¥¨è¡Œæƒ…ã€ç›‘æ§æ•°é‡ç­‰åœºæ™¯ï¼ŒSEEä¸ç®¡æ˜¯ä»å®ç°çš„éš¾æ˜“å’Œæˆæœ¬ä¸Šéƒ½æ›´åŠ æœ‰ä¼˜åŠ¿ã€‚æ­¤å¤–ï¼ŒSSE å…·æœ‰WebSocketåœ¨è®¾è®¡ä¸Šç¼ºä¹çš„å¤šç§åŠŸèƒ½ï¼Œä¾‹å¦‚ï¼šè‡ªåŠ¨é‡æ–°è¿æ¥ã€äº‹ä»¶IDå’Œå‘é€ä»»æ„äº‹ä»¶çš„èƒ½åŠ›ã€‚ ","date":"2022-11-26","objectID":"/sse%E5%AE%9E%E7%8E%B0%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%8E%A8%E9%80%81/:1:0","tags":["æ¶ˆæ¯æ¨é€","SSE"],"title":"SSEå®ç°æœåŠ¡å™¨æ¨é€","uri":"/sse%E5%AE%9E%E7%8E%B0%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%8E%A8%E9%80%81/"},{"categories":["å®è·µç¬”è®°"],"content":"å®è·µ ","date":"2022-11-26","objectID":"/sse%E5%AE%9E%E7%8E%B0%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%8E%A8%E9%80%81/:2:0","tags":["æ¶ˆæ¯æ¨é€","SSE"],"title":"SSEå®ç°æœåŠ¡å™¨æ¨é€","uri":"/sse%E5%AE%9E%E7%8E%B0%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%8E%A8%E9%80%81/"},{"categories":["å®è·µç¬”è®°"],"content":"å‰ç«¯ å‰ç«¯åªéœ€è¿›è¡Œä¸€æ¬¡HTTPè¯·æ±‚ï¼Œå¸¦ä¸Šå”¯ä¸€IDï¼Œæ‰“å¼€äº‹ä»¶æµï¼Œç›‘å¬æœåŠ¡ç«¯æ¨é€çš„äº‹ä»¶å°±å¯ä»¥äº† \u003c!DOCTYPE html\u003e \u003chtml lang=\"en\"\u003e \u003chead\u003e \u003cmeta charset=\"UTF-8\"\u003e \u003ctitle\u003eTitle\u003c/title\u003e \u003cscript src=\"http://libs.baidu.com/jquery/2.0.0/jquery.min.js\" type=\"text/javascript\"\u003e\u003c/script\u003e \u003c/head\u003e \u003cbody\u003e \u003cdiv\u003e \u003cul\u003e \u003cli class=\"active\"\u003e\u003ci class=\"\"\u003e\u003c/i\u003e æœªè¯»æ¶ˆæ¯ \u003cspan id=\"count\" class=\"\"\u003e0\u003c/span\u003e\u003c/li\u003e \u003c/ul\u003e \u003cdiv\u003e \u003cinput style=\"height: 25px; width: 180px;\" maxlength=\"60\" value=\"\" id=\"message\" /\u003e \u003cbutton class=\"button\" id=\"mySendBtn\" onclick=\"sendMessage()\"\u003e ç‚¹å‡»å‘é€\u003c/button\u003e \u003chr /\u003e \u003cdiv id=\"arrivedDiv\" style=\"height:200px; width:300px; overflow:scroll; background:#EEEEEE;\"\u003e \u003cbr /\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cscript\u003e let source = null; let userId = \"111\"; if (window.EventSource) { // å»ºç«‹è¿æ¥ source = new EventSource('http://localhost:8080/sse/sub/'+userId); setMessageInnerHTML(\"è¿æ¥ç”¨æˆ·=\" + userId); // è¿æ¥ä¸€æ—¦å»ºç«‹ï¼Œå°±ä¼šè§¦å‘openäº‹ä»¶ï¼Œå¦ä¸€ç§å†™æ³•ï¼šsource.onopen = function (event) {} source.addEventListener('open', function (e) { setMessageInnerHTML(\"å»ºç«‹è¿æ¥ã€‚ã€‚ã€‚\"); }, false); // å®¢æˆ·ç«¯æ”¶åˆ°æœåŠ¡å™¨å‘æ¥çš„æ•°æ®ï¼Œå¦ä¸€ç§å†™æ³•ï¼šsource.onmessage = function (event) {} source.addEventListener('message', function (e) { setMessageInnerHTML(e.data); }); // å¦‚æœå‘ç”Ÿé€šä¿¡é”™è¯¯ï¼ˆæ¯”å¦‚è¿æ¥ä¸­æ–­ï¼‰ï¼Œå°±ä¼šè§¦å‘erroräº‹ä»¶ï¼Œå¦ä¸€ç§å†™æ³•ï¼šsource.onerror = function (event) {} source.addEventListener('error', function (e) { if (e.readyState === EventSource.CLOSED) { setMessageInnerHTML(\"è¿æ¥å…³é—­\"); } else { console.log(e); } }, false); } else { setMessageInnerHTML(\"ä½ çš„æµè§ˆå™¨ä¸æ”¯æŒSSE\"); } // ç›‘å¬çª—å£å…³é—­äº‹ä»¶ï¼Œä¸»åŠ¨å»å…³é—­sseè¿æ¥ï¼Œå¦‚æœæœåŠ¡ç«¯è®¾ç½®æ°¸ä¸è¿‡æœŸï¼Œæµè§ˆå™¨å…³é—­åæ‰‹åŠ¨æ¸…ç†æœåŠ¡ç«¯æ•°æ® window.onbeforeunload = function () { closeSse(); }; // å…³é—­Sseè¿æ¥ function closeSse() { source.close(); const httpRequest = new XMLHttpRequest(); httpRequest.open('GET', 'http://localhost:8080/sse/close/' + userId, true); httpRequest.send(); console.log(\"close\"); } // å°†æ¶ˆæ¯æ˜¾ç¤ºåœ¨ç½‘é¡µä¸Š function setMessageInnerHTML(innerHTML) { $(\"#arrivedDiv\").append(\"\u003cbr/\u003e\"+innerHTML); var count = $(\"#count\").text(); count = Number(count) + 1; $(\"#count\").text(count); } // å‘é€ä¿¡æ¯ function sendMessage() { var content = $(\"#message\").val(); $.ajax({ url: 'http://localhost:8080/sse/push', type: 'GET', data: { \"id\": userId, \"content\": content }, success: function (data) { console.log(data) }, error: function (err) { }, done: function () { } }) } \u003c/script\u003e \u003c/body\u003e \u003c/html\u003e ","date":"2022-11-26","objectID":"/sse%E5%AE%9E%E7%8E%B0%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%8E%A8%E9%80%81/:2:1","tags":["æ¶ˆæ¯æ¨é€","SSE"],"title":"SSEå®ç°æœåŠ¡å™¨æ¨é€","uri":"/sse%E5%AE%9E%E7%8E%B0%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%8E%A8%E9%80%81/"},{"categories":["å®è·µç¬”è®°"],"content":"åç«¯ åŸºæœ¬æ­¥éª¤ï¼Œåˆ›å»ºä¸€ä¸ªSseEmitterå¯¹è±¡æ”¾å…¥sseEmitterMapè¿›è¡Œç®¡ç† ä¸‹é¢æ˜¯SseEmitterUtilsç±»ï¼Œé‡Œé¢ä¸»è¦æ˜¯å¯¹SseEmitterçš„åŸºæœ¬æ“ä½œï¼Œä»¥åŠå½“å‰æ‰€æœ‰çš„è¿æ¥ç®¡ç† @Slf4j @Component public class SseEmitterUtils { /** * å½“å‰è¿æ¥æ•° */ private static AtomicInteger count = new AtomicInteger(0); /** * ä½¿ç”¨mapå¯¹è±¡ï¼Œä¾¿äºæ ¹æ®userIdæ¥è·å–å¯¹åº”çš„SseEmitterï¼Œæˆ–è€…æ”¾redisé‡Œé¢ */ private static Map\u003cString, SseEmitter\u003e sseEmitterMap = new ConcurrentHashMap\u003c\u003e(); /** * åˆ›å»ºç”¨æˆ·è¿æ¥å¹¶è¿”å› SseEmitter */ public static SseEmitter connect(String userId) { if (sseEmitterMap.containsKey(userId)) { return sseEmitterMap.get(userId); } try { /** * è®¾ç½®è¶…æ—¶æ—¶é—´ï¼Œ0è¡¨ç¤ºä¸è¿‡æœŸã€‚é»˜è®¤30ç§’ */ SseEmitter sseEmitter = new SseEmitter(0L); /** * æ³¨å†Œå›è°ƒ */ sseEmitter.onCompletion(completionCallBack(userId)); sseEmitter.onError(errorCallBack(userId)); sseEmitter.onTimeout(timeoutCallBack(userId)); sseEmitterMap.put(userId, sseEmitter); /** * æ•°é‡+1 */ count.getAndIncrement(); return sseEmitter; } catch (Exception e) { log.error(\"åˆ›å»ºæ–°çš„sseè¿æ¥å¼‚å¸¸ï¼Œå½“å‰ç”¨æˆ·ï¼š{}\", userId); } return null; } /** * ç»™æŒ‡å®šç”¨æˆ·å‘é€æ¶ˆæ¯ */ public static void sendMessage(String userId, String message) { if (sseEmitterMap.containsKey(userId)) { try { sseEmitterMap.get(userId).send(message); } catch (IOException e) { log.error(\"ç”¨æˆ·[{}]æ¨é€å¼‚å¸¸:{}\", userId, e.getMessage()); removeUser(userId); } } } /** * å‘åŒç»„äººå‘å¸ƒæ¶ˆæ¯ ï¼ˆè¦æ±‚userId+groupIdï¼‰ */ public static void groupSendMessage(String groupId, String message) { if (MapUtil.isNotEmpty(sseEmitterMap)) { sseEmitterMap.forEach((k, v) -\u003e { try { if (k.startsWith(groupId)) { v.send(message, MediaType.APPLICATION_JSON); } } catch (IOException e) { log.error(\"ç”¨æˆ·[{}]æ¨é€å¼‚å¸¸:{}\", k, e.getMessage()); removeUser(k); } }); } } public static List\u003cString\u003e getIds() { return new ArrayList\u003c\u003e(sseEmitterMap.keySet()); } public static void removeUser(String userId) { sseEmitterMap.remove(userId); // æ•°é‡-1 count.getAndDecrement(); log.info(\"ç§»é™¤ç”¨æˆ·ï¼š{}\", userId); } private static Runnable completionCallBack(String userId) { return () -\u003e { log.info(\"ç»“æŸè¿æ¥ï¼š{}\", userId); removeUser(userId); }; } private static Runnable timeoutCallBack(String userId) { return () -\u003e { log.info(\"è¿æ¥è¶…æ—¶ï¼š{}\", userId); removeUser(userId); }; } private static Consumer\u003cThrowable\u003e errorCallBack(String userId) { return throwable -\u003e { log.info(\"è¿æ¥å¼‚å¸¸ï¼š{}\", userId); removeUser(userId); }; } } æœ€åæ˜¯Controllerï¼Œä¸»è¦æ˜¯åˆ›å»ºè¿æ¥ã€å‘é€æ¶ˆæ¯ã€æ–­å¼€è¿æ¥å¯¹å¤–çš„æ¥å£ @RestController @CrossOrigin(\"*\") @RequestMapping(\"/sse\") public class SSEController { /** * åŸºç¡€æ¥å£ */ @GetMapping(\"/index\") public String sse(){ return \"sse\"; } /** * sse è®¢é˜…æ¶ˆæ¯ */ @GetMapping(path = \"sub/{id}\", produces = {MediaType.TEXT_EVENT_STREAM_VALUE}) public SseEmitter sub(@PathVariable String id) { return SseEmitterUtils.connect(id); } /** * sse å‘å¸ƒæ¶ˆæ¯ */ @GetMapping(\"push\") public void push(String id, String content) { SseEmitterUtils.sendMessage(id, content); } /** * sse æ–­å¼€è¿æ¥ */ @GetMapping(\"breakConnect\") public void breakConnect(String id, HttpServletRequest request, HttpServletResponse response) { request.startAsync(); SseEmitterUtils.removeUser(id); } } ","date":"2022-11-26","objectID":"/sse%E5%AE%9E%E7%8E%B0%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%8E%A8%E9%80%81/:2:2","tags":["æ¶ˆæ¯æ¨é€","SSE"],"title":"SSEå®ç°æœåŠ¡å™¨æ¨é€","uri":"/sse%E5%AE%9E%E7%8E%B0%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%8E%A8%E9%80%81/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"å¤šè¡Œè½¬æˆä¸€åˆ—ï¼ˆå¹¶ç”¨\",â€œåˆ†å‰²ï¼‰ SELECT NAME, STUFF (( SELECT ',' + VALUE FROM A WHERE NAME = Test.NAME FOR XML PATH ( '' ) ),1,1,'') VALUE FROM A AS Test GROUP BY NAME; STUFFè¯­å¥å°±æ˜¯ä¸ºäº†å»æ‰ç¬¬ä¸€ä¸ªã€é€—å·ã€‘ STUFFç”¨æ³•ï¼šï¼ˆä»åŸå­—ç¬¦çš„ç¬¬äºŒä¸ªå¼€å§‹å…±ä¸‰ä¸ªå­—ç¬¦æ›¿æ¢ä¸ºåé¢çš„å­—ç¬¦ï¼‰ SELECT STUFF('abcdef', 2, 3, 'ijklmn'); -- æŸ¥è¯¢ç»“æœï¼šaijklmnef å…¶ä½™è¡Œåˆ—è½¬æ¢ç”¨æ³•è¯·å‚è€ƒæ–‡ç« ï¼šhttps://www.cnblogs.com/no27/p/6398130.html ","date":"2022-11-26","objectID":"/sqlserver%E4%B8%80%E4%BA%9B%E5%B0%8F%E6%8A%80%E5%B7%A7%E5%88%86%E4%BA%AB/:1:0","tags":["SQL"],"title":"SQLServerä¸€äº›å°æŠ€å·§åˆ†äº«","uri":"/sqlserver%E4%B8%80%E4%BA%9B%E5%B0%8F%E6%8A%80%E5%B7%A7%E5%88%86%E4%BA%AB/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"æ ¹æ®ç¬¦å·å°†ä¸€åˆ—æ‹†åˆ†å¤šè¡Œ select name, SUBSTRING(a.comp,number,CHARINDEX(',',a.comp+',',number)-number) as company, from data_base a,master..spt_values where and number \u003e=1 and number \u003c len(comp) and type='p' and SUBSTRING(','+comp,number,1)=',' SUBSTRING()ä»è¾“å…¥å­—ç¬¦ä¸²ä¸­çš„ä½ç½®(ä»1å¼€å§‹è®¡æ•°)å¼€å§‹æå–å…·æœ‰æŒ‡å®šé•¿åº¦çš„å­å­—ç¬¦ä¸² SUBSTRING(input_string, start, length) CHARINDEX()å‡½æ•°ä»æŒ‡å®šä½ç½®å¼€å§‹æœç´¢å­—ç¬¦ä¸²å†…çš„å­å­—ç¬¦ä¸² CHARINDEX(substring, string [, start_location])ï¼Œå…¶ä¸­start_locationæ˜¯æœç´¢å¼€å§‹çš„ä½ç½®ï¼Œå¯é€‰ master..spt_valuesè¿™ä¸ªè¡¨ä¸»è¦ç”¨æ¥ä¿å­˜ä¸€äº›æšä¸¾å€¼ --0~2047 å…±2048ä¸ªæ•°å­— SELECT number FROM MASTER..spt_values WHERE TYPE = 'p' ","date":"2022-11-26","objectID":"/sqlserver%E4%B8%80%E4%BA%9B%E5%B0%8F%E6%8A%80%E5%B7%A7%E5%88%86%E4%BA%AB/:2:0","tags":["SQL"],"title":"SQLServerä¸€äº›å°æŠ€å·§åˆ†äº«","uri":"/sqlserver%E4%B8%80%E4%BA%9B%E5%B0%8F%E6%8A%80%E5%B7%A7%E5%88%86%E4%BA%AB/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"é€šè¿‡PARSENAMEæ‹†åˆ†å­—ç¬¦ä¸² æ³¨æ„ï¼šPARSENAMEæœ€å¤šåªèƒ½æ‹†åˆ†æˆ4ä¸ªå­—æ®µ PARSENAMEé»˜è®¤æ˜¯æ ¹æ®â€™.â€˜è¿›è¡Œæ‹†åˆ†çš„ï¼Œæ‰€ä»¥é¦–å…ˆè¦åšçš„æ˜¯å°†å­—æ®µä¸­çš„å…¶ä»–åˆ†éš”ç¬¦ï¼ˆå¦‚â€˜-â€™ï¼‰æ›¿æ¢æˆâ€™.â€™ DECLARE @ip NVARCHAR(200) = '192;168;1;2'; SELECT PARSENAME(REPLACE(@ip,';','.'), 1) AS col1, -- 2 PARSENAME(REPLACE(@ip,';','.'), 2) AS col2, -- 1 PARSENAME(REPLACE(@ip,';','.'), 3) AS col3, -- 168 PARSENAME(REPLACE(@ip,';','.'), 4) AS col4; -- 192 ","date":"2022-11-26","objectID":"/sqlserver%E4%B8%80%E4%BA%9B%E5%B0%8F%E6%8A%80%E5%B7%A7%E5%88%86%E4%BA%AB/:3:0","tags":["SQL"],"title":"SQLServerä¸€äº›å°æŠ€å·§åˆ†äº«","uri":"/sqlserver%E4%B8%80%E4%BA%9B%E5%B0%8F%E6%8A%80%E5%B7%A7%E5%88%86%E4%BA%AB/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"SQL Server å­—ç¬¦ä¸²æ‹†åˆ†å‡½æ•°Split create function split( @string varchar(255),--å¾…åˆ†å‰²å­—ç¬¦ä¸² @separator varchar(255)--åˆ†å‰²ç¬¦ )returns @array table(item varchar(255) COLLATE Chinese_PRC_CI_AS) -- COLLATEåˆ†é…æ’åºè§„åˆ™ as begin declare @begin int,@end int,@item varchar(255) set @begin = 1 set @end=charindex(@separator,@string,@begin) while(@end\u003c\u003e0) begin set @item = substring(@string,@begin,@end-@begin) insert into @array(item) values(@item) set @begin = @end+1 set @end=charindex(@separator,@string,@begin) end set @item = substring(@string,@begin,len(@string)+1-@begin) if (len(@item)\u003e0) insert into @array(item) values(substring(@string,@begin,len(@string)+1-@begin)) return end ","date":"2022-11-26","objectID":"/sqlserver%E4%B8%80%E4%BA%9B%E5%B0%8F%E6%8A%80%E5%B7%A7%E5%88%86%E4%BA%AB/:4:0","tags":["SQL"],"title":"SQLServerä¸€äº›å°æŠ€å·§åˆ†äº«","uri":"/sqlserver%E4%B8%80%E4%BA%9B%E5%B0%8F%E6%8A%80%E5%B7%A7%E5%88%86%E4%BA%AB/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"SQL Server CROSS/OUTER APPLY ä½¿ç”¨ APPLY è¿ç®—ç¬¦(2005æˆ–ä»¥ä¸Šç‰ˆæœ¬)å¯ä»¥ä¸ºå®ç°æŸ¥è¯¢æ“ä½œçš„å¤–éƒ¨è¡¨è¡¨è¾¾å¼è¿”å›çš„æ¯ä¸ªè¡Œè°ƒç”¨è¡¨å€¼å‡½æ•°ã€‚è¡¨å€¼å‡½æ•°ä½œä¸ºå³è¾“å…¥ï¼Œå¤–éƒ¨è¡¨è¡¨è¾¾å¼ä½œä¸ºå·¦è¾“å…¥ã€‚é€šè¿‡å¯¹å³è¾“å…¥æ±‚å€¼æ¥è·å¾—å·¦è¾“å…¥æ¯ä¸€è¡Œçš„è®¡ç®—ç»“æœï¼Œç”Ÿæˆçš„è¡Œè¢«ç»„åˆèµ·æ¥ä½œä¸ºæœ€ç»ˆè¾“å‡ºã€‚APPLY è¿ç®—ç¬¦ç”Ÿæˆçš„åˆ—çš„åˆ—è¡¨æ˜¯å·¦è¾“å…¥ä¸­çš„åˆ—é›†ï¼Œåè·Ÿå³è¾“å…¥è¿”å›çš„åˆ—çš„åˆ—è¡¨ã€‚ APPLY æœ‰ä¸¤ç§å½¢å¼ï¼š CROSS APPLY å’Œ OUTER APPLYã€‚CROSS APPLY ä»…è¿”å›å¤–éƒ¨è¡¨ä¸­é€šè¿‡è¡¨å€¼å‡½æ•°ç”Ÿæˆç»“æœé›†çš„è¡Œã€‚OUTER APPLY æ—¢è¿”å›ç”Ÿæˆç»“æœé›†çš„è¡Œï¼Œä¹Ÿè¿”å›ä¸ç”Ÿæˆç»“æœé›†çš„è¡Œï¼Œå…¶ä¸­è¡¨å€¼å‡½æ•°ç”Ÿæˆçš„åˆ—ä¸­çš„å€¼ä¸º NULLã€‚ çœ‹ä¸€ä¸‹ä¾‹å­ï¼š select * from table1 join MyFunction(1) on 1=1 -- MyFunction çš„å‚æ•°æ˜¯ä¸€ä¸ªå¸¸é‡ï¼Œå¯ä»¥è¿”å›ä¸€ä¸ªè¡¨ã€‚ -- ä½†æœ‰æ—¶å€™æˆ‘ä»¬å¸Œæœ›ä»¥ table1 çš„å­—æ®µä½œä¸ºå‚æ•°ï¼Œä¼ è¿›å‡½æ•°å»è®¡ç®—ï¼Œåƒï¼š select * from table1 join MyFunction(id) on 1=1 -- è¿™æ ·æ˜¯ä¼šå‡ºé”™çš„ã€‚è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±å¯ä»¥ç”¨ apply æ¥å®ç°äº†ã€‚ä¾‹å¦‚ï¼š select * from table1 cross apply MyFunction(id) on 1=1 ç®€å•çš„è¯´ï¼Œapply å…è®¸æˆ‘ä»¬å°†å‰é¢ç»“æœé›†æ¯ä¸€è¡Œçš„æ•°æ®ä½œä¸ºå‚æ•°ï¼Œä¼ é€’åˆ°åé¢çš„è¡¨è¾¾å¼ï¼Œåé¢çš„è¡¨è¾¾å¼å¯ä»¥æ˜¯ä¸€ä¸ªè¡¨å€¼å‡½æ•°ï¼Œæˆ–è€…selectç»“æœé›†ã€‚ soï¼Œå½“ä½ åœ¨éœ€è¦å°†æŸä¸ªå­—æ®µçš„å€¼ä½œä¸ºå‚æ•°ä½¿ç”¨æ—¶ï¼Œæˆ–è€…ç”¨joinå®ç°èµ·æ¥æ¯”è¾ƒå¤æ‚æ—¶ï¼Œå°±å¯ä»¥è€ƒè™‘applyæ¥å®ç°ã€‚ ç®€å•å®ä¾‹ï¼š è·å¾—è¯­æ–‡ç¬¬ä¸€åï¼Œæ•°å­¦å‰ä¸¤åï¼Œè‹±è¯­å‰ä¸‰åçš„nameï¼Œå­¦ç§‘ï¼Œåˆ†æ•°ï¼Œç”¨cross applyå®ç°ï¼š SELECT b.* FROM ( select Subject='Chiness',num=1 union all select 'Math',2 union all select 'English',3 )a cross apply (select top(a.num) * from Students where Subject=a.Subject )b ","date":"2022-11-26","objectID":"/sqlserver%E4%B8%80%E4%BA%9B%E5%B0%8F%E6%8A%80%E5%B7%A7%E5%88%86%E4%BA%AB/:5:0","tags":["SQL"],"title":"SQLServerä¸€äº›å°æŠ€å·§åˆ†äº«","uri":"/sqlserver%E4%B8%80%E4%BA%9B%E5%B0%8F%E6%8A%80%E5%B7%A7%E5%88%86%E4%BA%AB/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"æœ¬ç¯‡æ–‡ç« ä¸»è¦æ˜¯ä¸€äº›SQLä¼˜åŒ–çš„å°æŠ€å·§ï¼Œä¸ºäº†æå‡SQLç¼–å†™è§„èŒƒåŠæ€§èƒ½ ","date":"2022-11-26","objectID":"/sql%E4%BC%98%E5%8C%96%E5%B0%8F%E6%8A%80%E5%B7%A7/:0:0","tags":["SQL"],"title":"SQLä¼˜åŒ–å°æŠ€å·§","uri":"/sql%E4%BC%98%E5%8C%96%E5%B0%8F%E6%8A%80%E5%B7%A7/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"é¿å…ä½¿ç”¨select * åœ¨å®é™…ä¸šåŠ¡åœºæ™¯ä¸­ï¼Œæˆ‘ä»¬ä¸ä¸€å®šéœ€è¦æŸ¥å‡ºæ•´å¼ è¡¨ä¸­çš„æ‰€æœ‰æ•°æ®ã€‚å¦‚æœæŸ¥å‡ºäº†è®¸å¤šä¸å¿…è¦çš„æ•°æ®ï¼Œè¿™æ ·ä¼šç™½ç™½æµªè´¹äº†æ•°æ®åº“çš„èµ„æºï¼Œå¦‚ï¼šå†…å­˜æˆ–CPUã€‚æ­¤å¤–ï¼Œå¤šæŸ¥å‡ºæ¥çš„æ•°æ®ï¼Œé€šè¿‡ç½‘ç»œIOä¼ è¾“çš„è¿‡ç¨‹ä¸­ï¼Œä¹Ÿä¼šå¢åŠ æ•°æ®ä¼ è¾“çš„æ—¶é—´ã€‚ è¿˜æœ‰ä¸€ä¸ªæœ€é‡è¦çš„é—®é¢˜æ˜¯ï¼šselect * ä¸ä¼šèµ°è¦†ç›–ç´¢å¼•ï¼Œä¼šå‡ºç°å¤§é‡çš„å›è¡¨æ“ä½œï¼Œè€Œä»å¯¼è‡´æŸ¥è¯¢sqlçš„æ€§èƒ½å¾ˆä½ã€‚ æ‰€ä»¥ä»¥åæŸ¥è¡¨æ—¶ï¼ŒåªæŸ¥éœ€è¦ç”¨åˆ°çš„å­—æ®µï¼ select name,age from user where id=1; ","date":"2022-11-26","objectID":"/sql%E4%BC%98%E5%8C%96%E5%B0%8F%E6%8A%80%E5%B7%A7/:1:0","tags":["SQL"],"title":"SQLä¼˜åŒ–å°æŠ€å·§","uri":"/sql%E4%BC%98%E5%8C%96%E5%B0%8F%E6%8A%80%E5%B7%A7/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"ç”¨union allä»£æ›¿union union : å¯ä»¥è·å–æ’é‡åçš„æ•°æ® union all : å¯ä»¥è·å–æ‰€æœ‰æ•°æ®ï¼ŒåŒ…å«é‡å¤çš„æ•°æ® æ’é‡çš„è¿‡ç¨‹éœ€è¦éå†ã€æ’åºå’Œæ¯”è¾ƒï¼Œå®ƒæ›´è€—æ—¶ï¼Œæ›´æ¶ˆè€—cpuèµ„æºã€‚æ‰€ä»¥å¦‚æœèƒ½ç”¨union allçš„æ—¶å€™ï¼Œå°½é‡ä¸ç”¨unionã€‚ (select * from user where id=1) union all (select * from user where id=2); ","date":"2022-11-26","objectID":"/sql%E4%BC%98%E5%8C%96%E5%B0%8F%E6%8A%80%E5%B7%A7/:2:0","tags":["SQL"],"title":"SQLä¼˜åŒ–å°æŠ€å·§","uri":"/sql%E4%BC%98%E5%8C%96%E5%B0%8F%E6%8A%80%E5%B7%A7/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"å°è¡¨é©±åŠ¨å¤§è¡¨ å°è¡¨é©±åŠ¨å¤§è¡¨ï¼šä¹Ÿå°±æ˜¯è¯´ç”¨å°è¡¨çš„æ•°æ®é›†é©±åŠ¨å¤§è¡¨çš„æ•°æ®é›†ã€‚ å‡å¦‚æœ‰orderå’Œuserä¸¤å¼ è¡¨ï¼Œå…¶ä¸­orderè¡¨æœ‰10000æ¡æ•°æ®ï¼Œè€Œuserè¡¨æœ‰100æ¡æ•°æ®ã€‚ è¿™æ—¶å¦‚æœæƒ³æŸ¥ä¸€ä¸‹ï¼Œæ‰€æœ‰æœ‰æ•ˆçš„ç”¨æˆ·ä¸‹è¿‡çš„è®¢å•åˆ—è¡¨ã€‚ å¯ä»¥ä½¿ç”¨inå…³é”®å­—å®ç°ï¼š select * from order where user_id in (select id from user where status=1) ä¹Ÿå¯ä»¥ä½¿ç”¨existså…³é”®å­—å®ç°ï¼š select * from order where exists (select 1 from user where order.user_id = user.id and status=1) åœ¨inä¸existsä¸­è¯¥å¦‚ä½•æŠ‰æ‹©å‘¢ï¼Ÿ å› ä¸ºå¦‚æœSQLè¯­å¥ä¸­åŒ…å«äº†inå…³é”®å­—ï¼Œåˆ™å®ƒä¼šä¼˜å…ˆæ‰§è¡Œiné‡Œé¢çš„å­æŸ¥è¯¢è¯­å¥ï¼Œç„¶åå†æ‰§è¡Œinå¤–é¢çš„è¯­å¥ã€‚å¦‚æœiné‡Œé¢çš„æ•°æ®é‡å¾ˆå°‘ï¼Œä½œä¸ºæ¡ä»¶æŸ¥è¯¢é€Ÿåº¦æ›´å¿«ã€‚ è€Œå¦‚æœsqlè¯­å¥ä¸­åŒ…å«äº†existså…³é”®å­—ï¼Œå®ƒä¼˜å…ˆæ‰§è¡Œexistså·¦è¾¹çš„è¯­å¥ï¼ˆå³ä¸»æŸ¥è¯¢è¯­å¥ï¼‰ã€‚ç„¶åæŠŠå®ƒä½œä¸ºæ¡ä»¶ï¼Œå»è·Ÿå³è¾¹çš„è¯­å¥åŒ¹é…ã€‚å¦‚æœåŒ¹é…ä¸Šï¼Œåˆ™å¯ä»¥æŸ¥è¯¢å‡ºæ•°æ®ã€‚å¦‚æœåŒ¹é…ä¸ä¸Šï¼Œæ•°æ®å°±è¢«è¿‡æ»¤æ‰äº†ã€‚ è¿™ä¸ªéœ€æ±‚ä¸­ï¼Œorderè¡¨æœ‰10000æ¡æ•°æ®ï¼Œè€Œuserè¡¨æœ‰100æ¡æ•°æ®ã€‚orderè¡¨æ˜¯å¤§è¡¨ï¼Œuserè¡¨æ˜¯å°è¡¨ã€‚å¦‚æœorderè¡¨åœ¨å·¦è¾¹ï¼Œåˆ™ç”¨inå…³é”®å­—æ€§èƒ½æ›´å¥½ã€‚ æ€»ç»“ä¸€ä¸‹ï¼š in é€‚ç”¨äºå·¦è¾¹å¤§è¡¨ï¼Œå³è¾¹å°è¡¨ã€‚ exists é€‚ç”¨äºå·¦è¾¹å°è¡¨ï¼Œå³è¾¹å¤§è¡¨ã€‚ ä¸ç®¡æ˜¯ç”¨inï¼Œè¿˜æ˜¯existså…³é”®å­—ï¼Œå…¶æ ¸å¿ƒæ€æƒ³éƒ½æ˜¯ç”¨å°è¡¨é©±åŠ¨å¤§è¡¨ã€‚ ","date":"2022-11-26","objectID":"/sql%E4%BC%98%E5%8C%96%E5%B0%8F%E6%8A%80%E5%B7%A7/:3:0","tags":["SQL"],"title":"SQLä¼˜åŒ–å°æŠ€å·§","uri":"/sql%E4%BC%98%E5%8C%96%E5%B0%8F%E6%8A%80%E5%B7%A7/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"æ‰¹é‡æ“ä½œ åœ¨éœ€è¦æ‰¹é‡æ’å…¥æ•°æ®æ—¶ï¼Œæˆ‘ä»¬ä¸åº”è¯¥ä½¿ç”¨forå¾ªç¯è¿›è¡Œé€æ¡æ’å…¥æ•°æ®ï¼Œå› ä¸ºè¯¥æ“ä½œéœ€è¦å¤šæ¬¡è¯·æ±‚æ•°æ®åº“ï¼Œæ‰èƒ½å®Œæˆæ‰¹é‡æ•°æ®æ’å…¥ã€‚ ä½†ä¼—æ‰€å‘¨çŸ¥ï¼Œæˆ‘ä»¬åœ¨ä»£ç ä¸­ï¼Œæ¯æ¬¡è¿œç¨‹è¯·æ±‚æ•°æ®åº“ï¼Œæ˜¯ä¼šæ¶ˆè€—ä¸€å®šæ€§èƒ½çš„ã€‚è€Œå¦‚æœæˆ‘ä»¬çš„ä»£ç éœ€è¦è¯·æ±‚å¤šæ¬¡æ•°æ®åº“ï¼Œæ‰èƒ½å®Œæˆæœ¬æ¬¡ä¸šåŠ¡åŠŸèƒ½ï¼ŒåŠ¿å¿…ä¼šæ¶ˆè€—æ›´å¤šçš„æ€§èƒ½ã€‚ è¿™æ—¶å€™æˆ‘ä»¬å°±éœ€è¦åˆ›å»ºä¸€ä¸ªæ‰¹é‡æ’å…¥æ•°æ®çš„æ–¹æ³•ï¼š -- orderMapper.insertBatch(list): insert into order(id,code,user_id) values(123,'001',100),(124,'002',100),(125,'003',101); è¿™æ ·åªéœ€è¦è¿œç¨‹è¯·æ±‚ä¸€æ¬¡æ•°æ®åº“ï¼Œsqlæ€§èƒ½ä¼šå¾—åˆ°æå‡ï¼Œæ•°æ®é‡è¶Šå¤šï¼Œæå‡è¶Šå¤§ã€‚ ä½†éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸å»ºè®®ä¸€æ¬¡æ‰¹é‡æ“ä½œå¤ªå¤šçš„æ•°æ®ï¼Œå¦‚æœæ•°æ®å¤ªå¤šæ•°æ®åº“å“åº”ä¹Ÿä¼šå¾ˆæ…¢ã€‚æ‰¹é‡æ“ä½œéœ€è¦æŠŠæ¡ä¸€ä¸ªåº¦ï¼Œå»ºè®®æ¯æ‰¹æ•°æ®å°½é‡æ§åˆ¶åœ¨500ä»¥å†…ã€‚å¦‚æœæ•°æ®å¤šäº500ï¼Œåˆ™åˆ†å¤šæ‰¹æ¬¡å¤„ç†ã€‚ ","date":"2022-11-26","objectID":"/sql%E4%BC%98%E5%8C%96%E5%B0%8F%E6%8A%80%E5%B7%A7/:4:0","tags":["SQL"],"title":"SQLä¼˜åŒ–å°æŠ€å·§","uri":"/sql%E4%BC%98%E5%8C%96%E5%B0%8F%E6%8A%80%E5%B7%A7/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"å¤šç”¨limit æœ‰æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦æŸ¥è¯¢æŸäº›æ•°æ®ä¸­çš„ç¬¬ä¸€æ¡ï¼Œæ¯”å¦‚ï¼šæŸ¥è¯¢æŸä¸ªç”¨æˆ·ä¸‹çš„ç¬¬ä¸€ä¸ªè®¢å•ï¼Œæƒ³çœ‹çœ‹ä»–ç¬¬ä¸€æ¬¡çš„é¦–å•æ—¶é—´ã€‚ select id, create_date from order where user_id=123 order by create_date asc limit 1; ä½¿ç”¨ limit 1ï¼Œåªè¿”å›è¯¥ç”¨æˆ·ä¸‹å•æ—¶é—´æœ€å°çš„é‚£ä¸€æ¡æ•°æ®å³å¯ã€‚ æ­¤å¤–ï¼Œåœ¨åˆ é™¤æˆ–è€…ä¿®æ”¹æ•°æ®æ—¶ï¼Œä¸ºäº†é˜²æ­¢è¯¯æ“ä½œï¼Œå¯¼è‡´åˆ é™¤æˆ–ä¿®æ”¹äº†ä¸ç›¸å¹²çš„æ•°æ®ï¼Œä¹Ÿå¯ä»¥åœ¨sqlè¯­å¥æœ€ååŠ ä¸Šlimit update order set status=0,edit_time=now(3) where id\u003e=100 and id\u003c200 limit 100; -- è¿™æ ·å³ä½¿è¯¯æ“ä½œï¼Œæ¯”å¦‚æŠŠidæé”™äº†ï¼Œä¹Ÿä¸ä¼šå¯¹å¤ªå¤šçš„æ•°æ®é€ æˆå½±å“ ","date":"2022-11-26","objectID":"/sql%E4%BC%98%E5%8C%96%E5%B0%8F%E6%8A%80%E5%B7%A7/:5:0","tags":["SQL"],"title":"SQLä¼˜åŒ–å°æŠ€å·§","uri":"/sql%E4%BC%98%E5%8C%96%E5%B0%8F%E6%8A%80%E5%B7%A7/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"å¢é‡æŸ¥è¯¢ æœ‰æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦é€šè¿‡è¿œç¨‹æ¥å£æŸ¥è¯¢æ•°æ®ï¼Œç„¶ååŒæ­¥åˆ°å¦å¤–ä¸€ä¸ªæ•°æ®åº“ã€‚ å¦‚æœç›´æ¥è·å–æ‰€æœ‰çš„æ•°æ®ï¼Œç„¶ååŒæ­¥è¿‡å»ã€‚è¿™æ ·è™½è¯´éå¸¸æ–¹ä¾¿ï¼Œä½†æ˜¯å¸¦æ¥äº†ä¸€ä¸ªéå¸¸å¤§çš„é—®é¢˜ï¼Œå°±æ˜¯å¦‚æœæ•°æ®å¾ˆå¤šçš„è¯ï¼ŒæŸ¥è¯¢æ€§èƒ½ä¼šéå¸¸å·®ã€‚ select * from user where id\u003e#{lastId} and create_time \u003e= #{lastCreateTime} limit 100; æŒ‰idå’Œæ—¶é—´å‡åºï¼Œæ¯æ¬¡åªåŒæ­¥ä¸€æ‰¹æ•°æ®ï¼Œè¿™ä¸€æ‰¹æ•°æ®åªæœ‰100æ¡è®°å½•ã€‚æ¯æ¬¡åŒæ­¥å®Œæˆä¹‹åï¼Œä¿å­˜è¿™100æ¡æ•°æ®ä¸­æœ€å¤§çš„idå’Œæ—¶é—´ï¼Œç»™åŒæ­¥ä¸‹ä¸€æ‰¹æ•°æ®çš„æ—¶å€™ç”¨ã€‚ é€šè¿‡è¿™ç§å¢é‡æŸ¥è¯¢çš„æ–¹å¼ï¼Œèƒ½å¤Ÿæå‡å•æ¬¡æŸ¥è¯¢çš„æ•ˆç‡ã€‚ ","date":"2022-11-26","objectID":"/sql%E4%BC%98%E5%8C%96%E5%B0%8F%E6%8A%80%E5%B7%A7/:6:0","tags":["SQL"],"title":"SQLä¼˜åŒ–å°æŠ€å·§","uri":"/sql%E4%BC%98%E5%8C%96%E5%B0%8F%E6%8A%80%E5%B7%A7/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"é«˜æ•ˆçš„åˆ†é¡µ æœ‰æ—¶å€™ï¼Œåˆ—è¡¨é¡µåœ¨æŸ¥è¯¢æ•°æ®æ—¶ï¼Œä¸ºäº†é¿å…ä¸€æ¬¡æ€§è¿”å›è¿‡å¤šçš„æ•°æ®å½±å“æ¥å£æ€§èƒ½ï¼Œæˆ‘ä»¬ä¸€èˆ¬ä¼šå¯¹æŸ¥è¯¢æ¥å£åšåˆ†é¡µå¤„ç†ã€‚ åœ¨MySQLä¸­åˆ†é¡µä¸€èˆ¬ç”¨limitå…³é”®å­—ï¼Œå¦‚æœè¡¨ä¸­æ•°æ®é‡å°‘ï¼Œç”¨limitå…³é”®å­—åšåˆ†é¡µï¼Œæ²¡å•¥é—®é¢˜ã€‚ä½†å¦‚æœè¡¨ä¸­æ•°æ®é‡å¾ˆå¤šï¼Œç”¨å®ƒå°±ä¼šå‡ºç°æ€§èƒ½é—®é¢˜ã€‚ ä¾‹å¦‚ï¼š select id,name,age from user limit 1000000,20; -- MySQLä¼šæŸ¥åˆ°1000020æ¡æ•°æ®ï¼Œç„¶åä¸¢å¼ƒå‰é¢çš„1000000æ¡ï¼ŒåªæŸ¥åé¢çš„20æ¡æ•°æ®ï¼Œè¿™ä¸ªæ˜¯éå¸¸æµªè´¹èµ„æºçš„ è¿™æ—¶å€™ï¼Œæµ·é‡æ•°æ®è¯¥å¦‚ä½•åˆ†é¡µå‘¢ï¼Ÿ select id,name,age from user where id \u003e 1000000 limit 20; å…ˆæ‰¾åˆ°ä¸Šæ¬¡åˆ†é¡µæœ€å¤§çš„idï¼Œç„¶ååˆ©ç”¨idä¸Šçš„ç´¢å¼•æŸ¥è¯¢ã€‚ä¸è¿‡è¯¥æ–¹æ¡ˆï¼Œè¦æ±‚idæ˜¯è¿ç»­çš„ï¼Œå¹¶ä¸”æœ‰åºçš„ã€‚ è¿˜èƒ½ä½¿ç”¨betweenä¼˜åŒ–åˆ†é¡µï¼š select id,name,age from user where id between 1000000 and 1000020; -- éœ€è¦æ³¨æ„çš„æ˜¯betweenè¦åœ¨å”¯ä¸€ç´¢å¼•ä¸Šåˆ†é¡µï¼Œä¸ç„¶ä¼šå‡ºç°æ¯é¡µå¤§å°ä¸ä¸€è‡´çš„é—®é¢˜ ","date":"2022-11-26","objectID":"/sql%E4%BC%98%E5%8C%96%E5%B0%8F%E6%8A%80%E5%B7%A7/:7:0","tags":["SQL"],"title":"SQLä¼˜åŒ–å°æŠ€å·§","uri":"/sql%E4%BC%98%E5%8C%96%E5%B0%8F%E6%8A%80%E5%B7%A7/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"ç”¨è¿æ¥æŸ¥è¯¢ä»£æ›¿å­æŸ¥è¯¢ MySQLä¸­å¦‚æœéœ€è¦ä»ä¸¤å¼ ä»¥ä¸Šçš„è¡¨ä¸­æŸ¥è¯¢å‡ºæ•°æ®çš„è¯ï¼Œä¸€èˆ¬æœ‰ä¸¤ç§å®ç°æ–¹å¼ï¼šå­æŸ¥è¯¢ å’Œ è¿æ¥æŸ¥è¯¢ã€‚ å­æŸ¥è¯¢çš„ä¾‹å­å¦‚ä¸‹ï¼š select * from order where user_id in (select id from user where status=1) å­æŸ¥è¯¢è¯­å¥å¯ä»¥é€šè¿‡inå…³é”®å­—å®ç°ï¼Œä¸€ä¸ªæŸ¥è¯¢è¯­å¥çš„æ¡ä»¶è½åœ¨å¦ä¸€ä¸ªselectè¯­å¥çš„æŸ¥è¯¢ç»“æœä¸­ã€‚ç¨‹åºå…ˆè¿è¡Œåœ¨åµŒå¥—åœ¨æœ€å†…å±‚çš„è¯­å¥ï¼Œå†è¿è¡Œå¤–å±‚çš„è¯­å¥ã€‚ å­æŸ¥è¯¢è¯­å¥çš„ä¼˜ç‚¹æ˜¯ç®€å•ï¼Œç»“æ„åŒ–ï¼Œå¦‚æœæ¶‰åŠçš„è¡¨æ•°é‡ä¸å¤šçš„è¯ã€‚ ä½†ç¼ºç‚¹æ˜¯MySQLæ‰§è¡Œå­æŸ¥è¯¢æ—¶ï¼Œéœ€è¦åˆ›å»ºä¸´æ—¶è¡¨ï¼ŒæŸ¥è¯¢å®Œæ¯•åï¼Œéœ€è¦å†åˆ é™¤è¿™äº›ä¸´æ—¶è¡¨ï¼Œæœ‰ä¸€äº›é¢å¤–çš„æ€§èƒ½æ¶ˆè€—ã€‚ è¿™æ—¶å¯ä»¥æ”¹æˆè¿æ¥æŸ¥è¯¢ã€‚å…·ä½“ä¾‹å­å¦‚ä¸‹ï¼š select o.* from order o inner join user u on o.user_id = u.id where u.status=1 ","date":"2022-11-26","objectID":"/sql%E4%BC%98%E5%8C%96%E5%B0%8F%E6%8A%80%E5%B7%A7/:8:0","tags":["SQL"],"title":"SQLä¼˜åŒ–å°æŠ€å·§","uri":"/sql%E4%BC%98%E5%8C%96%E5%B0%8F%E6%8A%80%E5%B7%A7/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"joinçš„è¡¨ä¸å®œè¿‡å¤š æ ¹æ®é˜¿é‡Œå·´å·´å¼€å‘è€…æ‰‹å†Œçš„è§„å®šï¼Œjoinè¡¨çš„æ•°é‡ä¸åº”è¯¥è¶…è¿‡ 3 ä¸ªã€‚ å¦‚æœjoinå¤ªå¤šï¼ŒMySQLåœ¨é€‰æ‹©ç´¢å¼•çš„æ—¶å€™ä¼šéå¸¸å¤æ‚ï¼Œå¾ˆå®¹æ˜“é€‰é”™ç´¢å¼•ã€‚å¹¶ä¸”å¦‚æœæ²¡æœ‰å‘½ä¸­ä¸­ï¼Œnested loop join å°±æ˜¯åˆ†åˆ«ä»ä¸¤ä¸ªè¡¨è¯»ä¸€è¡Œæ•°æ®è¿›è¡Œä¸¤ä¸¤å¯¹æ¯”ï¼Œå¤æ‚åº¦æ˜¯ n^2ã€‚ å¦‚æœå®ç°ä¸šåŠ¡åœºæ™¯ä¸­éœ€è¦æŸ¥è¯¢å‡ºå¦å¤–å‡ å¼ è¡¨ä¸­çš„æ•°æ®ï¼Œå¯ä»¥åœ¨aã€bã€cè¡¨ä¸­å†—ä½™ä¸“é—¨çš„å­—æ®µï¼Œæ¯”å¦‚ï¼šåœ¨è¡¨aä¸­å†—ä½™d_nameå­—æ®µï¼Œä¿å­˜éœ€è¦æŸ¥è¯¢å‡ºçš„æ•°æ®ã€‚ ä¸è¿‡æœ‰äº›ERPç³»ç»Ÿï¼Œå¹¶å‘é‡ä¸å¤§ï¼Œä½†ä¸šåŠ¡æ¯”è¾ƒå¤æ‚ï¼Œéœ€è¦joinåå‡ å¼ è¡¨æ‰èƒ½æŸ¥è¯¢å‡ºæ•°æ®ã€‚ æ‰€ä»¥joinè¡¨çš„æ•°é‡è¦æ ¹æ®ç³»ç»Ÿçš„å®é™…æƒ…å†µå†³å®šï¼Œä¸èƒ½ä¸€æ¦‚è€Œè®ºï¼Œå°½é‡è¶Šå°‘è¶Šå¥½ã€‚ ","date":"2022-11-26","objectID":"/sql%E4%BC%98%E5%8C%96%E5%B0%8F%E6%8A%80%E5%B7%A7/:9:0","tags":["SQL"],"title":"SQLä¼˜åŒ–å°æŠ€å·§","uri":"/sql%E4%BC%98%E5%8C%96%E5%B0%8F%E6%8A%80%E5%B7%A7/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"joinæ—¶è¦æ³¨æ„ åœ¨æ¶‰åŠåˆ°å¤šå¼ è¡¨è”åˆæŸ¥è¯¢çš„æ—¶å€™ï¼Œä¸€èˆ¬ä¼šä½¿ç”¨joinå…³é”®å­—ã€‚ è€Œjoinä½¿ç”¨æœ€å¤šçš„æ˜¯left joinå’Œinner joinã€‚ left joinï¼šæ±‚ä¸¤ä¸ªè¡¨çš„äº¤é›†å¤–åŠ å·¦è¡¨å‰©ä¸‹çš„æ•°æ®ã€‚ inner joinï¼šæ±‚ä¸¤ä¸ªè¡¨äº¤é›†çš„æ•°æ®ã€‚ ä½¿ç”¨inner joinçš„ç¤ºä¾‹å¦‚ä¸‹ï¼š select o.id,o.code,u.name from order o inner join user u on o.user_id = u.id where u.status=1; -- å¦‚æœä¸¤å¼ è¡¨ä½¿ç”¨inner joinå…³è”ï¼ŒMySQLä¼šè‡ªåŠ¨é€‰æ‹©ä¸¤å¼ è¡¨ä¸­çš„å°è¡¨ï¼Œå»é©±åŠ¨å¤§è¡¨ï¼Œæ‰€ä»¥æ€§èƒ½ä¸Šä¸ä¼šæœ‰å¤ªå¤§çš„é—®é¢˜ ä½¿ç”¨left joinçš„ç¤ºä¾‹å¦‚ä¸‹ï¼š select o.id,o.code,u.name from order o left join user u on o.user_id = u.id where u.status=1; -- å¦‚æœä¸¤å¼ è¡¨ä½¿ç”¨left joinå…³è”ï¼ŒMySQLä¼šé»˜è®¤ç”¨left joinå…³é”®å­—å·¦è¾¹çš„è¡¨ï¼Œå»é©±åŠ¨å®ƒå³è¾¹çš„è¡¨ã€‚å¦‚æœå·¦è¾¹çš„è¡¨æ•°æ®å¾ˆå¤šæ—¶ï¼Œå°±ä¼šå‡ºç°æ€§èƒ½é—®é¢˜ è¦ç‰¹åˆ«æ³¨æ„çš„æ˜¯åœ¨ç”¨left joinå…³è”æŸ¥è¯¢æ—¶ï¼Œå·¦è¾¹è¦ç”¨å°è¡¨ï¼Œå³è¾¹å¯ä»¥ç”¨å¤§è¡¨ã€‚å¦‚æœèƒ½ç”¨inner joinçš„åœ°æ–¹ï¼Œå°½é‡å°‘ç”¨left join ","date":"2022-11-26","objectID":"/sql%E4%BC%98%E5%8C%96%E5%B0%8F%E6%8A%80%E5%B7%A7/:10:0","tags":["SQL"],"title":"SQLä¼˜åŒ–å°æŠ€å·§","uri":"/sql%E4%BC%98%E5%8C%96%E5%B0%8F%E6%8A%80%E5%B7%A7/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"æ§åˆ¶ç´¢å¼•çš„æ•°é‡ ä¼—æ‰€å‘¨çŸ¥ï¼Œç´¢å¼•èƒ½å¤Ÿæ˜¾è‘—çš„æå‡æŸ¥è¯¢SQLçš„æ€§èƒ½ï¼Œä½†ç´¢å¼•æ•°é‡å¹¶éè¶Šå¤šè¶Šå¥½ã€‚ å› ä¸ºè¡¨ä¸­æ–°å¢æ•°æ®æ—¶ï¼Œéœ€è¦åŒæ—¶ä¸ºå®ƒåˆ›å»ºç´¢å¼•ï¼Œè€Œç´¢å¼•æ˜¯éœ€è¦é¢å¤–çš„å­˜å‚¨ç©ºé—´çš„ï¼Œè€Œä¸”è¿˜ä¼šæœ‰ä¸€å®šçš„æ€§èƒ½æ¶ˆè€—ã€‚ é˜¿é‡Œå·´å·´çš„å¼€å‘è€…æ‰‹å†Œä¸­è§„å®šï¼Œå•è¡¨çš„ç´¢å¼•æ•°é‡åº”è¯¥å°½é‡æ§åˆ¶åœ¨ 5 ä¸ªä»¥å†…ï¼Œå¹¶ä¸”å•ä¸ªç´¢å¼•ä¸­çš„å­—æ®µæ•°ä¸è¶…è¿‡ 5 ä¸ªã€‚ MySQLä½¿ç”¨çš„B+æ ‘çš„ç»“æ„æ¥ä¿å­˜ç´¢å¼•çš„ï¼Œåœ¨insertã€updateå’Œdeleteæ“ä½œæ—¶ï¼Œéœ€è¦æ›´æ–°B+æ ‘ç´¢å¼•ã€‚å¦‚æœç´¢å¼•è¿‡å¤šï¼Œä¼šæ¶ˆè€—å¾ˆå¤šé¢å¤–çš„æ€§èƒ½ã€‚ é‚£ä¹ˆï¼Œé—®é¢˜æ¥äº†ï¼Œå¦‚æœè¡¨ä¸­çš„ç´¢å¼•å¤ªå¤šï¼Œè¶…è¿‡äº†5ä¸ªè¯¥æ€ä¹ˆåŠï¼Ÿ è¿™ä¸ªé—®é¢˜è¦è¾©è¯çš„çœ‹ï¼Œå¦‚æœä½ çš„ç³»ç»Ÿå¹¶å‘é‡ä¸é«˜ï¼Œè¡¨ä¸­çš„æ•°æ®é‡ä¹Ÿä¸å¤šï¼Œå…¶å®è¶…è¿‡5ä¸ªä¹Ÿå¯ä»¥ï¼Œåªè¦ä¸è¦è¶…è¿‡å¤ªå¤šå°±è¡Œã€‚ ä½†å¯¹äºä¸€äº›é«˜å¹¶å‘çš„ç³»ç»Ÿï¼Œè¯·åŠ¡å¿…éµå®ˆå•è¡¨ç´¢å¼•æ•°é‡ä¸è¦è¶…è¿‡5çš„é™åˆ¶ã€‚ é‚£ä¹ˆï¼Œé«˜å¹¶å‘ç³»ç»Ÿå¦‚ä½•ä¼˜åŒ–ç´¢å¼•æ•°é‡ï¼Ÿ èƒ½å¤Ÿå»ºè”åˆç´¢å¼•ï¼Œå°±åˆ«å»ºå•ä¸ªç´¢å¼•ï¼Œå¯ä»¥åˆ é™¤æ— ç”¨çš„å•ä¸ªç´¢å¼•ã€‚ å°†éƒ¨åˆ†æŸ¥è¯¢åŠŸèƒ½è¿ç§»åˆ°å…¶ä»–ç±»å‹çš„æ•°æ®åº“ä¸­ï¼Œæ¯”å¦‚ï¼šElastic Seachã€HBaseç­‰ï¼Œåœ¨ä¸šåŠ¡è¡¨ä¸­åªéœ€è¦å»ºå‡ ä¸ªå…³é”®ç´¢å¼•å³å¯ã€‚ ","date":"2022-11-26","objectID":"/sql%E4%BC%98%E5%8C%96%E5%B0%8F%E6%8A%80%E5%B7%A7/:11:0","tags":["SQL"],"title":"SQLä¼˜åŒ–å°æŠ€å·§","uri":"/sql%E4%BC%98%E5%8C%96%E5%B0%8F%E6%8A%80%E5%B7%A7/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"é€‰æ‹©åˆç†çš„å­—æ®µç±»å‹ char ï¼šè¡¨ç¤ºå›ºå®šå­—ç¬¦ä¸²ç±»å‹ï¼Œè¯¥ç±»å‹çš„å­—æ®µå­˜å‚¨ç©ºé—´çš„å›ºå®šçš„ï¼Œä¼šæµªè´¹å­˜å‚¨ç©ºé—´ã€‚ varchar ï¼šè¡¨ç¤ºå˜é•¿å­—ç¬¦ä¸²ç±»å‹ï¼Œè¯¥ç±»å‹çš„å­—æ®µå­˜å‚¨ç©ºé—´ä¼šæ ¹æ®å®é™…æ•°æ®çš„é•¿åº¦è°ƒæ•´ï¼Œä¸ä¼šæµªè´¹å­˜å‚¨ç©ºé—´ã€‚ å¦‚æœæ˜¯é•¿åº¦å›ºå®šçš„å­—æ®µï¼Œæ¯”å¦‚ç”¨æˆ·æ‰‹æœºå·ï¼Œä¸€èˆ¬éƒ½æ˜¯11ä½çš„ï¼Œå¯ä»¥å®šä¹‰æˆcharç±»å‹ï¼Œé•¿åº¦æ˜¯11å­—èŠ‚ã€‚ ä½†å¦‚æœæ˜¯ä¼ä¸šåç§°å­—æ®µï¼Œå‡å¦‚å®šä¹‰æˆcharç±»å‹ï¼Œå°±æœ‰é—®é¢˜äº†ã€‚ å¦‚æœé•¿åº¦å®šä¹‰å¾—å¤ªé•¿ï¼Œæ¯”å¦‚å®šä¹‰æˆäº†200å­—èŠ‚ï¼Œè€Œå®é™…ä¼ä¸šé•¿åº¦åªæœ‰50å­—èŠ‚ï¼Œåˆ™ä¼šæµªè´¹150å­—èŠ‚çš„å­˜å‚¨ç©ºé—´ã€‚ å¦‚æœé•¿åº¦å®šä¹‰å¾—å¤ªçŸ­ï¼Œæ¯”å¦‚å®šä¹‰æˆäº†50å­—èŠ‚ï¼Œä½†å®é™…ä¼ä¸šåç§°æœ‰100å­—èŠ‚ï¼Œå°±ä¼šå­˜å‚¨ä¸ä¸‹ï¼Œè€ŒæŠ›å‡ºå¼‚å¸¸ã€‚ æ‰€ä»¥å»ºè®®å°†ä¼ä¸šåç§°æ”¹æˆvarcharç±»å‹ï¼Œå˜é•¿å­—æ®µå­˜å‚¨ç©ºé—´å°ï¼Œå¯ä»¥èŠ‚çœå­˜å‚¨ç©ºé—´ï¼Œè€Œä¸”å¯¹äºæŸ¥è¯¢æ¥è¯´ï¼Œåœ¨ä¸€ä¸ªç›¸å¯¹è¾ƒå°çš„å­—æ®µå†…æœç´¢æ•ˆç‡æ˜¾ç„¶è¦é«˜äº›ã€‚ æˆ‘ä»¬åœ¨é€‰æ‹©å­—æ®µç±»å‹æ—¶ï¼Œåº”è¯¥éµå¾ªè¿™æ ·çš„åŸåˆ™ï¼š èƒ½ç”¨æ•°å­—ç±»å‹ï¼Œå°±ä¸ç”¨å­—ç¬¦ä¸²ï¼Œå› ä¸ºå­—ç¬¦çš„å¤„ç†å¾€å¾€æ¯”æ•°å­—è¦æ…¢ã€‚ å°½å¯èƒ½ä½¿ç”¨å°çš„ç±»å‹ï¼Œæ¯”å¦‚ï¼šç”¨bitå­˜å¸ƒå°”å€¼ï¼Œç”¨tinyintå­˜æšä¸¾å€¼ç­‰ã€‚ é•¿åº¦å›ºå®šçš„å­—ç¬¦ä¸²å­—æ®µï¼Œç”¨charç±»å‹ã€‚ é•¿åº¦å¯å˜çš„å­—ç¬¦ä¸²å­—æ®µï¼Œç”¨varcharç±»å‹ã€‚ é‡‘é¢å­—æ®µç”¨decimalï¼Œé¿å…ç²¾åº¦ä¸¢å¤±é—®é¢˜ã€‚ ","date":"2022-11-26","objectID":"/sql%E4%BC%98%E5%8C%96%E5%B0%8F%E6%8A%80%E5%B7%A7/:12:0","tags":["SQL"],"title":"SQLä¼˜åŒ–å°æŠ€å·§","uri":"/sql%E4%BC%98%E5%8C%96%E5%B0%8F%E6%8A%80%E5%B7%A7/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"æå‡group byçš„æ•ˆç‡ æˆ‘ä»¬æœ‰å¾ˆå¤šä¸šåŠ¡åœºæ™¯éœ€è¦ä½¿ç”¨group byå…³é”®å­—ï¼Œå®ƒä¸»è¦çš„åŠŸèƒ½æ˜¯å»é‡å’Œåˆ†ç»„ã€‚ é€šå¸¸å®ƒä¼šè·Ÿhavingä¸€èµ·é…åˆä½¿ç”¨ï¼Œè¡¨ç¤ºåˆ†ç»„åå†æ ¹æ®ä¸€å®šçš„æ¡ä»¶è¿‡æ»¤æ•°æ®ï¼Œä½¿ç”¨å®ƒå°±ä¼šæœ‰ä¸€äº›æ€§èƒ½ä¸Šçš„éšæ‚£ã€‚ select user_id,user_name from order group by user_id having user_id \u003c= 200; -- è¿™ç§å†™æ³•æ€§èƒ½ä¸å¥½ï¼Œå®ƒå…ˆæŠŠæ‰€æœ‰çš„è®¢å•æ ¹æ®ç”¨æˆ·idåˆ†ç»„ä¹‹åï¼Œå†å»è¿‡æ»¤ç”¨æˆ·idå¤§äºç­‰äº200çš„ç”¨æˆ· åˆ†ç»„æ˜¯ä¸€ä¸ªç›¸å¯¹è€—æ—¶çš„æ“ä½œï¼Œä¸ºä»€ä¹ˆæˆ‘ä»¬ä¸å…ˆç¼©å°æ•°æ®çš„èŒƒå›´ä¹‹åï¼Œå†åˆ†ç»„å‘¢ï¼Ÿ select user_id,user_name from order where user_id \u003c= 200 group by user_id ä½¿ç”¨whereæ¡ä»¶åœ¨åˆ†ç»„å‰ï¼Œå°±æŠŠå¤šä½™çš„æ•°æ®è¿‡æ»¤æ‰äº†ï¼Œè¿™æ ·åˆ†ç»„æ—¶æ•ˆç‡å°±ä¼šæ›´é«˜ä¸€äº›ã€‚ å…¶å®è¿™æ˜¯ä¸€ç§æ€è·¯ï¼Œä¸ä»…é™äºgroup byçš„ä¼˜åŒ–ã€‚æˆ‘ä»¬çš„sqlè¯­å¥åœ¨åšä¸€äº›è€—æ—¶çš„æ“ä½œä¹‹å‰ï¼Œåº”å°½å¯èƒ½ç¼©å°æ•°æ®èŒƒå›´ï¼Œè¿™æ ·èƒ½æå‡sqlæ•´ä½“çš„æ€§èƒ½ ","date":"2022-11-26","objectID":"/sql%E4%BC%98%E5%8C%96%E5%B0%8F%E6%8A%80%E5%B7%A7/:13:0","tags":["SQL"],"title":"SQLä¼˜åŒ–å°æŠ€å·§","uri":"/sql%E4%BC%98%E5%8C%96%E5%B0%8F%E6%8A%80%E5%B7%A7/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"ç´¢å¼•ä¼˜åŒ– å¾ˆå¤šæ—¶å€™SQLè¯­å¥ï¼Œèµ°äº†ç´¢å¼•ï¼Œå’Œæ²¡æœ‰èµ°ç´¢å¼•ï¼Œæ‰§è¡Œæ•ˆç‡å·®åˆ«å¾ˆå¤§ã€‚æ‰€ä»¥ç´¢å¼•ä¼˜åŒ–è¢«ä½œä¸ºSQLä¼˜åŒ–çš„é¦–é€‰ã€‚ ç´¢å¼•ä¼˜åŒ–çš„ç¬¬ä¸€æ­¥æ˜¯ï¼šæ£€æŸ¥sqlè¯­å¥æœ‰æ²¡æœ‰èµ°ç´¢å¼•ã€‚ å¯ä»¥ä½¿ç”¨explainå‘½ä»¤ï¼ŒæŸ¥çœ‹mysqlçš„æ‰§è¡Œè®¡åˆ’ã€‚ ä¾‹å¦‚ï¼š explain select * from `order` where code='002'; ç»“æœï¼š é€šè¿‡è¿™å‡ åˆ—å¯ä»¥åˆ¤æ–­ç´¢å¼•ä½¿ç”¨æƒ…å†µï¼Œæ‰§è¡Œè®¡åˆ’åŒ…å«åˆ—çš„å«ä¹‰å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š è¯´å®è¯ï¼Œsqlè¯­å¥æ²¡æœ‰èµ°ç´¢å¼•ï¼Œæ’é™¤æ²¡æœ‰å»ºç´¢å¼•ä¹‹å¤–ï¼Œæœ€å¤§çš„å¯èƒ½æ€§æ˜¯ç´¢å¼•å¤±æ•ˆäº†ã€‚ ä¸‹é¢è¯´è¯´ç´¢å¼•å¤±æ•ˆçš„å¸¸è§åŸå› ï¼š å¦‚æœä¸æ˜¯ä¸Šé¢çš„è¿™äº›åŸå› ï¼Œåˆ™éœ€è¦å†è¿›ä¸€æ­¥æ’æŸ¥ä¸€ä¸‹å…¶ä»–åŸå› ã€‚ æ­¤å¤–ï¼Œä½ æœ‰æ²¡æœ‰é‡åˆ°è¿‡è¿™æ ·ä¸€ç§æƒ…å†µï¼šæ˜æ˜æ˜¯åŒä¸€æ¡sqlï¼Œåªæœ‰å…¥å‚ä¸åŒè€Œå·²ã€‚æœ‰çš„æ—¶å€™èµ°çš„ç´¢å¼•aï¼Œæœ‰çš„æ—¶å€™å´èµ°çš„ç´¢å¼•bï¼Ÿ æ²¡é”™ï¼Œæœ‰æ—¶å€™MySQLä¼šé€‰é”™ç´¢å¼•ã€‚ å¿…è¦æ—¶å¯ä»¥ä½¿ç”¨force indexæ¥å¼ºåˆ¶æŸ¥è¯¢sqlèµ°æŸä¸ªç´¢å¼•ã€‚ ","date":"2022-11-26","objectID":"/sql%E4%BC%98%E5%8C%96%E5%B0%8F%E6%8A%80%E5%B7%A7/:14:0","tags":["SQL"],"title":"SQLä¼˜åŒ–å°æŠ€å·§","uri":"/sql%E4%BC%98%E5%8C%96%E5%B0%8F%E6%8A%80%E5%B7%A7/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"ç®€ä»‹ åŸºäº SpringBoot å¹³å°å¼€å‘çš„é¡¹ç›®æ•°ä¸èƒœæ•°ï¼Œä¸å¸¸è§„çš„åŸºäºSpringå¼€å‘çš„é¡¹ç›®æœ€å¤§çš„ä¸åŒä¹‹å¤„ï¼ŒSpringBoot é‡Œé¢æä¾›äº†å¤§é‡çš„æ³¨è§£ç”¨äºå¿«é€Ÿå¼€å‘ï¼Œè€Œä¸”éå¸¸ç®€å•ï¼ŒåŸºæœ¬å¯ä»¥åšåˆ°å¼€ç®±å³ç”¨ï¼ ","date":"2022-11-26","objectID":"/springboot%E5%B8%B8%E7%94%A8%E6%B3%A8%E8%A7%A3%E6%80%BB%E7%BB%93/:1:0","tags":["SpringBoot"],"title":"SpringBootå¸¸ç”¨æ³¨è§£æ€»ç»“","uri":"/springboot%E5%B8%B8%E7%94%A8%E6%B3%A8%E8%A7%A3%E6%80%BB%E7%BB%93/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"æ³¨è§£æ€»ç»“ ","date":"2022-11-26","objectID":"/springboot%E5%B8%B8%E7%94%A8%E6%B3%A8%E8%A7%A3%E6%80%BB%E7%BB%93/:2:0","tags":["SpringBoot"],"title":"SpringBootå¸¸ç”¨æ³¨è§£æ€»ç»“","uri":"/springboot%E5%B8%B8%E7%94%A8%E6%B3%A8%E8%A7%A3%E6%80%BB%E7%BB%93/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"SpringMVC ç›¸å…³æ³¨è§£ @Controller é€šå¸¸ç”¨äºä¿®é¥°controllerå±‚çš„ç»„ä»¶ï¼Œç”±æ§åˆ¶å™¨è´Ÿè´£å°†ç”¨æˆ·å‘æ¥çš„URLè¯·æ±‚è½¬å‘åˆ°å¯¹åº”çš„æœåŠ¡æ¥å£ï¼Œé€šå¸¸è¿˜éœ€è¦é…åˆæ³¨è§£@RequestMappingä½¿ç”¨ã€‚ @RequestMapping æä¾›è·¯ç”±ä¿¡æ¯ï¼Œè´Ÿè´£URLåˆ°Controllerä¸­å…·ä½“å‡½æ•°çš„æ˜ å°„ï¼Œå½“ç”¨äºæ–¹æ³•ä¸Šæ—¶ï¼Œå¯ä»¥æŒ‡å®šè¯·æ±‚åè®®ï¼Œæ¯”å¦‚GETã€POSTã€PUTã€DELETEç­‰ç­‰ã€‚ @RequestBody è¡¨ç¤ºè¯·æ±‚ä½“çš„Content-Typeå¿…é¡»ä¸ºapplication/jsonæ ¼å¼çš„æ•°æ®ï¼Œæ¥æ”¶åˆ°æ•°æ®ä¹‹åä¼šè‡ªåŠ¨å°†æ•°æ®ç»‘å®šåˆ°Javaå¯¹è±¡ä¸Šå»ã€‚ @ResponseBody è¡¨ç¤ºè¯¥æ–¹æ³•çš„è¿”å›ç»“æœç›´æ¥å†™å…¥HTTP response bodyä¸­ï¼Œè¿”å›æ•°æ®çš„æ ¼å¼ä¸ºapplication/jsonã€‚ æ¯”å¦‚ï¼Œè¯·æ±‚å‚æ•°ä¸ºjsonæ ¼å¼ï¼Œè¿”å›å‚æ•°ä¹Ÿä¸ºjsonæ ¼å¼ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š @Controller @RequestMapping(\"api\") public class LoginController { /** * ç™»å½•è¯·æ±‚ï¼Œpostè¯·æ±‚åè®®ï¼Œè¯·æ±‚å‚æ•°æ•°æ®æ ¼å¼ä¸ºjson * @param request */ @RequestMapping(value = \"login\", method = RequestMethod.POST) @ResponseBody public ResponseEntity login(@RequestBody UserLoginDTO request){ //...ä¸šåŠ¡å¤„ç† return new ResponseEntity(HttpStatus.OK); } } @RestController å’Œ@Controllerä¸€æ ·ï¼Œç”¨äºæ ‡æ³¨æ§åˆ¶å±‚ç»„ä»¶ï¼Œä¸åŒçš„åœ°æ–¹åœ¨äºï¼šå®ƒæ˜¯@ResponseBodyå’Œ@Controllerçš„åˆé›†ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨å½“@RestControllerç”¨åœ¨ç±»ä¸Šæ—¶ï¼Œè¡¨ç¤ºå½“å‰ç±»é‡Œé¢æ‰€æœ‰å¯¹å¤–æš´éœ²çš„æ¥å£æ–¹æ³•ï¼Œè¿”å›æ•°æ®çš„æ ¼å¼éƒ½ä¸ºapplication/jsonã€‚ @RequestParam ç”¨äºæ¥æ”¶è¯·æ±‚å‚æ•°ä¸ºè¡¨å•ç±»å‹çš„æ•°æ®ï¼Œé€šå¸¸ç”¨åœ¨æ–¹æ³•çš„å‚æ•°å‰é¢ï¼Œç¤ºèŒƒä»£ç å¦‚ä¸‹ï¼š @RequestMapping(value = \"login\", method = RequestMethod.POST) @ResponseBody public ResponseEntity login(@RequestParam(value = \"userName\",required = true) String userName, @RequestParam(value = \"userPwd\",required = true) String userPwd){ //...ä¸šåŠ¡å¤„ç† return new ResponseEntity(HttpStatus.OK); } @PathVariable ç”¨äºè·å–è¯·æ±‚è·¯å¾„ä¸­çš„å‚æ•°ï¼Œé€šå¸¸ç”¨äºrestfulé£æ ¼çš„apiä¸Šï¼Œç¤ºèŒƒä»£ç å¦‚ä¸‹ï¼š @RequestMapping(value = \"queryProduct/{id}\", method = RequestMethod.POST) @ResponseBody public ResponseEntity queryProduct(@PathVariable(\"id\") String id){ //...ä¸šåŠ¡å¤„ç† return new ResponseEntity(HttpStatus.OK); } @GetMapping é™¤äº†@RequestMappingå¯ä»¥æŒ‡å®šè¯·æ±‚æ–¹å¼ä¹‹å¤–ï¼Œè¿˜æœ‰ä¸€äº›å…¶ä»–çš„æ³¨è§£ï¼Œå¯ä»¥ç”¨äºæ ‡æ³¨æ¥å£è·¯å¾„è¯·æ±‚ï¼Œæ¯”å¦‚GetMappingç”¨åœ¨æ–¹æ³•ä¸Šæ—¶ï¼Œè¡¨ç¤ºåªæ”¯æŒgetè¯·æ±‚æ–¹æ³•ï¼Œç­‰ä»·äº@RequestMapping(value=\"/get\",method=RequestMethod.GET)ã€‚ @PostMapping ç”¨åœ¨æ–¹æ³•ä¸Šï¼Œè¡¨ç¤ºåªæ”¯æŒpostæ–¹å¼çš„è¯·æ±‚ã€‚ @PutMapping ç”¨åœ¨æ–¹æ³•ä¸Šï¼Œè¡¨ç¤ºåªæ”¯æŒputæ–¹å¼çš„è¯·æ±‚ï¼Œé€šå¸¸è¡¨ç¤ºæ›´æ–°æŸäº›èµ„æºçš„æ„æ€ã€‚ @DeleteMapping ç”¨åœ¨æ–¹æ³•ä¸Šï¼Œè¡¨ç¤ºåªæ”¯æŒdeleteæ–¹å¼çš„è¯·æ±‚ï¼Œé€šå¸¸è¡¨ç¤ºåˆ é™¤æŸäº›èµ„æºçš„æ„æ€ã€‚ ","date":"2022-11-26","objectID":"/springboot%E5%B8%B8%E7%94%A8%E6%B3%A8%E8%A7%A3%E6%80%BB%E7%BB%93/:2:1","tags":["SpringBoot"],"title":"SpringBootå¸¸ç”¨æ³¨è§£æ€»ç»“","uri":"/springboot%E5%B8%B8%E7%94%A8%E6%B3%A8%E8%A7%A3%E6%80%BB%E7%BB%93/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"bean ç›¸å…³æ³¨è§£ @Service é€šå¸¸ç”¨äºä¿®é¥°serviceå±‚çš„ç»„ä»¶ï¼Œå£°æ˜ä¸€ä¸ªå¯¹è±¡ï¼Œä¼šå°†ç±»å¯¹è±¡å®ä¾‹åŒ–å¹¶æ³¨å…¥åˆ°beanå®¹å™¨é‡Œé¢ã€‚ @Component æ³›æŒ‡ç»„ä»¶ï¼Œå½“ç»„ä»¶ä¸å¥½å½’ç±»çš„æ—¶å€™ï¼Œå¯ä»¥ä½¿ç”¨è¿™ä¸ªæ³¨è§£è¿›è¡Œæ ‡æ³¨ï¼ŒåŠŸèƒ½ç±»ä¼¼äºäº@Serviceã€‚ @Repository é€šå¸¸ç”¨äºä¿®é¥°daoå±‚çš„ç»„ä»¶ï¼Œ@Repositoryæ³¨è§£å±äºSpringé‡Œé¢æœ€å…ˆå¼•å…¥çš„ä¸€æ‰¹æ³¨è§£ï¼Œå®ƒç”¨äºå°†æ•°æ®è®¿é—®å±‚ (DAOå±‚) çš„ç±»æ ‡è¯†ä¸ºSpring Beanï¼Œå…·ä½“åªéœ€å°†è¯¥æ³¨è§£æ ‡æ³¨åœ¨DAOç±»ä¸Šå³å¯ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š @Repository public interface RoleRepository extends JpaRepository\u003cRole,Long\u003e { //å…·ä½“çš„æ–¹æ³• } ä¸ºä»€ä¹ˆç°åœ¨ä½¿ç”¨çš„å¾ˆå°‘å‘¢ï¼Ÿ ä¸»è¦æ˜¯å› ä¸ºå½“æˆ‘ä»¬é…ç½®æœåŠ¡å¯åŠ¨è‡ªåŠ¨æ‰«ædaoå±‚åŒ…æ—¶ï¼ŒSpringä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªå®ç°ç±»ï¼Œç„¶åæ³¨å…¥åˆ°beanå®¹å™¨é‡Œé¢ã€‚å½“æŸäº›ç±»æ— æ³•è¢«æ‰«æåˆ°æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥æ˜¾å¼çš„åœ¨æ•°æ®æŒä¹…ç±»ä¸Šæ ‡æ³¨@Repositoryæ³¨è§£ï¼ŒSpringä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬å£°æ˜å¯¹è±¡ã€‚ @Bean ç›¸å½“äº xml ä¸­é…ç½® Beanï¼Œæ„æ€æ˜¯äº§ç”Ÿä¸€ä¸ª bean å¯¹è±¡ï¼Œå¹¶äº¤ç»™springç®¡ç†ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š @Configuration public class AppConfig { //ç›¸å½“äº xml ä¸­é…ç½® Bean @Bean public Uploader initFileUploader() { return new FileUploader(); } } @Autowired è‡ªåŠ¨å¯¼å…¥ä¾èµ–çš„beanå¯¹è±¡ï¼Œé»˜è®¤æ—¶æŒ‰ç…§byTypeæ–¹å¼å¯¼å…¥å¯¹è±¡ï¼Œè€Œä¸”å¯¼å…¥çš„å¯¹è±¡å¿…é¡»å­˜åœ¨ï¼Œå½“éœ€è¦å¯¼å…¥çš„å¯¹è±¡å¹¶ä¸å­˜åœ¨æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡é…ç½®required = falseæ¥å…³é—­å¼ºåˆ¶éªŒè¯ã€‚ @Resource ä¹Ÿæ˜¯è‡ªåŠ¨å¯¼å…¥ä¾èµ–çš„beanå¯¹è±¡ï¼Œç”±JDKæä¾›ï¼Œé»˜è®¤æ˜¯æŒ‰ç…§byNameæ–¹å¼å¯¼å…¥ä¾èµ–çš„å¯¹è±¡ï¼›è€Œ@Autowiredé»˜è®¤æ—¶æŒ‰ç…§byTypeæ–¹å¼å¯¼å…¥å¯¹è±¡ï¼Œå½“ç„¶@Resourceè¿˜å¯ä»¥é…ç½®æˆé€šè¿‡byTypeæ–¹å¼å¯¼å…¥å¯¹è±¡ã€‚ /** * é€šè¿‡åç§°å¯¼å…¥ï¼ˆé»˜è®¤é€šè¿‡åç§°å¯¼å…¥ä¾èµ–å¯¹è±¡ï¼‰ */ @Resource(name = \"deptService\") private DeptService deptService; /** * é€šè¿‡ç±»å‹å¯¼å…¥ */ @Resource(type = RoleRepository.class) private DeptService deptService; @Qualifier å½“æœ‰å¤šä¸ªåŒä¸€ç±»å‹çš„beanæ—¶ï¼Œä½¿ç”¨@Autowiredå¯¼å…¥ä¼šæŠ¥é”™ï¼Œæç¤ºå½“å‰å¯¹è±¡å¹¶ä¸æ˜¯å”¯ä¸€ï¼ŒSpringä¸çŸ¥é“å¯¼å…¥å“ªä¸ªä¾èµ–ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨@Qualifierè¿›è¡Œæ›´ç»†ç²’åº¦çš„æ§åˆ¶ï¼Œé€‰æ‹©å…¶ä¸­ä¸€ä¸ªå€™é€‰è€…ï¼Œä¸€èˆ¬äº@Autowiredæ­é…ä½¿ç”¨ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š @Autowired @Qualifier(\"deptService\") private DeptService deptService; @Scope ç”¨äºç”Ÿå‘½ä¸€ä¸ªspring beançš„ä½œç”¨åŸŸï¼Œä½œç”¨çš„èŒƒå›´ä¸€å…±æœ‰ä»¥ä¸‹å‡ ç§ï¼š singletonï¼šå”¯ä¸€ bean å®ä¾‹ï¼ŒSpring ä¸­çš„ bean é»˜è®¤éƒ½æ˜¯å•ä¾‹çš„ã€‚ prototypeï¼šæ¯æ¬¡è¯·æ±‚éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ bean å®ä¾‹ï¼Œå¯¹è±¡å¤šä¾‹ã€‚ requestï¼šæ¯ä¸€æ¬¡ HTTP è¯·æ±‚éƒ½ä¼šäº§ç”Ÿä¸€ä¸ªæ–°çš„ beanï¼Œè¯¥ bean ä»…åœ¨å½“å‰ HTTP request å†…æœ‰æ•ˆã€‚ sessionï¼šæ¯ä¸€æ¬¡ HTTP è¯·æ±‚éƒ½ä¼šäº§ç”Ÿä¸€ä¸ªæ–°çš„ beanï¼Œè¯¥ bean ä»…åœ¨å½“å‰ HTTP session å†…æœ‰æ•ˆã€‚ /** * å•ä¾‹å¯¹è±¡ */ @RestController @Scope(\"singleton\") public class HelloController { } ","date":"2022-11-26","objectID":"/springboot%E5%B8%B8%E7%94%A8%E6%B3%A8%E8%A7%A3%E6%80%BB%E7%BB%93/:2:2","tags":["SpringBoot"],"title":"SpringBootå¸¸ç”¨æ³¨è§£æ€»ç»“","uri":"/springboot%E5%B8%B8%E7%94%A8%E6%B3%A8%E8%A7%A3%E6%80%BB%E7%BB%93/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"é…ç½®ç›¸å…³æ³¨è§£ @Configuration è¡¨ç¤ºå£°æ˜ä¸€ä¸ª Java å½¢å¼çš„é…ç½®ç±»ï¼ŒSpring Boot æå€¡åŸºäº Java çš„é…ç½®ï¼Œç›¸å½“äºä½ ä¹‹å‰åœ¨ xml ä¸­é…ç½® beanï¼Œæ¯”å¦‚å£°æ˜ä¸€ä¸ªé…ç½®ç±»AppConfigï¼Œç„¶ååˆå§‹åŒ–ä¸€ä¸ªUploaderå¯¹è±¡ã€‚ @Configuration public class AppConfig { @Bean public Uploader initOSSUploader() { return new OSSUploader(); } } @EnableAutoConfiguration @EnableAutoConfigurationå¯ä»¥å¸®åŠ©Spring Bootåº”ç”¨å°†æ‰€æœ‰ç¬¦åˆæ¡ä»¶çš„@Configurationé…ç½®ç±»ï¼Œå…¨éƒ¨éƒ½åŠ è½½åˆ°å½“å‰Spring Booté‡Œï¼Œå¹¶åˆ›å»ºå¯¹åº”é…ç½®ç±»çš„Beanï¼Œå¹¶æŠŠè¯¥Beanå®ä½“äº¤ç»™IoCå®¹å™¨è¿›è¡Œç®¡ç†ã€‚ æŸäº›åœºæ™¯ä¸‹ï¼Œå¦‚æœæˆ‘ä»¬æƒ³è¦é¿å¼€æŸäº›é…ç½®ç±»çš„æ‰«æï¼ˆåŒ…æ‹¬é¿å¼€ä¸€äº›ç¬¬ä¸‰æ–¹jaråŒ…ä¸‹é¢çš„é…ç½®ï¼Œå¯ä»¥è¿™æ ·å¤„ç†ã€‚ @Configuration @EnableAutoConfiguration(exclude = { org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration.class}) public class AppConfig { //å…·æœ‰ä¸šåŠ¡æ–¹æ³• } @ComponentScan æ ‡æ³¨å“ªäº›è·¯å¾„ä¸‹çš„ç±»éœ€è¦è¢«Springæ‰«æï¼Œç”¨äºè‡ªåŠ¨å‘ç°å’Œè£…é…ä¸€äº›Beanå¯¹è±¡ï¼Œé»˜è®¤é…ç½®æ˜¯æ‰«æå½“å‰æ–‡ä»¶å¤¹ä¸‹å’Œå­ç›®å½•ä¸‹çš„æ‰€æœ‰ç±»ï¼Œå¦‚æœæˆ‘ä»¬æƒ³æŒ‡å®šæ‰«ææŸäº›åŒ…è·¯å¾„ï¼Œå¯ä»¥è¿™æ ·å¤„ç†ã€‚ @ComponentScan(basePackages = {\"com.xxx.a\", \"com.xxx.b\", \"com.xxx.c\"}) @SpringBootApplication ç­‰ä»·äºä½¿ç”¨@Configurationã€@EnableAutoConfigurationã€@ComponentScanè¿™ä¸‰ä¸ªæ³¨è§£ï¼Œé€šå¸¸ç”¨äºå…¨å±€å¯åŠ¨ç±»ä¸Šï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š @SpringBootApplication public class Application { public static void main(String[] args) { SpringApplication.run(Application.class, args); } } æŠŠ@SpringBootApplicationæ¢æˆ@Configurationã€@EnableAutoConfigurationã€@ComponentScanè¿™ä¸‰ä¸ªæ³¨è§£ï¼Œä¸€æ ·å¯ä»¥å¯åŠ¨æˆåŠŸï¼Œ@SpringBootApplicationåªæ˜¯å°†è¿™ä¸‰ä¸ªæ³¨è§£è¿›è¡Œäº†ç®€åŒ–ï¼ @EnableTransactionManagement è¡¨ç¤ºå¼€å¯äº‹åŠ¡æ”¯æŒï¼Œç­‰åŒäº xml é…ç½®æ–¹å¼çš„\u003ctx:annotation-driven /\u003e @Conditional ä» Spring4 å¼€å§‹ï¼Œå¯ä»¥é€šè¿‡@Conditionalæ³¨è§£å®ç°æŒ‰æ¡ä»¶è£…è½½beanå¯¹è±¡ï¼Œç›®å‰ Spring Boot æºç ä¸­å¤§é‡æ‰©å±•äº†@Conditionæ³¨è§£ï¼Œç”¨äºå®ç°æ™ºèƒ½çš„è‡ªåŠ¨åŒ–é…ç½®ï¼Œæ»¡è¶³å„ç§ä½¿ç”¨åœºæ™¯ã€‚ä¸‹é¢æˆ‘ç»™å¤§å®¶åˆ—ä¸¾å‡ ä¸ªå¸¸ç”¨çš„æ³¨è§£ï¼š @ConditionalOnBeanï¼šå½“æŸä¸ªç‰¹å®šçš„Beanå­˜åœ¨æ—¶ï¼Œé…ç½®ç”Ÿæ•ˆ @ConditionalOnMissingBeanï¼šå½“æŸä¸ªç‰¹å®šçš„Beanä¸å­˜åœ¨æ—¶ï¼Œé…ç½®ç”Ÿæ•ˆ @ConditionalOnClassï¼šå½“Classpathé‡Œå­˜åœ¨æŒ‡å®šçš„ç±»ï¼Œé…ç½®ç”Ÿæ•ˆ @ConditionalOnMissingClassï¼šå½“Classpathé‡Œä¸å­˜åœ¨æŒ‡å®šçš„ç±»ï¼Œé…ç½®ç”Ÿæ•ˆ @ConditionalOnExpressionï¼šå½“ç»™å®šçš„SpELè¡¨è¾¾å¼è®¡ç®—ç»“æœä¸ºtrueï¼Œé…ç½®ç”Ÿæ•ˆ @ConditionalOnPropertyï¼šå½“æŒ‡å®šçš„é…ç½®å±æ€§æœ‰ä¸€ä¸ªæ˜ç¡®çš„å€¼å¹¶åŒ¹é…ï¼Œé…ç½®ç”Ÿæ•ˆ å…·ä½“çš„åº”ç”¨æ¡ˆä¾‹å¦‚ä¸‹ï¼š @Configuration public class ConditionalConfig { /** * å½“AppConfigå¯¹è±¡å­˜åœ¨æ—¶ï¼Œåˆ›å»ºä¸€ä¸ªAå¯¹è±¡ */ @ConditionalOnBean(AppConfig.class) @Bean public A createA(){ return new A(); } /** * å½“AppConfigå¯¹è±¡ä¸å­˜åœ¨æ—¶ï¼Œåˆ›å»ºä¸€ä¸ªBå¯¹è±¡ */ @ConditionalOnMissingBean(AppConfig.class) @Bean public B createB(){ return new B(); } /** * å½“KafkaTemplateç±»å­˜åœ¨æ—¶ï¼Œåˆ›å»ºä¸€ä¸ªCå¯¹è±¡ */ @ConditionalOnClass(KafkaTemplate.class) @Bean public C createC(){ return new C(); } /** * å½“KafkaTemplateç±»ä¸å­˜åœ¨æ—¶ï¼Œåˆ›å»ºä¸€ä¸ªDå¯¹è±¡ */ @ConditionalOnMissingClass(KafkaTemplate.class) @Bean public D createD(){ return new D(); } /** * å½“enableConfigçš„é…ç½®ä¸ºtrueï¼Œåˆ›å»ºä¸€ä¸ªEå¯¹è±¡ */ @ConditionalOnExpression(\"${enableConfig:false}\") @Bean public E createE(){ return new E(); } /** * å½“filter.loginFilterçš„é…ç½®ä¸ºtrueï¼Œåˆ›å»ºä¸€ä¸ªFå¯¹è±¡ */ @ConditionalOnProperty(prefix = \"filter\",name = \"loginFilter\",havingValue = \"true\") @Bean public F createF(){ return new F(); } } @value å¯ä»¥åœ¨ä»»æ„ Spring ç®¡ç†çš„ Bean ä¸­é€šè¿‡è¿™ä¸ªæ³¨è§£è·å–ä»»ä½•æ¥æºé…ç½®çš„å±æ€§å€¼ï¼Œæ¯”å¦‚ä½ åœ¨application.propertiesæ–‡ä»¶é‡Œï¼Œå®šä¹‰äº†ä¸€ä¸ªå‚æ•°å˜é‡ï¼ config.name=zhangsan åœ¨ä»»æ„çš„beanå®¹å™¨é‡Œé¢ï¼Œå¯ä»¥é€šè¿‡@Valueæ³¨è§£æ³¨å…¥å‚æ•°ï¼Œè·å–å‚æ•°å˜é‡å€¼ã€‚ @RestController public class HelloController { @Value(\"${config.name}\") private String config; @GetMapping(\"config\") public String config(){ return JSON.toJSONString(config); } } @ConfigurationProperties ä¸Šé¢@Valueåœ¨æ¯ä¸ªç±»ä¸­è·å–å±æ€§é…ç½®å€¼çš„åšæ³•ï¼Œå…¶å®æ˜¯ä¸æ¨èçš„ã€‚ ä¸€èˆ¬åœ¨ä¼ä¸šé¡¹ç›®å¼€å‘ä¸­ï¼Œä¸ä¼šä½¿ç”¨é‚£ä¹ˆæ‚ä¹±æ— ç« çš„å†™æ³•è€Œä¸”ç»´æŠ¤ä¹Ÿéº»çƒ¦ï¼Œé€šå¸¸ä¼šä¸€æ¬¡æ€§è¯»å–ä¸€ä¸ª Java é…ç½®ç±»ï¼Œç„¶ååœ¨éœ€è¦ä½¿ç”¨çš„åœ°æ–¹ç›´æ¥å¼•ç”¨è¿™ä¸ªç±»å°±å¯ä»¥å¤šæ¬¡è®¿é—®äº†ï¼Œæ–¹ä¾¿ç»´æŠ¤ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š é¦–å…ˆï¼Œåœ¨application.propertiesæ–‡ä»¶é‡Œå®šä¹‰å¥½å‚æ•°å˜é‡ã€‚ config.name=demo_1 config.value=demo_value_1 ç„¶åï¼Œåˆ›å»ºä¸€ä¸ª Java é…ç½®ç±»ï¼Œå°†å‚æ•°å˜é‡æ³¨å…¥å³å¯ï¼ @Component @ConfigurationProperties(prefix = \"config\") public class Config { public String name; public String value; //...getã€set } æœ€åï¼Œåœ¨éœ€è¦ä½¿ç”¨çš„åœ°æ–¹ï¼Œé€šè¿‡IOCæ³¨å…¥Configå¯¹è±¡å³å¯ï¼ @PropertySource è¿™ä¸ªæ³¨è§£æ˜¯ç”¨æ¥è¯»å–æˆ‘ä»¬è‡ªå®šä¹‰çš„é…ç½®æ–‡ä»¶çš„ï¼Œæ¯”å¦‚å¯¼å…¥test.propertieså’Œbussiness.propertiesä¸¤ä¸ªé…ç½®æ–‡ä»¶ï¼Œç”¨æ³•å¦‚ä¸‹ï¼š @SpringBootApplication @PropertySource(value = {\"test.properties\",\"bussiness.properties\"}) public class PropertyApplication { public static void main(String[] args) { SpringApplication.run(PropertyApplication.class, args); } } @ImportResource ç”¨æ¥åŠ è½½ xml é…ç½®æ–‡ä»¶ï¼Œæ¯”å¦‚å¯¼å…¥è‡ªå®šä¹‰çš„aaa.xmlæ–‡ä»¶ï¼Œç”¨æ³•å¦‚ä¸‹ï¼š @ImportResource(locations = \"classpath:aaa.xml\") @SpringBootApplication public class PropertyApplication { public static void main(String[] args) { SpringApplication.run(PropertyApplication.class, args); } } ","date":"2022-11-26","objectID":"/springboot%E5%B8%B8%E7%94%A8%E6%B3%A8%E8%A7%A3%E6%80%BB%E7%BB%93/:2:3","tags":["SpringBoot"],"title":"SpringBootå¸¸ç”¨æ³¨è§£æ€»ç»“","uri":"/springboot%E5%B8%B8%E7%94%A8%E6%B3%A8%E8%A7%A3%E6%80%BB%E7%BB%93/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"å¼‚å¸¸å¤„ç†ç›¸å…³æ³¨è§£ @ControllerAdvice å’Œ @ExceptionHandler é€šå¸¸ç»„åˆä½¿ç”¨ï¼Œç”¨äºå¤„ç†å…¨å±€å¼‚å¸¸ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š @ControllerAdvice @Configuration @Slf4j public class GlobalExceptionConfig { private static final Integer GLOBAL_ERROR_CODE = 500; @ExceptionHandler(value = Exception.class) @ResponseBody public void exceptionHandler(HttpServletRequest request, HttpServletResponse response, Exception e) throws Exception { log.error(\"ã€ç»Ÿä¸€å¼‚å¸¸å¤„ç†å™¨ã€‘\", e); ResultMsg\u003cObject\u003e resultMsg = new ResultMsg\u003c\u003e(); resultMsg.setCode(GLOBAL_ERROR_CODE); if (e instanceof CommonException) { CommonException ex = (CommonException) e; if(ex.getErrCode() != 0) { resultMsg.setCode(ex.getErrCode()); } resultMsg.setMsg(ex.getErrMsg()); }else { resultMsg.setMsg(CommonErrorMsg.SYSTEM_ERROR.getMessage()); } WebUtil.buildPrintWriter(response, resultMsg); } } ","date":"2022-11-26","objectID":"/springboot%E5%B8%B8%E7%94%A8%E6%B3%A8%E8%A7%A3%E6%80%BB%E7%BB%93/:2:4","tags":["SpringBoot"],"title":"SpringBootå¸¸ç”¨æ³¨è§£æ€»ç»“","uri":"/springboot%E5%B8%B8%E7%94%A8%E6%B3%A8%E8%A7%A3%E6%80%BB%E7%BB%93/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"æµ‹è¯•ç›¸å…³æ³¨è§£ @ActiveProfiles ä¸€èˆ¬ä½œç”¨äºæµ‹è¯•ç±»ä¸Šï¼Œ ç”¨äºå£°æ˜ç”Ÿæ•ˆçš„ Spring é…ç½®æ–‡ä»¶ï¼Œæ¯”å¦‚æŒ‡å®šapplication-dev.propertiesé…ç½®æ–‡ä»¶ã€‚ @RunWith å’Œ @SpringBootTest ä¸€èˆ¬ä½œç”¨äºæµ‹è¯•ç±»ä¸Šï¼Œ ç”¨äºå•å…ƒæµ‹è¯•ç”¨ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š @ActiveProfiles(\"dev\") @RunWith(SpringRunner.class) @SpringBootTest public class TestJunit { @Test public void executeTask() { //æµ‹è¯•... } } ","date":"2022-11-26","objectID":"/springboot%E5%B8%B8%E7%94%A8%E6%B3%A8%E8%A7%A3%E6%80%BB%E7%BB%93/:2:5","tags":["SpringBoot"],"title":"SpringBootå¸¸ç”¨æ³¨è§£æ€»ç»“","uri":"/springboot%E5%B8%B8%E7%94%A8%E6%B3%A8%E8%A7%A3%E6%80%BB%E7%BB%93/"},{"categories":["å®è·µç¬”è®°"],"content":"Redis ä½œä¸º21ä¸–çºªæœ€æµè¡Œçš„ç¼“å­˜ä¸­é—´ä»¶ï¼Œå®ƒä¹Ÿèƒ½å¤Ÿå®ç°æ¥å£é™æµçš„ä½œç”¨ï¼Œæœ¬ç‰‡æ–‡ç« ä¸»è¦è®°å½•ä¸ªäººå®ç°è¿‡ç¨‹ã€‚ åœ¨åˆ†å¸ƒå¼é«˜å¹¶å‘ç³»ç»Ÿä¸­ï¼Œå¸¸å¸¸éœ€è¦ç”¨åˆ° ç¼“å­˜ ã€é™çº§ ã€ é™æµã€‚ ç¼“å­˜ï¼šç¼“å­˜çš„ç›®çš„æ˜¯æå‡ç³»ç»Ÿè®¿é—®é€Ÿåº¦å’Œå¢å¤§ç³»ç»Ÿå¤„ç†å®¹é‡ é™çº§ï¼šé™çº§æ˜¯å½“æœåŠ¡å‡ºç°é—®é¢˜æˆ–è€…å½±å“åˆ°æ ¸å¿ƒæµç¨‹æ—¶ï¼Œéœ€è¦æš‚æ—¶å±è”½æ‰ï¼Œå¾…é«˜å³°æˆ–è€…é—®é¢˜è§£å†³åå†æ‰“å¼€ é™æµï¼šé™æµçš„ç›®çš„æ˜¯é€šè¿‡å¯¹å¹¶å‘è®¿é—®/è¯·æ±‚è¿›è¡Œé™é€Ÿï¼Œæˆ–è€…å¯¹ä¸€ä¸ªæ—¶é—´çª—å£å†…çš„è¯·æ±‚è¿›è¡Œé™é€Ÿæ¥ä¿æŠ¤ç³»ç»Ÿï¼Œä¸€æ—¦è¾¾åˆ°é™åˆ¶é€Ÿç‡åˆ™å¯ä»¥æ‹’ç»æœåŠ¡ã€æ’é˜Ÿæˆ–ç­‰å¾…ã€é™çº§ç­‰å¤„ç† ","date":"2022-11-26","objectID":"/springboot-redis%E5%AE%9E%E7%8E%B0%E6%8E%A5%E5%8F%A3%E9%99%90%E6%B5%81/:0:0","tags":["SpringBoot","Redis"],"title":"SpringBoot+Rediså®ç°æ¥å£é™æµ","uri":"/springboot-redis%E5%AE%9E%E7%8E%B0%E6%8E%A5%E5%8F%A3%E9%99%90%E6%B5%81/"},{"categories":["å®è·µç¬”è®°"],"content":"å‡†å¤‡å·¥ä½œ ","date":"2022-11-26","objectID":"/springboot-redis%E5%AE%9E%E7%8E%B0%E6%8E%A5%E5%8F%A3%E9%99%90%E6%B5%81/:1:0","tags":["SpringBoot","Redis"],"title":"SpringBoot+Rediså®ç°æ¥å£é™æµ","uri":"/springboot-redis%E5%AE%9E%E7%8E%B0%E6%8E%A5%E5%8F%A3%E9%99%90%E6%B5%81/"},{"categories":["å®è·µç¬”è®°"],"content":"Maven æ·»åŠ ä¾èµ– \u003cdependency\u003e \u003cgroupId\u003eorg.springframework.boot\u003c/groupId\u003e \u003cartifactId\u003espring-boot-starter-data-redis\u003c/artifactId\u003e \u003c/dependency\u003e \u003cdependency\u003e \u003cgroupId\u003eorg.springframework.boot\u003c/groupId\u003e \u003cartifactId\u003espring-boot-starter-web\u003c/artifactId\u003e \u003c/dependency\u003e \u003c!-- æ–¹å¼2éœ€è¦ç”¨åˆ° --\u003e \u003cdependency\u003e \u003cgroupId\u003eorg.springframework.boot\u003c/groupId\u003e \u003cartifactId\u003espring-boot-starter-aop\u003c/artifactId\u003e \u003c/dependency\u003e ","date":"2022-11-26","objectID":"/springboot-redis%E5%AE%9E%E7%8E%B0%E6%8E%A5%E5%8F%A3%E9%99%90%E6%B5%81/:1:1","tags":["SpringBoot","Redis"],"title":"SpringBoot+Rediså®ç°æ¥å£é™æµ","uri":"/springboot-redis%E5%AE%9E%E7%8E%B0%E6%8E%A5%E5%8F%A3%E9%99%90%E6%B5%81/"},{"categories":["å®è·µç¬”è®°"],"content":"å®‰è£… Redis æœ¬æ–‡å°±ä¸å¤šèµ˜è¿°è¿™ä¸€éƒ¨åˆ†äº† QAQ ","date":"2022-11-26","objectID":"/springboot-redis%E5%AE%9E%E7%8E%B0%E6%8E%A5%E5%8F%A3%E9%99%90%E6%B5%81/:1:2","tags":["SpringBoot","Redis"],"title":"SpringBoot+Rediså®ç°æ¥å£é™æµ","uri":"/springboot-redis%E5%AE%9E%E7%8E%B0%E6%8E%A5%E5%8F%A3%E9%99%90%E6%B5%81/"},{"categories":["å®è·µç¬”è®°"],"content":"Spring Boot ä¸­é›†æˆ Redis ","date":"2022-11-26","objectID":"/springboot-redis%E5%AE%9E%E7%8E%B0%E6%8E%A5%E5%8F%A3%E9%99%90%E6%B5%81/:2:0","tags":["SpringBoot","Redis"],"title":"SpringBoot+Rediså®ç°æ¥å£é™æµ","uri":"/springboot-redis%E5%AE%9E%E7%8E%B0%E6%8E%A5%E5%8F%A3%E9%99%90%E6%B5%81/"},{"categories":["å®è·µç¬”è®°"],"content":"1. åœ¨applicationé…ç½®æ–‡ä»¶ä¸­é…ç½®Redis # Redisæ•°æ®åº“ç´¢å¼•ï¼ˆé»˜è®¤ä¸º0ï¼‰ spring.redis.database=0 # RedisæœåŠ¡å™¨åœ°å€ spring.redis.host=127.0.0.1 # RedisæœåŠ¡å™¨è¿æ¥ç«¯å£ spring.redis.port=6379 # RedisæœåŠ¡å™¨è¿æ¥å¯†ç ï¼ˆé»˜è®¤ä¸ºç©ºï¼‰ spring.redis.password= # è¿æ¥è¶…æ—¶æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰ spring.redis.timeout=1000 # è¿æ¥æ± æœ€å¤§è¿æ¥æ•°ï¼ˆä½¿ç”¨è´Ÿå€¼è¡¨ç¤ºæ²¡æœ‰é™åˆ¶ï¼‰ spring.redis.jedis.pool.max-active=20 # è¿æ¥æ± æœ€å¤§é˜»å¡ç­‰å¾…æ—¶é—´ï¼ˆä½¿ç”¨è´Ÿå€¼è¡¨ç¤ºæ²¡æœ‰é™åˆ¶ï¼‰ spring.redis.jedis.pool.max-wait=-1 # è¿æ¥æ± ä¸­çš„æœ€å¤§ç©ºé—²è¿æ¥ spring.redis.jedis.pool.max-idle=10 # è¿æ¥æ± ä¸­çš„æœ€å°ç©ºé—²è¿æ¥ spring.redis.jedis.pool.min-idle=0 ","date":"2022-11-26","objectID":"/springboot-redis%E5%AE%9E%E7%8E%B0%E6%8E%A5%E5%8F%A3%E9%99%90%E6%B5%81/:2:1","tags":["SpringBoot","Redis"],"title":"SpringBoot+Rediså®ç°æ¥å£é™æµ","uri":"/springboot-redis%E5%AE%9E%E7%8E%B0%E6%8E%A5%E5%8F%A3%E9%99%90%E6%B5%81/"},{"categories":["å®è·µç¬”è®°"],"content":"2. é…ç½®RedisTemplate @Configuration @EnableCaching public class RedisConfig extends CachingConfigurerSupport { /** * RedisTemplateç›¸å…³é…ç½® * ä½¿redisæ”¯æŒæ’å…¥å¯¹è±¡ */ @Bean public RedisTemplate\u003cString, Object\u003e redisTemplate(RedisConnectionFactory factory) { RedisTemplate\u003cString, Object\u003e template = new RedisTemplate\u003c\u003e(); // é…ç½®è¿æ¥å·¥å‚ template.setConnectionFactory(factory); // è®¾ç½®keyçš„åºåˆ—åŒ–å™¨ template.setKeySerializer(new StringRedisSerializer()); // è®¾ç½®valueçš„åºåˆ—åŒ–å™¨ //ä½¿ç”¨Jackson 2ï¼Œå°†å¯¹è±¡åºåˆ—åŒ–ä¸ºJSON Jackson2JsonRedisSerializer jackson2JsonRedisSerializer = new Jackson2JsonRedisSerializer(Object.class); //Jsonè½¬å¯¹è±¡ç±»ï¼Œä¸è®¾ç½®é»˜è®¤çš„ä¼šå°†Jsonè½¬æˆHashMap ObjectMapper om = new ObjectMapper(); om.setVisibility(PropertyAccessor.ALL, JsonAutoDetect.Visibility.ANY); om.enableDefaultTyping(ObjectMapper.DefaultTyping.NON_FINAL); jackson2JsonRedisSerializer.setObjectMapper(om); template.setValueSerializer(jackson2JsonRedisSerializer); return template; } } è‡ªæ­¤ï¼ŒSpring Boot å·²å®Œæˆé›†æˆRedisï¼Œå¯ä»¥é€šè¿‡ä¾èµ–æ³¨å…¥ä½¿ç”¨RedisTemplateï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š @Autowired private RedisTemplate\u003cString, Object\u003e redisTemplate; ","date":"2022-11-26","objectID":"/springboot-redis%E5%AE%9E%E7%8E%B0%E6%8E%A5%E5%8F%A3%E9%99%90%E6%B5%81/:2:2","tags":["SpringBoot","Redis"],"title":"SpringBoot+Rediså®ç°æ¥å£é™æµ","uri":"/springboot-redis%E5%AE%9E%E7%8E%B0%E6%8E%A5%E5%8F%A3%E9%99%90%E6%B5%81/"},{"categories":["å®è·µç¬”è®°"],"content":"å®ç°é™æµï¼ˆæ–¹å¼1ï¼‰ ","date":"2022-11-26","objectID":"/springboot-redis%E5%AE%9E%E7%8E%B0%E6%8E%A5%E5%8F%A3%E9%99%90%E6%B5%81/:3:0","tags":["SpringBoot","Redis"],"title":"SpringBoot+Rediså®ç°æ¥å£é™æµ","uri":"/springboot-redis%E5%AE%9E%E7%8E%B0%E6%8E%A5%E5%8F%A3%E9%99%90%E6%B5%81/"},{"categories":["å®è·µç¬”è®°"],"content":"1. é™æµæ€è·¯ ç¼–å†™è‡ªå®šä¹‰æ³¨è§£ï¼Œä¸ºåç»­è¿‡æ»¤æ¥å£æä¾›æ ‡è¯† é€šè¿‡IP+æ–¹æ³•åä½œä¸ºkeyï¼Œè®¿é—®æ¬¡æ•°ä½œä¸ºvalueçš„æ–¹å¼å¯¹æŸä¸€ç”¨æˆ·çš„è¯·æ±‚è¿›è¡Œæ ‡è¯† æ¯æ¬¡è®¿é—®çš„æ—¶å€™åˆ¤æ–­keyæ˜¯å¦å­˜åœ¨ï¼Œcountæ˜¯å¦è¶…è¿‡é™åˆ¶çš„æ¬¡æ•° è‹¥è®¿é—®è¶…å‡ºé™åˆ¶ï¼Œåˆ™é€šè¿‡æ‹¦æˆªå™¨ç›´æ¥è¿”å›é”™è¯¯ä¿¡æ¯ï¼šè¯·æ±‚è¿‡äºé¢‘ç¹ ","date":"2022-11-26","objectID":"/springboot-redis%E5%AE%9E%E7%8E%B0%E6%8E%A5%E5%8F%A3%E9%99%90%E6%B5%81/:3:1","tags":["SpringBoot","Redis"],"title":"SpringBoot+Rediså®ç°æ¥å£é™æµ","uri":"/springboot-redis%E5%AE%9E%E7%8E%B0%E6%8E%A5%E5%8F%A3%E9%99%90%E6%B5%81/"},{"categories":["å®è·µç¬”è®°"],"content":"2. æ·»åŠ è‡ªå®šä¹‰æ³¨è§£ AccessLimit @Inherited @Documented @Retention(RetentionPolicy.RUNTIME) @Target(ElementType.METHOD) public @interface AccessLimit { /** * è¯·æ±‚æ¬¡æ•°çš„æŒ‡å®šæ—¶é—´èŒƒå›´ : ç§’æ•°(redisæ•°æ®è¿‡æœŸæ—¶é—´) */ int second() default 60; /** * æŒ‡å®šsecond æ—¶é—´å†… : APIè¯·æ±‚æ¬¡æ•° */ int maxCount() default 3; } ","date":"2022-11-26","objectID":"/springboot-redis%E5%AE%9E%E7%8E%B0%E6%8E%A5%E5%8F%A3%E9%99%90%E6%B5%81/:3:2","tags":["SpringBoot","Redis"],"title":"SpringBoot+Rediså®ç°æ¥å£é™æµ","uri":"/springboot-redis%E5%AE%9E%E7%8E%B0%E6%8E%A5%E5%8F%A3%E9%99%90%E6%B5%81/"},{"categories":["å®è·µç¬”è®°"],"content":"3. ç¼–å†™æ‹¦æˆªå™¨ @Slf4j @Component public class AccessLimitInterceptor implements HandlerInterceptor { @Autowired private RedisTemplate\u003cString, Object\u003e redisTemplate; @Override public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object handler) throws Exception { // Handler æ˜¯å¦ä¸º HandlerMethod å®ä¾‹ if (handler instanceof HandlerMethod) { HandlerMethod handlerMethod = (HandlerMethod) handler; // è·å–æ–¹æ³• Method method = handlerMethod.getMethod(); // æ˜¯å¦æœ‰AccessLimitæ³¨è§£ if (!method.isAnnotationPresent(AccessLimit.class)) { return true; } // è·å–æ³¨è§£å†…å®¹ä¿¡æ¯ AccessLimit accessLimit = method.getAnnotation(AccessLimit.class); if (accessLimit == null) { return true; } // è·å–æ¬¡æ•°å’Œè¶…æ—¶ int seconds = accessLimit.second(); int maxCount = accessLimit.maxCount(); // å­˜å‚¨key String key = IpUtil.getIpAddr(request)+method.getName(); // ä»Redisä¸­è·å–ç”¨æˆ·å·²ç»è®¿é—®çš„æ¬¡æ•° try { Integer count = (Integer) redisTemplate.opsForValue().get(key); System.out.println(\"å·²ç»è®¿é—®çš„æ¬¡æ•°:\" + count); // Redisä¸å­˜åœ¨ç”¨æˆ·è®¿é—®è®°å½• if (null == count || -1 == count) { redisTemplate.opsForValue().set(key, 1, seconds, TimeUnit.SECONDS); return true; } if (count \u003c maxCount) { // è®¿é—®æ¬¡æ•°+1 redisTemplate.opsForValue().increment(key); return true; } if (count \u003e= maxCount) { // è¶…å‡ºè®¿é—®é™åˆ¶ response.setContentType(\"application/json;charset=UTF-8\"); OutputStream out = response.getOutputStream(); out.write(\"è¯·æ±‚è¿‡äºé¢‘ç¹è¯·ç¨åå†è¯•\".getBytes(\"UTF-8\")); out.flush(); out.close(); log.warn(\"è¯·æ±‚è¿‡äºé¢‘ç¹è¯·ç¨åå†è¯•\"); return false; } }catch (RedisConnectionFailureException e){ log.error(\"redis error\" + e.getMessage().toString()); return true; } } return true; } } ","date":"2022-11-26","objectID":"/springboot-redis%E5%AE%9E%E7%8E%B0%E6%8E%A5%E5%8F%A3%E9%99%90%E6%B5%81/:3:3","tags":["SpringBoot","Redis"],"title":"SpringBoot+Rediså®ç°æ¥å£é™æµ","uri":"/springboot-redis%E5%AE%9E%E7%8E%B0%E6%8E%A5%E5%8F%A3%E9%99%90%E6%B5%81/"},{"categories":["å®è·µç¬”è®°"],"content":"4. æ³¨å†Œæ‹¦æˆªå™¨ @Configuration public class IntercepterConfig implements WebMvcConfigurer { @Autowired private AccessLimitInterceptor accessLimitInterceptor; @Override public void addInterceptors(InterceptorRegistry registry) { registry.addInterceptor(accessLimitInterceptor) .addPathPatterns(\"/**\") // æ‹¦æˆªè·¯å¾„ .excludePathPatterns(\"/user/login\"); // ä¸æ‹¦æˆªè·¯å¾„ } } ","date":"2022-11-26","objectID":"/springboot-redis%E5%AE%9E%E7%8E%B0%E6%8E%A5%E5%8F%A3%E9%99%90%E6%B5%81/:3:4","tags":["SpringBoot","Redis"],"title":"SpringBoot+Rediså®ç°æ¥å£é™æµ","uri":"/springboot-redis%E5%AE%9E%E7%8E%B0%E6%8E%A5%E5%8F%A3%E9%99%90%E6%B5%81/"},{"categories":["å®è·µç¬”è®°"],"content":"5. é€šè¿‡AccessLimitæ³¨è§£æµ‹è¯•æœ€ç»ˆæ•ˆæœ @RestController public class TestController { @AccessLimit(second = 60,maxCount = 5) @GetMapping(\"test\") public String test(){ return \"TEST\"; } } ","date":"2022-11-26","objectID":"/springboot-redis%E5%AE%9E%E7%8E%B0%E6%8E%A5%E5%8F%A3%E9%99%90%E6%B5%81/:3:5","tags":["SpringBoot","Redis"],"title":"SpringBoot+Rediså®ç°æ¥å£é™æµ","uri":"/springboot-redis%E5%AE%9E%E7%8E%B0%E6%8E%A5%E5%8F%A3%E9%99%90%E6%B5%81/"},{"categories":["å®è·µç¬”è®°"],"content":"å®ç°é™æµï¼ˆæ–¹å¼2ï¼‰ ","date":"2022-11-26","objectID":"/springboot-redis%E5%AE%9E%E7%8E%B0%E6%8E%A5%E5%8F%A3%E9%99%90%E6%B5%81/:4:0","tags":["SpringBoot","Redis"],"title":"SpringBoot+Rediså®ç°æ¥å£é™æµ","uri":"/springboot-redis%E5%AE%9E%E7%8E%B0%E6%8E%A5%E5%8F%A3%E9%99%90%E6%B5%81/"},{"categories":["å®è·µç¬”è®°"],"content":"1. é™æµæ³¨è§£ é¦–å…ˆéœ€è¦åˆ›å»ºä¸€ä¸ªé™æµæ³¨è§£ï¼Œé™æµå°†åˆ†ä¸ºä¸¤ç§æƒ…å†µï¼š é’ˆå¯¹å½“å‰æ¥å£çš„å…¨å±€æ€§é™æµï¼Œä¾‹å¦‚è¯¥æ¥å£å¯ä»¥åœ¨ 1 åˆ†é’Ÿå†…è®¿é—® 100 æ¬¡ã€‚ é’ˆå¯¹æŸä¸€ä¸ª IP åœ°å€çš„é™æµï¼Œä¾‹å¦‚æŸä¸ª IP åœ°å€å¯ä»¥åœ¨ 1 åˆ†é’Ÿå†…è®¿é—® 100 æ¬¡ã€‚ é’ˆå¯¹è¿™ä¸¤ç§æƒ…å†µï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæšä¸¾ç±»ï¼š public enum LimitType { /** * é»˜è®¤ç­–ç•¥å…¨å±€é™æµ */ DEFAULT, /** * æ ¹æ®è¯·æ±‚è€…IPè¿›è¡Œé™æµ */ IP } ä¸‹ä¸€æ­¥ï¼Œåˆ›å»ºé™æµæ³¨è§£ï¼š @Target(ElementType.METHOD) @Retention(RetentionPolicy.RUNTIME) @Documented public @interface RateLimiter { /** * é™æµkeyå‰ç¼€ */ String key() default \"rate_limit:\"; /** * é™æµæ—¶é—´,å•ä½ç§’ */ int time() default 60; /** * é™æµæ¬¡æ•° */ int count() default 100; /** * é™æµç±»å‹ */ LimitType limitType() default LimitType.DEFAULT; } ","date":"2022-11-26","objectID":"/springboot-redis%E5%AE%9E%E7%8E%B0%E6%8E%A5%E5%8F%A3%E9%99%90%E6%B5%81/:4:1","tags":["SpringBoot","Redis"],"title":"SpringBoot+Rediså®ç°æ¥å£é™æµ","uri":"/springboot-redis%E5%AE%9E%E7%8E%B0%E6%8E%A5%E5%8F%A3%E9%99%90%E6%B5%81/"},{"categories":["å®è·µç¬”è®°"],"content":"2. å®šåˆ¶ RedisTemplate åœ¨ Spring Boot ä¸­ï¼Œæˆ‘ä»¬å…¶å®æ›´ä¹ æƒ¯ä½¿ç”¨ Spring Data Redis æ¥æ“ä½œ Redisï¼Œä¸è¿‡é»˜è®¤çš„ RedisTemplate æœ‰ä¸€ä¸ªå°å‘ï¼Œå°±æ˜¯åºåˆ—åŒ–ç”¨çš„æ˜¯ JdkSerializationRedisSerializerï¼Œä¸çŸ¥é“å°ä¼™ä¼´ä»¬æœ‰æ²¡æœ‰æ³¨æ„è¿‡ï¼Œç›´æ¥ç”¨è¿™ä¸ªåºåˆ—åŒ–å·¥å…·å°†æ¥å­˜åˆ° Redis ä¸Šçš„ key å’Œ value éƒ½ä¼šè«åå…¶å¦™å¤šä¸€äº›å‰ç¼€ï¼Œè¿™å°±å¯¼è‡´ä½ ç”¨å‘½ä»¤è¯»å–çš„æ—¶å€™å¯èƒ½ä¼šå‡ºé”™ã€‚ ä¿®æ”¹ RedisTemplate åºåˆ—åŒ–æ–¹æ¡ˆï¼Œä»£ç å¦‚ä¸‹ï¼š @Configuration public class RedisConfig { @Bean public RedisTemplate\u003cObject, Object\u003e redisTemplate(RedisConnectionFactory connectionFactory) { RedisTemplate\u003cObject, Object\u003e redisTemplate = new RedisTemplate\u003c\u003e(); redisTemplate.setConnectionFactory(connectionFactory); // ä½¿ç”¨Jackson2JsonRedisSerialize æ›¿æ¢é»˜è®¤åºåˆ—åŒ–(é»˜è®¤é‡‡ç”¨çš„æ˜¯JDKåºåˆ—åŒ–) Jackson2JsonRedisSerializer\u003cObject\u003e jackson2JsonRedisSerializer = new Jackson2JsonRedisSerializer\u003c\u003e(Object.class); ObjectMapper om = new ObjectMapper(); om.setVisibility(PropertyAccessor.ALL, JsonAutoDetect.Visibility.ANY); om.enableDefaultTyping(ObjectMapper.DefaultTyping.NON_FINAL); jackson2JsonRedisSerializer.setObjectMapper(om); redisTemplate.setKeySerializer(jackson2JsonRedisSerializer); redisTemplate.setValueSerializer(jackson2JsonRedisSerializer); redisTemplate.setHashKeySerializer(jackson2JsonRedisSerializer); redisTemplate.setHashValueSerializer(jackson2JsonRedisSerializer); return redisTemplate; } } ","date":"2022-11-26","objectID":"/springboot-redis%E5%AE%9E%E7%8E%B0%E6%8E%A5%E5%8F%A3%E9%99%90%E6%B5%81/:4:2","tags":["SpringBoot","Redis"],"title":"SpringBoot+Rediså®ç°æ¥å£é™æµ","uri":"/springboot-redis%E5%AE%9E%E7%8E%B0%E6%8E%A5%E5%8F%A3%E9%99%90%E6%B5%81/"},{"categories":["å®è·µç¬”è®°"],"content":"3. å¼€å‘ Lua è„šæœ¬ Redis ä¸­çš„ä¸€äº›åŸå­æ“ä½œæˆ‘ä»¬å¯ä»¥å€ŸåŠ© Lua è„šæœ¬æ¥å®ç°ï¼Œæƒ³è¦è°ƒç”¨ Lua è„šæœ¬ï¼Œæˆ‘ä»¬æœ‰ä¸¤ç§ä¸åŒçš„æ€è·¯ï¼š åœ¨ Redis æœåŠ¡ç«¯å®šä¹‰å¥½ Lua è„šæœ¬ï¼Œç„¶åè®¡ç®—å‡ºæ¥ä¸€ä¸ªæ•£åˆ—å€¼ï¼Œåœ¨ Java ä»£ç ä¸­ï¼Œé€šè¿‡è¿™ä¸ªæ•£åˆ—å€¼é”å®šè¦æ‰§è¡Œå“ªä¸ª Lua è„šæœ¬ã€‚ ç›´æ¥åœ¨ Java ä»£ç ä¸­å°† Lua è„šæœ¬å®šä¹‰å¥½ï¼Œç„¶åå‘é€åˆ° Redis æœåŠ¡ç«¯å»æ‰§è¡Œã€‚ Spring Data Redis ä¸­ä¹Ÿæä¾›äº†æ“ä½œ Lua è„šæœ¬çš„æ¥å£ï¼Œè¿˜æ˜¯æ¯”è¾ƒæ–¹ä¾¿çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿™é‡Œå°±é‡‡ç”¨ç¬¬äºŒç§æ–¹æ¡ˆã€‚ åœ¨ resources ç›®å½•ä¸‹æ–°å»º lua æ–‡ä»¶å¤¹ä¸“é—¨ç”¨æ¥å­˜æ”¾ lua è„šæœ¬ï¼Œè„šæœ¬å†…å®¹å¦‚ä¸‹ï¼š local key = KEYS[1] local count = tonumber(ARGV[1]) local time = tonumber(ARGV[2]) local current = redis.call('get', key) if current and tonumber(current) \u003e count then return tonumber(current) end current = redis.call('incr', key) if tonumber(current) == 1 then redis.call('expire', key, time) end return tonumber(current) KEYS å’Œ ARGV éƒ½æ˜¯ä¸€ä¼šè°ƒç”¨æ—¶å€™ä¼ è¿›æ¥çš„å‚æ•°ï¼Œtonumber å°±æ˜¯æŠŠå­—ç¬¦ä¸²è½¬ä¸ºæ•°å­—ï¼Œredis.call å°±æ˜¯æ‰§è¡Œå…·ä½“çš„ redis æŒ‡ä»¤ï¼Œå…·ä½“æµç¨‹æ˜¯è¿™æ ·ï¼š é¦–å…ˆè·å–åˆ°ä¼ è¿›æ¥çš„ key ä»¥åŠ é™æµçš„ count å’Œæ—¶é—´ timeã€‚ é€šè¿‡ get è·å–åˆ°è¿™ä¸ª key å¯¹åº”çš„å€¼ï¼Œè¿™ä¸ªå€¼å°±æ˜¯å½“å‰æ—¶é—´çª—å†…è¿™ä¸ªæ¥å£å¯ä»¥è®¿é—®å¤šå°‘æ¬¡ã€‚ å¦‚æœæ˜¯ç¬¬ä¸€æ¬¡è®¿é—®ï¼Œæ­¤æ—¶æ‹¿åˆ°çš„ç»“æœä¸º nilï¼Œå¦åˆ™æ‹¿åˆ°çš„ç»“æœåº”è¯¥æ˜¯ä¸€ä¸ªæ•°å­—ï¼Œæ‰€ä»¥æ¥ä¸‹æ¥å°±åˆ¤æ–­ï¼Œ å¦‚æœæ‹¿åˆ°çš„ç»“æœæ˜¯ä¸€ä¸ªæ•°å­—ï¼Œå¹¶ä¸”è¿™ä¸ªæ•°å­—è¿˜å¤§äº countï¼Œé‚£å°±è¯´æ˜å·²ç»è¶…è¿‡æµé‡é™åˆ¶äº†ï¼Œé‚£ä¹ˆç›´æ¥è¿”å›æŸ¥è¯¢çš„ç»“æœå³å¯ã€‚ å¦‚æœæ‹¿åˆ°çš„ç»“æœä¸º nilï¼Œè¯´æ˜æ˜¯ç¬¬ä¸€æ¬¡è®¿é—®ï¼Œæ­¤æ—¶å°±ç»™å½“å‰ key è‡ªå¢ 1ï¼Œç„¶åè®¾ç½®ä¸€ä¸ªè¿‡æœŸæ—¶é—´ã€‚ æœ€åæŠŠè‡ªå¢ 1 åçš„å€¼è¿”å›å°±å¯ä»¥äº†ã€‚ æ¥ä¸‹æ¥æˆ‘ä»¬åœ¨ä¸€ä¸ª Bean ä¸­æ¥åŠ è½½è¿™æ®µ Lua è„šæœ¬ï¼Œå¦‚ä¸‹ï¼š @Bean public DefaultRedisScript\u003cLong\u003e limitScript() { DefaultRedisScript\u003cLong\u003e redisScript = new DefaultRedisScript\u003c\u003e(); redisScript.setScriptSource(new ResourceScriptSource(new ClassPathResource(\"lua/limit.lua\"))); redisScript.setResultType(Long.class); return redisScript; } ","date":"2022-11-26","objectID":"/springboot-redis%E5%AE%9E%E7%8E%B0%E6%8E%A5%E5%8F%A3%E9%99%90%E6%B5%81/:4:3","tags":["SpringBoot","Redis"],"title":"SpringBoot+Rediså®ç°æ¥å£é™æµ","uri":"/springboot-redis%E5%AE%9E%E7%8E%B0%E6%8E%A5%E5%8F%A3%E9%99%90%E6%B5%81/"},{"categories":["å®è·µç¬”è®°"],"content":"4. æ³¨è§£è§£æï¼ˆé€šè¿‡AspectJè‡ªå®šä¹‰åˆ‡é¢ï¼‰ @Aspect @Component public class RateLimiterAspect { private static final Logger log = LoggerFactory.getLogger(RateLimiterAspect.class); @Autowired private RedisTemplate\u003cObject, Object\u003e redisTemplate; @Autowired private RedisScript\u003cLong\u003e limitScript; @Before(\"@annotation(rateLimiter)\") public void doBefore(JoinPoint point, RateLimiter rateLimiter) throws Throwable { String key = rateLimiter.key(); int time = rateLimiter.time(); int count = rateLimiter.count(); String combineKey = getCombineKey(rateLimiter, point); List\u003cObject\u003e keys = Collections.singletonList(combineKey); try { Long number = redisTemplate.execute(limitScript, keys, count, time); if (number==null || number.intValue() \u003e count) { throw new ServiceException(\"è®¿é—®è¿‡äºé¢‘ç¹ï¼Œè¯·ç¨å€™å†è¯•\"); } log.info(\"é™åˆ¶è¯·æ±‚'{}',å½“å‰è¯·æ±‚'{}',ç¼“å­˜key'{}'\", count, number.intValue(), key); } catch (ServiceException e) { throw e; } catch (Exception e) { throw new RuntimeException(\"æœåŠ¡å™¨é™æµå¼‚å¸¸ï¼Œè¯·ç¨å€™å†è¯•\"); } } public String getCombineKey(RateLimiter rateLimiter, JoinPoint point) { StringBuffer stringBuffer = new StringBuffer(rateLimiter.key()); if (rateLimiter.limitType() == LimitType.IP) { stringBuffer.append(IpUtils.getIpAddr(((ServletRequestAttributes) RequestContextHolder.currentRequestAttributes()).getRequest())).append(\"-\"); } MethodSignature signature = (MethodSignature) point.getSignature(); Method method = signature.getMethod(); Class\u003c?\u003e targetClass = method.getDeclaringClass(); stringBuffer.append(targetClass.getName()).append(\"-\").append(method.getName()); return stringBuffer.toString(); } } è¿™ä¸ªåˆ‡é¢å°±æ˜¯æ‹¦æˆªæ‰€æœ‰åŠ äº† @RateLimiter æ³¨è§£çš„æ–¹æ³•ï¼Œåœ¨å‰ç½®é€šçŸ¥ä¸­å¯¹æ³¨è§£è¿›è¡Œå¤„ç†ã€‚ é¦–å…ˆè·å–åˆ°æ³¨è§£ä¸­çš„ keyã€time ä»¥åŠ count ä¸‰ä¸ªå‚æ•°ã€‚ è·å–ä¸€ä¸ªç»„åˆçš„ keyï¼Œæ‰€è°“çš„ç»„åˆçš„ keyï¼Œå°±æ˜¯åœ¨æ³¨è§£çš„ key å±æ€§åŸºç¡€ä¸Šï¼Œå†åŠ ä¸Šæ–¹æ³•çš„å®Œæ•´è·¯å¾„ï¼Œå¦‚æœæ˜¯ IP æ¨¡å¼çš„è¯ï¼Œå°±å†åŠ ä¸Š IP åœ°å€ã€‚ä»¥ IP æ¨¡å¼ä¸ºä¾‹ï¼Œæœ€ç»ˆç”Ÿæˆçš„ key ç±»ä¼¼è¿™æ ·ï¼šrate_limit:127.0.0.1-com.demo.ratelimiter.controller.HelloController-helloï¼ˆå¦‚æœä¸æ˜¯ IP æ¨¡å¼ï¼Œé‚£ä¹ˆç”Ÿæˆçš„ key ä¸­å°±ä¸åŒ…å« IP åœ°å€ï¼‰ã€‚ å°†ç”Ÿæˆçš„ key æ”¾åˆ°é›†åˆä¸­ã€‚ é€šè¿‡ redisTemplate.execute æ–¹æ³•å–æ‰§è¡Œä¸€ä¸ª Lua è„šæœ¬ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è„šæœ¬æ‰€å°è£…çš„å¯¹è±¡ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯ keyï¼Œå¯¹åº”äº†è„šæœ¬ä¸­çš„ KEYSï¼Œåé¢æ˜¯å¯å˜é•¿åº¦çš„å‚æ•°ï¼Œå¯¹åº”äº†è„šæœ¬ä¸­çš„ ARGVã€‚ å°† Lua è„šæœ¬æ‰§è¡Œçš„ç»“æœä¸ count è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æœå¤§äº countï¼Œå°±è¯´æ˜è¿‡è½½äº†ï¼ŒæŠ›å¼‚å¸¸å°±è¡Œäº†ã€‚ ","date":"2022-11-26","objectID":"/springboot-redis%E5%AE%9E%E7%8E%B0%E6%8E%A5%E5%8F%A3%E9%99%90%E6%B5%81/:4:4","tags":["SpringBoot","Redis"],"title":"SpringBoot+Rediså®ç°æ¥å£é™æµ","uri":"/springboot-redis%E5%AE%9E%E7%8E%B0%E6%8E%A5%E5%8F%A3%E9%99%90%E6%B5%81/"},{"categories":["å®è·µç¬”è®°"],"content":"5. æ¥å£æµ‹è¯• @RestController public class HelloController { @GetMapping(\"/hello\") @RateLimiter(time = 5,count = 3,limitType = LimitType.IP) public String hello() { return \"hello\u003e\u003e\u003e\"+new Date(); } } æ¯ä¸€ä¸ª IP åœ°å€ï¼Œåœ¨ 5 ç§’å†…åªèƒ½è®¿é—® 3 æ¬¡ã€‚ ","date":"2022-11-26","objectID":"/springboot-redis%E5%AE%9E%E7%8E%B0%E6%8E%A5%E5%8F%A3%E9%99%90%E6%B5%81/:4:5","tags":["SpringBoot","Redis"],"title":"SpringBoot+Rediså®ç°æ¥å£é™æµ","uri":"/springboot-redis%E5%AE%9E%E7%8E%B0%E6%8E%A5%E5%8F%A3%E9%99%90%E6%B5%81/"},{"categories":["æ”¶è—åˆ†äº«"],"content":"Nginxé…ç½®httpä»£ç†éå¸¸ç®€å•ï¼Œç½‘ä¸Šæ•™ç¨‹ä¹Ÿå¾ˆå¤šï¼Œä½†æ˜¯æ— æ³•å¾ˆæ–¹ä¾¿çš„é…ç½®httpsä»£ç†ï¼Œæœ¬ç‰‡æ–‡ç« å°†è®°å½•æ­å»ºå¯ä»¥åŒæ—¶ä»£ç†httpå’Œhttpsçš„æœåŠ¡å™¨ã€‚ ","date":"2022-11-26","objectID":"/nginx%E9%85%8D%E7%BD%AEhttp%E5%92%8Chttps%E6%AD%A3%E5%90%91%E4%BB%A3%E7%90%86/:0:0","tags":["Nginx","ç½‘ç»œä»£ç†"],"title":"Nginxé…ç½®Httpå’ŒHttpsæ­£å‘ä»£ç†","uri":"/nginx%E9%85%8D%E7%BD%AEhttp%E5%92%8Chttps%E6%AD%A3%E5%90%91%E4%BB%A3%E7%90%86/"},{"categories":["æ”¶è—åˆ†äº«"],"content":"å‡†å¤‡å·¥ä½œ é¦–å…ˆæˆ‘ä»¬å¾—éœ€è¦ä¸‹è½½NginxåŠç¬¬ä¸‰æ–¹æ¨¡å—ngx_http_proxy_connect_module wget http://nginx.org/download/nginx-1.18.0.tar.gz wget https://github.com/chobits/ngx_http_proxy_connect_module/archive/master.zip å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œngx_http_proxy_connect_moduleç¬¬ä¸‰æ–¹æ¨¡å—ä¸Nginx æœ‰ç‰ˆæœ¬å¯¹åº”å…³ç³»ï¼Œéœ€è¦åœ¨å…¶å®˜ç½‘ç¡®å®šç‰ˆæœ¬å¯¹åº”å…³ç³»ã€‚ ","date":"2022-11-26","objectID":"/nginx%E9%85%8D%E7%BD%AEhttp%E5%92%8Chttps%E6%AD%A3%E5%90%91%E4%BB%A3%E7%90%86/:1:0","tags":["Nginx","ç½‘ç»œä»£ç†"],"title":"Nginxé…ç½®Httpå’ŒHttpsæ­£å‘ä»£ç†","uri":"/nginx%E9%85%8D%E7%BD%AEhttp%E5%92%8Chttps%E6%AD%A3%E5%90%91%E4%BB%A3%E7%90%86/"},{"categories":["æ”¶è—åˆ†äº«"],"content":"å®‰è£…ç¨‹åº å°†åˆšåˆšä¸‹å¥½çš„ç¨‹åºè¿›è¡Œè§£å‹å®‰è£… #è§£å‹Nginx tar -zxvf nginx-1.18.0.tar.gz #è§£å‹ngx_http_proxy_connect_module unzip master.zip cd nginx-1.18.0 #æ‰“è¡¥ä¸ï¼Œç‰ˆæœ¬éœ€æ³¨æ„ patch -p1 \u003c /path/to/ngx_http_proxy_connect_module/patch/proxy_connect.patch #æ‰§è¡Œç¼–è¯‘å‘½ä»¤ ./configure --prefix=/usr/share/nginx --add-module=/path/to/ngx_http_proxy_connect_module make \u0026\u0026 make install ","date":"2022-11-26","objectID":"/nginx%E9%85%8D%E7%BD%AEhttp%E5%92%8Chttps%E6%AD%A3%E5%90%91%E4%BB%A3%E7%90%86/:2:0","tags":["Nginx","ç½‘ç»œä»£ç†"],"title":"Nginxé…ç½®Httpå’ŒHttpsæ­£å‘ä»£ç†","uri":"/nginx%E9%85%8D%E7%BD%AEhttp%E5%92%8Chttps%E6%AD%A3%E5%90%91%E4%BB%A3%E7%90%86/"},{"categories":["æ”¶è—åˆ†äº«"],"content":"é…ç½® Nginx æ­£å‘ä»£ç† é…ç½®nginx.confï¼Œåœ¨httpæ¨¡å—æ·»åŠ å¦‚ä¸‹é…ç½®å³å¯ server { resolver 114.114.114.114 ipv6=off; #DNSé…ç½® resolver_timeout 10s; listen 8888; proxy_connect; #å¯ç”¨ CONNECT HTTPæ–¹æ³• proxy_connect_allow 443 80; #æŒ‡å®šä»£ç†CONNECTæ–¹æ³•å¯ä»¥è¿æ¥çš„ç«¯å£å·æˆ–èŒƒå›´çš„åˆ—è¡¨ proxy_connect_connect_timeout 20s; #å®šä¹‰å®¢æˆ·ç«¯ä¸ä»£ç†æœåŠ¡å™¨å»ºç«‹è¿æ¥çš„è¶…æ—¶æ—¶é—´ proxy_connect_read_timeout 20s; #å®šä¹‰å®¢æˆ·ç«¯ä»ä»£ç†æœåŠ¡å™¨è¯»å–å“åº”çš„è¶…æ—¶æ—¶é—´ proxy_connect_send_timeout 20s; #è®¾ç½®å®¢æˆ·ç«¯å°†è¯·æ±‚ä¼ è¾“åˆ°ä»£ç†æœåŠ¡å™¨çš„è¶…æ—¶æ—¶é—´ location / { proxy_pass $scheme://$http_host$request_uri; } } ","date":"2022-11-26","objectID":"/nginx%E9%85%8D%E7%BD%AEhttp%E5%92%8Chttps%E6%AD%A3%E5%90%91%E4%BB%A3%E7%90%86/:3:0","tags":["Nginx","ç½‘ç»œä»£ç†"],"title":"Nginxé…ç½®Httpå’ŒHttpsæ­£å‘ä»£ç†","uri":"/nginx%E9%85%8D%E7%BD%AEhttp%E5%92%8Chttps%E6%AD%A3%E5%90%91%E4%BB%A3%E7%90%86/"},{"categories":["æ”¶è—åˆ†äº«"],"content":"é…ç½®å®¢æˆ·ç«¯ä»£ç†æœåŠ¡å™¨ ","date":"2022-11-26","objectID":"/nginx%E9%85%8D%E7%BD%AEhttp%E5%92%8Chttps%E6%AD%A3%E5%90%91%E4%BB%A3%E7%90%86/:4:0","tags":["Nginx","ç½‘ç»œä»£ç†"],"title":"Nginxé…ç½®Httpå’ŒHttpsæ­£å‘ä»£ç†","uri":"/nginx%E9%85%8D%E7%BD%AEhttp%E5%92%8Chttps%E6%AD%A3%E5%90%91%E4%BB%A3%E7%90%86/"},{"categories":["æ”¶è—åˆ†äº«"],"content":"Linux æ‰“å¼€/etc/profileæ–‡ä»¶ï¼Œåœ¨æœ€ä¸‹é¢æ·»åŠ å¦‚ä¸‹é…ç½®å³å¯ #httpä»£ç†ï¼Œipæ˜¯nginxçš„ipï¼Œç«¯å£æ˜¯nginxé…ç½®çš„ç›‘å¬ç«¯å£ export http_proxy=\"http://ip:8888\" #httpsä»£ç† export https_proxy=\"http://ip:8888\" #ä¸éœ€è¦ä»£ç†çš„ip,è®¿é—®è¿™äº›ipï¼Œä¸ä¼šèµ°ä»£ç† export no_proxy=\"127.0.0.1, localhost\" ","date":"2022-11-26","objectID":"/nginx%E9%85%8D%E7%BD%AEhttp%E5%92%8Chttps%E6%AD%A3%E5%90%91%E4%BB%A3%E7%90%86/:4:1","tags":["Nginx","ç½‘ç»œä»£ç†"],"title":"Nginxé…ç½®Httpå’ŒHttpsæ­£å‘ä»£ç†","uri":"/nginx%E9%85%8D%E7%BD%AEhttp%E5%92%8Chttps%E6%AD%A3%E5%90%91%E4%BB%A3%E7%90%86/"},{"categories":["æ”¶è—åˆ†äº«"],"content":"ä¸ºNginxé…ç½®systemctl ","date":"2022-11-26","objectID":"/nginx%E9%85%8D%E7%BD%AEhttp%E5%92%8Chttps%E6%AD%A3%E5%90%91%E4%BB%A3%E7%90%86/:5:0","tags":["Nginx","ç½‘ç»œä»£ç†"],"title":"Nginxé…ç½®Httpå’ŒHttpsæ­£å‘ä»£ç†","uri":"/nginx%E9%85%8D%E7%BD%AEhttp%E5%92%8Chttps%E6%AD%A3%E5%90%91%E4%BB%A3%E7%90%86/"},{"categories":["æ”¶è—åˆ†äº«"],"content":"åˆ›å»ºä¸€ä¸ªnginx.service åœ¨ /usr/lib/systemd/system/ ç›®å½•ä¸‹é¢æ–°å»ºä¸€ä¸ªnginx.serviceæ–‡ä»¶ï¼Œå¹¶èµ‹äºˆå¯æ‰§è¡Œçš„æƒé™ï¼š chmod +x /usr/lib/systemd/system/nginx.service ","date":"2022-11-26","objectID":"/nginx%E9%85%8D%E7%BD%AEhttp%E5%92%8Chttps%E6%AD%A3%E5%90%91%E4%BB%A3%E7%90%86/:5:1","tags":["Nginx","ç½‘ç»œä»£ç†"],"title":"Nginxé…ç½®Httpå’ŒHttpsæ­£å‘ä»£ç†","uri":"/nginx%E9%85%8D%E7%BD%AEhttp%E5%92%8Chttps%E6%AD%A3%E5%90%91%E4%BB%A3%E7%90%86/"},{"categories":["æ”¶è—åˆ†äº«"],"content":"ç¼–è¾‘serviceå†…å®¹ vim /usr/lib/systemd/system/nginx.service [Unit] //å¯¹æœåŠ¡çš„è¯´æ˜ Description=nginx - high performance web server //æè¿°æœåŠ¡ After=network.target remote-fs.target nss-lookup.target //æè¿°æœåŠ¡ç±»åˆ« [Service] //æœåŠ¡çš„ä¸€äº›å…·ä½“è¿è¡Œå‚æ•°çš„è®¾ç½® Type=forking //åå°è¿è¡Œçš„å½¢å¼ PIDFile=/usr/local/nginx/logs/nginx.pid //PIDæ–‡ä»¶çš„è·¯å¾„ ExecStartPre=/usr/local/nginx/sbin/nginx -t -c /usr/local/nginx/conf/nginx.conf //å¯åŠ¨å‡†å¤‡ ExecStart=/usr/local/nginx/sbin/nginx -c /usr/local/nginx/conf/nginx.conf //å¯åŠ¨å‘½ä»¤ ExecReload=/usr/local/nginx/sbin/nginx -s reload //é‡å¯å‘½ä»¤ ExecStop=/usr/local/nginx/sbin/nginx -s stop //åœæ­¢å‘½ä»¤ ExecQuit=/usr/local/nginx/sbin/nginx -s quit //å¿«é€Ÿåœæ­¢ PrivateTmp=true //ç»™æœåŠ¡åˆ†é…ä¸´æ—¶ç©ºé—´ [Install] WantedBy=multi-user.target //æœåŠ¡ç”¨æˆ·çš„æ¨¡å¼ ","date":"2022-11-26","objectID":"/nginx%E9%85%8D%E7%BD%AEhttp%E5%92%8Chttps%E6%AD%A3%E5%90%91%E4%BB%A3%E7%90%86/:5:2","tags":["Nginx","ç½‘ç»œä»£ç†"],"title":"Nginxé…ç½®Httpå’ŒHttpsæ­£å‘ä»£ç†","uri":"/nginx%E9%85%8D%E7%BD%AEhttp%E5%92%8Chttps%E6%AD%A3%E5%90%91%E4%BB%A3%E7%90%86/"},{"categories":["æ”¶è—åˆ†äº«"],"content":"å¯åŠ¨æœåŠ¡ åœ¨å¯åŠ¨æœåŠ¡ä¹‹å‰ï¼Œéœ€è¦å…ˆé‡è½½systemctlå‘½ä»¤ systemctl daemon-reload systemctl start nginx.service ","date":"2022-11-26","objectID":"/nginx%E9%85%8D%E7%BD%AEhttp%E5%92%8Chttps%E6%AD%A3%E5%90%91%E4%BB%A3%E7%90%86/:5:3","tags":["Nginx","ç½‘ç»œä»£ç†"],"title":"Nginxé…ç½®Httpå’ŒHttpsæ­£å‘ä»£ç†","uri":"/nginx%E9%85%8D%E7%BD%AEhttp%E5%92%8Chttps%E6%AD%A3%E5%90%91%E4%BB%A3%E7%90%86/"},{"categories":["æ”¶è—åˆ†äº«"],"content":"æœ¬æ–‡ç« ä¸»è¦æ˜¯ä¸€äº›ç®€æ´çš„JSä»£ç ç‰‡æ®µï¼Œä¸»è¦æå‡ä»£ç è´¨é‡ä»¥åŠç¾è§‚ ","date":"2022-11-26","objectID":"/%E4%B8%80%E4%BA%9B%E7%AE%80%E6%B4%81%E7%9A%84js%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5/:0:0","tags":["JavaScript"],"title":"ä¸€äº›ç®€æ´çš„JSä»£ç ç‰‡æ®µ","uri":"/%E4%B8%80%E4%BA%9B%E7%AE%80%E6%B4%81%E7%9A%84js%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5/"},{"categories":["æ”¶è—åˆ†äº«"],"content":"ä»æ•°ç»„ä¸­åˆ é™¤é‡å¤é¡¹ const numbers = [1, 1, 20, 3, 3, 3, 9, 9]; const uniqueNumbers = [...new Set(numbers)]; // -\u003e [1, 20, 3, 9] åœ¨ JavaScript ä¸­ï¼ŒSet æ˜¯ä¸€ä¸ªé›†åˆï¼Œå®ƒå…è®¸ä½ ä»…å­˜å‚¨å”¯ä¸€å€¼ã€‚è¿™æ„å‘³ç€åˆ é™¤ä»»ä½•é‡å¤çš„å€¼ å±•å¼€è¿ç®—ç¬¦â€¦å°†ä»»ä½•å¯è¿­ä»£å¯¹è±¡è½¬æ¢ä¸ºæ•°ç»„ ","date":"2022-11-26","objectID":"/%E4%B8%80%E4%BA%9B%E7%AE%80%E6%B4%81%E7%9A%84js%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5/:1:0","tags":["JavaScript"],"title":"ä¸€äº›ç®€æ´çš„JSä»£ç ç‰‡æ®µ","uri":"/%E4%B8%80%E4%BA%9B%E7%AE%80%E6%B4%81%E7%9A%84js%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5/"},{"categories":["æ”¶è—åˆ†äº«"],"content":"è¾ƒçŸ­çš„ If-Else çš„ç©ºåˆå¹¶ let maybeSomething; // LONG FORM if(maybeSomething){ console.log(maybeSomething) } else { console.log(\"Nothing found\") } //SHORTHAND console.log(maybeSomething ?? \"Nothing found\") nullishåˆå¹¶æ“ä½œ ??ï¼Œå¦‚æœæ²¡æœ‰å®šä¹‰å·¦ä¾§è¿”å›å³ä¾§ã€‚å¦‚æœæ˜¯ï¼Œåˆ™è¿”å›å·¦ä¾§ ","date":"2022-11-26","objectID":"/%E4%B8%80%E4%BA%9B%E7%AE%80%E6%B4%81%E7%9A%84js%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5/:2:0","tags":["JavaScript"],"title":"ä¸€äº›ç®€æ´çš„JSä»£ç ç‰‡æ®µ","uri":"/%E4%B8%80%E4%BA%9B%E7%AE%80%E6%B4%81%E7%9A%84js%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5/"},{"categories":["æ”¶è—åˆ†äº«"],"content":"é˜²æ­¢å´©æºƒçš„å¯é€‰é“¾ const student = { name: \"Matt\", age: 27, address: { state: \"New York\" }, }; // LONG FORM console.log(student \u0026\u0026 student.address \u0026\u0026 student.address.ZIPCode); // Doesn't exist - Returns undefined // SHORTHAND console.log(student?.address?.ZIPCode); // Doesn't exist - Returns undefined åœ¨æœªå®šä¹‰å±æ€§æ—¶ä½¿ç”¨å¯é€‰é“¾è¿ç®—ç¬¦ï¼Œundefinedå°†è¿”å›è€Œä¸æ˜¯é”™è¯¯ã€‚è¿™å¯ä»¥é˜²æ­¢ä½ çš„ä»£ç å´©æºƒ ","date":"2022-11-26","objectID":"/%E4%B8%80%E4%BA%9B%E7%AE%80%E6%B4%81%E7%9A%84js%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5/:3:0","tags":["JavaScript"],"title":"ä¸€äº›ç®€æ´çš„JSä»£ç ç‰‡æ®µ","uri":"/%E4%B8%80%E4%BA%9B%E7%AE%80%E6%B4%81%E7%9A%84js%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5/"},{"categories":["æ”¶è—åˆ†äº«"],"content":"åœ¨æ²¡æœ‰ç¬¬ä¸‰ä¸ªå˜é‡çš„æƒ…å†µä¸‹äº¤æ¢ä¸¤ä¸ªå˜é‡ let x = 1; let y = 2; // LONGER FORM let temp = x; x = y; y = temp; // SHORTHAND [x, y] = [y, x]; åœ¨ JavaScript ä¸­ï¼Œä½ å¯ä»¥ä½¿ç”¨è§£æ„ä»æ•°ç»„ä¸­æ‹†åˆ†å€¼ ","date":"2022-11-26","objectID":"/%E4%B8%80%E4%BA%9B%E7%AE%80%E6%B4%81%E7%9A%84js%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5/:4:0","tags":["JavaScript"],"title":"ä¸€äº›ç®€æ´çš„JSä»£ç ç‰‡æ®µ","uri":"/%E4%B8%80%E4%BA%9B%E7%AE%80%E6%B4%81%E7%9A%84js%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5/"},{"categories":["æ”¶è—åˆ†äº«"],"content":"å°†ä»»ä½•å€¼è½¬æ¢ä¸ºå¸ƒå°”å€¼ !!true // true !!2 // true !![] // true !!\"Test\" // true !!false // false !!0 // false !!\"\" // false åœ¨ JavaScript ä¸­ï¼Œä½ å¯ä»¥ä½¿ç”¨ !! åœ¨ JS ä¸­å°†ä»»ä½•å†…å®¹è½¬æ¢ä¸ºå¸ƒå°”å€¼ ","date":"2022-11-26","objectID":"/%E4%B8%80%E4%BA%9B%E7%AE%80%E6%B4%81%E7%9A%84js%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5/:5:0","tags":["JavaScript"],"title":"ä¸€äº›ç®€æ´çš„JSä»£ç ç‰‡æ®µ","uri":"/%E4%B8%80%E4%BA%9B%E7%AE%80%E6%B4%81%E7%9A%84js%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5/"},{"categories":["æ”¶è—åˆ†äº«"],"content":"æ‰©å±•è¿ç®—ç¬¦ const nums1 = [1, 2, 3]; const nums2 = [4, 5, 6]; // LONG FORM let newArray = nums1.concat(nums2); // SHORTHAND newArray = [...nums1, ...nums2]; ä½¿ç”¨æ‰©å±•è¿ç®—ç¬¦ç»„åˆä¸¤ä¸ªæ•°ç»„ let numbers = [1, 2, 3]; // LONGER FORM numbers.push(4); numbers.push(5); // SHORTHAND numbers = [...numbers, 4, 5]; ä¹Ÿå¯ä»¥ä½¿ç”¨æ­¤è¯­æ³•ä»£æ›¿å°†å€¼æ¨é€åˆ°æ•°ç»„ ","date":"2022-11-26","objectID":"/%E4%B8%80%E4%BA%9B%E7%AE%80%E6%B4%81%E7%9A%84js%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5/:6:0","tags":["JavaScript"],"title":"ä¸€äº›ç®€æ´çš„JSä»£ç ç‰‡æ®µ","uri":"/%E4%B8%80%E4%BA%9B%E7%AE%80%E6%B4%81%E7%9A%84js%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5/"},{"categories":["æ”¶è—åˆ†äº«"],"content":"ä¼ æ’­è§£æ„ const student = { name: \"Matt\", age: 23, city: \"Helsinki\", state: \"Finland\", }; // LONGER FORM const name = student.name; const age = student.age; const address = { city: student.city, state: student.state }; // SHORTHAND const { name, age, ...address } = student; ä½¿ç”¨æ‰©å±•è¿ç®—ç¬¦å°†å‰©ä½™å…ƒç´ åˆ†é…ç»™å˜é‡ ","date":"2022-11-26","objectID":"/%E4%B8%80%E4%BA%9B%E7%AE%80%E6%B4%81%E7%9A%84js%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5/:7:0","tags":["JavaScript"],"title":"ä¸€äº›ç®€æ´çš„JSä»£ç ç‰‡æ®µ","uri":"/%E4%B8%80%E4%BA%9B%E7%AE%80%E6%B4%81%E7%9A%84js%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5/"},{"categories":["æ”¶è—åˆ†äº«"],"content":"ä½¿ç”¨ \u0026\u0026 è¿›è¡ŒçŸ­è·¯è¯„ä¼° var isReady = true; function doSomething(){ console.log(\"Yay!\"); } // LONGER FORM if(isReady){ doSomething(); } // SHORTHAND isReady \u0026\u0026 doSomething(); ä¸å¿…ç”¨ifè¯­å¥æ£€æŸ¥æŸäº‹æ˜¯å¦ä¸ºçœŸï¼Œä½ å¯ä»¥ä½¿ç”¨\u0026\u0026è¿ç®—ç¬¦ ","date":"2022-11-26","objectID":"/%E4%B8%80%E4%BA%9B%E7%AE%80%E6%B4%81%E7%9A%84js%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5/:8:0","tags":["JavaScript"],"title":"ä¸€äº›ç®€æ´çš„JSä»£ç ç‰‡æ®µ","uri":"/%E4%B8%80%E4%BA%9B%E7%AE%80%E6%B4%81%E7%9A%84js%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5/"},{"categories":["æ”¶è—åˆ†äº«"],"content":"ç±»å›ºé†‡çš„å­—ç¬¦ä¸² const age = 41; const sentence = `I'm ${age} years old`; // result: I'm 41 years old é€šè¿‡å°†å­—ç¬¦ä¸²åŒ…è£…åœ¨åå¼•å·å†…å¹¶${}ç”¨äºåµŒå…¥å€¼ï¼Œä»è€Œåœ¨å­—ç¬¦ä¸²ä¹‹é—´æ’å…¥å˜é‡ ","date":"2022-11-26","objectID":"/%E4%B8%80%E4%BA%9B%E7%AE%80%E6%B4%81%E7%9A%84js%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5/:9:0","tags":["JavaScript"],"title":"ä¸€äº›ç®€æ´çš„JSä»£ç ç‰‡æ®µ","uri":"/%E4%B8%80%E4%BA%9B%E7%AE%80%E6%B4%81%E7%9A%84js%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5/"},{"categories":["æ”¶è—åˆ†äº«"],"content":"ä»æ•°ç»„ä¸­æŸ¥æ‰¾ç‰¹å®šå…ƒç´  const fruits = [ { type: \"Banana\", color: \"Yellow\" }, { type: \"Apple\", color: \"Green\" } ]; // LONGER FORM let yellowFruit; for (let i = 0; i \u003c fruits.length; ++i) { if (fruits[i].color === \"Yellow\") { yellowFruit = fruits[i]; } } // SHORTHAND yellowFruit = fruits.find((fruit) =\u003e fruit.color === \"Yellow\"); ä½¿ç”¨find()æ–¹æ³•æŸ¥æ‰¾åŒ¹é…ç‰¹å®šæ¡ä»¶çš„å…ƒç´  ","date":"2022-11-26","objectID":"/%E4%B8%80%E4%BA%9B%E7%AE%80%E6%B4%81%E7%9A%84js%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5/:10:0","tags":["JavaScript"],"title":"ä¸€äº›ç®€æ´çš„JSä»£ç ç‰‡æ®µ","uri":"/%E4%B8%80%E4%BA%9B%E7%AE%80%E6%B4%81%E7%9A%84js%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5/"},{"categories":["æ”¶è—åˆ†äº«"],"content":"å¯¹è±¡å±æ€§èµ‹å€¼ const name = \"Luis\", city = \"Paris\", age = 43, favoriteFood = \"Spaghetti\"; // LONGER FORM const person = { name: name, city: city, age: age, favoriteFood: favoriteFood }; // SHORTHAND const person = { name, city, age, favoriteFood }; ä½ æ˜¯å¦å¸Œæœ›å¯¹è±¡é”®ä¸å€¼å…·æœ‰ç›¸åŒçš„åç§°ï¼Ÿä½ å¯ä»¥çœç•¥å¯¹è±¡æ–‡å­—æ¥æ‰§è¡Œæ­¤æ“ä½œ ","date":"2022-11-26","objectID":"/%E4%B8%80%E4%BA%9B%E7%AE%80%E6%B4%81%E7%9A%84js%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5/:11:0","tags":["JavaScript"],"title":"ä¸€äº›ç®€æ´çš„JSä»£ç ç‰‡æ®µ","uri":"/%E4%B8%80%E4%BA%9B%E7%AE%80%E6%B4%81%E7%9A%84js%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5/"},{"categories":["æ”¶è—åˆ†äº«"],"content":"å‹ç¼© For å¾ªç¯ const numbers = [1, 2, 3, 4, 5]; // LONGER FORM for(let i = 0; i \u003c numbers.length; i++){ console.log(numbers[i]); } // SHORTHAND numbers.forEach(number =\u003e console.log(number)); ä½¿ç”¨å†…ç½®forEach()æ–¹æ³•é€šè¿‡ä¸€è¡Œä»£ç å¾ªç¯éå†æ•°ç»„ ","date":"2022-11-26","objectID":"/%E4%B8%80%E4%BA%9B%E7%AE%80%E6%B4%81%E7%9A%84js%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5/:12:0","tags":["JavaScript"],"title":"ä¸€äº›ç®€æ´çš„JSä»£ç ç‰‡æ®µ","uri":"/%E4%B8%80%E4%BA%9B%E7%AE%80%E6%B4%81%E7%9A%84js%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5/"},{"categories":["æ”¶è—åˆ†äº«"],"content":"é»˜è®¤åŠŸèƒ½å‚æ•° // LONG FORM function pickUp(fruit) { if(fruit === undefined){ console.log(\"I picked up a Banana\"); } else { console.log(`I picked up a ${fruit}`); } } // SHORTHAND function pickUp(fruit = \"Banana\") { console.log(`I picked up a ${fruit}`) } pickUp(\"Mango\"); // -\u003e I picked up a Mango pickUp(); // -\u003e I picked up a Banana å¯ä»¥ä¸ºå‡½æ•°å‚æ•°æä¾›é»˜è®¤å€¼ ","date":"2022-11-26","objectID":"/%E4%B8%80%E4%BA%9B%E7%AE%80%E6%B4%81%E7%9A%84js%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5/:13:0","tags":["JavaScript"],"title":"ä¸€äº›ç®€æ´çš„JSä»£ç ç‰‡æ®µ","uri":"/%E4%B8%80%E4%BA%9B%E7%AE%80%E6%B4%81%E7%9A%84js%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5/"},{"categories":["æ”¶è—åˆ†äº«"],"content":"å°†å¯¹è±¡çš„å€¼æ”¶é›†åˆ°æ•°ç»„ä¸­ const info = { name: \"Matt\", country: \"Finland\", age: 35 }; // LONGER FORM let data = []; for (let key in info) { data.push(info[key]); } // SHORTHAND const data = Object.values(info); Object.values()å°†å¯¹è±¡çš„æ‰€æœ‰å€¼æ”¶é›†åˆ°ä¸€ä¸ªæ–°æ•°ç»„ä¸­ ","date":"2022-11-26","objectID":"/%E4%B8%80%E4%BA%9B%E7%AE%80%E6%B4%81%E7%9A%84js%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5/:14:0","tags":["JavaScript"],"title":"ä¸€äº›ç®€æ´çš„JSä»£ç ç‰‡æ®µ","uri":"/%E4%B8%80%E4%BA%9B%E7%AE%80%E6%B4%81%E7%9A%84js%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5/"},{"categories":["æ”¶è—åˆ†äº«"],"content":"æ£€æŸ¥ä¸€ä¸ªé¡¹ç›®æ˜¯å¦å­˜åœ¨äºæ•°ç»„ä¸­ let numbers = [1, 2, 3]; // LONGER FORM const hasNumber1 = numbers.indexOf(1) \u003e -1 // -\u003e True // SHORTHAND/CLEANER APPROACH const hasNumber1 = numbers.includes(1) // -\u003e True å¯ä»¥ä½¿ç”¨ includes() æ–¹æ³•ï¼Œè€Œä¸æ˜¯ä½¿ç”¨ indexOf() æ–¹æ³•æ¥æ£€æŸ¥å…ƒç´ æ˜¯å¦åœ¨æ•°ç»„ä¸­ ","date":"2022-11-26","objectID":"/%E4%B8%80%E4%BA%9B%E7%AE%80%E6%B4%81%E7%9A%84js%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5/:15:0","tags":["JavaScript"],"title":"ä¸€äº›ç®€æ´çš„JSä»£ç ç‰‡æ®µ","uri":"/%E4%B8%80%E4%BA%9B%E7%AE%80%E6%B4%81%E7%9A%84js%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5/"},{"categories":["æ”¶è—åˆ†äº«"],"content":"å‹ç¼©å¤šä¸ªæ¡ä»¶ const num = 1; // LONGER FORM if(num == 1 || num == 2 || num == 3){ console.log(\"Yay\"); } // SHORTHAND if([1,2,3].includes(num)){ console.log(\"Yay\"); } é¿å…ä½¿ç”¨é•¿|| æ£€æŸ¥å¤šä¸ªæ¡ä»¶é“¾ï¼Œä½ å¯ä»¥ä½¿ç”¨ä½ åˆšåˆšåœ¨ä¸Šä¸€ä¸ªæŠ€å·§ä¸­å­¦åˆ°çš„ä¸œè¥¿â€”â€”å³ï¼Œä½¿ç”¨ includes() æ–¹æ³• ","date":"2022-11-26","objectID":"/%E4%B8%80%E4%BA%9B%E7%AE%80%E6%B4%81%E7%9A%84js%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5/:16:0","tags":["JavaScript"],"title":"ä¸€äº›ç®€æ´çš„JSä»£ç ç‰‡æ®µ","uri":"/%E4%B8%80%E4%BA%9B%E7%AE%80%E6%B4%81%E7%9A%84js%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5/"},{"categories":["æ”¶è—åˆ†äº«"],"content":"æŒ‡æ•°è¿ç®—ç¬¦ // LONGER FORM Math.pow(4,2); // 16 Math.pow(2,3); // 8 // SHORTHAND 4**2 // 16 2**3 // 8 ","date":"2022-11-26","objectID":"/%E4%B8%80%E4%BA%9B%E7%AE%80%E6%B4%81%E7%9A%84js%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5/:17:0","tags":["JavaScript"],"title":"ä¸€äº›ç®€æ´çš„JSä»£ç ç‰‡æ®µ","uri":"/%E4%B8%80%E4%BA%9B%E7%AE%80%E6%B4%81%E7%9A%84js%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5/"},{"categories":["æ”¶è—åˆ†äº«"],"content":"Math.floor() ç®€å†™ // LONG FORM Math.floor(5.25) // -\u003e 5.0 // SHORTHAND ~~5.25 // -\u003e 5.0 ","date":"2022-11-26","objectID":"/%E4%B8%80%E4%BA%9B%E7%AE%80%E6%B4%81%E7%9A%84js%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5/:18:0","tags":["JavaScript"],"title":"ä¸€äº›ç®€æ´çš„JSä»£ç ç‰‡æ®µ","uri":"/%E4%B8%80%E4%BA%9B%E7%AE%80%E6%B4%81%E7%9A%84js%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5/"},{"categories":["æ”¶è—åˆ†äº«"],"content":"ç”¨ä¸€è¡Œä»£ç åˆ†é…å¤šä¸ªå€¼ let num1, num2; // LONGER FORM num1 = 10; num2 = 100; // SHORTHAND [num1, num2] = [10, 100]; student = { name: \"Matt\", age: 29, }; // LONGER FORM let name = student.name; let age = student.age; // SHORTHAND let { name, age } = student; ","date":"2022-11-26","objectID":"/%E4%B8%80%E4%BA%9B%E7%AE%80%E6%B4%81%E7%9A%84js%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5/:19:0","tags":["JavaScript"],"title":"ä¸€äº›ç®€æ´çš„JSä»£ç ç‰‡æ®µ","uri":"/%E4%B8%80%E4%BA%9B%E7%AE%80%E6%B4%81%E7%9A%84js%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5/"},{"categories":["æ”¶è—åˆ†äº«"],"content":"ä»urlè·å–å‚æ•°å¹¶è½¬ä¸ºå¯¹è±¡ const getParameters = URL =\u003e JSON.parse(`{\"${decodeURI(URL.split(\"?\")[1]).replace(/\"/g, '\\\\\"').replace(/\u0026/g, '\",\"').replace(/=/g, '\":\"')}\"}` ) getParameters(\"https://www.google.com.hk/search?q=js+md\u0026newwindow=1\"); // {q: 'js+md', newwindow: '1'} ","date":"2022-11-26","objectID":"/%E4%B8%80%E4%BA%9B%E7%AE%80%E6%B4%81%E7%9A%84js%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5/:20:0","tags":["JavaScript"],"title":"ä¸€äº›ç®€æ´çš„JSä»£ç ç‰‡æ®µ","uri":"/%E4%B8%80%E4%BA%9B%E7%AE%80%E6%B4%81%E7%9A%84js%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5/"},{"categories":["æ”¶è—åˆ†äº«"],"content":"æ£€æŸ¥å¯¹è±¡æ˜¯å¦ä¸ºç©º const isEmpty = obj =\u003e Reflect.ownKeys(obj).length === 0 \u0026\u0026 obj.constructor === Object; isEmpty({}) // true isEmpty({a:\"not empty\"}) //false ","date":"2022-11-26","objectID":"/%E4%B8%80%E4%BA%9B%E7%AE%80%E6%B4%81%E7%9A%84js%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5/:21:0","tags":["JavaScript"],"title":"ä¸€äº›ç®€æ´çš„JSä»£ç ç‰‡æ®µ","uri":"/%E4%B8%80%E4%BA%9B%E7%AE%80%E6%B4%81%E7%9A%84js%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5/"},{"categories":["æ”¶è—åˆ†äº«"],"content":"åè½¬å­—ç¬¦ä¸² const reverse = str =\u003e str.split('').reverse().join(''); reverse('this is reverse'); // esrever si siht ","date":"2022-11-26","objectID":"/%E4%B8%80%E4%BA%9B%E7%AE%80%E6%B4%81%E7%9A%84js%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5/:22:0","tags":["JavaScript"],"title":"ä¸€äº›ç®€æ´çš„JSä»£ç ç‰‡æ®µ","uri":"/%E4%B8%80%E4%BA%9B%E7%AE%80%E6%B4%81%E7%9A%84js%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5/"},{"categories":["æ”¶è—åˆ†äº«"],"content":"ç”Ÿæˆéšæœºåå…­è¿›åˆ¶ const randomHexColor = () =\u003e `#${Math.floor(Math.random() * 0xffffff).toString(16).padEnd(6, \"0\")}` console.log(randomHexColor()); // #a2ce5b ","date":"2022-11-26","objectID":"/%E4%B8%80%E4%BA%9B%E7%AE%80%E6%B4%81%E7%9A%84js%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5/:23:0","tags":["JavaScript"],"title":"ä¸€äº›ç®€æ´çš„JSä»£ç ç‰‡æ®µ","uri":"/%E4%B8%80%E4%BA%9B%E7%AE%80%E6%B4%81%E7%9A%84js%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5/"},{"categories":["æ”¶è—åˆ†äº«"],"content":"æ£€æŸ¥å½“å‰é€‰é¡¹å¡æ˜¯å¦åœ¨åå° const isTabActive = () =\u003e !document.hidden; isTabActive() // true|false ","date":"2022-11-26","objectID":"/%E4%B8%80%E4%BA%9B%E7%AE%80%E6%B4%81%E7%9A%84js%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5/:24:0","tags":["JavaScript"],"title":"ä¸€äº›ç®€æ´çš„JSä»£ç ç‰‡æ®µ","uri":"/%E4%B8%80%E4%BA%9B%E7%AE%80%E6%B4%81%E7%9A%84js%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5/"},{"categories":["æ”¶è—åˆ†äº«"],"content":"æ£€æµ‹å…ƒç´ æ˜¯å¦å¤„äºç„¦ç‚¹ const elementIsInFocus = (el) =\u003e (el === document.activeElement); elementIsInFocus(anyElement) // å…ƒç´ å¤„äºç„¦ç‚¹è¿”å›trueï¼Œåä¹‹è¿”å›false ","date":"2022-11-26","objectID":"/%E4%B8%80%E4%BA%9B%E7%AE%80%E6%B4%81%E7%9A%84js%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5/:25:0","tags":["JavaScript"],"title":"ä¸€äº›ç®€æ´çš„JSä»£ç ç‰‡æ®µ","uri":"/%E4%B8%80%E4%BA%9B%E7%AE%80%E6%B4%81%E7%9A%84js%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5/"},{"categories":["æ”¶è—åˆ†äº«"],"content":"æ£€æŸ¥è®¾å¤‡ç±»å‹ const judgeDeviceType = () =\u003e /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|OperaMini/i.test(navigator.userAgent) ? 'Mobile' : 'PC'; judgeDeviceType() // PC | Mobile ","date":"2022-11-26","objectID":"/%E4%B8%80%E4%BA%9B%E7%AE%80%E6%B4%81%E7%9A%84js%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5/:26:0","tags":["JavaScript"],"title":"ä¸€äº›ç®€æ´çš„JSä»£ç ç‰‡æ®µ","uri":"/%E4%B8%80%E4%BA%9B%E7%AE%80%E6%B4%81%E7%9A%84js%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5/"},{"categories":["æ”¶è—åˆ†äº«"],"content":"æ–‡å­—å¤åˆ¶åˆ°å‰ªè´´æ¿ const copyText = async (text) =\u003e await navigator.clipboard.writeText(text) copyText('å•è¡Œä»£ç  å‰ç«¯ä¸–ç•Œ') ","date":"2022-11-26","objectID":"/%E4%B8%80%E4%BA%9B%E7%AE%80%E6%B4%81%E7%9A%84js%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5/:27:0","tags":["JavaScript"],"title":"ä¸€äº›ç®€æ´çš„JSä»£ç ç‰‡æ®µ","uri":"/%E4%B8%80%E4%BA%9B%E7%AE%80%E6%B4%81%E7%9A%84js%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5/"},{"categories":["æ”¶è—åˆ†äº«"],"content":"è·å–é€‰å®šçš„æ–‡æœ¬ const getSelectedText = () =\u003e window.getSelection().toString(); getSelectedText(); ","date":"2022-11-26","objectID":"/%E4%B8%80%E4%BA%9B%E7%AE%80%E6%B4%81%E7%9A%84js%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5/:28:0","tags":["JavaScript"],"title":"ä¸€äº›ç®€æ´çš„JSä»£ç ç‰‡æ®µ","uri":"/%E4%B8%80%E4%BA%9B%E7%AE%80%E6%B4%81%E7%9A%84js%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5/"},{"categories":["æ”¶è—åˆ†äº«"],"content":"æŸ¥è¯¢æŸå¤©æ˜¯å¦ä¸ºå·¥ä½œæ—¥ const isWeekday = (date) =\u003e date.getDay() % 6 !== 0; isWeekday(new Date(2022, 03, 11)) ","date":"2022-11-26","objectID":"/%E4%B8%80%E4%BA%9B%E7%AE%80%E6%B4%81%E7%9A%84js%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5/:29:0","tags":["JavaScript"],"title":"ä¸€äº›ç®€æ´çš„JSä»£ç ç‰‡æ®µ","uri":"/%E4%B8%80%E4%BA%9B%E7%AE%80%E6%B4%81%E7%9A%84js%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5/"},{"categories":["æ”¶è—åˆ†äº«"],"content":"è½¬æ¢åæ°/æ‘„æ° // åæ°æ¸©åº¦è½¬æ¢ä¸ºæ‘„æ°æ¸©åº¦ const fahrenheitToCelsius = (fahrenheit) =\u003e (fahrenheit - 32) * 5/9; fahrenheitToCelsius(50); // 10 // æ‘„æ°æ¸©åº¦è½¬åæ°æ¸©åº¦ const celsiusToFahrenheit = (celsius) =\u003e celsius * 9/5 + 32; celsiusToFahrenheit(100) // 212 ","date":"2022-11-26","objectID":"/%E4%B8%80%E4%BA%9B%E7%AE%80%E6%B4%81%E7%9A%84js%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5/:30:0","tags":["JavaScript"],"title":"ä¸€äº›ç®€æ´çš„JSä»£ç ç‰‡æ®µ","uri":"/%E4%B8%80%E4%BA%9B%E7%AE%80%E6%B4%81%E7%9A%84js%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5/"},{"categories":["æ”¶è—åˆ†äº«"],"content":"ä¸¤æ—¥æœŸä¹‹é—´ç›¸å·®çš„å¤©æ•° const dayDiff = (date1, date2) =\u003e Math.ceil(Math.abs(date1.getTime() - date2.getTime()) / 86400000); dayDiff(new Date(\"2021-10-21\"), new Date(\"2022-02-12\")) // Result: 114 ","date":"2022-11-26","objectID":"/%E4%B8%80%E4%BA%9B%E7%AE%80%E6%B4%81%E7%9A%84js%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5/:31:0","tags":["JavaScript"],"title":"ä¸€äº›ç®€æ´çš„JSä»£ç ç‰‡æ®µ","uri":"/%E4%B8%80%E4%BA%9B%E7%AE%80%E6%B4%81%E7%9A%84js%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5/"},{"categories":["æ”¶è—åˆ†äº«"],"content":"å°† RGB è½¬æ¢ä¸ºåå…­è¿›åˆ¶ const rgbToHex = (r, g, b) =\u003e \"#\" + ((1 \u003c\u003c 24) + (r \u003c\u003c 16) + (g \u003c\u003c 8) + b).toString(16).slice(1); rgbToHex(255, 255, 255); // #ffffff ","date":"2022-11-26","objectID":"/%E4%B8%80%E4%BA%9B%E7%AE%80%E6%B4%81%E7%9A%84js%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5/:32:0","tags":["JavaScript"],"title":"ä¸€äº›ç®€æ´çš„JSä»£ç ç‰‡æ®µ","uri":"/%E4%B8%80%E4%BA%9B%E7%AE%80%E6%B4%81%E7%9A%84js%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5/"},{"categories":["æ”¶è—åˆ†äº«"],"content":"è®¡ç®—æ•°ç»„å¹³å‡å€¼ const average = (arr) =\u003e arr.reduce((a, b) =\u003e a + b) / arr.length; average([1,9,18,36]) //16 ","date":"2022-11-26","objectID":"/%E4%B8%80%E4%BA%9B%E7%AE%80%E6%B4%81%E7%9A%84js%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5/:33:0","tags":["JavaScript"],"title":"ä¸€äº›ç®€æ´çš„JSä»£ç ç‰‡æ®µ","uri":"/%E4%B8%80%E4%BA%9B%E7%AE%80%E6%B4%81%E7%9A%84js%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5/"},{"categories":["æ”¶è—åˆ†äº«"],"content":"åœ¨ç¼–å†™æ•°æ®åº“æ–‡æ¡£æ—¶ï¼Œæˆ‘ä»¬å¸¸å¸¸éœ€è¦å†™è¡¨ç»“æ„æ–‡æ¡£ï¼Œè¿™æ—¶å€™å°±éœ€è¦ä¸€äº›æ–¹æ³•æ¥èŠ‚çº¦æˆ‘ä»¬å†™æ–‡æ¡£çš„æ—¶é—´ æˆ‘é€šè¿‡ç½‘ç»œä¸Šçš„èµ„æ–™ï¼Œæ€»ç»“äº† MySQL åŠ SQL Server çš„é€šè¿‡SQLè¯­å¥å¯¼å‡ºæ•°æ®åº“è¡¨ç»“æ„çš„æ–¹æ³• ","date":"2022-11-26","objectID":"/%E9%80%9A%E8%BF%87sql%E5%AF%BC%E5%87%BA%E6%95%B0%E6%8D%AE%E5%BA%93%E8%A1%A8%E7%BB%93%E6%9E%84/:0:0","tags":["SQL"],"title":"é€šè¿‡SQLå¯¼å‡ºæ•°æ®åº“è¡¨ç»“æ„","uri":"/%E9%80%9A%E8%BF%87sql%E5%AF%BC%E5%87%BA%E6%95%B0%E6%8D%AE%E5%BA%93%E8%A1%A8%E7%BB%93%E6%9E%84/"},{"categories":["æ”¶è—åˆ†äº«"],"content":"MySQL SELECT COLUMN_NAME åˆ—å, COLUMN_TYPE æ•°æ®ç±»å‹, DATA_TYPE å­—æ®µç±»å‹, CHARACTER_MAXIMUM_LENGTH é•¿åº¦, IS_NULLABLE æ˜¯å¦ä¸ºç©º, COLUMN_DEFAULT é»˜è®¤å€¼, COLUMN_COMMENT å¤‡æ³¨ FROM INFORMATION_SCHEMA.COLUMNS WHERE table_schema = 'æ•°æ®åº“åç§°' -- æ•°æ®åº“åç§° AND table_name = 'è¡¨å' -- è¡¨å -- å¦‚æœä¸å†™çš„è¯ï¼Œé»˜è®¤ä¼šæŸ¥è¯¢å‡ºæ‰€æœ‰è¡¨ä¸­çš„æ•°æ®ï¼Œè¿™æ ·å¯èƒ½å°±åˆ†ä¸æ¸…åˆ°åº•å“ªäº›å­—æ®µæ˜¯å“ªå¼ è¡¨ä¸­çš„äº†ï¼Œæ‰€ä»¥è¿˜æ˜¯å»ºè®®å†™ä¸Šè¦å¯¼å‡ºçš„ååç§° ","date":"2022-11-26","objectID":"/%E9%80%9A%E8%BF%87sql%E5%AF%BC%E5%87%BA%E6%95%B0%E6%8D%AE%E5%BA%93%E8%A1%A8%E7%BB%93%E6%9E%84/:1:0","tags":["SQL"],"title":"é€šè¿‡SQLå¯¼å‡ºæ•°æ®åº“è¡¨ç»“æ„","uri":"/%E9%80%9A%E8%BF%87sql%E5%AF%BC%E5%87%BA%E6%95%B0%E6%8D%AE%E5%BA%93%E8%A1%A8%E7%BB%93%E6%9E%84/"},{"categories":["æ”¶è—åˆ†äº«"],"content":"SQL Server SELECT è¡¨å = Case When A.colorder=1 Then D.name Else '' End, è¡¨è¯´æ˜ = Case When A.colorder=1 Then isnull(F.value,'') Else '' End, å­—æ®µåºå· = A.colorder, å­—æ®µå = A.name, å­—æ®µè¯´æ˜ = isnull(G.[value],''), æ ‡è¯† = Case When COLUMNPROPERTY( A.id,A.name,'IsIdentity')=1 Then 'âˆš'Else '' End, ä¸»é”® = Case When exists(SELECT 1 FROM sysobjects Where xtype='PK' and parent_obj=A.id and name in ( SELECT name FROM sysindexes WHERE indid in( SELECT indid FROM sysindexkeys WHERE id = A.id AND colid=A.colid))) then 'âˆš' else '' end, ç±»å‹ = B.name, å ç”¨å­—èŠ‚æ•° = A.Length, é•¿åº¦ = COLUMNPROPERTY(A.id,A.name,'PRECISION'), å°æ•°ä½æ•° = isnull(COLUMNPROPERTY(A.id,A.name,'Scale'),0), å…è®¸ç©º = Case When A.isnullable=1 Then 'âˆš'Else '' End, é»˜è®¤å€¼ = isnull(E.Text,'') FROM syscolumns A Left Join systypes B On A.xusertype=B.xusertype Inner Join sysobjects D On A.id=D.id and D.xtype='U' and D.name\u003c\u003e'dtproperties' Left Join syscomments E on A.cdefault=E.id Left Join sys.extended_properties G on A.id=G.major_id and A.colid=G.minor_id Left Join sys.extended_properties F On D.id=F.major_id and F.minor_id=0 where d.name='è¡¨å' --å¦‚æœåªæŸ¥è¯¢æŒ‡å®šè¡¨,åŠ ä¸Šæ­¤æ¡ä»¶ Order By A.id,A.colorder ","date":"2022-11-26","objectID":"/%E9%80%9A%E8%BF%87sql%E5%AF%BC%E5%87%BA%E6%95%B0%E6%8D%AE%E5%BA%93%E8%A1%A8%E7%BB%93%E6%9E%84/:2:0","tags":["SQL"],"title":"é€šè¿‡SQLå¯¼å‡ºæ•°æ®åº“è¡¨ç»“æ„","uri":"/%E9%80%9A%E8%BF%87sql%E5%AF%BC%E5%87%BA%E6%95%B0%E6%8D%AE%E5%BA%93%E8%A1%A8%E7%BB%93%E6%9E%84/"},{"categories":["æ”¶è—åˆ†äº«"],"content":"å¦‚ç”µè„‘è®¾ç½®äº†ç½‘ç»œä»£ç†ï¼Œä¼šå¯¼è‡´ä¸€äº›è½¯ä»¶å·¥å…·ä¸èƒ½æ­£å¸¸å·¥ä½œã€‚æŸ¥æ‰¾äº†ç½‘ä¸Šè®¸å¤šè§£å†³æ–¹æ¡ˆï¼Œæ€»ç»“å¦‚ä¸‹ã€‚ ","date":"2022-11-26","objectID":"/%E8%AE%BE%E7%BD%AE%E4%BB%A3%E7%90%86%E5%90%8E%E9%9C%80%E8%A6%81%E6%B3%A8%E6%84%8F%E7%9A%84%E4%BA%8B/:0:0","tags":["ç½‘ç»œä»£ç†"],"title":"è®¾ç½®ä»£ç†åéœ€è¦æ³¨æ„çš„äº‹","uri":"/%E8%AE%BE%E7%BD%AE%E4%BB%A3%E7%90%86%E5%90%8E%E9%9C%80%E8%A6%81%E6%B3%A8%E6%84%8F%E7%9A%84%E4%BA%8B/"},{"categories":["æ”¶è—åˆ†äº«"],"content":"Git è®¾ç½®å…¨å±€Configä»£ç† git config --global http.proxy http://server:port git config --global https.proxy http://server:port git config --global http.https://github.com.proxy http://server:port git config --global https.https://github.com.proxy http://server:port å»é™¤ä»£ç†è®¾ç½® git config --global --unset http.proxy git config --global --unset https.proxy git config --global --unset http.https://github.com.proxy git config --global --unset https.https://github.com.proxy å½“æˆ‘ä½¿ç”¨è¿™ç§æ–¹å¼æ—¶æ²¡æœ‰æ•ˆæœ ä½¿ç”¨cloneæ—¶é…ç½®ä»£ç† git clone -c http.proxy=\"server:port\" https://github.com/LesanOuO/lesan-homepage.git ","date":"2022-11-26","objectID":"/%E8%AE%BE%E7%BD%AE%E4%BB%A3%E7%90%86%E5%90%8E%E9%9C%80%E8%A6%81%E6%B3%A8%E6%84%8F%E7%9A%84%E4%BA%8B/:1:0","tags":["ç½‘ç»œä»£ç†"],"title":"è®¾ç½®ä»£ç†åéœ€è¦æ³¨æ„çš„äº‹","uri":"/%E8%AE%BE%E7%BD%AE%E4%BB%A3%E7%90%86%E5%90%8E%E9%9C%80%E8%A6%81%E6%B3%A8%E6%84%8F%E7%9A%84%E4%BA%8B/"},{"categories":["æ”¶è—åˆ†äº«"],"content":"NPM å…¨å±€è®¾ç½®ä»£ç† npm config set proxy http://server:port é…ç½®httpsä»£ç†ï¼ˆè®¾ç½®äº†proxyå°±ä¸éœ€è¦è®¾ç½®https-proxyï¼‰ npm config set https-proxy http://server:port å¦‚æœéœ€è¦ä»£ç†ç”¨æˆ·åå’Œå¯†ç  npm config set proxy http://username:password@server:port npm confit set https-proxy http://username:password@server:port å–æ¶ˆä»£ç† npm config delete proxy npm config delete https-proxy npm config set proxy null npm config set https-proxy null ","date":"2022-11-26","objectID":"/%E8%AE%BE%E7%BD%AE%E4%BB%A3%E7%90%86%E5%90%8E%E9%9C%80%E8%A6%81%E6%B3%A8%E6%84%8F%E7%9A%84%E4%BA%8B/:2:0","tags":["ç½‘ç»œä»£ç†"],"title":"è®¾ç½®ä»£ç†åéœ€è¦æ³¨æ„çš„äº‹","uri":"/%E8%AE%BE%E7%BD%AE%E4%BB%A3%E7%90%86%E5%90%8E%E9%9C%80%E8%A6%81%E6%B3%A8%E6%84%8F%E7%9A%84%E4%BA%8B/"},{"categories":["æ”¶è—åˆ†äº«"],"content":"Maven éœ€è¦åœ¨settings.xmlä¸­é…ç½®proxiesèŠ‚ç‚¹ ... \u003cproxies\u003e \u003cproxy\u003e \u003cid\u003eoptional\u003c/id\u003e \u003cactive\u003etrue\u003c/active\u003e \u003cprotocol\u003ehttp\u003c/protocol\u003e \u003chost\u003e127.0.0.1\u003c/host\u003e \u003cport\u003e8888\u003c/port\u003e \u003c/proxy\u003e \u003c/proxies\u003e ... ","date":"2022-11-26","objectID":"/%E8%AE%BE%E7%BD%AE%E4%BB%A3%E7%90%86%E5%90%8E%E9%9C%80%E8%A6%81%E6%B3%A8%E6%84%8F%E7%9A%84%E4%BA%8B/:3:0","tags":["ç½‘ç»œä»£ç†"],"title":"è®¾ç½®ä»£ç†åéœ€è¦æ³¨æ„çš„äº‹","uri":"/%E8%AE%BE%E7%BD%AE%E4%BB%A3%E7%90%86%E5%90%8E%E9%9C%80%E8%A6%81%E6%B3%A8%E6%84%8F%E7%9A%84%E4%BA%8B/"},{"categories":["å®è·µç¬”è®°"],"content":"æœ¬ç¯‡ä¸»è¦ä»‹ç»çš„å°±æ˜¯ controller å±‚çš„ä¸€äº›ä¼˜é›…æŠ€å·§ï¼Œä¸€ä¸ªå®Œæ•´çš„åç«¯è¯·æ±‚ç”±4éƒ¨åˆ†ç»„æˆï¼š1. æ¥å£åœ°å€(ä¹Ÿå°±æ˜¯URLåœ°å€)ã€2. è¯·æ±‚æ–¹å¼(ä¸€èˆ¬å°±æ˜¯getã€setï¼Œå½“ç„¶è¿˜æœ‰putã€delete)ã€3. è¯·æ±‚æ•°æ®(requestï¼Œæœ‰headè·Ÿbody)ã€4. å“åº”æ•°æ®(response) æœ¬ç¯‡å°†è§£å†³ä»¥ä¸‹3ä¸ªé—®é¢˜ï¼š å½“æ¥æ”¶åˆ°è¯·æ±‚æ—¶ï¼Œå¦‚ä½•ä¼˜é›…çš„æ ¡éªŒå‚æ•° è¿”å›å“åº”æ•°æ®è¯¥å¦‚ä½•ç»Ÿä¸€çš„è¿›è¡Œå¤„ç† æ¥æ”¶åˆ°è¯·æ±‚ï¼Œå¤„ç†ä¸šåŠ¡é€»è¾‘æ—¶æŠ›å‡ºäº†å¼‚å¸¸åˆè¯¥å¦‚ä½•å¤„ç† ","date":"2022-11-26","objectID":"/%E8%AE%A9controller%E5%B1%82%E4%BB%A3%E7%A0%81%E6%9B%B4%E4%BC%98%E9%9B%85/:0:0","tags":["SpringBoot"],"title":"è®©Controllerå±‚ä»£ç æ›´ä¼˜é›…","uri":"/%E8%AE%A9controller%E5%B1%82%E4%BB%A3%E7%A0%81%E6%9B%B4%E4%BC%98%E9%9B%85/"},{"categories":["å®è·µç¬”è®°"],"content":"ç»Ÿä¸€è¿”å›æ ¼å¼ ","date":"2022-11-26","objectID":"/%E8%AE%A9controller%E5%B1%82%E4%BB%A3%E7%A0%81%E6%9B%B4%E4%BC%98%E9%9B%85/:1:0","tags":["SpringBoot"],"title":"è®©Controllerå±‚ä»£ç æ›´ä¼˜é›…","uri":"/%E8%AE%A9controller%E5%B1%82%E4%BB%A3%E7%A0%81%E6%9B%B4%E4%BC%98%E9%9B%85/"},{"categories":["å®è·µç¬”è®°"],"content":"å°è£…ResultVo é¦–å…ˆå…ˆå®šä¹‰ä¸€ä¸ªçŠ¶æ€ç çš„æ¥å£ï¼Œæ‰€æœ‰çŠ¶æ€ç éƒ½éœ€è¦å®ç°å®ƒï¼Œæœ‰äº†æ ‡å‡†æ‰å¥½åšäº‹ public interface StatusCode { public int getCode(); public String getMsg(); } ä¸å‰ç«¯è§„å®šå¥½è‡ªå®šä¹‰çŠ¶æ€ç  @Getter @AllArgsConstructor @NoArgsConstructor public enum ResultCode implements StatusCode { SUCCESS(1000, \"è¯·æ±‚æˆåŠŸ\"), FAILED(1001, \"è¯·æ±‚å¤±è´¥\"), VALIDATE_ERROR(1002, \"å‚æ•°æ ¡éªŒå¤±è´¥\"), RESPONSE_PACK_ERROR(1003, \"responseè¿”å›åŒ…è£…å¤±è´¥\"); private int code; private String msg; } å®šä¹‰ ResultVo åŒ…è£…ç±» @Data public class ResultVo { // çŠ¶æ€ç  private int code; // çŠ¶æ€ä¿¡æ¯ private String msg; // è¿”å›å¯¹è±¡ private Object data; // æ‰‹åŠ¨è®¾ç½®è¿”å›vo public ResultVo(int code, String msg, Object data) { this.code = code; this.msg = msg; this.data = data; } // é»˜è®¤è¿”å›æˆåŠŸçŠ¶æ€ç ï¼Œæ•°æ®å¯¹è±¡ public ResultVo(Object data) { this.code = ResultCode.SUCCESS.getCode(); this.msg = ResultCode.SUCCESS.getMsg(); this.data = data; } // è¿”å›æŒ‡å®šçŠ¶æ€ç ï¼Œæ•°æ®å¯¹è±¡ public ResultVo(StatusCode statusCode, Object data) { this.code = statusCode.getCode(); this.msg = statusCode.getMsg(); this.data = data; } // åªè¿”å›çŠ¶æ€ç  public ResultVo(StatusCode statusCode) { this.code = statusCode.getCode(); this.msg = statusCode.getMsg(); this.data = null; } } ","date":"2022-11-26","objectID":"/%E8%AE%A9controller%E5%B1%82%E4%BB%A3%E7%A0%81%E6%9B%B4%E4%BC%98%E9%9B%85/:1:1","tags":["SpringBoot"],"title":"è®©Controllerå±‚ä»£ç æ›´ä¼˜é›…","uri":"/%E8%AE%A9controller%E5%B1%82%E4%BB%A3%E7%A0%81%E6%9B%B4%E4%BC%98%E9%9B%85/"},{"categories":["å®è·µç¬”è®°"],"content":"ç»Ÿä¸€æ ¡éªŒ ","date":"2022-11-26","objectID":"/%E8%AE%A9controller%E5%B1%82%E4%BB%A3%E7%A0%81%E6%9B%B4%E4%BC%98%E9%9B%85/:2:0","tags":["SpringBoot"],"title":"è®©Controllerå±‚ä»£ç æ›´ä¼˜é›…","uri":"/%E8%AE%A9controller%E5%B1%82%E4%BB%A3%E7%A0%81%E6%9B%B4%E4%BC%98%E9%9B%85/"},{"categories":["å®è·µç¬”è®°"],"content":"å¼•å…¥ä¾èµ– ç”±äºæ–°ç‰ˆ Spring Boot å·²ä¸å†…ç½®æ ¡éªŒæ¨¡å—ï¼Œéœ€è‡ªå·±å¼•å…¥ç›¸åº”çš„åŒ… \u003cdependency\u003e \u003cgroupId\u003eorg.springframework.boot\u003c/groupId\u003e \u003cartifactId\u003espring-boot-starter-validation\u003c/artifactId\u003e \u003c/dependency\u003e ","date":"2022-11-26","objectID":"/%E8%AE%A9controller%E5%B1%82%E4%BB%A3%E7%A0%81%E6%9B%B4%E4%BC%98%E9%9B%85/:2:1","tags":["SpringBoot"],"title":"è®©Controllerå±‚ä»£ç æ›´ä¼˜é›…","uri":"/%E8%AE%A9controller%E5%B1%82%E4%BB%A3%E7%A0%81%E6%9B%B4%E4%BC%98%E9%9B%85/"},{"categories":["å®è·µç¬”è®°"],"content":"é€šè¿‡@Validatedå®ç°å‚æ•°æ ¡éªŒ @Data public class AddUserVo { @NotNull(message = \"ç”¨æˆ·åä¸èƒ½ä¸ºç©º\") private String userName; @Length(min = 8, message = \"å¯†ç æœ€å°‘éœ€è¦8ä½\") private String password; private Integer age; } @PostMapping(\"/addUser\") public AddUserVo addUser(@Validated AddUserVo userVo) { return userVo; } è™½ç„¶æˆåŠŸæ ¡éªŒäº†å‚æ•°ï¼Œä¹Ÿè¿”å›äº†å¼‚å¸¸ï¼Œä½†æ˜¯è¿”å›çš„å¼‚å¸¸ä¸ç¬¦åˆé¢„æœŸï¼Œä¸æˆ‘ä»¬ä¹‹å‰å®šä¹‰äº†çš„ç»Ÿä¸€çŠ¶æ€ç ä¸ä¸€è‡´ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦è¿›è¡Œä¼˜åŒ–ä¸€ä¸‹ï¼Œæ¯æ¬¡å‡ºç°å¼‚å¸¸çš„æ—¶å€™ï¼Œè‡ªåŠ¨æŠŠçŠ¶æ€ç å†™å¥½ã€‚ ","date":"2022-11-26","objectID":"/%E8%AE%A9controller%E5%B1%82%E4%BB%A3%E7%A0%81%E6%9B%B4%E4%BC%98%E9%9B%85/:2:2","tags":["SpringBoot"],"title":"è®©Controllerå±‚ä»£ç æ›´ä¼˜é›…","uri":"/%E8%AE%A9controller%E5%B1%82%E4%BB%A3%E7%A0%81%E6%9B%B4%E4%BC%98%E9%9B%85/"},{"categories":["å®è·µç¬”è®°"],"content":"ä¼˜åŒ–å¼‚å¸¸å¤„ç† æˆ‘ä»¬å¯ä»¥é€šè¿‡æ§åˆ¶å°çœ‹å‡ºï¼Œæ ¡éªŒå‚æ•°æŠ›å‡ºäº†ä»€ä¹ˆå¼‚å¸¸ Resolved [org.springframework.validation.BindException: org.springframework.validation.BeanPropertyBindingResult: 1 errors æˆ‘ä»¬çœ‹åˆ°ä»£ç æŠ›å‡ºäº†org.springframework.validation.BindExceptionçš„ç»‘å®šå¼‚å¸¸ï¼Œå› æ­¤æˆ‘ä»¬çš„æ€è·¯å°±æ˜¯AOPæ‹¦æˆªæ‰€æœ‰controllerï¼Œç„¶åå¼‚å¸¸çš„æ—¶å€™ç»Ÿä¸€æ‹¦æˆªèµ·æ¥ï¼Œè¿›è¡Œå°è£…ï¼ ä½†æ˜¯æˆ‘ä»¬å¯ä»¥é€šè¿‡ Spring Boot æä¾›çš„@RestControllerAdviceæ¥å¢å¼ºæ‰€æœ‰@RestControllerï¼Œç„¶åä½¿ç”¨@ExceptionHandleræ³¨è§£ï¼Œå°±å¯ä»¥æ‹¦æˆªåˆ°å¯¹åº”çš„å¼‚å¸¸ã€‚è¿™æ ·å¼€å‘èµ·æ¥å°±æ–¹ä¾¿å¾ˆå¤šã€‚ è¿™é‡Œæˆ‘ä»¬å°±æ‹¦æˆªBindException.classå°±å¥½äº†ã€‚æœ€ååœ¨è¿”å›ä¹‹å‰ï¼Œæˆ‘ä»¬å¯¹å¼‚å¸¸ä¿¡æ¯è¿›è¡ŒåŒ…è£…ä¸€ä¸‹ï¼ŒåŒ…è£…æˆResultVoï¼Œå½“ç„¶è¦è·Ÿä¸ŠResultCode.VALIDATE_ERRORçš„å¼‚å¸¸çŠ¶æ€ç ã€‚ @RestControllerAdvice public class ControllerExceptionAdvice { @ExceptionHandler({BindException.class}) public ResultVo MethodArgumentNotValidExceptionHandler(BindException e){ // ä»å¼‚å¸¸å¯¹è±¡ä¸­æ‹¿åˆ°ObjectErrorå¯¹è±¡ ObjectError objectError = e.getBindingResult().getAllErrors().get(0); return new ResultVo(ResultCode.VALIDATE_ERROR, objectError.getDefaultMessage()); } } ","date":"2022-11-26","objectID":"/%E8%AE%A9controller%E5%B1%82%E4%BB%A3%E7%A0%81%E6%9B%B4%E4%BC%98%E9%9B%85/:2:3","tags":["SpringBoot"],"title":"è®©Controllerå±‚ä»£ç æ›´ä¼˜é›…","uri":"/%E8%AE%A9controller%E5%B1%82%E4%BB%A3%E7%A0%81%E6%9B%B4%E4%BC%98%E9%9B%85/"},{"categories":["å®è·µç¬”è®°"],"content":"ç»Ÿä¸€å“åº” ","date":"2022-11-26","objectID":"/%E8%AE%A9controller%E5%B1%82%E4%BB%A3%E7%A0%81%E6%9B%B4%E4%BC%98%E9%9B%85/:3:0","tags":["SpringBoot"],"title":"è®©Controllerå±‚ä»£ç æ›´ä¼˜é›…","uri":"/%E8%AE%A9controller%E5%B1%82%E4%BB%A3%E7%A0%81%E6%9B%B4%E4%BC%98%E9%9B%85/"},{"categories":["å®è·µç¬”è®°"],"content":"ç»Ÿä¸€åŒ…è£…å“åº” å‰é¢å†™çš„ResultVoå¯¼è‡´æ¯ä¸€ä¸ªæ¥å£éƒ½éœ€è¦å†™new ResultVo(data)ï¼Œè¿™æ ·å¼€å‘å°å“¥è‚¯å®šä¸ä¹æ„äº†ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦ä¼˜åŒ–å°è£…ï¼Œè®©AOPæ‹¦æˆªæ‰€æœ‰Controllerï¼Œç„¶åå†è‡ªåŠ¨åŒ…ä¸€å±‚ResultVoã€‚ ä½†æ˜¯ Spring Boot ä¸­ä¹Ÿæœ‰ç°æˆçš„ä¾›æˆ‘ä»¬ä½¿ç”¨ï¼š @RestControllerAdvice public class ControllerResponseAdvice implements ResponseBodyAdvice\u003cObject\u003e { @Override public boolean supports(MethodParameter returnType, Class\u003c? extends HttpMessageConverter\u003c?\u003e\u003e converterType) { // responseæ˜¯ResultVoç±»å‹ï¼Œæˆ–è€…æ³¨é‡Šäº†NotControllerResponseAdviceéƒ½ä¸è¿›è¡ŒåŒ…è£… return !(returnType.getParameterType().isAssignableFrom(ResultVo.class)); } @Override public Object beforeBodyWrite(Object body, MethodParameter returnType, MediaType selectedContentType, Class\u003c? extends HttpMessageConverter\u003c?\u003e\u003e selectedConverterType, ServerHttpRequest request, ServerHttpResponse response) { // Stringç±»å‹ä¸èƒ½ç›´æ¥åŒ…è£… if (returnType.getGenericParameterType().equals(String.class)){ ObjectMapper objectMapper = new ObjectMapper(); try { // å°†æ•°æ®åŒ…è£…åœ¨ResultVoé‡Œåè½¬æ¢ä¸ºjsonä¸²è¿›è¡Œè¿”å› return objectMapper.writeValueAsString(new ResultVo(body)); } catch (JsonProcessingException e) { throw new RuntimeException(e); } } // å¦åˆ™ç›´æ¥åŒ…è£…æˆResultVoè¿”å› return new ResultVo(body); } } @RestControllerAdvice(basePackages = {\"com.example\"})è‡ªåŠ¨æ‰«æäº†æ‰€æœ‰æŒ‡å®šåŒ…ä¸‹çš„controllerï¼Œåœ¨Responseæ—¶è¿›è¡Œç»Ÿä¸€å¤„ç† é‡å†™supportsæ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå½“è¿”å›ç±»å‹å·²ç»æ˜¯ResultVoäº†ï¼Œé‚£å°±ä¸éœ€è¦å°è£…äº†ï¼Œå½“ä¸ç­‰ä¸ResultVoæ—¶æ‰è¿›è¡Œè°ƒç”¨beforeBodyWriteæ–¹æ³•ï¼Œè·Ÿè¿‡æ»¤å™¨çš„æ•ˆæœæ˜¯ä¸€æ ·çš„ æœ€åé‡å†™æˆ‘ä»¬çš„å°è£…æ–¹æ³•beforeBodyWriteï¼Œæ³¨æ„é™¤äº†Stringçš„è¿”å›å€¼æœ‰ç‚¹ç‰¹æ®Šï¼Œæ— æ³•ç›´æ¥å°è£…æˆjsonï¼Œæˆ‘ä»¬éœ€è¦è¿›è¡Œç‰¹æ®Šå¤„ç†ï¼Œå…¶ä»–çš„ç›´æ¥new ResultVo(data);å°±okäº† ","date":"2022-11-26","objectID":"/%E8%AE%A9controller%E5%B1%82%E4%BB%A3%E7%A0%81%E6%9B%B4%E4%BC%98%E9%9B%85/:3:1","tags":["SpringBoot"],"title":"è®©Controllerå±‚ä»£ç æ›´ä¼˜é›…","uri":"/%E8%AE%A9controller%E5%B1%82%E4%BB%A3%E7%A0%81%E6%9B%B4%E4%BC%98%E9%9B%85/"},{"categories":["å®è·µç¬”è®°"],"content":"NOTç»Ÿä¸€å“åº” æœ‰çš„æ—¶å€™ï¼Œæˆ‘ä»¬çš„ç³»ç»Ÿä¸éœ€è¦åŒ…è£…ä¸€å±‚ç»Ÿä¸€å“åº”ï¼Œæ¯”å¦‚é¡¹ç›®ä¸­é›†æˆäº†ä¸€ä¸ªå¥åº·æ£€æµ‹çš„åŠŸèƒ½ï¼Œè¿™ä¸ªæ—¶å€™æ˜¯ä¸éœ€è¦åŒ…è£…ç»Ÿä¸€å“åº”çš„ï¼Œå¯¼è‡´æœ€åæ¥å£å¯¹åº”ä¸ä¸Šã€‚ @GetMapping(\"/health\") public String health(Integer id) { return \"success\"; } å› ä¸ºç™¾åˆ†ä¹‹99çš„è¯·æ±‚è¿˜æ˜¯éœ€è¦åŒ…è£…çš„ï¼Œåªæœ‰ä¸ªåˆ«ä¸éœ€è¦ï¼Œå†™åœ¨åŒ…è£…çš„è¿‡æ»¤å™¨å§ï¼Ÿåˆä¸æ˜¯å¾ˆå¥½ç»´æŠ¤ï¼Œé‚£å°±åŠ ä¸ªæ³¨è§£å¥½äº†ã€‚æ‰€æœ‰ä¸éœ€è¦åŒ…è£…çš„å°±åŠ ä¸Šè¿™ä¸ªæ³¨è§£ã€‚ @Target({ElementType.METHOD}) @Retention(RetentionPolicy.RUNTIME) public @interface NotControllerResponseAdvice { } ç„¶ååœ¨æˆ‘ä»¬çš„å¢å¼ºè¿‡æ»¤æ–¹æ³•ä¸Šè¿‡æ»¤åŒ…å«è¿™ä¸ªæ³¨è§£çš„æ–¹æ³• @RestControllerAdvice public class ControllerResponseAdvice implements ResponseBodyAdvice\u003cObject\u003e { @Override public boolean supports(MethodParameter returnType, Class\u003c? extends HttpMessageConverter\u003c?\u003e\u003e converterType) { // responseæ˜¯ResultVoç±»å‹ï¼Œæˆ–è€…æ³¨é‡Šäº†NotControllerResponseAdviceéƒ½ä¸è¿›è¡ŒåŒ…è£… return !(returnType.getParameterType().isAssignableFrom(ResultVo.class) || returnType.hasMethodAnnotation(NotControllerResponseAdvice.class)); } ... æœ€åå°±åœ¨ä¸éœ€è¦åŒ…è£…çš„æ–¹æ³•ä¸ŠåŠ ä¸Šæ³¨è§£ @GetMapping(\"/health\") @NotControllerResponseAdvice public String health(Integer id) { return \"success\"; } ","date":"2022-11-26","objectID":"/%E8%AE%A9controller%E5%B1%82%E4%BB%A3%E7%A0%81%E6%9B%B4%E4%BC%98%E9%9B%85/:3:2","tags":["SpringBoot"],"title":"è®©Controllerå±‚ä»£ç æ›´ä¼˜é›…","uri":"/%E8%AE%A9controller%E5%B1%82%E4%BB%A3%E7%A0%81%E6%9B%B4%E4%BC%98%E9%9B%85/"},{"categories":["å®è·µç¬”è®°"],"content":"ç»Ÿä¸€å¼‚å¸¸ æ¯ä¸ªç³»ç»Ÿéƒ½ä¼šæœ‰è‡ªå·±çš„ä¸šåŠ¡å¼‚å¸¸ï¼Œæ¯”å¦‚åº“å­˜ä¸èƒ½å°äº0å­ç±»çš„ï¼Œè¿™ç§å¼‚å¸¸å¹¶éç¨‹åºå¼‚å¸¸ï¼Œè€Œæ˜¯ä¸šåŠ¡æ“ä½œå¼•å‘çš„å¼‚å¸¸ï¼Œæˆ‘ä»¬ä¹Ÿéœ€è¦è¿›è¡Œè§„èŒƒçš„ç¼–æ’ä¸šåŠ¡å¼‚å¸¸çŠ¶æ€ç ï¼Œå¹¶ä¸”å†™ä¸€ä¸ªä¸“é—¨å¤„ç†çš„å¼‚å¸¸ç±»ï¼Œæœ€åé€šè¿‡åˆšåˆšå­¦ä¹ è¿‡çš„å¼‚å¸¸æ‹¦æˆªç»Ÿä¸€è¿›è¡Œå¤„ç†ï¼Œä»¥åŠæ‰“æ—¥å¿—ã€‚ å¼‚å¸¸çŠ¶æ€ç æšä¸¾ï¼Œæ—¢ç„¶æ˜¯çŠ¶æ€ç ï¼Œé‚£å°±è‚¯å®šè¦å®ç°æˆ‘ä»¬çš„æ ‡å‡†æ¥å£StatusCode @Getter @NoArgsConstructor @AllArgsConstructor public enum AppCode implements StatusCode { APP_ERROR(2000, \"ä¸šåŠ¡å¼‚å¸¸\"); private int code; private String msg; } å¼‚å¸¸ç±» @Getter public class APIException extends RuntimeException { private int code; private String msg; // æ‰‹åŠ¨è®¾ç½®å¼‚å¸¸ public APIException(StatusCode statusCode, String message) { // messageç”¨äºç”¨æˆ·è®¾ç½®æŠ›å‡ºé”™è¯¯è¯¦æƒ…ï¼Œä¾‹å¦‚ï¼šå½“å‰ä»·æ ¼-5ï¼Œå°äº0 super(message); // çŠ¶æ€ç  this.code = statusCode.getCode(); // çŠ¶æ€ç é…å¥—çš„msg this.msg = statusCode.getMsg(); } // é»˜è®¤å¼‚å¸¸ä½¿ç”¨APP_ERRORçŠ¶æ€ç  public APIException(String message) { super(message); this.code = AppCode.APP_ERROR.getCode(); this.msg = AppCode.APP_ERROR.getMsg(); } } æœ€åè¿›è¡Œç»Ÿä¸€å¼‚å¸¸çš„æ‹¦æˆª @RestControllerAdvice public class ControllerExceptionAdvice { @ExceptionHandler({BindException.class}) public ResultVo MethodArgumentNotValidExceptionHandler(BindException e){ // ä»å¼‚å¸¸å¯¹è±¡ä¸­æ‹¿åˆ°ObjectErrorå¯¹è±¡ ObjectError objectError = e.getBindingResult().getAllErrors().get(0); return new ResultVo(ResultCode.VALIDATE_ERROR, objectError.getDefaultMessage()); } @ExceptionHandler(APIException.class) public ResultVo APIExceptionHandler(APIException e) { // log.error(e.getMessage(), e); ç”±äºè¿˜æ²¡é›†æˆæ—¥å¿—æ¡†æ¶ï¼Œæš‚ä¸”æ”¾ç€ï¼Œå†™ä¸ŠTODO return new ResultVo(e.getCode(), e.getMsg(), e.getMessage()); } } æœ€åä½¿ç”¨ï¼Œæˆ‘ä»¬çš„ä»£ç åªéœ€è¦è¿™ä¹ˆå†™ @GetMapping(\"/error\") public String error(Integer id) { if (id.equals(0)){ throw new APIException(\"ç”¨æˆ·ä¸å­˜åœ¨\"); } return \"error\"; } å°±ä¼šè‡ªåŠ¨æŠ›å‡ºAppCode.APP_ERRORçŠ¶æ€ç çš„å“åº”ï¼Œå¹¶ä¸”å¸¦ä¸Šå¼‚å¸¸è¯¦ç»†ä¿¡æ¯ç”¨æˆ·ä¸å­˜åœ¨ã€‚ ","date":"2022-11-26","objectID":"/%E8%AE%A9controller%E5%B1%82%E4%BB%A3%E7%A0%81%E6%9B%B4%E4%BC%98%E9%9B%85/:4:0","tags":["SpringBoot"],"title":"è®©Controllerå±‚ä»£ç æ›´ä¼˜é›…","uri":"/%E8%AE%A9controller%E5%B1%82%E4%BB%A3%E7%A0%81%E6%9B%B4%E4%BC%98%E9%9B%85/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"å•çº¿ç¨‹ä¸å¤šçº¿ç¨‹å¯ä»¥çœ‹ä½œæ˜¯ï¼š å•çº¿ç¨‹ä¸ºåœ¨ä¸€ä¸ªå•å‘è¡Œé©¶çš„é“è·¯ä¸Šï¼Œæ¯è¾†æ±½è½¦éƒ½éµå®ˆäº¤é€šè§„åˆ™ å¤šçº¿ç¨‹ä¸ºå¤šæ¡è½¦é“ï¼Œè¿™æ ·åœ¨åŒä¸€æ—¶é—´å†…ï¼Œé€šè¡Œçš„è½¦è¾†æ•°è¿œè¿œå¤§äºå•è½¦é“ ç„¶è€Œæ‰©å……äº†è½¦é“åé—®é¢˜å°±æ²¡é‚£ä¹ˆç®€å•äº†ï¼Œè½¦é“ä¸€æ—¦å¤šèµ·æ¥åŠ å¡çš„åœºæ™¯å°±ä¼šè¶Šæ¥è¶Šå¤šï¼Œå‡ºç°ç¢°æ’åä¹Ÿä¼šå½±å“æ•´æ¡é©¬è·¯çš„é€šè¡Œæ•ˆç‡ï¼Œè¿™æ ·å¤šè½¦é“å°±ä¸ä¸€å®šæ¯”å•è½¦é“æ›´å¿«äº† ä¸ºäº†è§£å†³æ±½è½¦é¢‘ç¹å˜é“åŠ å¡çš„é—®é¢˜ï¼Œå¯ä»¥é€šè¿‡åœ¨è½¦é“é—´å¢åŠ æŠ¤æ æ¥è§„èŒƒç®¡ç† åœ¨ç¨‹åºä¸­å¤„ç†å¤šçº¿ç¨‹å¸¦æ¥çš„é—®é¢˜å½’çº³èµ·æ¥å°±ä¸‰ç±»ï¼š çº¿ç¨‹å®‰å…¨é—®é¢˜ æ´»è·ƒæ€§é—®é¢˜ æ€§èƒ½é—®é¢˜ ","date":"2022-11-26","objectID":"/%E5%A4%9A%E7%BA%BF%E7%A8%8B%E4%B8%8B%E7%9A%84%E7%90%90%E4%BA%8B/:0:0","tags":["å¤šçº¿ç¨‹"],"title":"å¤šçº¿ç¨‹ä¸‹çš„çäº‹","uri":"/%E5%A4%9A%E7%BA%BF%E7%A8%8B%E4%B8%8B%E7%9A%84%E7%90%90%E4%BA%8B/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"çº¿ç¨‹å®‰å…¨é—®é¢˜ ","date":"2022-11-26","objectID":"/%E5%A4%9A%E7%BA%BF%E7%A8%8B%E4%B8%8B%E7%9A%84%E7%90%90%E4%BA%8B/:1:0","tags":["å¤šçº¿ç¨‹"],"title":"å¤šçº¿ç¨‹ä¸‹çš„çäº‹","uri":"/%E5%A4%9A%E7%BA%BF%E7%A8%8B%E4%B8%8B%E7%9A%84%E7%90%90%E4%BA%8B/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"åŸå­æ€§ æœ‰ä¸€ä¸ªéå¸¸ç»å…¸çš„ä¾‹å­ï¼Œæ¯”å¦‚ä»è´¦æˆ·Aå‘è´¦æˆ·Bè½¬1000å…ƒï¼Œé‚£ä¹ˆå¿…ç„¶åŒ…æ‹¬2ä¸ªæ“ä½œï¼šä»è´¦æˆ·Aå‡å»1000å…ƒï¼Œå¾€è´¦æˆ·BåŠ ä¸Š1000å…ƒï¼Œä¸¤ä¸ªæ“ä½œéƒ½æˆåŠŸæ‰æ„å‘³ç€ä¸€æ¬¡è½¬è´¦æœ€ç»ˆæˆåŠŸ è¯•æƒ³ä¸€ä¸‹ï¼Œå¦‚æœè¿™ä¸¤ä¸ªæ“ä½œä¸å…·å¤‡åŸå­æ€§ï¼Œä»Açš„è´¦æˆ·æ‰£å‡äº†1000å…ƒä¹‹åï¼Œæ“ä½œçªç„¶ç»ˆæ­¢äº†ï¼Œè´¦æˆ·Bæ²¡æœ‰å¢åŠ 1000å…ƒï¼Œé‚£é—®é¢˜å°±å¤§äº† é“¶è¡Œè½¬è´¦è¿™ä¸ªä¾‹å­æœ‰ä¸¤ä¸ªæ­¥éª¤ï¼Œå‡ºç°äº†æ„å¤–åå¯¼è‡´è½¬è´¦å¤±è´¥ï¼Œè¯´æ˜æ²¡æœ‰åŸå­æ€§ åŸå­æ€§ï¼šå³ä¸€ä¸ªæ“ä½œæˆ–è€…å¤šä¸ªæ“ä½œï¼Œè¦ä¹ˆå…¨éƒ¨æ‰§è¡Œå¹¶ä¸”æ‰§è¡Œçš„è¿‡ç¨‹ä¸ä¼šè¢«ä»»ä½•å› ç´ æ‰“æ–­ï¼Œè¦ä¹ˆå°±éƒ½ä¸æ‰§è¡Œ åŸå­æ“ä½œï¼šå³ä¸ä¼šè¢«çº¿ç¨‹è°ƒåº¦æœºåˆ¶æ‰“æ–­çš„æ“ä½œï¼Œæ²¡æœ‰ä¸Šä¸‹æ–‡åˆ‡æ¢ åœ¨å¹¶å‘ç¼–ç¨‹ä¸­å¾ˆå¤šæ“ä½œéƒ½ä¸æ˜¯åŸå­æ“ä½œï¼Œå‡ºä¸ªå°é¢˜ç›®ï¼š i = 0; // æ“ä½œ1 i++; // æ“ä½œ2 i = j; // æ“ä½œ3 i = i + 1; // æ“ä½œ4 ä¸Šé¢è¿™å››ä¸ªæ“ä½œä¸­æœ‰å“ªäº›æ˜¯åŸå­æ“ä½œï¼Œå“ªäº›ä¸æ˜¯ï¼Ÿä¸ç†Ÿæ‚‰çš„äººå¯èƒ½è®¤ä¸ºè¿™äº›éƒ½æ˜¯åŸå­æ“ä½œï¼Œå…¶å®åªæœ‰æ“ä½œ1æ˜¯åŸå­æ“ä½œ æ“ä½œ1ï¼šå¯¹åŸºæœ¬æ•°æ®ç±»å‹å˜é‡çš„èµ‹å€¼æ˜¯åŸå­æ“ä½œ æ“ä½œ2ï¼šåŒ…å«ä¸‰ä¸ªæ“ä½œï¼Œè¯»å–içš„å€¼ï¼Œå°†iåŠ 1ï¼Œå°†å€¼èµ‹ç»™i æ“ä½œ3ï¼šè¯»å–jçš„å€¼ï¼Œå°†jçš„å€¼èµ‹ç»™i æ“ä½œ4ï¼šåŒ…å«ä¸‰ä¸ªæ“ä½œï¼Œè¯»å–içš„å€¼ï¼Œå°†iåŠ 1ï¼Œå°†å€¼èµ‹ç»™i åœ¨å•çº¿ç¨‹ç¯å¢ƒä¸‹ä¸Šè¿°å››ä¸ªæ“ä½œéƒ½ä¸ä¼šå‡ºç°é—®é¢˜ï¼Œä½†æ˜¯åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ï¼Œå¦‚æœä¸é€šè¿‡åŠ é”æ“ä½œï¼Œå¾€å¾€å¯èƒ½å¾—åˆ°æ„æ–™ä¹‹å¤–çš„å€¼ åœ¨Javaè¯­è¨€ä¸­é€šè¿‡å¯ä»¥ä½¿ç”¨synchronizeæˆ–è€…lockæ¥ä¿è¯åŸå­æ€§ ","date":"2022-11-26","objectID":"/%E5%A4%9A%E7%BA%BF%E7%A8%8B%E4%B8%8B%E7%9A%84%E7%90%90%E4%BA%8B/:1:1","tags":["å¤šçº¿ç¨‹"],"title":"å¤šçº¿ç¨‹ä¸‹çš„çäº‹","uri":"/%E5%A4%9A%E7%BA%BF%E7%A8%8B%E4%B8%8B%E7%9A%84%E7%90%90%E4%BA%8B/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"å¯è§æ€§ å¯è§æ€§ï¼šæŒ‡å½“å¤šä¸ªçº¿ç¨‹è®¿é—®åŒä¸€ä¸ªå˜é‡æ—¶ï¼Œä¸€ä¸ªçº¿ç¨‹ä¿®æ”¹äº†è¿™ä¸ªå˜é‡çš„å€¼ï¼Œå…¶ä»–çº¿ç¨‹èƒ½å¤Ÿç«‹å³çœ‹å¾—åˆ°ä¿®æ”¹çš„å€¼ class Test { int i = 50; int j = 0; public void update() { // çº¿ç¨‹1æ‰§è¡Œ i = 100; } public int get() { // çº¿ç¨‹2æ‰§è¡Œ j = i; return j; } } çº¿ç¨‹1æ‰§è¡Œupdateæ–¹æ³•å°† i èµ‹å€¼ä¸º100ï¼Œä¸€èˆ¬æƒ…å†µä¸‹çº¿ç¨‹1ä¼šåœ¨è‡ªå·±çš„å·¥ä½œå†…å­˜ä¸­å®Œæˆèµ‹å€¼æ“ä½œï¼Œå´æ²¡æœ‰åŠæ—¶å°†æ–°å€¼åˆ·æ–°åˆ°ä¸»å†…å­˜ä¸­ è¿™ä¸ªæ—¶å€™çº¿ç¨‹2æ‰§è¡Œgetæ–¹æ³•ï¼Œé¦–å…ˆä¼šä»ä¸»å†…å­˜ä¸­è¯»å–içš„å€¼ï¼Œç„¶ååŠ è½½åˆ°è‡ªå·±çš„å·¥ä½œå†…å­˜ä¸­ï¼Œè¿™ä¸ªæ—¶å€™è¯»å–åˆ°içš„å€¼æ˜¯50ï¼Œå†å°†50èµ‹å€¼ç»™jï¼Œæœ€åè¿”å›jçš„å€¼å°±æ˜¯50äº†ã€‚åŸæœ¬æœŸæœ›è¿”å›100ï¼Œç»“æœè¿”å›50ï¼Œè¿™å°±æ˜¯å¯è§æ€§é—®é¢˜ï¼Œçº¿ç¨‹1å¯¹å˜é‡iè¿›è¡Œäº†ä¿®æ”¹ï¼Œçº¿ç¨‹2æ²¡æœ‰ç«‹å³çœ‹åˆ°içš„æ–°å€¼ å¦‚ä¸Šå›¾æ¯ä¸ªçº¿ç¨‹éƒ½æœ‰å±äºè‡ªå·±çš„å·¥ä½œå†…å­˜ï¼Œå·¥ä½œå†…å­˜å’Œä¸»å†…å­˜é—´éœ€è¦é€šè¿‡storeå’Œloadç­‰è¿›è¡Œäº¤äº’ ä¸ºäº†è§£å†³å¤šçº¿ç¨‹å¯è§æ€§é—®é¢˜ï¼ŒJavaè¯­è¨€æä¾›äº†volatileè¿™ä¸ªå…³é”®å­—ã€‚å½“ä¸€ä¸ªå…±äº«å˜é‡è¢«volatileä¿®é¥°æ—¶ï¼Œå®ƒä¼šä¿è¯ä¿®æ”¹çš„å€¼ä¼šç«‹å³è¢«æ›´æ–°åˆ°ä¸»å­˜ï¼Œå½“æœ‰å…¶ä»–çº¿ç¨‹éœ€è¦è¯»å–æ—¶ï¼Œå®ƒä¼šå»å†…å­˜ä¸­è¯»å–æ–°å€¼ã€‚è€Œæ™®é€šå…±äº«å˜é‡ä¸èƒ½ä¿è¯å¯è§æ€§ï¼Œå› ä¸ºå˜é‡è¢«ä¿®æ”¹åä»€ä¹ˆæ—¶å€™åˆ·å›åˆ°ä¸»å­˜æ˜¯ä¸ç¡®å®šçš„ï¼Œå¦å¤–ä¸€ä¸ªçº¿ç¨‹è¯»çš„å¯èƒ½å°±æ˜¯æ—§å€¼ å½“ç„¶Javaçš„é”æœºåˆ¶å¦‚synchronizeå’Œlockä¹Ÿæ˜¯å¯ä»¥ä¿è¯å¯è§æ€§çš„ï¼ŒåŠ é”å¯ä»¥ä¿è¯åœ¨åŒä¸€æ—¶åˆ»åªæœ‰ä¸€ä¸ªçº¿ç¨‹åœ¨æ‰§è¡ŒåŒæ­¥ä»£ç å—ï¼Œé‡Šæ”¾é”ä¹‹å‰ä¼šå°†å˜é‡åˆ·å›è‡³ä¸»å­˜ï¼Œè¿™æ ·ä¹Ÿå°±ä¿è¯äº†å¯è§æ€§ ","date":"2022-11-26","objectID":"/%E5%A4%9A%E7%BA%BF%E7%A8%8B%E4%B8%8B%E7%9A%84%E7%90%90%E4%BA%8B/:1:2","tags":["å¤šçº¿ç¨‹"],"title":"å¤šçº¿ç¨‹ä¸‹çš„çäº‹","uri":"/%E5%A4%9A%E7%BA%BF%E7%A8%8B%E4%B8%8B%E7%9A%84%E7%90%90%E4%BA%8B/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"æ´»è·ƒæ€§é—®é¢˜ ä¸Šé¢è®²åˆ°ä¸ºäº†è§£å†³å¯è§æ€§é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥é‡‡å–åŠ é”æ–¹å¼è§£å†³ï¼Œä½†æ˜¯å¦‚æœåŠ é”ä½¿ç”¨ä¸å½“ä¹Ÿå®¹æ˜“å¼•å…¥å…¶ä»–é—®é¢˜ï¼Œæ¯”å¦‚æ­»é” æ´»è·ƒæ€§æ˜¯æŒ‡æŸä»¶æ­£ç¡®çš„äº‹æƒ…æœ€ç»ˆä¼šå‘ç”Ÿï¼Œå½“æŸä¸ªæ“ä½œæ— æ³•ç»§ç»­ä¸‹å»çš„æ—¶å€™ï¼Œå°±ä¼šå‘ç”Ÿæ´»è·ƒæ€§é—®é¢˜ æ´»è·ƒæ€§é—®é¢˜ä¸€èˆ¬æœ‰è¿™æ ·å‡ ç±»ï¼šæ­»é”ï¼Œæ´»é”ï¼Œé¥¥é¥¿ é—®é¢˜ ","date":"2022-11-26","objectID":"/%E5%A4%9A%E7%BA%BF%E7%A8%8B%E4%B8%8B%E7%9A%84%E7%90%90%E4%BA%8B/:2:0","tags":["å¤šçº¿ç¨‹"],"title":"å¤šçº¿ç¨‹ä¸‹çš„çäº‹","uri":"/%E5%A4%9A%E7%BA%BF%E7%A8%8B%E4%B8%8B%E7%9A%84%E7%90%90%E4%BA%8B/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"æ­»é” æ­»é”æ˜¯æŒ‡å¤šä¸ªçº¿ç¨‹å› ä¸ºç¯å½¢çš„ç­‰å¾…é”çš„å…³ç³»è€Œæ°¸è¿œçš„é˜»å¡ä¸‹å» ","date":"2022-11-26","objectID":"/%E5%A4%9A%E7%BA%BF%E7%A8%8B%E4%B8%8B%E7%9A%84%E7%90%90%E4%BA%8B/:2:1","tags":["å¤šçº¿ç¨‹"],"title":"å¤šçº¿ç¨‹ä¸‹çš„çäº‹","uri":"/%E5%A4%9A%E7%BA%BF%E7%A8%8B%E4%B8%8B%E7%9A%84%E7%90%90%E4%BA%8B/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"æ´»é” æ­»é”æ˜¯ä¸¤ä¸ªçº¿ç¨‹éƒ½åœ¨ç­‰å¾…å¯¹æ–¹é‡Šæ”¾é”å¯¼è‡´é˜»å¡ã€‚è€Œæ´»é”çš„æ„æ€æ˜¯çº¿ç¨‹æ²¡æœ‰é˜»å¡ï¼Œè¿˜æ´»ç€å‘¢ã€‚ å½“å¤šä¸ªçº¿ç¨‹éƒ½åœ¨è¿è¡Œå¹¶ä¸”ä¿®æ”¹å„è‡ªçš„çŠ¶æ€ï¼Œè€Œå…¶ä»–çº¿ç¨‹å½¼æ­¤ä¾èµ–è¿™ä¸ªçŠ¶æ€ï¼Œå¯¼è‡´ä»»ä½•ä¸€ä¸ªçº¿ç¨‹éƒ½æ— æ³•ç»§ç»­æ‰§è¡Œï¼Œåªèƒ½é‡å¤ç€è‡ªèº«çš„åŠ¨ä½œå’Œä¿®æ”¹è‡ªèº«çš„çŠ¶æ€ï¼Œè¿™ç§åœºæ™¯å°±æ˜¯å‘ç”Ÿäº†æ´»é” å¦‚æœå¤§å®¶è¿˜æœ‰ç–‘æƒ‘ï¼Œé‚£æˆ‘å†ä¸¾ä¸€ä¸ªç”Ÿæ´»ä¸­çš„ä¾‹å­ï¼Œå¤§å®¶å¹³æ—¶åœ¨èµ°è·¯çš„æ—¶å€™ï¼Œè¿é¢èµ°æ¥ä¸€ä¸ªäººï¼Œä¸¤ä¸ªäººäº’ç›¸è®©è·¯ï¼Œä½†æ˜¯åˆåŒæ—¶èµ°åˆ°äº†ä¸€ä¸ªæ–¹å‘ï¼Œå¦‚æœä¸€ç›´è¿™æ ·é‡å¤ç€é¿è®©ï¼Œè¿™ä¿©äººå°±æ˜¯å‘ç”Ÿäº†æ´»é” ","date":"2022-11-26","objectID":"/%E5%A4%9A%E7%BA%BF%E7%A8%8B%E4%B8%8B%E7%9A%84%E7%90%90%E4%BA%8B/:2:2","tags":["å¤šçº¿ç¨‹"],"title":"å¤šçº¿ç¨‹ä¸‹çš„çäº‹","uri":"/%E5%A4%9A%E7%BA%BF%E7%A8%8B%E4%B8%8B%E7%9A%84%E7%90%90%E4%BA%8B/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"é¥¥é¥¿ å¦‚æœä¸€ä¸ªçº¿ç¨‹æ— å…¶ä»–å¼‚å¸¸å´è¿Ÿè¿Ÿä¸èƒ½ç»§ç»­è¿è¡Œï¼Œé‚£åŸºæœ¬æ˜¯å¤„äºé¥¥é¥¿çŠ¶æ€äº† å¸¸è§æœ‰å‡ ç§åœºæ™¯: é«˜ä¼˜å…ˆçº§çš„çº¿ç¨‹ä¸€ç›´åœ¨è¿è¡Œæ¶ˆè€—CPUï¼Œæ‰€æœ‰çš„ä½ä¼˜å…ˆçº§çº¿ç¨‹ä¸€ç›´å¤„äºç­‰å¾… ä¸€äº›çº¿ç¨‹è¢«æ°¸ä¹…å µå¡åœ¨ä¸€ä¸ªç­‰å¾…è¿›å…¥åŒæ­¥å—çš„çŠ¶æ€ï¼Œè€Œå…¶ä»–çº¿ç¨‹æ€»æ˜¯èƒ½åœ¨å®ƒä¹‹å‰æŒç»­åœ°å¯¹è¯¥åŒæ­¥å—è¿›è¡Œè®¿é—® æœ‰ä¸€ä¸ªéå¸¸ç»å…¸çš„é¥¥é¥¿é—®é¢˜å°±æ˜¯å“²å­¦å®¶ç”¨é¤é—®é¢˜ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œæœ‰äº”ä¸ªå“²å­¦å®¶åœ¨ç”¨é¤ï¼Œæ¯ä¸ªäººå¿…é¡»è¦åŒæ—¶æ‹¿ä¸¤æŠŠå‰å­æ‰å¯ä»¥å¼€å§‹å°±é¤ï¼Œå¦‚æœå“²å­¦å®¶1å’Œå“²å­¦å®¶3åŒæ—¶å¼€å§‹å°±é¤ï¼Œé‚£å“²å­¦å®¶2ã€4ã€5å°±å¾—é¥¿è‚šå­ç­‰å¾…äº† ","date":"2022-11-26","objectID":"/%E5%A4%9A%E7%BA%BF%E7%A8%8B%E4%B8%8B%E7%9A%84%E7%90%90%E4%BA%8B/:2:3","tags":["å¤šçº¿ç¨‹"],"title":"å¤šçº¿ç¨‹ä¸‹çš„çäº‹","uri":"/%E5%A4%9A%E7%BA%BF%E7%A8%8B%E4%B8%8B%E7%9A%84%E7%90%90%E4%BA%8B/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"æ€§èƒ½é—®é¢˜ å‰é¢è®²åˆ°äº†çº¿ç¨‹å®‰å…¨å’Œæ­»é”ã€æ´»é”è¿™äº›é—®é¢˜ä¼šå½±å“å¤šçº¿ç¨‹æ‰§è¡Œè¿‡ç¨‹ï¼Œå¦‚æœè¿™äº›éƒ½æ²¡æœ‰å‘ç”Ÿï¼Œå¤šçº¿ç¨‹å¹¶å‘ä¸€å®šæ¯”å•çº¿ç¨‹ä¸²è¡Œæ‰§è¡Œå¿«å—ï¼Œç­”æ¡ˆæ˜¯ä¸ä¸€å®šï¼Œå› ä¸ºå¤šçº¿ç¨‹æœ‰åˆ›å»ºçº¿ç¨‹å’Œçº¿ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢çš„å¼€é”€ åˆ›å»ºçº¿ç¨‹æ˜¯ç›´æ¥å‘ç³»ç»Ÿç”³è¯·èµ„æºçš„ï¼Œå¯¹æ“ä½œç³»ç»Ÿæ¥è¯´åˆ›å»ºä¸€ä¸ªçº¿ç¨‹çš„ä»£ä»·æ˜¯ååˆ†æ˜‚è´µçš„ï¼Œéœ€è¦ç»™å®ƒåˆ†é…å†…å­˜ã€åˆ—å…¥è°ƒåº¦ç­‰ çº¿ç¨‹åˆ›å»ºå®Œä¹‹åï¼Œè¿˜ä¼šé‡åˆ°çº¿ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢ CPUæ˜¯å¾ˆå®è´µçš„èµ„æºï¼Œé€Ÿåº¦ä¹Ÿéå¸¸å¿«ï¼Œä¸ºäº†ä¿è¯é›¨éœ²å‡æ²¾ï¼Œé€šå¸¸ä¼šç»™ä¸åŒçš„çº¿ç¨‹åˆ†é…æ—¶é—´ç‰‡ï¼Œå½“CPUä»æ‰§è¡Œä¸€ä¸ªçº¿ç¨‹åˆ‡æ¢åˆ°æ‰§è¡Œå¦ä¸€ä¸ªçº¿ç¨‹æ—¶ï¼ŒCPUéœ€è¦ä¿å­˜å½“å‰çº¿ç¨‹çš„æœ¬åœ°æ•°æ®ã€ç¨‹åºæŒ‡é’ˆç­‰çŠ¶æ€ï¼Œå¹¶åŠ è½½ä¸‹ä¸€ä¸ªè¦æ‰§è¡Œçš„çº¿ç¨‹çš„æœ¬åœ°æ•°æ®ã€ç¨‹åºæŒ‡é’ˆç­‰ï¼Œè¿™ä¸ªå¼€å…³è¢«ç§°ä¸ºä¸Šä¸‹æ–‡åˆ‡æ¢ ä¸€èˆ¬å‡å°‘ä¸Šä¸‹æ–‡åˆ‡æ¢çš„æ–¹æ³•æœ‰ï¼šæ— é”å¹¶å‘ç¼–ç¨‹ã€CAS ç®—æ³•ã€ä½¿ç”¨åç¨‹ç­‰ ","date":"2022-11-26","objectID":"/%E5%A4%9A%E7%BA%BF%E7%A8%8B%E4%B8%8B%E7%9A%84%E7%90%90%E4%BA%8B/:3:0","tags":["å¤šçº¿ç¨‹"],"title":"å¤šçº¿ç¨‹ä¸‹çš„çäº‹","uri":"/%E5%A4%9A%E7%BA%BF%E7%A8%8B%E4%B8%8B%E7%9A%84%E7%90%90%E4%BA%8B/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"æ€»ç»“ å¤šçº¿ç¨‹ç”¨å¥½äº†å¯ä»¥è®©ç¨‹åºçš„æ•ˆç‡æˆå€æå‡ï¼Œç”¨ä¸å¥½å¯èƒ½æ¯”å•çº¿ç¨‹è¿˜è¦æ…¢ ","date":"2022-11-26","objectID":"/%E5%A4%9A%E7%BA%BF%E7%A8%8B%E4%B8%8B%E7%9A%84%E7%90%90%E4%BA%8B/:4:0","tags":["å¤šçº¿ç¨‹"],"title":"å¤šçº¿ç¨‹ä¸‹çš„çäº‹","uri":"/%E5%A4%9A%E7%BA%BF%E7%A8%8B%E4%B8%8B%E7%9A%84%E7%90%90%E4%BA%8B/"},{"categories":["å®è·µç¬”è®°"],"content":"åŸºæœ¬ä½¿ç”¨ é™æ€æ–‡ä»¶ï¼ˆå¸¸è§çš„æœ‰HTMLï¼ŒCSSï¼Œå›¾ç‰‡å’ŒJSç­‰èµ„æºï¼‰å¯ä»¥é€šè¿‡ .NET Core åº”ç”¨ç›´æ¥æä¾›ç»™å®¢æˆ·ç«¯ã€‚è¿˜æœ‰ä¸€äº›æ¯”è¾ƒå¸¸ç”¨çš„æ–‡ä»¶ï¼ˆPDFæˆ–è€…ä¸€äº›éœ€è¦ä¸‹è½½çš„æ–‡ä»¶ï¼‰ä¹Ÿæ˜¯éœ€è¦é€šè¿‡é™æ€æ–‡ä»¶çš„æ–¹å¼æä¾›ä¸‹è½½çš„ï¼Œå¦‚æœæ²¡æœ‰æ­å»ºæ–‡ä»¶ç®¡ç†çš„æœåŠ¡å™¨çš„è¯ï¼Œé€šè¿‡é™æ€æ–‡ä»¶çš„æ–¹å¼ä¸‹è½½ä¹Ÿæ˜¯ä¸é”™çš„é€‰æ‹©ã€‚ é™æ€æ–‡ä»¶ä¸€èˆ¬ä½äºç½‘ç«™æ ¹ç›®å½•çš„ wwwroot æ–‡ä»¶å¤¹ä¸‹ï¼Œå¯ä»¥é€šè¿‡ç›¸å¯¹æ ¹çš„è·¯å¾„æ¥è®¿é—®æ–‡ä»¶å¤¹ä¸­çš„æ–‡ä»¶ï¼Œå¦‚ http://ip:port/filename ä½¿ç”¨é™æ€æ–‡ä»¶æœåŠ¡å‰ï¼Œéœ€è¦é…ç½®ä¸­é—´ä»¶ï¼ŒæŠŠé™æ€æ–‡ä»¶ä¸­é—´ä»¶åŠ å…¥åˆ°ç®¡é“ä¸­ã€‚é™æ€æ–‡ä»¶ä¸€èˆ¬ä¼šé»˜è®¤é…ç½®ï¼Œåœ¨Configureæ–¹æ³•ä¸­è°ƒç”¨app.UseStaticFiles()ã€‚app.UseStaticFiles() ä½¿å¾—web root(é»˜è®¤ä¸ºwwwroot)ä¸‹çš„æ–‡ä»¶å¯ä»¥è¢«è®¿é—®ã€‚åŒæ—¶å¯ä»¥é€šè¿‡UseStaticFilesæ–¹æ³•å°†å…¶ä»–ç›®å½•ä¸‹çš„å†…å®¹ä¹Ÿå¯ä»¥å‘å¤–æä¾›ï¼š // å‡å¦‚wwwrootå¤–é¢æœ‰ä¸€ä¸ªMyStaticFilesæ–‡ä»¶å¤¹ï¼Œè¦è®¿é—®æ–‡ä»¶å¤¹é‡Œé¢çš„èµ„æº app.UseStaticFiles(new StaticFileOptions() { FileProvider = new PhysicalFileProvider( Path.Combine(Directory.GetCurrentDirectory(), @\"MyStaticFiles\")), //ç”¨äºå®šä½èµ„æºçš„æ–‡ä»¶ç³»ç»Ÿ RequestPath = new PathString(\"/StaticFiles\") //è¯·æ±‚åœ°å€ }); // ç°åœ¨å¯ä»¥é€šè¿‡http://ip:port/StaticFiles/filename æ¥è®¿é—®æ–‡ä»¶å¤¹ä¸‹çš„å†…å®¹ ","date":"2022-07-17","objectID":"/dotnetcore%E4%B8%AD%E5%BC%80%E5%90%AF%E9%9D%99%E6%80%81%E6%96%87%E4%BB%B6%E8%AE%BF%E9%97%AE/:1:0","tags":[".NET"],"title":".NET Core ä¸­å¼€å¯é™æ€æ–‡ä»¶è®¿é—®","uri":"/dotnetcore%E4%B8%AD%E5%BC%80%E5%90%AF%E9%9D%99%E6%80%81%E6%96%87%E4%BB%B6%E8%AE%BF%E9%97%AE/"},{"categories":["å®è·µç¬”è®°"],"content":"é™æ€æ–‡ä»¶æˆæƒ é™æ€æ–‡ä»¶ç»„ä»¶é»˜è®¤ä¸æä¾›æˆæƒæ£€æŸ¥ã€‚ä»»ä½•é€šè¿‡é™æ€æ–‡ä»¶ä¸­é—´ä»¶è®¿é—®çš„æ–‡ä»¶éƒ½æ˜¯å…¬å¼€çš„ã€‚è¦æƒ³ç»™æ–‡ä»¶æˆæƒï¼Œå¯ä»¥å°†æ–‡ä»¶ä¿å­˜åœ¨wwwrootä¹‹å¤–ï¼Œå¹¶å°†ç›®å½•è®¾ç½®ä¸ºå¯è¢«é™æ€æ–‡ä»¶ä¸­é—´ä»¶èƒ½å¤Ÿè®¿é—®ï¼ŒåŒæ—¶é€šè¿‡ä¸€ä¸ªcontroller actionæ¥è®¿é—®æ–‡ä»¶ï¼Œåœ¨actionä¸­æˆæƒåè¿”å›FileResultã€‚ ","date":"2022-07-17","objectID":"/dotnetcore%E4%B8%AD%E5%BC%80%E5%90%AF%E9%9D%99%E6%80%81%E6%96%87%E4%BB%B6%E8%AE%BF%E9%97%AE/:2:0","tags":[".NET"],"title":".NET Core ä¸­å¼€å¯é™æ€æ–‡ä»¶è®¿é—®","uri":"/dotnetcore%E4%B8%AD%E5%BC%80%E5%90%AF%E9%9D%99%E6%80%81%E6%96%87%E4%BB%B6%E8%AE%BF%E9%97%AE/"},{"categories":["å®è·µç¬”è®°"],"content":"ç›®å½•æµè§ˆ ç›®å½•æµè§ˆå…è®¸ç½‘ç«™ç”¨æˆ·çœ‹åˆ°æŒ‡å®šç›®å½•ä¸‹çš„ç›®å½•å’Œæ–‡ä»¶åˆ—è¡¨ã€‚åŸºäºå®‰å…¨è€ƒè™‘ï¼Œé»˜è®¤æƒ…å†µä¸‹æ˜¯ç¦æ­¢ç›®å½•è®¿é—®åŠŸèƒ½ã€‚åœ¨Startupä¸­Configureæ–¹æ³•è°ƒç”¨UseDirectoryBrowseræ‰©å±•æ–¹æ³•å¯ä»¥å¼€å¯ç½‘ç»œåº”ç”¨ç›®å½•æµè§ˆï¼š public void Configure(IApplicationBuilder app, IHostingEnvironment env, ILoggerFactory loggerFactory) { app.UseStaticFiles(); app.UseDirectoryBrowser(new DirectoryBrowserOptions() { FileProvider = new PhysicalFileProvider( Path.Combine(Directory.GetCurrentDirectory(),@\"wwwroot\\images\")), RequestPath = new PathString(\"/MyImages\") //å¦‚æœä¸æŒ‡å®šRequestPathï¼Œä¼šå°†PhysicalFileProviderä¸­çš„è·¯å¾„å‚æ•°ä½œä¸ºé»˜è®¤æ–‡ä»¶å¤¹ï¼Œæ›¿æ¢æ‰wwwroot }); } ç„¶ååœ¨Startupä¸­CongigureServicesæ–¹æ³•è°ƒç”¨AddDirectoryBrowseræ‰©å±•æ–¹æ³•ï¼Œè¿™æ ·å°±å¯ä»¥é€šè¿‡è®¿é—®http://\u003capp\u003e/MyImagesæµè§ˆwwwroot/imagesæ–‡ä»¶å¤¹ä¸­çš„ç›®å½•ï¼Œä½†æ˜¯ä¸èƒ½è®¿é—®æ–‡ä»¶ï¼š è¦æƒ³è®¿é—®å…·ä½“æ–‡ä»¶éœ€è¦è°ƒç”¨UseStaticFilesé…ç½®ï¼š public void Configure(IApplicationBuilder app, IHostingEnvironment env, ILoggerFactory loggerFactory) { app.UseStaticFiles(); app.UseStaticFiles(new StaticFileOptions() { FileProvider = new PhysicalFileProvider( Path.Combine(Directory.GetCurrentDirectory(), @\"wwwroot\\images\")), //ç”¨äºå®šä½èµ„æºçš„æ–‡ä»¶ç³»ç»Ÿ RequestPath = new PathString(\"/MyImages\") }); app.UseDirectoryBrowser(new DirectoryBrowserOptions() { FileProvider = new PhysicalFileProvider( Path.Combine(Directory.GetCurrentDirectory(),@\"wwwroot\\images\")), RequestPath = new PathString(\"/MyImages\") }); } ","date":"2022-07-17","objectID":"/dotnetcore%E4%B8%AD%E5%BC%80%E5%90%AF%E9%9D%99%E6%80%81%E6%96%87%E4%BB%B6%E8%AE%BF%E9%97%AE/:3:0","tags":[".NET"],"title":".NET Core ä¸­å¼€å¯é™æ€æ–‡ä»¶è®¿é—®","uri":"/dotnetcore%E4%B8%AD%E5%BC%80%E5%90%AF%E9%9D%99%E6%80%81%E6%96%87%E4%BB%B6%E8%AE%BF%E9%97%AE/"},{"categories":["å®è·µç¬”è®°"],"content":"UseFileServer é€šè¿‡ UseFileServer é›†åˆäº†UseStaticFiles,UseDefaultFiles,UseDirectoryBrowserã€‚å¯ä»¥å®ç°ç±»ä¼¼æ–‡ä»¶æœåŠ¡å™¨çš„åŠŸèƒ½ è°ƒç”¨app.UseFileServer(); å¯ä»¥è·å¾—é™æ€æ–‡ä»¶å’Œé»˜è®¤æ–‡ä»¶ï¼Œä½†ä¸å…è®¸ç›´æ¥è®¿é—®ç›®å½•ã€‚éœ€è¦è°ƒç”¨app.UseFileServer(enableDirectoryBrowsing:true); æ‰èƒ½å¯ç”¨ç›®å½•æµè§ˆåŠŸèƒ½ã€‚ å¦‚æœæƒ³è¦è®¿é—®wwwrootä»¥å¤–çš„æ–‡ä»¶ï¼Œéœ€è¦é…ç½®ä¸€ä¸ªFileServerOptionså¯¹è±¡ public void Configure(IApplicationBuilder app, IHostingEnvironment env, ILoggerFactory loggerFactory) { app.UseStaticFiles();//å¦‚æœä¸è°ƒç”¨ï¼Œå°†ä¸ä¼šå¯åŠ¨é»˜è®¤åŠŸèƒ½ã€‚ app.UseFileServer(new FileServerOptions() { FileProvider = new PhysicalFileProvider( Path.Combine(Directory.GetCurrentDirectory(), @\"MyStaticFiles\")), RequestPath = new PathString(\"/StaticFiles\"), EnableDirectoryBrowsing = true }); } æ³¨æ„ï¼Œå¦‚æœå°†enableDirectoryBrowsingè®¾ç½®ä¸ºtrueï¼Œéœ€è¦åœ¨ConfigureServicesä¸­è°ƒç”¨services.AddDirectoryBrowser();å¦‚æœé»˜è®¤æ–‡ä»¶å¤¹ä¸‹æœ‰é»˜è®¤é¡µé¢ï¼Œå°†æ˜¾ç¤ºé»˜è®¤é¡µé¢ï¼Œè€Œä¸æ˜¯ç›®å½•åˆ—è¡¨ã€‚ ","date":"2022-07-17","objectID":"/dotnetcore%E4%B8%AD%E5%BC%80%E5%90%AF%E9%9D%99%E6%80%81%E6%96%87%E4%BB%B6%E8%AE%BF%E9%97%AE/:4:0","tags":[".NET"],"title":".NET Core ä¸­å¼€å¯é™æ€æ–‡ä»¶è®¿é—®","uri":"/dotnetcore%E4%B8%AD%E5%BC%80%E5%90%AF%E9%9D%99%E6%80%81%E6%96%87%E4%BB%B6%E8%AE%BF%E9%97%AE/"},{"categories":["å®è·µç¬”è®°"],"content":"FileExtensionContentTypeProvider FileExtensionContentTypeProviderç±»åŒ…å«ä¸€ä¸ªå°†æ–‡ä»¶æ‰©å±•åæ˜ å°„åˆ°MIMEå†…å®¹ç±»å‹çš„é›†åˆã€‚ public void Configure(IApplicationBuilder app, IHostingEnvironment env, ILoggerFactory loggerFactory) { var provider = new FileExtensionContentTypeProvider(); provider.Mappings[\".htm3\"] = \"text/html\"; provider.Mappings[\"images\"] = \"iamge/png\"; provider.Mappings.Remove(\".mp4\"); app.UseStaticFiles(new StaticFileOptions() { FileProvider = new PhysicalFileProvider( Path.Combine(Directory.GetCurrentDirectory(), @\"MyStaticFiles\")), RequestPath = new PathString(\"/StaticFiles\"), ContentTypeProvider = provider }); } ","date":"2022-07-17","objectID":"/dotnetcore%E4%B8%AD%E5%BC%80%E5%90%AF%E9%9D%99%E6%80%81%E6%96%87%E4%BB%B6%E8%AE%BF%E9%97%AE/:5:0","tags":[".NET"],"title":".NET Core ä¸­å¼€å¯é™æ€æ–‡ä»¶è®¿é—®","uri":"/dotnetcore%E4%B8%AD%E5%BC%80%E5%90%AF%E9%9D%99%E6%80%81%E6%96%87%E4%BB%B6%E8%AE%BF%E9%97%AE/"},{"categories":["å®è·µç¬”è®°"],"content":"éæ ‡å‡†çš„å†…å®¹ç±»å‹ å¦‚æœç”¨æˆ·è¯·æ±‚äº†ä¸€ä¸ªæœªçŸ¥çš„æ–‡ä»¶ç±»å‹ï¼Œé™æ€æ–‡ä»¶ä¸­é—´ä»¶å°†ä¼šè¿”å›HTTP 404å“åº”ã€‚å¦‚æœå¯ç”¨ç›®å½•æµè§ˆï¼Œåˆ™è¯¥æ–‡ä»¶çš„é“¾æ¥å°†ä¼šè¢«æ˜¾ç¤ºï¼Œä½†URLä¼šè¿”å›ä¸€ä¸ªHTTP404é”™è¯¯ã€‚ ä½¿ç”¨UseStaticFilesæ–¹æ³•å¯ä»¥å°†æœªçŸ¥ç±»å‹ä½œä¸ºæŒ‡å®šç±»å‹å¤„ç†ï¼š app.UseStaticFiles(new StaticFileOptions() { ServeUnknownFileTypes = true, DefaultContentType = \"application/x-msdownload\" }); å¯¹äºæœªè¯†åˆ«çš„ï¼Œé»˜è®¤ä¸ºapplication/x-msdownloadï¼Œæµè§ˆå™¨å°†ä¼šä¸‹è½½è¿™äº›æ–‡ä»¶ã€‚ æœ¬æ–‡å‚è€ƒè‡ªï¼šhttps://www.jb51.net/article/244297.htm ","date":"2022-07-17","objectID":"/dotnetcore%E4%B8%AD%E5%BC%80%E5%90%AF%E9%9D%99%E6%80%81%E6%96%87%E4%BB%B6%E8%AE%BF%E9%97%AE/:6:0","tags":[".NET"],"title":".NET Core ä¸­å¼€å¯é™æ€æ–‡ä»¶è®¿é—®","uri":"/dotnetcore%E4%B8%AD%E5%BC%80%E5%90%AF%E9%9D%99%E6%80%81%E6%96%87%E4%BB%B6%E8%AE%BF%E9%97%AE/"},{"categories":["å®è·µç¬”è®°"],"content":"åœ¨ç»´æŠ¤æœåŠ¡å™¨æ—¶ï¼Œå‘ç°dockeræ‰€åœ¨ç›˜å®¹é‡å·²æ»¡ï¼Œå¯¼è‡´mongodbæ’å…¥æ•°æ®å¤±è´¥ä»è€Œå´©æºƒã€‚ç”±æ­¤è®°å½•ä¿®æ”¹Linuxä¸­Dockderä½ç½®æ—¶é‡åˆ°çš„é—®é¢˜ ","date":"2022-07-02","objectID":"/linux%E4%B8%AD%E4%BF%AE%E6%94%B9docker%E5%AD%98%E5%82%A8%E4%BD%8D%E7%BD%AE/:0:0","tags":["Linux","Docker"],"title":"Linuxä¸­ä¿®æ”¹Dockerå­˜å‚¨ä½ç½®","uri":"/linux%E4%B8%AD%E4%BF%AE%E6%94%B9docker%E5%AD%98%E5%82%A8%E4%BD%8D%E7%BD%AE/"},{"categories":["å®è·µç¬”è®°"],"content":"ä¸€äº›å‘½ä»¤ ","date":"2022-07-02","objectID":"/linux%E4%B8%AD%E4%BF%AE%E6%94%B9docker%E5%AD%98%E5%82%A8%E4%BD%8D%E7%BD%AE/:1:0","tags":["Linux","Docker"],"title":"Linuxä¸­ä¿®æ”¹Dockerå­˜å‚¨ä½ç½®","uri":"/linux%E4%B8%AD%E4%BF%AE%E6%94%B9docker%E5%AD%98%E5%82%A8%E4%BD%8D%E7%BD%AE/"},{"categories":["å®è·µç¬”è®°"],"content":"df å‘½ä»¤ dfå‘½ä»¤æ¥è‡ªäºè‹±æ–‡è¯ç»„â€Disk Freeâ€œçš„ç¼©å†™ï¼Œå…¶åŠŸèƒ½æ˜¯ç”¨äºæ˜¾ç¤ºç³»ç»Ÿä¸Šç£ç›˜ç©ºé—´çš„ä½¿ç”¨é‡æƒ…å†µã€‚ å¸¸å¸¸ä½¿ç”¨ df -h ä»¥å®¹æ˜“é˜…è¯»çš„æ–¹å¼æ˜¾ç¤º ","date":"2022-07-02","objectID":"/linux%E4%B8%AD%E4%BF%AE%E6%94%B9docker%E5%AD%98%E5%82%A8%E4%BD%8D%E7%BD%AE/:1:1","tags":["Linux","Docker"],"title":"Linuxä¸­ä¿®æ”¹Dockerå­˜å‚¨ä½ç½®","uri":"/linux%E4%B8%AD%E4%BF%AE%E6%94%B9docker%E5%AD%98%E5%82%A8%E4%BD%8D%E7%BD%AE/"},{"categories":["å®è·µç¬”è®°"],"content":"ln å‘½ä»¤ Linux lnï¼ˆè‹±æ–‡å…¨æ‹¼ï¼šlink filesï¼‰å‘½ä»¤æ˜¯ä¸€ä¸ªéå¸¸é‡è¦å‘½ä»¤ï¼Œå®ƒçš„åŠŸèƒ½æ˜¯ä¸ºæŸä¸€ä¸ªæ–‡ä»¶åœ¨å¦å¤–ä¸€ä¸ªä½ç½®å»ºç«‹ä¸€ä¸ªåŒæ­¥çš„é“¾æ¥ã€‚ Linuxæ–‡ä»¶ç³»ç»Ÿä¸­ï¼Œæœ‰æ‰€è°“çš„é“¾æ¥(link)ï¼Œæˆ‘ä»¬å¯ä»¥å°†å…¶è§†ä¸ºæ¡£æ¡ˆçš„åˆ«åï¼Œè€Œé“¾æ¥åˆå¯åˆ†ä¸ºä¸¤ç§ : ç¡¬é“¾æ¥(hard link)ä¸è½¯é“¾æ¥(symbolic link)ï¼Œç¡¬é“¾æ¥çš„æ„æ€æ˜¯ä¸€ä¸ªæ¡£æ¡ˆå¯ä»¥æœ‰å¤šä¸ªåç§°ï¼Œè€Œè½¯é“¾æ¥çš„æ–¹å¼åˆ™æ˜¯äº§ç”Ÿä¸€ä¸ªç‰¹æ®Šçš„æ¡£æ¡ˆï¼Œè¯¥æ¡£æ¡ˆçš„å†…å®¹æ˜¯æŒ‡å‘å¦ä¸€ä¸ªæ¡£æ¡ˆçš„ä½ç½®ã€‚ç¡¬é“¾æ¥æ˜¯å­˜åœ¨åŒä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿä¸­ï¼Œè€Œè½¯é“¾æ¥å´å¯ä»¥è·¨è¶Šä¸åŒçš„æ–‡ä»¶ç³»ç»Ÿã€‚ é€šå¸¸æˆ‘ä»¬éƒ½ä½¿ç”¨ ln -s log2013.log link2013 æ¥åˆ›å»ºè½¯é“¾æ¥ ","date":"2022-07-02","objectID":"/linux%E4%B8%AD%E4%BF%AE%E6%94%B9docker%E5%AD%98%E5%82%A8%E4%BD%8D%E7%BD%AE/:1:2","tags":["Linux","Docker"],"title":"Linuxä¸­ä¿®æ”¹Dockerå­˜å‚¨ä½ç½®","uri":"/linux%E4%B8%AD%E4%BF%AE%E6%94%B9docker%E5%AD%98%E5%82%A8%E4%BD%8D%E7%BD%AE/"},{"categories":["å®è·µç¬”è®°"],"content":"lsof netstat å‘½ä»¤ Linux æŸ¥çœ‹ç«¯å£å ç”¨æƒ…å†µå¯ä»¥ä½¿ç”¨ lsof å’Œ netstat å‘½ä»¤ã€‚ å¯ä½¿ç”¨ lsof -i:ç«¯å£å· netstat -tunlp | grep ç«¯å£å· ","date":"2022-07-02","objectID":"/linux%E4%B8%AD%E4%BF%AE%E6%94%B9docker%E5%AD%98%E5%82%A8%E4%BD%8D%E7%BD%AE/:1:3","tags":["Linux","Docker"],"title":"Linuxä¸­ä¿®æ”¹Dockerå­˜å‚¨ä½ç½®","uri":"/linux%E4%B8%AD%E4%BF%AE%E6%94%B9docker%E5%AD%98%E5%82%A8%E4%BD%8D%E7%BD%AE/"},{"categories":["å®è·µç¬”è®°"],"content":"kill å‘½ä»¤ Linux kill å‘½ä»¤ç”¨äºåˆ é™¤æ‰§è¡Œä¸­çš„ç¨‹åºæˆ–å·¥ä½œã€‚ å¯ä½¿ç”¨ kill -9 PID å½»åº•æ€æ­»è¿›ç¨‹ ","date":"2022-07-02","objectID":"/linux%E4%B8%AD%E4%BF%AE%E6%94%B9docker%E5%AD%98%E5%82%A8%E4%BD%8D%E7%BD%AE/:1:4","tags":["Linux","Docker"],"title":"Linuxä¸­ä¿®æ”¹Dockerå­˜å‚¨ä½ç½®","uri":"/linux%E4%B8%AD%E4%BF%AE%E6%94%B9docker%E5%AD%98%E5%82%A8%E4%BD%8D%E7%BD%AE/"},{"categories":["å®è·µç¬”è®°"],"content":"top å‘½ä»¤ Linux topå‘½ä»¤ç”¨äºå®æ—¶æ˜¾ç¤º process çš„åŠ¨æ€ã€‚ ","date":"2022-07-02","objectID":"/linux%E4%B8%AD%E4%BF%AE%E6%94%B9docker%E5%AD%98%E5%82%A8%E4%BD%8D%E7%BD%AE/:1:5","tags":["Linux","Docker"],"title":"Linuxä¸­ä¿®æ”¹Dockerå­˜å‚¨ä½ç½®","uri":"/linux%E4%B8%AD%E4%BF%AE%E6%94%B9docker%E5%AD%98%E5%82%A8%E4%BD%8D%E7%BD%AE/"},{"categories":["å®è·µç¬”è®°"],"content":"free å‘½ä»¤ Linux freeå‘½ä»¤ç”¨äºæ˜¾ç¤ºå†…å­˜çŠ¶æ€ã€‚ ","date":"2022-07-02","objectID":"/linux%E4%B8%AD%E4%BF%AE%E6%94%B9docker%E5%AD%98%E5%82%A8%E4%BD%8D%E7%BD%AE/:1:6","tags":["Linux","Docker"],"title":"Linuxä¸­ä¿®æ”¹Dockerå­˜å‚¨ä½ç½®","uri":"/linux%E4%B8%AD%E4%BF%AE%E6%94%B9docker%E5%AD%98%E5%82%A8%E4%BD%8D%E7%BD%AE/"},{"categories":["å®è·µç¬”è®°"],"content":"du å‘½ä»¤ Linux du ï¼ˆè‹±æ–‡å…¨æ‹¼ï¼šdisk usageï¼‰å‘½ä»¤ç”¨äºæ˜¾ç¤ºç›®å½•æˆ–æ–‡ä»¶çš„å¤§å°ã€‚ é€šå¸¸ä½¿ç”¨ du -h æé«˜ä¿¡æ¯çš„å¯è¯»æ€§ ","date":"2022-07-02","objectID":"/linux%E4%B8%AD%E4%BF%AE%E6%94%B9docker%E5%AD%98%E5%82%A8%E4%BD%8D%E7%BD%AE/:1:7","tags":["Linux","Docker"],"title":"Linuxä¸­ä¿®æ”¹Dockerå­˜å‚¨ä½ç½®","uri":"/linux%E4%B8%AD%E4%BF%AE%E6%94%B9docker%E5%AD%98%E5%82%A8%E4%BD%8D%E7%BD%AE/"},{"categories":["å®è·µç¬”è®°"],"content":"ä¿®æ”¹ Docker å­˜å‚¨ä½ç½® é€šè¿‡è½¯é“¾æ¥ // åœæ­¢ docker æœåŠ¡ systemctl stop Docker // ç§»åŠ¨æ•´ä¸ª /var/lib/docker ç›®å½•åˆ°ç›®æ ‡è·¯å¾„(/data/docker) mv /var/lib/docker /data/docker // åˆ›å»ºè½¯é“¾æ¥ ln -s /root/docker /var/lib/docker // é‡å¯ docker systemctl start docker ä¿®æ”¹ docker é…ç½®æ–‡ä»¶ // åœæ­¢ docker æœåŠ¡ systemctl stop docker // ç§»åŠ¨æ•´ä¸ª /var/lib/docker ç›®å½•åˆ°ç›®æ ‡è·¯å¾„(/data/docker) mv /var/lib/docker /data/docker // ä¿®æ”¹ docker.service æ–‡ä»¶ vim /usr/lib/systemd/system/docker.service // é‡å¯ docker æœåŠ¡ systemctl daemon-reload systemctl start docker // æŸ¥çœ‹é…ç½®æ˜¯å¦ç”Ÿæ•ˆ docker info | grep \"Docker Root Dir\" å…¶ä¸­ docker.service ä¿®æ”¹çš„å†…å®¹ä¸ºï¼š åœ¨ ExecStart=/usr/bin/dockerd åé¢æ·»åŠ å‚æ•° --graph /data/docker ç»“æœå¦‚ä¸‹ï¼š ExecStart=/usr/bin/dockerd --graph /data/docker -H fd:// --containerd=/run/containerd/containerd.sock ","date":"2022-07-02","objectID":"/linux%E4%B8%AD%E4%BF%AE%E6%94%B9docker%E5%AD%98%E5%82%A8%E4%BD%8D%E7%BD%AE/:2:0","tags":["Linux","Docker"],"title":"Linuxä¸­ä¿®æ”¹Dockerå­˜å‚¨ä½ç½®","uri":"/linux%E4%B8%AD%E4%BF%AE%E6%94%B9docker%E5%AD%98%E5%82%A8%E4%BD%8D%E7%BD%AE/"},{"categories":["å®è·µç¬”è®°"],"content":"Docker ä¸­ mongodb å‡ºç°é”™è¯¯ åœ¨æ›´æ¢äº† docker å­˜å‚¨ä½ç½®åï¼Œ mongodb å¯åŠ¨åå°±ä¸€ç›´æŠ¥é”™ Failed to set up listener: SocketException: Permission denied ï¼ŒåŸå› æ˜¯ä»¥ä¸ºå¯åŠ¨mongoæ—¶,æ— æ³•å†™å…¥mongo.socketæ–‡ä»¶åˆ°/tmpç›®å½•ä¸‹ æŸ¥é˜…äº†ç½‘ç»œä¸Šçš„å¤šä¸ªæ•™ç¨‹ï¼Œæœ€ç»ˆæœ‰æ•ˆçš„æ˜¯ä¸‹é¢çš„è§£å†³æ–¹æ¡ˆï¼š å°†æœ¬åœ°çš„/tmpç›®å½•æŒ‚åœ¨åˆ°mongoå®¹å™¨ä¸­ï¼Œå¦‚æœæ˜¯å·²å¯åŠ¨çš„å®¹å™¨ï¼Œå¯é€šè¿‡æˆ‘çš„ dockerä¸ºå·²å¯åŠ¨å®¹å™¨æ·»åŠ æŒ‚è½½ç›®å½•æˆ–ç«¯å£æ˜ å°„ è¿™ç¯‡æ–‡ç« è¿›è¡ŒæŒ‚è½½ï¼›å¦‚æœæ˜¯æ–°å¯åŠ¨çš„å®¹å™¨ï¼Œåªéœ€è¦ -v /tmp:/tmp å³å¯ ","date":"2022-07-02","objectID":"/linux%E4%B8%AD%E4%BF%AE%E6%94%B9docker%E5%AD%98%E5%82%A8%E4%BD%8D%E7%BD%AE/:3:0","tags":["Linux","Docker"],"title":"Linuxä¸­ä¿®æ”¹Dockerå­˜å‚¨ä½ç½®","uri":"/linux%E4%B8%AD%E4%BF%AE%E6%94%B9docker%E5%AD%98%E5%82%A8%E4%BD%8D%E7%BD%AE/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"æ¦‚è¿° åœ¨ä»£ç ä¸­é‡åˆ°äº†ç½‘ç»œè¯·æ±‚ç¼–ç¨‹æ—¶ï¼Œå¾€å¾€éœ€è¦å¼‚æ­¥ç¼–ç¨‹æ‰èƒ½ç»™ç”¨æˆ·å¸¦æ¥è‰¯å¥½çš„ä½“éªŒï¼Œä¸ä¼šå¯¼è‡´ç¨‹åºå®Œå…¨é˜»å¡ã€‚ å…¶ä¸­çš„å…³é”®åœ¨äºï¼š å¼‚æ­¥æ–¹æ³•ï¼šå†æ‰§è¡Œå®Œæˆå‰å°±ç«‹åˆ»è¿”å›è°ƒç”¨æ–¹æ³•ï¼Œåœ¨è°ƒç”¨æ–¹æ³•æ‰§è¡Œè¿‡ç¨‹ä¸­å®Œæˆä»»åŠ¡ async/await ç»“æ„ä¸»è¦åˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ†ï¼š è°ƒç”¨æ–¹æ³•ï¼šè¯¥æ–¹æ³•è°ƒç”¨å¼‚æ­¥æ–¹æ³•ï¼Œç„¶ååœ¨å¼‚æ­¥æ–¹æ³•å›è°ƒåç»§ç»­æ‰§è¡Œåç»­ç¨‹åº å¼‚æ­¥æ–¹æ³•ï¼šè¯¥æ–¹æ³•å¼‚æ­¥æ‰§è¡Œç¨‹åºï¼Œåœ¨è¢«è°ƒç”¨åç«‹å³è¿”å›åˆ°è°ƒç”¨æ–¹æ³• await è¡¨è¾¾å¼ï¼šç”¨äºå¼‚æ­¥ç­‰å¾…ï¼ŒæŒ‡å‡ºéœ€è¦å¼‚æ­¥æ‰§è¡Œçš„ä»»åŠ¡ï¼Œä¸”éœ€è¦ç­‰å¾…å…¶å®Œæˆã€‚ä¸€ä¸ªæ–¹æ³•å¯ä»¥åŒ…å«å¤šä¸ªawait ","date":"2022-06-26","objectID":"/%E7%90%86%E8%A7%A3csharp%E4%B8%ADasync%E5%92%8Cawait%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B/:1:0","tags":[".NET"],"title":"ç†è§£C#ä¸­asyncå’Œawaitå¼‚æ­¥ç¼–ç¨‹","uri":"/%E7%90%86%E8%A7%A3csharp%E4%B8%ADasync%E5%92%8Cawait%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"ä»€ä¹ˆæ˜¯å¼‚æ­¥ å¯åŠ¨ç¨‹åºæ—¶ï¼Œç³»ç»Ÿä¼šåœ¨å†…å­˜ä¸­åˆ›å»ºä¸€ä¸ªæ–°çš„è¿›ç¨‹ã€‚è¿›ç¨‹æ˜¯æ„æˆè¿è¡Œç¨‹åºèµ„æºçš„é›†åˆã€‚åœ¨è¿›ç¨‹å†…éƒ¨ï¼Œæœ‰ç§°ä¸ºçº¿ç¨‹çš„å†…æ ¸å¯¹è±¡ï¼Œå®ƒä»£è¡¨çš„æ˜¯çœŸæ­£çš„æ‰§è¡Œç¨‹åºã€‚ç³»ç»Ÿä¼šåœ¨ Main æ–¹æ³•çš„ç¬¬ä¸€è¡Œè¯­å¥å°±å¼€å§‹çº¿ç¨‹çš„æ‰§è¡Œã€‚ çº¿ç¨‹ï¼š é»˜è®¤æƒ…å†µï¼Œä¸€ä¸ªè¿›ç¨‹åªåŒ…å«ä¸€ä¸ªçº¿ç¨‹ï¼Œä»ç¨‹åºçš„å¼€å§‹åˆ°æ‰§è¡Œç»“æŸ çº¿ç¨‹å¯ä»¥æ´¾ç”Ÿè‡ªå…¶å®ƒçº¿ç¨‹ï¼Œæ‰€ä»¥ä¸€ä¸ªè¿›ç¨‹å¯ä»¥åŒ…å«ä¸åŒçŠ¶æ€çš„å¤šä¸ªçº¿ç¨‹ï¼Œæ¥æ‰§è¡Œç¨‹åºçš„ä¸åŒéƒ¨åˆ† ä¸€ä¸ªè¿›ç¨‹ä¸­çš„å¤šä¸ªçº¿ç¨‹ï¼Œå°†å…±äº«è¯¥è¿›ç¨‹çš„èµ„æº ç³»ç»Ÿä¸ºå¤„ç†å™¨æ‰§è¡Œæ‰€è§„åˆ’çš„å•å…ƒæ˜¯çº¿ç¨‹ï¼Œè€Œéè¿›ç¨‹ ä¸‹é¢æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªç®€å•çš„ä¾‹å­ class Program { // åˆ›å»ºè®¡æ—¶å™¨ private static readonly Stopwatch Watch = new Stopwatch(); private static void Main(string[] args) { // å¯åŠ¨è®¡æ—¶å™¨ Watch.Start(); const string url1 = \"http://www.cnblogs.com/\"; const string url2 = \"http://www.cnblogs.com/liqingwen/\"; // ä¸¤æ¬¡è°ƒç”¨ CountCharactersAsync æ–¹æ³•ï¼ˆå¼‚æ­¥ä¸‹è½½æŸç½‘ç«™å†…å®¹ï¼Œå¹¶ç»Ÿè®¡å­—ç¬¦çš„ä¸ªæ•°ï¼‰ Task\u003cint\u003e t1 = CountCharactersAsync(1, url1); Task\u003cint\u003e t2 = CountCharactersAsync(2, url2); // ä¸‰æ¬¡è°ƒç”¨ ExtraOperation æ–¹æ³•ï¼ˆä¸»è¦æ˜¯é€šè¿‡æ‹¼æ¥å­—ç¬¦ä¸²è¾¾åˆ°è€—æ—¶æ“ä½œï¼‰ for (var i = 0; i \u003c 3; i++) { ExtraOperation(i + 1); } // æ§åˆ¶å°è¾“å‡º Console.WriteLine($\"{url1} çš„å­—ç¬¦ä¸ªæ•°ï¼š{t1.Result}\"); Console.WriteLine($\"{url2} çš„å­—ç¬¦ä¸ªæ•°ï¼š{t2.Result}\"); Console.Read(); } // ç»Ÿè®¡å­—ç¬¦ä¸ªæ•° private static async Task\u003cint\u003e CountCharactersAsync(int id, string address) { var wc = new WebClient(); Console.WriteLine($\"å¼€å§‹è°ƒç”¨ id = {id}ï¼š{Watch.ElapsedMilliseconds} ms\"); var result = await wc.DownloadStringTaskAsync(address); Console.WriteLine($\"è°ƒç”¨å®Œæˆ id = {id}ï¼š{Watch.ElapsedMilliseconds} ms\"); return result.Length; } // é¢å¤–æ“ä½œ private static void ExtraOperation(int id) { // è¿™é‡Œæ˜¯é€šè¿‡æ‹¼æ¥å­—ç¬¦ä¸²è¿›è¡Œä¸€äº›ç›¸å¯¹è€—æ—¶çš„æ“ä½œï¼Œå¦‚æœå¯¹å­—ç¬¦ä¸²æ‹¼æ¥æœ‰æ€§èƒ½è¦æ±‚çš„è¯åº”è¯¥ä½¿ç”¨ StringBuilder var s = \"\"; for (var i = 0; i \u003c 6000; i++) { s += i; } Console.WriteLine($\"id = {id} çš„ ExtraOperation æ–¹æ³•å®Œæˆï¼š{Watch.ElapsedMilliseconds} ms\"); } } åŒæ­¥æƒ…å†µä¸‹çš„è°ƒç”¨é¡ºåºä¸ºï¼š å¼‚æ­¥æƒ…å†µä¸‹çš„è°ƒç”¨é¡ºåºä¸ºï¼š ä»ä¸Šé¢ä¸¤ç§æƒ…å†µå¯ä»¥çœ‹å‡ºå¼‚æ­¥ç¼–ç¨‹ä¼˜åŠ¿ï¼Œç°åœ¨æˆ‘ä»¬æ¥åˆ†æä¸€ä¸‹ç¨‹åºçš„æ­¥éª¤ï¼š ä» Main æ–¹æ³•æ‰§è¡Œåˆ° CountCharactersAsync(1, url1) æ–¹æ³•æ—¶ï¼Œè¯¥æ–¹æ³•ä¼šç«‹å³è¿”å›ï¼Œç„¶åæ‰ä¼šè°ƒç”¨å®ƒå†…éƒ¨çš„æ–¹æ³•å¼€å§‹ä¸‹è½½å†…å®¹ã€‚è¯¥æ–¹æ³•è¿”å›çš„æ˜¯ä¸€ä¸ª Task\u003cint\u003e ç±»å‹çš„å ä½ç¬¦å¯¹è±¡ï¼Œè¡¨ç¤ºè®¡åˆ’è¿›è¡Œçš„å·¥ä½œã€‚è¿™ä¸ªå ä½ç¬¦æœ€ç»ˆä¼šè¿”å› int ç±»å‹çš„å€¼ è¿™æ ·å°±å¯ä»¥ä¸å¿…ç­‰ CountCharactersAsync(1, url1) æ–¹æ³•æ‰§è¡Œå®Œæˆå°±å¯ä»¥ç»§ç»­è¿›è¡Œä¸‹ä¸€æ­¥æ“ä½œã€‚åˆ°æ‰§è¡Œ CountCharactersAsync(2, url2) æ–¹æ³•æ—¶ï¼Œè·Ÿ æ­¥éª¤â‘  ä¸€æ ·è¿”å› Task\u003cint\u003e å¯¹è±¡ ç„¶åï¼ŒMain æ–¹æ³•ç»§ç»­æ‰§è¡Œä¸‰æ¬¡ ExtraOperation æ–¹æ³•ï¼ŒåŒæ—¶ä¸¤æ¬¡ CountCharactersAsync æ–¹æ³•ä¾ç„¶åœ¨æŒç»­å·¥ä½œ t1.Result å’Œ t2.Result æ˜¯æŒ‡ä» CountCharactersAsync æ–¹æ³•è°ƒç”¨çš„ Task\u003cint\u003e å¯¹è±¡å–ç»“æœï¼Œå¦‚æœè¿˜æ²¡æœ‰ç»“æœçš„è¯ï¼Œå°†é˜»å¡ï¼Œç›´æœ‰ç»“æœè¿”å›ä¸ºæ­¢ ","date":"2022-06-26","objectID":"/%E7%90%86%E8%A7%A3csharp%E4%B8%ADasync%E5%92%8Cawait%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B/:2:0","tags":[".NET"],"title":"ç†è§£C#ä¸­asyncå’Œawaitå¼‚æ­¥ç¼–ç¨‹","uri":"/%E7%90%86%E8%A7%A3csharp%E4%B8%ADasync%E5%92%8Cawait%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"async/await ç»“æ„ async/await ç»“æ„ä¸»è¦åˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ†ï¼š è°ƒç”¨æ–¹æ³•ï¼šè¯¥æ–¹æ³•è°ƒç”¨å¼‚æ­¥æ–¹æ³•ï¼Œç„¶ååœ¨å¼‚æ­¥æ–¹æ³•å›è°ƒåç»§ç»­æ‰§è¡Œåç»­ç¨‹åº å¼‚æ­¥æ–¹æ³•ï¼šè¯¥æ–¹æ³•å¼‚æ­¥æ‰§è¡Œç¨‹åºï¼Œåœ¨è¢«è°ƒç”¨åç«‹å³è¿”å›åˆ°è°ƒç”¨æ–¹æ³• await è¡¨è¾¾å¼ï¼šç”¨äºå¼‚æ­¥ç­‰å¾…ï¼ŒæŒ‡å‡ºéœ€è¦å¼‚æ­¥æ‰§è¡Œçš„ä»»åŠ¡ï¼Œä¸”éœ€è¦ç­‰å¾…å…¶å®Œæˆã€‚ä¸€ä¸ªæ–¹æ³•å¯ä»¥åŒ…å«å¤šä¸ªawait ç¤ºä¾‹ç»“æ„åˆ†æå¦‚ä¸‹ï¼š ","date":"2022-06-26","objectID":"/%E7%90%86%E8%A7%A3csharp%E4%B8%ADasync%E5%92%8Cawait%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B/:3:0","tags":[".NET"],"title":"ç†è§£C#ä¸­asyncå’Œawaitå¼‚æ­¥ç¼–ç¨‹","uri":"/%E7%90%86%E8%A7%A3csharp%E4%B8%ADasync%E5%92%8Cawait%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"await éƒ½åšäº†äº›ä»€ä¹ˆ ä¸ºäº†äº†è§£ç¨‹åº await æ—¶ï¼ŒC#éƒ½åšäº†äº›ä»€ä¹ˆå·¥ä½œï¼Œæˆ‘ä»¬å°±å¿…é¡»äº†è§£ä»¥ä¸‹å†…å®¹ ","date":"2022-06-26","objectID":"/%E7%90%86%E8%A7%A3csharp%E4%B8%ADasync%E5%92%8Cawait%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B/:4:0","tags":[".NET"],"title":"ç†è§£C#ä¸­asyncå’Œawaitå¼‚æ­¥ç¼–ç¨‹","uri":"/%E7%90%86%E8%A7%A3csharp%E4%B8%ADasync%E5%92%8Cawait%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"æ–¹æ³•çš„çŠ¶æ€ é¦–å…ˆï¼Œæ–¹æ³•å†…æ‰€æœ‰çš„æœ¬åœ°å˜é‡çš„å€¼éƒ½ä¼šè¢«è®°ä½ï¼ŒåŒ…æ‹¬ æ–¹æ³•çš„å‚æ•° åœ¨æ–¹æ³•çš„ä½œç”¨åŸŸå†…å®šä¹‰çš„ä»»ä½•å˜é‡ ä»»ä½•å…¶å®ƒå˜é‡ï¼Œæ¯”å¦‚å¾ªç¯ä¸­ä½¿ç”¨åˆ°çš„è®¡æ•°å˜é‡ å¦‚æœä½ çš„æ–¹æ³•ä¸æ˜¯staticçš„ï¼Œåˆ™è¿˜è¦åŒ…æ‹¬thiså˜é‡ã€‚åªæœ‰è®°ä½äº†thisï¼Œå½“æ–¹æ³•æ¢å¤æ‰§è¡Œ(resume)æ—¶ï¼Œæ‰å¯ä»¥ä½¿ç”¨å½“å‰ç±»çš„æˆå‘˜å˜é‡ã€‚ ä¸Šè¿°çš„è¿™äº›éƒ½ä¼šè¢«å­˜å‚¨åœ¨.NETåƒåœ¾å›æ”¶å †é‡Œçš„ä¸€ä¸ªå¯¹è±¡ä¸­ã€‚å› æ­¤ï¼Œå½“ä½ ä½¿ç”¨awaitæ—¶ï¼Œ.NETå°±ä¼šåˆ›å»ºè¿™æ ·ä¸€ä¸ªå¯¹è±¡ï¼Œè™½ç„¶å®ƒä¼šå ç”¨ä¸€äº›èµ„æºï¼Œä½†åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹å¹¶ä¸ä¼šå¯¼è‡´æ€§èƒ½é—®é¢˜ã€‚ C#è¿˜è¦è®°ä½åœ¨æ–¹æ³•å†…éƒ¨awaitæ‰§è¡Œåˆ°äº†å“ªé‡Œâ€”â€”å¯ä»¥é€šè¿‡ä½¿ç”¨ä¸€ä¸ªæ•°å­—æ¥è¡¨ç¤ºå½“å‰æ–¹æ³•ä¸­æ‰§è¡Œåˆ°äº†å“ªä¸€ä¸ªawaitå…³é”®å­—ã€‚ å…·ä½“å¦‚ä½•ä½¿ç”¨awaitè¡¨è¾¾å¼ï¼Ÿè¿™å…¶å®æ²¡æœ‰é™åˆ¶ï¼Œä¾‹å¦‚ï¼Œawaitå¯ä»¥è¢«ç”¨åšä¸€ä¸ªå¤§è¡¨è¾¾å¼çš„ä¸€éƒ¨åˆ†ï¼Œä¸€ä¸ªè¡¨è¾¾å¼ä¹Ÿå¯èƒ½åŒ…å«å¤šä¸ªawait. int myNum = await AlexsMethodAsync(await myTask, await StuffAsync()); è¿™æ ·å°±å¯¹.NETè¿è¡Œæ—¶æå‡ºäº†é¢å¤–çš„éœ€æ±‚â€”â€”å½“awaitä¸€ä¸ªè¡¨è¾¾å¼æ—¶ï¼Œéœ€è¦è®°ä½è¡¨è¾¾å¼å‰©ä½™éƒ¨åˆ†çš„çŠ¶æ€ã€‚åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œå½“ç¨‹åºæ‰§è¡Œawait StuffAsync()æ—¶ï¼Œawait myTaskçš„ç»“æœå°±éœ€è¦è¢«è®°å½•ä¸‹æ¥ã€‚.NET ILä¼šå°†è¿™ç±»å­è¡¨è¾¾å¼å­˜å‚¨åœ¨æ ˆä¸Šï¼Œå› æ­¤å½“ä½¿ç”¨äº†awaitå…³é”®å­—æ—¶å°±éœ€è¦æŠŠè¿™ä¸ªæ ˆå­˜å‚¨ä¸‹æ¥ã€‚ åœ¨è¿™ä¹‹ä¸Šï¼Œå½“ç¨‹åºæ‰§è¡Œåˆ°ç¬¬ä¸€ä¸ªawaitæ—¶ï¼Œå½“å‰æ–¹æ³•ä¼šè¿”å›â€”â€”é™¤éæ–¹æ³•æ˜¯async voidï¼Œå¦åˆ™è¿™æ—¶å°±ä¼šè¿”å›ä¸€ä¸ªTaskï¼Œå› æ­¤è°ƒç”¨è€…å¯ä»¥é€šè¿‡æŸç§æ–¹å¼ç­‰å¾…ä»»åŠ¡å®Œæˆã€‚C# è¿˜å¿…é¡»æŠŠæ“ä½œè¯¥è¿”å›Taskçš„æ–¹æ³•å­˜å‚¨ä¸‹æ¥ï¼Œè¿™æ ·å½“æˆ‘ä»¬çš„æ–¹æ³•å®Œæˆåï¼Œå‰é¢è¿”å›çš„Taskæ‰ä¼šå˜ä¸ºå®Œæˆçš„çŠ¶æ€ï¼Œè¿™æ ·ç¨‹åºæ‰ä¼šå‘ä¸Šè¿”å›ä¸€å±‚ï¼Œå›åˆ°æ–¹æ³•çš„å¼‚æ­¥é“¾ä¸­å»ç»§ç»­æ‰§è¡Œã€‚æˆ‘ä»¬ä¼šåœ¨ç¬¬14ç« æ¢è®¨è¿™äº›é¢å¤–çš„æœºåˆ¶ã€‚ ","date":"2022-06-26","objectID":"/%E7%90%86%E8%A7%A3csharp%E4%B8%ADasync%E5%92%8Cawait%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B/:4:1","tags":[".NET"],"title":"ç†è§£C#ä¸­asyncå’Œawaitå¼‚æ­¥ç¼–ç¨‹","uri":"/%E7%90%86%E8%A7%A3csharp%E4%B8%ADasync%E5%92%8Cawait%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"ä¸Šä¸‹æ–‡ï¼ˆContextï¼‰ C#åœ¨ä½¿ç”¨awaitæ—¶ä¼šè®°å½•å„ç§å„æ ·çš„ä¸Šä¸‹æ–‡ï¼Œç›®çš„æ˜¯å½“è¦ç»§ç»­æ‰§è¡Œæ–¹æ³•æ—¶èƒ½å¤Ÿæ¢å¤è¿™ä¸ªä¸Šä¸‹æ–‡ï¼Œè¿™æ ·å°±å°½å¯èƒ½åœ°å°†awaitçš„å¤„ç†è¿‡ç¨‹å˜å¾—é€æ˜ã€‚è¿™äº›ä¸Šä¸‹æ–‡ä¸­æœ€é‡è¦çš„å°±æ˜¯åŒæ­¥ä¸Šä¸‹æ–‡ï¼ˆsychronization contextï¼‰ï¼Œé€šè¿‡å®ƒçš„å¸®åŠ©å¯ä»¥åœ¨æŒ‡å®šç±»å‹çš„çº¿ç¨‹ä¸Šæ¢å¤æ–¹æ³•çš„æ‰§è¡Œã€‚ ","date":"2022-06-26","objectID":"/%E7%90%86%E8%A7%A3csharp%E4%B8%ADasync%E5%92%8Cawait%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B/:4:2","tags":[".NET"],"title":"ç†è§£C#ä¸­asyncå’Œawaitå¼‚æ­¥ç¼–ç¨‹","uri":"/%E7%90%86%E8%A7%A3csharp%E4%B8%ADasync%E5%92%8Cawait%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"å¼‚æ­¥æ–¹æ³•çš„ç»“æ„ å…³é”®å­—ï¼šæ–¹æ³•å¤´ä½¿ç”¨ async ä¿®é¥°ã€‚ è¦æ±‚ï¼šåŒ…å« Nï¼ˆN\u003e0ï¼‰ ä¸ª await è¡¨è¾¾å¼ï¼ˆä¸å­˜åœ¨ await è¡¨è¾¾å¼çš„è¯ IDE ä¼šå‘å‡ºè­¦å‘Šï¼‰ï¼Œè¡¨ç¤ºéœ€è¦å¼‚æ­¥æ‰§è¡Œçš„ä»»åŠ¡ã€‚ è¿”å›ç±»å‹ï¼šåªèƒ½è¿”å› 3 ç§ç±»å‹ï¼ˆvoidã€Task å’Œ Taskï¼‰ã€‚Task å’Œ Task æ ‡è¯†è¿”å›çš„å¯¹è±¡ä¼šåœ¨å°†æ¥å®Œæˆå·¥ä½œï¼Œè¡¨ç¤ºè°ƒç”¨æ–¹æ³•å’Œå¼‚æ­¥æ–¹æ³•å¯ä»¥ç»§ç»­æ‰§è¡Œã€‚ å‚æ•°ï¼šæ•°é‡ä¸é™ï¼Œä½†ä¸èƒ½ä½¿ç”¨ out å’Œ ref å…³é”®å­—ã€‚ å‘½åçº¦å®šï¼šæ–¹æ³•åç¼€ååº”ä»¥ Async ç»“å°¾ã€‚ å…¶å®ƒï¼šåŒ¿åæ–¹æ³•å’Œ Lambda è¡¨è¾¾å¼ä¹Ÿå¯ä»¥ä½œä¸ºå¼‚æ­¥å¯¹è±¡ï¼›async æ˜¯ä¸€ä¸ªä¸Šä¸‹æ–‡å…³é”®å­—ï¼›å…³é”®å­— async å¿…é¡»åœ¨è¿”å›ç±»å‹å‰ã€‚ æœ¬æ–‡å‚è€ƒè‡ªï¼š https://www.cnblogs.com/tuyile006/p/12605523.html https://www.cnblogs.com/tuyile006/p/12605523.html ","date":"2022-06-26","objectID":"/%E7%90%86%E8%A7%A3csharp%E4%B8%ADasync%E5%92%8Cawait%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B/:5:0","tags":[".NET"],"title":"ç†è§£C#ä¸­asyncå’Œawaitå¼‚æ­¥ç¼–ç¨‹","uri":"/%E7%90%86%E8%A7%A3csharp%E4%B8%ADasync%E5%92%8Cawait%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"ä»€ä¹ˆæ˜¯ Thread å½“æˆ‘ä»¬æåŠå¤šçº¿ç¨‹çš„æ—¶å€™ä¼šæƒ³åˆ° Thread å’Œ Threadpoolï¼Œè¿™éƒ½æ˜¯å¼‚æ­¥æ“ä½œï¼ŒThreadpool å…¶å®å°±æ˜¯ Thread çš„é›†åˆï¼Œå…·æœ‰å¾ˆå¤šä¼˜åŠ¿ï¼Œä¸è¿‡åœ¨ä»»åŠ¡å¤šçš„æ—¶å€™å…¨å±€é˜Ÿåˆ—ä¼šå­˜åœ¨ç«äº‰è€Œæ¶ˆè€—èµ„æºã€‚Thread é»˜è®¤ä¸ºå‰å°çº¿ç¨‹ï¼Œä¸»ç¨‹åºå¿…é¡»ç­‰çº¿ç¨‹è·‘å®Œæ‰ä¼šå…³é—­ï¼Œè€Œ Threadpool ç›¸åã€‚ æ€»ç»“ï¼šThreadpool ç¡®å®æ¯” Thread æ€§èƒ½ä¼˜ï¼Œä½†æ˜¯ä¸¤è€…éƒ½æ²¡æœ‰å¾ˆå¥½çš„apiåŒºæ§åˆ¶ï¼Œå¦‚æœçº¿ç¨‹æ‰§è¡Œæ— å“åº”å°±åªèƒ½ç­‰å¾…ç»“æŸï¼Œä»è€Œè¯ç”Ÿäº† Task ä»»åŠ¡ã€‚ ","date":"2022-06-26","objectID":"/csharp%E4%B8%ADtask%E4%B8%8Ethread%E5%8C%BA%E5%88%AB/:1:0","tags":[".NET"],"title":"C#ä¸­Taskä¸ThreadåŒºåˆ«","uri":"/csharp%E4%B8%ADtask%E4%B8%8Ethread%E5%8C%BA%E5%88%AB/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"ä»€ä¹ˆæ˜¯ Task Task ç®€å•åœ°çœ‹å°±æ˜¯ä»»åŠ¡ï¼Œé‚£å’Œ Thread æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼ŸTask çš„èƒŒåçš„å®ç°ä¹Ÿæ˜¯ä½¿ç”¨äº†çº¿ç¨‹æ± çº¿ç¨‹ï¼Œä½†å®ƒçš„æ€§èƒ½ä¼˜äºThreadPoll,å› ä¸ºå®ƒä½¿ç”¨çš„ä¸æ˜¯çº¿ç¨‹æ± çš„å…¨å±€é˜Ÿåˆ—ï¼Œè€Œæ˜¯ä½¿ç”¨çš„æœ¬åœ°é˜Ÿåˆ—ï¼Œä½¿çº¿ç¨‹ä¹‹é—´çš„èµ„æºç«äº‰å‡å°‘ã€‚åŒæ—¶ Task æä¾›äº†ä¸°å¯Œçš„APIæ¥ç®¡ç†çº¿ç¨‹ã€æ§åˆ¶ã€‚ä½†æ˜¯ç›¸å¯¹å‰é¢çš„ä¸¤ç§è€—å†…å­˜ï¼ŒTask ä¾èµ–äºCPUå¯¹äºå¤šæ ¸çš„CPUæ€§èƒ½è¿œè¶…å‰ä¸¤è€…ï¼Œå•æ ¸çš„CPUä¸‰è€…çš„æ€§èƒ½æ²¡ä»€ä¹ˆå·®åˆ«ã€‚Task æœ‰Waitã€ContinueWithã€Cancelç­‰æ“ä½œï¼Œæœ‰è¿”å›å€¼ã€‚ ","date":"2022-06-26","objectID":"/csharp%E4%B8%ADtask%E4%B8%8Ethread%E5%8C%BA%E5%88%AB/:2:0","tags":[".NET"],"title":"C#ä¸­Taskä¸ThreadåŒºåˆ«","uri":"/csharp%E4%B8%ADtask%E4%B8%8Ethread%E5%8C%BA%E5%88%AB/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"Task ä¸ Thread çš„åŒºåˆ« Thread ç±»ä¸»è¦ç”¨äºå®ç°çº¿ç¨‹çš„åˆ›å»ºä»¥åŠæ‰§è¡Œã€‚ Task ç±»è¡¨ç¤ºä»¥å¼‚æ­¥æ–¹å¼æ‰§è¡Œçš„å•ä¸ªæ“ä½œã€‚ ","date":"2022-06-26","objectID":"/csharp%E4%B8%ADtask%E4%B8%8Ethread%E5%8C%BA%E5%88%AB/:3:0","tags":[".NET"],"title":"C#ä¸­Taskä¸ThreadåŒºåˆ«","uri":"/csharp%E4%B8%ADtask%E4%B8%8Ethread%E5%8C%BA%E5%88%AB/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"1. Task æ˜¯åŸºäº Thread çš„ï¼Œæ˜¯æ¯”è¾ƒé«˜å±‚çº§çš„å°è£…ï¼ŒTask æœ€ç»ˆè¿˜æ˜¯éœ€è¦ Thread æ¥æ‰§è¡Œ ","date":"2022-06-26","objectID":"/csharp%E4%B8%ADtask%E4%B8%8Ethread%E5%8C%BA%E5%88%AB/:3:1","tags":[".NET"],"title":"C#ä¸­Taskä¸ThreadåŒºåˆ«","uri":"/csharp%E4%B8%ADtask%E4%B8%8Ethread%E5%8C%BA%E5%88%AB/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"2. Task é»˜è®¤ä½¿ç”¨åå°çº¿ç¨‹æ‰§è¡Œï¼ŒThread é»˜è®¤ä½¿ç”¨å‰å°çº¿ç¨‹ public static void Main(string[] args) { Thread thread = new Thread(obj =\u003e { Thread.Sleep(3000); }); thread.Start(); } ä¸Šé¢ä»£ç ï¼Œä¸»ç¨‹åºåœ¨3ç§’åç»“æŸã€‚ public static void Main(string[] args) { Task\u003cint\u003e task = new Task\u003cint\u003e(() =\u003e { Thread,Sleep(3000); return 1; }); task.Start(); } è€Œè¿™æ®µä»£ç ï¼Œä¼šç¬é—´ç»“æŸã€‚ ","date":"2022-06-26","objectID":"/csharp%E4%B8%ADtask%E4%B8%8Ethread%E5%8C%BA%E5%88%AB/:3:2","tags":[".NET"],"title":"C#ä¸­Taskä¸ThreadåŒºåˆ«","uri":"/csharp%E4%B8%ADtask%E4%B8%8Ethread%E5%8C%BA%E5%88%AB/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"3. Task å¯ä»¥æœ‰è¿”å›å€¼ï¼ŒThread æ²¡æœ‰è¿”å›å€¼ è™½ç„¶ Thread å¯ä»¥é€šè¿‡ Start æ–¹æ³•å‚æ•°æ¥è¿›è¡Œè¿”å›å€¼å¤„ç†ï¼Œä½†ååˆ†ä¸ä¾¿ã€‚ public static void Main(string[] args) { Task task = new Task(LongRunningTask); task.Start(); Console.WriteLine(task.Result); } private static int LongRunningTask() { Thread.Sleep(3000); return 1; } ","date":"2022-06-26","objectID":"/csharp%E4%B8%ADtask%E4%B8%8Ethread%E5%8C%BA%E5%88%AB/:3:3","tags":[".NET"],"title":"C#ä¸­Taskä¸ThreadåŒºåˆ«","uri":"/csharp%E4%B8%ADtask%E4%B8%8Ethread%E5%8C%BA%E5%88%AB/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"4. Task å¯ä»¥æ‰§è¡Œåç»­æ“ä½œï¼ŒThread ä¸èƒ½æ‰§è¡Œåç»­æ“ä½œ static void Main(string[] args) { Task task = new Task(LongRunningTask); task.Start(); Task childTask = task.ContinueWith(SquareOfNumber); Console.WriteLine(\"Sqaure of number is :\"+ childTask.Result); Console.WriteLine(\"The number is :\" + task.Result); } private static int LongRunningTask() { Thread.Sleep(3000); return 2; } private static int SquareOfNumber(Task obj) { return obj.Result * obj.Result; } ","date":"2022-06-26","objectID":"/csharp%E4%B8%ADtask%E4%B8%8Ethread%E5%8C%BA%E5%88%AB/:3:4","tags":[".NET"],"title":"C#ä¸­Taskä¸ThreadåŒºåˆ«","uri":"/csharp%E4%B8%ADtask%E4%B8%8Ethread%E5%8C%BA%E5%88%AB/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"5. Task å¯å–æ¶ˆä»»åŠ¡æ‰§è¡Œï¼ŒThread ä¸è¡Œ static void Main(string[] args) { using (var cts = new CancellationTokenSource()) { Task task = new Task(() =\u003e { LongRunningTask(cts.Token); }); task.Start(); Console.WriteLine(\"Operation Performing...\"); if(Console.ReadKey().Key == ConsoleKey.C) { Console.WriteLine(\"Cancelling..\"); cts.Cancel(); } Console.Read(); } } private static void LongRunningTask(CancellationToken token) { for (int i = 0; i \u003c 10000000; i++) { if(token.IsCancellationRequested) { break; } else { Console.WriteLine(i); } } } ","date":"2022-06-26","objectID":"/csharp%E4%B8%ADtask%E4%B8%8Ethread%E5%8C%BA%E5%88%AB/:3:5","tags":[".NET"],"title":"C#ä¸­Taskä¸ThreadåŒºåˆ«","uri":"/csharp%E4%B8%ADtask%E4%B8%8Ethread%E5%8C%BA%E5%88%AB/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"6. å¼‚å¸¸ä¼ æ’­ Thread åœ¨çˆ¶æ–¹æ³•ä¸Šè·å–ä¸åˆ°å¼‚å¸¸ï¼Œè€Œ Task å¯ä»¥ ","date":"2022-06-26","objectID":"/csharp%E4%B8%ADtask%E4%B8%8Ethread%E5%8C%BA%E5%88%AB/:3:6","tags":[".NET"],"title":"C#ä¸­Taskä¸ThreadåŒºåˆ«","uri":"/csharp%E4%B8%ADtask%E4%B8%8Ethread%E5%8C%BA%E5%88%AB/"},{"categories":["å®è·µç¬”è®°"],"content":"SignalR ç®€ä»‹ ASP.NET SignalR æ˜¯ä¸€ä¸ªä¾› ASP.NET å¼€å‘äººå‘˜ä½¿ç”¨çš„åº“ï¼Œå®ƒç®€åŒ–äº†å‘åº”ç”¨ç¨‹åºæ·»åŠ å®æ—¶ Web åŠŸèƒ½çš„è¿‡ç¨‹ã€‚å®æ—¶ Web åŠŸèƒ½æ˜¯è®©æœåŠ¡å™¨ä»£ç åœ¨å†…å®¹å¯ç”¨æ—¶ç«‹å³å°†å†…å®¹æ¨é€åˆ°è¿æ¥çš„å®¢æˆ·ç«¯çš„èƒ½åŠ›ï¼Œè€Œä¸æ˜¯è®©æœåŠ¡å™¨ç­‰å¾…å®¢æˆ·ç«¯è¯·æ±‚æ–°æ•°æ®ã€‚ å®˜æ–¹ç½‘å€ ","date":"2022-06-23","objectID":"/vue%E4%B8%AD%E5%85%A8%E5%B1%80%E5%B0%81%E8%A3%85signalr/:1:0","tags":[".NET"],"title":"Vueä¸­å…¨å±€å°è£…SignalR","uri":"/vue%E4%B8%AD%E5%85%A8%E5%B1%80%E5%B0%81%E8%A3%85signalr/"},{"categories":["å®è·µç¬”è®°"],"content":"å®ç°æ­¥éª¤ ","date":"2022-06-23","objectID":"/vue%E4%B8%AD%E5%85%A8%E5%B1%80%E5%B0%81%E8%A3%85signalr/:2:0","tags":[".NET"],"title":"Vueä¸­å…¨å±€å°è£…SignalR","uri":"/vue%E4%B8%AD%E5%85%A8%E5%B1%80%E5%B0%81%E8%A3%85signalr/"},{"categories":["å®è·µç¬”è®°"],"content":"1. å¼•å…¥SignalRå®˜æ–¹åº“ npm install @microsoft/signalr ","date":"2022-06-23","objectID":"/vue%E4%B8%AD%E5%85%A8%E5%B1%80%E5%B0%81%E8%A3%85signalr/:2:1","tags":[".NET"],"title":"Vueä¸­å…¨å±€å°è£…SignalR","uri":"/vue%E4%B8%AD%E5%85%A8%E5%B1%80%E5%B0%81%E8%A3%85signalr/"},{"categories":["å®è·µç¬”è®°"],"content":"2. åˆ›å»ºä¸€ä¸ªsignalR.jsæ–‡ä»¶ const signalR = require(\"@microsoft/signalr\") export default { SR: {}, //åˆå§‹åŒ–è¿æ¥ initSR: function(domain) { let that = this; domain = domain === \"localhost\" ? \"å†…ç½‘IP\" : domain; let url = `http://${domain}:8000/chatHub`; that.SR = new signalR.HubConnectionBuilder() .withUrl(url) .configureLogging(signalR.LogLevel.Information) .build(); async function start() { try { await that.SR.start(); console.log(\"signaRè¿æ¥æˆåŠŸ\"); } catch (err) { console.log(\"err\", err); setTimeout(start, 5000); } } that.SR.onclose(async() =\u003e { await start(); }); start(); }, syncPage: function(func) { this.SR.on(\"ReceiveMessageFromGroup\", function(group, message) { func(); }); }, addToGroup: function(group) { this.SR.invoke(\"AddToGroup\", group).catch(function(err) { return console.error(err.toString()); }); }, removeFromGroup: function(group) { this.SR.off(\"ReceiveMessageFromGroup\") this.SR.invoke(\"RemoveFromGroup\", group).catch(function(err) { return console.error(err.toString()); }); }, // åœæ­¢è¿æ¥ stopSR: function() { let that = this; async function stop() { try { await that.SR.stop(); console.log(\"signaRé€€å‡ºæˆåŠŸ\"); } catch (err) {} } stop(); }, }; ","date":"2022-06-23","objectID":"/vue%E4%B8%AD%E5%85%A8%E5%B1%80%E5%B0%81%E8%A3%85signalr/:2:2","tags":[".NET"],"title":"Vueä¸­å…¨å±€å°è£…SignalR","uri":"/vue%E4%B8%AD%E5%85%A8%E5%B1%80%E5%B0%81%E8%A3%85signalr/"},{"categories":["å®è·µç¬”è®°"],"content":"3. åœ¨main.jsä¸­å¼•å…¥å¹¶å…¨å±€æŒ‚è½½ import signalr from \"signaRçš„è·¯å¾„\"; Vue.prototype.signalr = signalr; ","date":"2022-06-23","objectID":"/vue%E4%B8%AD%E5%85%A8%E5%B1%80%E5%B0%81%E8%A3%85signalr/:2:3","tags":[".NET"],"title":"Vueä¸­å…¨å±€å°è£…SignalR","uri":"/vue%E4%B8%AD%E5%85%A8%E5%B1%80%E5%B0%81%E8%A3%85signalr/"},{"categories":["å®è·µç¬”è®°"],"content":"4. åˆå§‹åŒ–è¿æ¥ å¯åœ¨ç™»å½•åè¿›è¡Œåˆå§‹åŒ–this.signalr.initSR(document.Domain); ç”±äºé¡µé¢åˆ·æ–°åï¼Œå…¨å±€æŒ‚è½½çš„signalRä¼šæ¶ˆå¤±ï¼Œæ‰€ä»¥éœ€è¦åœ¨App.vueä¸­å†åˆå§‹åŒ–ä¸€é mounted() {this.signalr.initSR(document.Domain);}, ","date":"2022-06-23","objectID":"/vue%E4%B8%AD%E5%85%A8%E5%B1%80%E5%B0%81%E8%A3%85signalr/:2:4","tags":[".NET"],"title":"Vueä¸­å…¨å±€å°è£…SignalR","uri":"/vue%E4%B8%AD%E5%85%A8%E5%B1%80%E5%B0%81%E8%A3%85signalr/"},{"categories":["å®è·µç¬”è®°"],"content":"5. é¡µé¢ä¸­ä½¿ç”¨ this.signalr.SR.on('æ–¹æ³•', function (data) { // æ¥æ”¶åè¦åšçš„äº‹ console.log('æ–¹æ³•', data) }) ç‰¹åˆ«æé†’ï¼ï¼ï¼ å½“é¡µé¢åˆ‡æ¢æ—¶ï¼Œéœ€è¦é”€æ¯æ³¨å†Œçš„æ–¹æ³•ï¼Œä¸ç„¶ä¼šå¯¼è‡´é‡å¤æ³¨å†Œæ–¹æ³•ï¼Œä¼šäº§ç”Ÿå¤šæ¬¡è°ƒç”¨æ³¨å†Œçš„æ–¹æ³•ï¼Œéœ€è¦å†ç¦»å¼€é¡µé¢æ—¶æ¸…ç©ºæ–¹æ³•ã€‚ destroyed() { // æˆ‘ä½¿ç”¨çš„æ–¹æ³• this.signalr.SR.off(\"æ–¹æ³•\") // ç½‘ä¸Šçš„æ–¹æ³•ï¼Œä½†æ˜¯æˆ‘ä½¿ç”¨æ— æ•ˆ this.signalr.SR.methods.æ–¹æ³• = [] } æœ¬æ–‡å‚è€ƒè‡ªï¼š https://www.jianshu.com/p/5dc07c81f94d ","date":"2022-06-23","objectID":"/vue%E4%B8%AD%E5%85%A8%E5%B1%80%E5%B0%81%E8%A3%85signalr/:2:5","tags":[".NET"],"title":"Vueä¸­å…¨å±€å°è£…SignalR","uri":"/vue%E4%B8%AD%E5%85%A8%E5%B1%80%E5%B0%81%E8%A3%85signalr/"},{"categories":["å®è·µç¬”è®°"],"content":"docker logs æ˜¯æˆ‘ä»¬ç»å¸¸ç”¨æ¥æŸ¥çœ‹å®¹å™¨è¿è¡Œæ—¥å¿—çš„å‘½ä»¤ï¼Œä½†æ˜¯åœ¨é•¿æ—¶é—´å®¹å™¨è¿è¡Œåï¼Œä¼šäº§ç”Ÿå¤§é‡çš„æ—¥å¿—ï¼Œä¼šå‘ç°è¶Šæ¥è¶Šæ…¢ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦æ¸…ç†æ—¥å¿—ã€‚ ","date":"2022-06-18","objectID":"/docker-%E6%B8%85%E7%90%86%E5%92%8C%E9%99%90%E5%88%B6%E5%AE%B9%E5%99%A8%E6%97%A5%E5%BF%97%E5%A4%A7%E5%B0%8F/:0:0","tags":["Docker"],"title":"Docker æ¸…ç†å’Œé™åˆ¶å®¹å™¨æ—¥å¿—å¤§å°","uri":"/docker-%E6%B8%85%E7%90%86%E5%92%8C%E9%99%90%E5%88%B6%E5%AE%B9%E5%99%A8%E6%97%A5%E5%BF%97%E5%A4%A7%E5%B0%8F/"},{"categories":["å®è·µç¬”è®°"],"content":"Docker æ¸…ç†æ—¥å¿— é€šè¿‡å‘½ä»¤ docker inspect --format='{{.LogPath}}' \u003cå®¹å™¨ID\u003e æŸ¥çœ‹å®¹å™¨çš„æ—¥å¿—è·¯å¾„ é€šè¿‡å‘½ä»¤ echo \u003e \u003cæ—¥å¿—è·¯å¾„\u003e æˆ–è€… cat /dev/null \u003e \u003cæ—¥å¿—è·¯å¾„\u003e æ¸…ç©ºå®¹å™¨çš„æ—¥å¿— ","date":"2022-06-18","objectID":"/docker-%E6%B8%85%E7%90%86%E5%92%8C%E9%99%90%E5%88%B6%E5%AE%B9%E5%99%A8%E6%97%A5%E5%BF%97%E5%A4%A7%E5%B0%8F/:1:0","tags":["Docker"],"title":"Docker æ¸…ç†å’Œé™åˆ¶å®¹å™¨æ—¥å¿—å¤§å°","uri":"/docker-%E6%B8%85%E7%90%86%E5%92%8C%E9%99%90%E5%88%B6%E5%AE%B9%E5%99%A8%E6%97%A5%E5%BF%97%E5%A4%A7%E5%B0%8F/"},{"categories":["å®è·µç¬”è®°"],"content":"Docker é™åˆ¶æ—¥å¿—å¤§å° æ–°å»ºæˆ–ä¿®æ”¹ /etc/docker/daemon.json æ–‡ä»¶, å†…å®¹å¦‚ä¸‹ï¼š { \"log-driver\": \"json-file\", \"log-opts\": { \"max-size\": \"500m\", // æ—¥å¿—æ–‡ä»¶æœ€å¤§å¤§å° \"max-file\": \"3\" // æ—¥å¿—æ–‡ä»¶æœ€å¤§æ•°é‡ } } ç„¶åé‡å¯dockerçš„å®ˆæŠ¤çº¿ç¨‹ systemctl daemon-reload systemctl restart docker ","date":"2022-06-18","objectID":"/docker-%E6%B8%85%E7%90%86%E5%92%8C%E9%99%90%E5%88%B6%E5%AE%B9%E5%99%A8%E6%97%A5%E5%BF%97%E5%A4%A7%E5%B0%8F/:2:0","tags":["Docker"],"title":"Docker æ¸…ç†å’Œé™åˆ¶å®¹å™¨æ—¥å¿—å¤§å°","uri":"/docker-%E6%B8%85%E7%90%86%E5%92%8C%E9%99%90%E5%88%B6%E5%AE%B9%E5%99%A8%E6%97%A5%E5%BF%97%E5%A4%A7%E5%B0%8F/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"ç®€ä»‹ ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æ¥å¤„ç†æœç´¢æ–‡æœ¬ï¼Œèƒ½å¤Ÿæé«˜çµæ´»æ€§ã€‚ é€šè¿‡ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ï¼Œå¯ä»¥åšåˆ°ï¼š æµ‹è¯•å­—ç¬¦ä¸²å†…çš„æ¨¡å¼ï¼Œä¾‹å¦‚ï¼Œå¯ä»¥åŒ¹é…å­—ç¬¦ä¸²æ˜¯å¦æ»¡è¶³ç”µè¯å·ç æˆ–ä¿¡ç”¨å¡å·ç çš„æ¨¡å¼ï¼Œè¿›è¡Œæ•°æ®éªŒè¯ æ›¿æ¢æ–‡æœ¬ï¼Œä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æ¥è¯†åˆ«æ–‡æ¡£ä¸­çš„ç‰¹å®šæ–‡æœ¬ï¼Œå®Œå…¨åˆ é™¤è¯¥æ–‡æœ¬æˆ–ç”¨å…¶ä»–æ–‡æœ¬æ›¿æ¢å®ƒ åŸºäºæ¨¡å¼åŒ¹é…ä»å­—ç¬¦ä¸²ä¸­æå–å­å­—ç¬¦ä¸²ï¼Œå¯ä»¥æŸ¥æ‰¾æ–‡æ¡£å†…æˆ–è¾“å…¥åŸŸå†…ç‰¹å®šçš„æ–‡æœ¬ ","date":"2022-06-16","objectID":"/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E6%80%BB%E7%BB%93/:1:0","tags":["æ­£åˆ™è¡¨è¾¾å¼"],"title":"æ­£åˆ™è¡¨è¾¾å¼æ€»ç»“","uri":"/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E6%80%BB%E7%BB%93/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"åŸºæœ¬è¯­æ³• ","date":"2022-06-16","objectID":"/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E6%80%BB%E7%BB%93/:2:0","tags":["æ­£åˆ™è¡¨è¾¾å¼"],"title":"æ­£åˆ™è¡¨è¾¾å¼æ€»ç»“","uri":"/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E6%80%BB%E7%BB%93/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"ä¿®é¥°ç¬¦ ä¿®é¥°ç¬¦ å«ä¹‰ æè¿° i ignore - ä¸åŒºåˆ†å¤§å°å†™ å°†åŒ¹é…è®¾ç½®ä¸ºä¸åŒºåˆ†å¤§å°å†™ï¼Œæœç´¢æ—¶ä¸åŒºåˆ†å¤§å°å†™:Aå’Œaæ²¡æœ‰åŒºåˆ« g global - å…¨å±€åŒ¹é… æŸ¥æ‰¾æ‰€æœ‰çš„åŒ¹é…é¡¹ m multi line - å¤šè¡ŒåŒ¹é… ä½¿è¾¹ç•Œå­—ç¬¦ ^ å’Œ $ åŒ¹é…æ¯ä¸€è¡Œçš„å¼€å¤´å’Œç»“å°¾ï¼Œè®°ä½æ˜¯å¤šè¡Œï¼Œè€Œä¸æ˜¯æ•´ä¸ªå­—ç¬¦ä¸²çš„å¼€å¤´å’Œç»“å°¾ s ç‰¹æ®Šå­—ç¬¦åœ†ç‚¹ . ä¸­åŒ…å«æ¢è¡Œç¬¦ \\n é»˜è®¤æƒ…å†µä¸‹çš„åœ†ç‚¹ . æ˜¯åŒ¹é…é™¤æ¢è¡Œç¬¦ \\n ä¹‹å¤–çš„ä»»ä½•å­—ç¬¦ï¼ŒåŠ ä¸Š s ä¿®é¥°ç¬¦ä¹‹å, . ä¸­åŒ…å«æ¢è¡Œç¬¦ \\n ","date":"2022-06-16","objectID":"/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E6%80%BB%E7%BB%93/:2:1","tags":["æ­£åˆ™è¡¨è¾¾å¼"],"title":"æ­£åˆ™è¡¨è¾¾å¼æ€»ç»“","uri":"/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E6%80%BB%E7%BB%93/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"å…ƒå­—ç¬¦ æ™®é€šå­—ç¬¦ å­—ç¬¦ æè¿° [ABC] åŒ¹é… [â€¦] ä¸­çš„æ‰€æœ‰å­—ç¬¦ [^ABC] åŒ¹é…é™¤äº† [â€¦] ä¸­å­—ç¬¦çš„æ‰€æœ‰å­—ç¬¦ [A-Z] [A-Z] è¡¨ç¤ºä¸€ä¸ªåŒºé—´ï¼ŒåŒ¹é…æ‰€æœ‰å¤§å†™å­—æ¯ï¼Œ[a-z] è¡¨ç¤ºæ‰€æœ‰å°å†™å­—æ¯ . åŒ¹é…é™¤æ¢è¡Œç¬¦ï¼ˆ\\nã€\\rï¼‰ä¹‹å¤–çš„ä»»ä½•å•ä¸ªå­—ç¬¦ï¼Œç›¸ç­‰äº [^\\n\\r] [\\s\\S] åŒ¹é…æ‰€æœ‰ã€‚\\s æ˜¯åŒ¹é…æ‰€æœ‰ç©ºç™½ç¬¦ï¼ŒåŒ…æ‹¬æ¢è¡Œï¼Œ\\S éç©ºç™½ç¬¦ï¼Œä¸åŒ…æ‹¬æ¢è¡Œ \\w åŒ¹é…å­—æ¯ã€æ•°å­—ã€ä¸‹åˆ’çº¿ã€‚ç­‰ä»·äº [A-Za-z0-9_] \\W åŒ¹é…éå­—æ¯ã€æ•°å­—ã€ä¸‹åˆ’çº¿ã€‚ç­‰ä»·äº â€˜[^A-Za-z0-9_]â€™ \\d åŒ¹é…ä¸€ä¸ªæ•°å­—å­—ç¬¦ã€‚ç­‰ä»·äº [0-9] \\D åŒ¹é…ä¸€ä¸ªéæ•°å­—å­—ç¬¦ã€‚ç­‰ä»·äº [^0-9] \\xn åŒ¹é… nï¼Œå…¶ä¸­ n ä¸ºåå…­è¿›åˆ¶è½¬ä¹‰å€¼ã€‚åå…­è¿›åˆ¶è½¬ä¹‰å€¼å¿…é¡»ä¸ºç¡®å®šçš„ä¸¤ä¸ªæ•°å­—é•¿ã€‚ä¾‹å¦‚ï¼Œâ€™\\x41â€™ åŒ¹é… â€œAâ€ \\num åŒ¹é… numï¼Œå…¶ä¸­ num æ˜¯ä¸€ä¸ªæ­£æ•´æ•° éæ‰“å°å­—ç¬¦ å­—ç¬¦ æè¿° \\cx åŒ¹é…ç”±xæŒ‡æ˜çš„æ§åˆ¶å­—ç¬¦ã€‚ä¾‹å¦‚ï¼Œ \\cM åŒ¹é…ä¸€ä¸ª Control-M æˆ–å›è½¦ç¬¦ \\f åŒ¹é…ä¸€ä¸ªæ¢é¡µç¬¦ \\n åŒ¹é…ä¸€ä¸ªæ¢è¡Œç¬¦ \\r åŒ¹é…ä¸€ä¸ªå›è½¦ç¬¦ \\s åŒ¹é…ä»»ä½•ç©ºç™½å­—ç¬¦ï¼ŒåŒ…æ‹¬ç©ºæ ¼ã€åˆ¶è¡¨ç¬¦ã€æ¢é¡µç¬¦ç­‰ç­‰ \\S åŒ¹é…ä»»ä½•éç©ºç™½å­—ç¬¦ \\t åŒ¹é…ä¸€ä¸ªåˆ¶è¡¨ç¬¦ \\v åŒ¹é…ä¸€ä¸ªå‚ç›´åˆ¶è¡¨ç¬¦ ç‰¹æ®Šå­—ç¬¦ å­—ç¬¦ æè¿° $ åŒ¹é…è¾“å…¥å­—ç¬¦ä¸²çš„ç»“å°¾ä½ç½® () æ ‡è®°ä¸€ä¸ªå­è¡¨è¾¾å¼çš„å¼€å§‹å’Œç»“æŸä½ç½®ã€‚å­è¡¨è¾¾å¼å¯ä»¥è·å–ä¾›ä»¥åä½¿ç”¨ * åŒ¹é…å‰é¢çš„å­è¡¨è¾¾å¼é›¶æ¬¡æˆ–å¤šæ¬¡ + åŒ¹é…å‰é¢çš„å­è¡¨è¾¾å¼ä¸€æ¬¡æˆ–å¤šæ¬¡ . åŒ¹é…é™¤æ¢è¡Œç¬¦ \\n ä¹‹å¤–çš„ä»»ä½•å•å­—ç¬¦ [ æ ‡è®°ä¸€ä¸ªä¸­æ‹¬å·è¡¨è¾¾å¼çš„å¼€å§‹ ? åŒ¹é…å‰é¢çš„å­è¡¨è¾¾å¼é›¶æ¬¡æˆ–ä¸€æ¬¡ï¼Œæˆ–æŒ‡æ˜ä¸€ä¸ªéè´ªå©ªé™å®šç¬¦(å°½å¯èƒ½å°‘çš„åŒ¹é…æ‰€æœç´¢çš„å­—ç¬¦ä¸²) \\ å°†ä¸‹ä¸€ä¸ªå­—ç¬¦æ ‡è®°ä¸ºæˆ–ç‰¹æ®Šå­—ç¬¦ã€æˆ–åŸä¹‰å­—ç¬¦ã€æˆ–å‘åå¼•ç”¨ã€æˆ–å…«è¿›åˆ¶è½¬ä¹‰ç¬¦ ^ åŒ¹é…è¾“å…¥å­—ç¬¦ä¸²çš„å¼€å§‹ä½ç½®ï¼›ä¸æ¥å—è¯¥æ–¹æ‹¬å·è¡¨è¾¾å¼ä¸­çš„å­—ç¬¦é›†åˆ { æ ‡è®°é™å®šç¬¦è¡¨è¾¾å¼çš„å¼€å§‹ | æŒ‡æ˜ä¸¤é¡¹ä¹‹é—´çš„ä¸€ä¸ªé€‰æ‹© é™å®šç¬¦ å­—ç¬¦ æè¿° * åŒ¹é…å‰é¢çš„å­è¡¨è¾¾å¼é›¶æ¬¡æˆ–å¤šæ¬¡ + åŒ¹é…å‰é¢çš„å­è¡¨è¾¾å¼ä¸€æ¬¡æˆ–å¤šæ¬¡ ? åŒ¹é…å‰é¢çš„å­è¡¨è¾¾å¼é›¶æ¬¡æˆ–ä¸€æ¬¡ {n} n æ˜¯ä¸€ä¸ªéè´Ÿæ•´æ•°ã€‚åŒ¹é…ç¡®å®šçš„ n æ¬¡ {n,} n æ˜¯ä¸€ä¸ªéè´Ÿæ•´æ•°ã€‚è‡³å°‘åŒ¹é…n æ¬¡ {n,m} m å’Œ n å‡ä¸ºéè´Ÿæ•´æ•°ï¼Œå…¶ä¸­n \u003c= mã€‚æœ€å°‘åŒ¹é… n æ¬¡ä¸”æœ€å¤šåŒ¹é… m æ¬¡ å®šä½ç¬¦ å­—ç¬¦ æè¿° ^ åŒ¹é…è¾“å…¥å­—ç¬¦ä¸²å¼€å§‹çš„ä½ç½® $ åŒ¹é…è¾“å…¥å­—ç¬¦ä¸²ç»“å°¾çš„ä½ç½® \\b åŒ¹é…ä¸€ä¸ªå•è¯è¾¹ç•Œï¼Œå³å­—ä¸ç©ºæ ¼é—´çš„ä½ç½® \\B éå•è¯è¾¹ç•ŒåŒ¹é… ?: ?= ?! ?\u003c= ?\u003e! å­—ç¬¦ æè¿° (?:pattern) åŒ¹é… pattern ä½†ä¸è·å–åŒ¹é…ç»“æœ (?=pattern) æ­£å‘è‚¯å®šé¢„æŸ¥ (?!pattern) æ­£å‘å¦å®šé¢„æŸ¥ (?\u003c=pattern) åå‘è‚¯å®šé¢„æŸ¥ (?\u003c!pattern) åå‘å¦å®šé¢„æŸ¥ å…¶ä»– å­—ç¬¦ æè¿° \\d åŒ¹é… pattern ä½†ä¸è·å–åŒ¹é…ç»“æœ \\D æ­£å‘è‚¯å®šé¢„æŸ¥ (?!pattern) æ­£å‘å¦å®šé¢„æŸ¥ (?\u003c=pattern) åå‘è‚¯å®šé¢„æŸ¥ (?\u003c!pattern) åå‘å¦å®šé¢„æŸ¥ ","date":"2022-06-16","objectID":"/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E6%80%BB%E7%BB%93/:2:2","tags":["æ­£åˆ™è¡¨è¾¾å¼"],"title":"æ­£åˆ™è¡¨è¾¾å¼æ€»ç»“","uri":"/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E6%80%BB%E7%BB%93/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"è¿ç®—ç¬¦ä¼˜å…ˆçº§ ç›¸åŒä¼˜å…ˆçº§çš„ä»å·¦åˆ°å³è¿›è¡Œè¿ç®—ï¼Œä¸åŒä¼˜å…ˆçº§çš„è¿ç®—å…ˆé«˜åä½ã€‚ä¸‹è¡¨ä»æœ€é«˜åˆ°æœ€ä½è¯´æ˜äº†å„ç§æ­£åˆ™è¡¨è¾¾å¼è¿ç®—ç¬¦çš„ä¼˜å…ˆçº§é¡ºåºï¼š è¿ç®—ç¬¦ æè¿° \\ è½¬ä¹‰ç¬¦ (), (?: ), (?=), [] åœ†æ‹¬å·å’Œæ–¹æ‹¬å· *, +, ?, {n}, {n,}, {n,m} é™å®šç¬¦ ^, $, \\ä»»ä½•å…ƒå­—ç¬¦ã€ä»»ä½•å­—ç¬¦ å®šä½ç‚¹å’Œåºåˆ— | æ›¿æ¢ï¼Œâ€œæˆ–\"æ“ä½œ ","date":"2022-06-16","objectID":"/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E6%80%BB%E7%BB%93/:2:3","tags":["æ­£åˆ™è¡¨è¾¾å¼"],"title":"æ­£åˆ™è¡¨è¾¾å¼æ€»ç»“","uri":"/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E6%80%BB%E7%BB%93/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"ç¤ºä¾‹ é€šè¿‡ /\\b[\\w.%+-]+@[\\w.-]+\\.[a-zA-Z]{2,6}\\b/g åŒ¹é…é‚®ç®±åœ°å€ ","date":"2022-06-16","objectID":"/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E6%80%BB%E7%BB%93/:3:0","tags":["æ­£åˆ™è¡¨è¾¾å¼"],"title":"æ­£åˆ™è¡¨è¾¾å¼æ€»ç»“","uri":"/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E6%80%BB%E7%BB%93/"},{"categories":["å®è·µç¬”è®°"],"content":"åœ¨ä½¿ç”¨dockeræ—¶ï¼Œå¸¸å¸¸éœ€è¦å¯¹å·²å¯åŠ¨çš„å®¹å™¨è¿›è¡Œç›¸åº”çš„é…ç½®ä¿®æ”¹ï¼Œå…¶ä¸­æœ€å¸¸è§çš„å°±æ˜¯æŒ‚è½½ç›®å½•æˆ–ç«¯å£æ˜ å°„ã€‚å…¶å®é…ç½®ä¹Ÿå¹¶ä¸æ˜¯éå¸¸å¤æ‚ï¼Œå¯ä»¥é€šè¿‡ä¿®æ”¹dockerä¸­çš„jsoné…ç½®æ–‡ä»¶å³å¯ã€‚ ä»¥ä¸‹ä¸ºè¯¦ç»†ä¿®æ”¹æ­¥éª¤ ","date":"2022-06-14","objectID":"/docker%E4%B8%BA%E5%B7%B2%E5%90%AF%E5%8A%A8%E5%AE%B9%E5%99%A8%E6%B7%BB%E5%8A%A0%E6%8C%82%E8%BD%BD%E7%9B%AE%E5%BD%95%E6%88%96%E7%AB%AF%E5%8F%A3%E6%98%A0%E5%B0%84/:0:0","tags":["Docker"],"title":"dockerä¸ºå·²å¯åŠ¨å®¹å™¨æ·»åŠ æŒ‚è½½ç›®å½•æˆ–ç«¯å£æ˜ å°„","uri":"/docker%E4%B8%BA%E5%B7%B2%E5%90%AF%E5%8A%A8%E5%AE%B9%E5%99%A8%E6%B7%BB%E5%8A%A0%E6%8C%82%E8%BD%BD%E7%9B%AE%E5%BD%95%E6%88%96%E7%AB%AF%E5%8F%A3%E6%98%A0%E5%B0%84/"},{"categories":["å®è·µç¬”è®°"],"content":"1. å…ˆæŸ¥çœ‹éœ€è¦ä¿®æ”¹çš„å®¹å™¨çš„idå· é¦–å…ˆé€šè¿‡ docker ps -a æŸ¥çœ‹ CONTAINER ID å†é€šè¿‡ docker inspect \u003ccontainer_id\u003e æŸ¥çœ‹ Id ï¼ˆä¸€èˆ¬åœ¨æœ€å¼€å§‹çš„ä½ç½®ï¼‰ ","date":"2022-06-14","objectID":"/docker%E4%B8%BA%E5%B7%B2%E5%90%AF%E5%8A%A8%E5%AE%B9%E5%99%A8%E6%B7%BB%E5%8A%A0%E6%8C%82%E8%BD%BD%E7%9B%AE%E5%BD%95%E6%88%96%E7%AB%AF%E5%8F%A3%E6%98%A0%E5%B0%84/:1:0","tags":["Docker"],"title":"dockerä¸ºå·²å¯åŠ¨å®¹å™¨æ·»åŠ æŒ‚è½½ç›®å½•æˆ–ç«¯å£æ˜ å°„","uri":"/docker%E4%B8%BA%E5%B7%B2%E5%90%AF%E5%8A%A8%E5%AE%B9%E5%99%A8%E6%B7%BB%E5%8A%A0%E6%8C%82%E8%BD%BD%E7%9B%AE%E5%BD%95%E6%88%96%E7%AB%AF%E5%8F%A3%E6%98%A0%E5%B0%84/"},{"categories":["å®è·µç¬”è®°"],"content":"2. å…³é—­dockeræœåŠ¡ åœ¨åšç›¸åº”é…ç½®å‰ï¼Œä¸€å®šè¦å…ˆåœæ­¢dockeræœåŠ¡ï¼Œå¦åˆ™ä¼šä¿®æ”¹ä¸æˆåŠŸã€‚ systemctl stop docker ","date":"2022-06-14","objectID":"/docker%E4%B8%BA%E5%B7%B2%E5%90%AF%E5%8A%A8%E5%AE%B9%E5%99%A8%E6%B7%BB%E5%8A%A0%E6%8C%82%E8%BD%BD%E7%9B%AE%E5%BD%95%E6%88%96%E7%AB%AF%E5%8F%A3%E6%98%A0%E5%B0%84/:2:0","tags":["Docker"],"title":"dockerä¸ºå·²å¯åŠ¨å®¹å™¨æ·»åŠ æŒ‚è½½ç›®å½•æˆ–ç«¯å£æ˜ å°„","uri":"/docker%E4%B8%BA%E5%B7%B2%E5%90%AF%E5%8A%A8%E5%AE%B9%E5%99%A8%E6%B7%BB%E5%8A%A0%E6%8C%82%E8%BD%BD%E7%9B%AE%E5%BD%95%E6%88%96%E7%AB%AF%E5%8F%A3%E6%98%A0%E5%B0%84/"},{"categories":["å®è·µç¬”è®°"],"content":"3. å‰å¾€dockeré…ç½®æ–‡ä»¶ç›®å½• é€šè¿‡ä»¥ä¸‹å‘½ä»¤å³å¯è¿›å…¥åˆ°é…ç½®æ–‡ä»¶ç›®å½•ï¼š cd /var/lib/docker/containers/\u003ccontainer_id\u003e ","date":"2022-06-14","objectID":"/docker%E4%B8%BA%E5%B7%B2%E5%90%AF%E5%8A%A8%E5%AE%B9%E5%99%A8%E6%B7%BB%E5%8A%A0%E6%8C%82%E8%BD%BD%E7%9B%AE%E5%BD%95%E6%88%96%E7%AB%AF%E5%8F%A3%E6%98%A0%E5%B0%84/:3:0","tags":["Docker"],"title":"dockerä¸ºå·²å¯åŠ¨å®¹å™¨æ·»åŠ æŒ‚è½½ç›®å½•æˆ–ç«¯å£æ˜ å°„","uri":"/docker%E4%B8%BA%E5%B7%B2%E5%90%AF%E5%8A%A8%E5%AE%B9%E5%99%A8%E6%B7%BB%E5%8A%A0%E6%8C%82%E8%BD%BD%E7%9B%AE%E5%BD%95%E6%88%96%E7%AB%AF%E5%8F%A3%E6%98%A0%E5%B0%84/"},{"categories":["å®è·µç¬”è®°"],"content":"4. ä¿®æ”¹hostconfig.jsonæ–‡ä»¶ é€šè¿‡ vim hostconfig.json å³å¯ä¿®æ”¹é…ç½®æ–‡ä»¶ã€‚ vimä¸­å¯ä»¥é€šè¿‡ /å­—ç¬¦ä¸² å¿«é€Ÿå®šä½å­—ç¬¦ä¸²ä½ç½® ä¿®æ”¹ä»¥ä¸‹å†…å®¹é…ç½®ç«¯å£æ˜ å°„ { ... \"PortBindings\": { \"80/tcp\": [ { \"HostIp\": \"\", \"HostPort\": \"8080\" } ] } ... } ä¿®æ”¹ä»¥ä¸‹å†…å®¹é…ç½®æŒ‚è½½ç›®å½• { ... \"Binds\": [ \"/home/docker/www:/var/www\" ] ... // å…¶ä¸­ `/home/docker/www` ä¸ºå®¿ä¸»æœºç›®å½•ï¼Œ`/var/www` ä¸ºå®¹å™¨ç›®å½• } ","date":"2022-06-14","objectID":"/docker%E4%B8%BA%E5%B7%B2%E5%90%AF%E5%8A%A8%E5%AE%B9%E5%99%A8%E6%B7%BB%E5%8A%A0%E6%8C%82%E8%BD%BD%E7%9B%AE%E5%BD%95%E6%88%96%E7%AB%AF%E5%8F%A3%E6%98%A0%E5%B0%84/:4:0","tags":["Docker"],"title":"dockerä¸ºå·²å¯åŠ¨å®¹å™¨æ·»åŠ æŒ‚è½½ç›®å½•æˆ–ç«¯å£æ˜ å°„","uri":"/docker%E4%B8%BA%E5%B7%B2%E5%90%AF%E5%8A%A8%E5%AE%B9%E5%99%A8%E6%B7%BB%E5%8A%A0%E6%8C%82%E8%BD%BD%E7%9B%AE%E5%BD%95%E6%88%96%E7%AB%AF%E5%8F%A3%E6%98%A0%E5%B0%84/"},{"categories":["å®è·µç¬”è®°"],"content":"4. ä¿®æ”¹config.v2.jsonæ–‡ä»¶ é€šè¿‡ vim config.v2.json å³å¯ä¿®æ”¹é…ç½®æ–‡ä»¶ã€‚ ä¿®æ”¹ä»¥ä¸‹å†…å®¹é…ç½®ç«¯å£æ˜ å°„ { ... \"ExposedPorts\": { \"80/tcp\": {}, } ... } ä¿®æ”¹ä»¥ä¸‹å†…å®¹é…ç½®æŒ‚è½½ç›®å½• { ... \"MountPoints\": { \"/var/www\": { \"Source\": \"/home/docker/www\", \"Destination\": \"/var/www\", \"RW\": true, \"Name\": \"\", \"Driver\": \"\", \"Type\": \"bind\", \"Propagation\": \"rprivate\", \"Spec\": { \"Type\": \"bind\", \"Source\": \"/home/docker/www\", \"Target\": \"/var/www\", } \"SkipMountpointCreation\": false, } } ... // å…¶ä¸­ `/home/docker/www` ä¸ºå®¿ä¸»æœºç›®å½•ï¼Œ`/var/www` ä¸ºå®¹å™¨ç›®å½• } ","date":"2022-06-14","objectID":"/docker%E4%B8%BA%E5%B7%B2%E5%90%AF%E5%8A%A8%E5%AE%B9%E5%99%A8%E6%B7%BB%E5%8A%A0%E6%8C%82%E8%BD%BD%E7%9B%AE%E5%BD%95%E6%88%96%E7%AB%AF%E5%8F%A3%E6%98%A0%E5%B0%84/:5:0","tags":["Docker"],"title":"dockerä¸ºå·²å¯åŠ¨å®¹å™¨æ·»åŠ æŒ‚è½½ç›®å½•æˆ–ç«¯å£æ˜ å°„","uri":"/docker%E4%B8%BA%E5%B7%B2%E5%90%AF%E5%8A%A8%E5%AE%B9%E5%99%A8%E6%B7%BB%E5%8A%A0%E6%8C%82%E8%BD%BD%E7%9B%AE%E5%BD%95%E6%88%96%E7%AB%AF%E5%8F%A3%E6%98%A0%E5%B0%84/"},{"categories":["å®è·µç¬”è®°"],"content":"5. é‡å¯dockeræœåŠ¡ `systemctl start docker` ","date":"2022-06-14","objectID":"/docker%E4%B8%BA%E5%B7%B2%E5%90%AF%E5%8A%A8%E5%AE%B9%E5%99%A8%E6%B7%BB%E5%8A%A0%E6%8C%82%E8%BD%BD%E7%9B%AE%E5%BD%95%E6%88%96%E7%AB%AF%E5%8F%A3%E6%98%A0%E5%B0%84/:6:0","tags":["Docker"],"title":"dockerä¸ºå·²å¯åŠ¨å®¹å™¨æ·»åŠ æŒ‚è½½ç›®å½•æˆ–ç«¯å£æ˜ å°„","uri":"/docker%E4%B8%BA%E5%B7%B2%E5%90%AF%E5%8A%A8%E5%AE%B9%E5%99%A8%E6%B7%BB%E5%8A%A0%E6%8C%82%E8%BD%BD%E7%9B%AE%E5%BD%95%E6%88%96%E7%AB%AF%E5%8F%A3%E6%98%A0%E5%B0%84/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"ç´¢å¼• ","date":"2022-06-13","objectID":"/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BC%98%E5%8C%96/:0:0","tags":["æ•°æ®åº“","SQL"],"title":"æ•°æ®åº“ä¼˜åŒ–","uri":"/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BC%98%E5%8C%96/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"MySQL ç´¢å¼• MySQL çš„ç´¢å¼•æœ‰ä¸¤ç§åˆ†ç±»æ–¹å¼ï¼šé€»è¾‘åˆ†ç±»å’Œç‰©ç†åˆ†ç±» ","date":"2022-06-13","objectID":"/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BC%98%E5%8C%96/:1:0","tags":["æ•°æ®åº“","SQL"],"title":"æ•°æ®åº“ä¼˜åŒ–","uri":"/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BC%98%E5%8C%96/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"é€»è¾‘åˆ†ç±» ä¸»é”®ç´¢å¼•ï¼šä¸€å¼ è¡¨åªèƒ½æœ‰ä¸€ä¸ªä¸»é”®ç´¢å¼•ï¼Œä¸å…è®¸é‡å¤ã€ä¸å…è®¸ä¸º NULL å”¯ä¸€ç´¢å¼•ï¼šæ•°æ®åˆ—ä¸å…è®¸é‡å¤ï¼Œå…è®¸ä¸º NULL å€¼ï¼Œä¸€å¼ è¡¨å¯æœ‰å¤šä¸ªå”¯ä¸€ç´¢å¼•ï¼Œç´¢å¼•åˆ—çš„å€¼å¿…é¡»å”¯ä¸€ï¼Œä½†å…è®¸æœ‰ç©ºå€¼ã€‚å¦‚æœæ˜¯ç»„åˆç´¢å¼•ï¼Œåˆ™åˆ—å€¼çš„ç»„åˆå¿…é¡»å”¯ä¸€ æ™®é€šç´¢å¼•ï¼šä¸€å¼ è¡¨å¯ä»¥åˆ›å»ºå¤šä¸ªæ™®é€šç´¢å¼•ï¼Œä¸€ä¸ªæ™®é€šç´¢å¼•å¯ä»¥åŒ…å«å¤šä¸ªå­—æ®µï¼Œå…è®¸æ•°æ®é‡å¤ï¼Œå…è®¸ NULL å€¼æ’å…¥ å…¨æ–‡ç´¢å¼•ï¼šå®ƒæŸ¥æ‰¾çš„æ˜¯æ–‡æœ¬ä¸­çš„å…³é”®è¯ï¼Œä¸»è¦ç”¨äºå…¨æ–‡æ£€ç´¢ å•ä¾‹ç´¢å¼•ï¼šä¸€ä¸ªç´¢å¼•åªåŒ…å«ä¸€ä¸ªåˆ—ï¼Œä¸€ä¸ªè¡¨å¯ä»¥æœ‰å¤šä¸ªå•ä¾‹ç´¢å¼• ç»„åˆç´¢å¼•ï¼šä¸€ä¸ªç»„åˆç´¢å¼•åŒ…å«ä¸¤ä¸ªæˆ–ä¸¤ä¸ªä»¥ä¸Šçš„åˆ—ã€‚æŸ¥è¯¢çš„æ—¶å€™éµå¾ª mysql ç»„åˆç´¢å¼•çš„ â€œæœ€å·¦å‰ç¼€â€åŸåˆ™ï¼Œå³ä½¿ç”¨ where æ—¶æ¡ä»¶è¦æŒ‰ç…§å»ºç«‹ç´¢å¼•çš„æ—¶å€™å­—æ®µçš„æ’åˆ—æ–¹å¼æ”¾ç½®ç´¢å¼•æ‰ä¼šç”Ÿæ•ˆ ","date":"2022-06-13","objectID":"/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BC%98%E5%8C%96/:1:1","tags":["æ•°æ®åº“","SQL"],"title":"æ•°æ®åº“ä¼˜åŒ–","uri":"/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BC%98%E5%8C%96/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"ç‰©ç†åˆ†ç±» èšç°‡ç´¢å¼•ï¼šä¸æ˜¯å•ç‹¬çš„ä¸€ç§ç´¢å¼•ç±»å‹ï¼Œè€Œæ˜¯ä¸€ç§æ•°æ®å­˜å‚¨æ–¹å¼ã€‚è¿™ç§å­˜å‚¨æ–¹å¼æ˜¯ä¾é B+æ ‘æ¥å®ç°çš„ï¼Œæ ¹æ®è¡¨çš„ä¸»é”®æ„é€ ä¸€æ£µB+æ ‘ä¸”B+æ ‘å¶å­èŠ‚ç‚¹å­˜æ”¾çš„éƒ½æ˜¯è¡¨çš„è¡Œè®°å½•æ•°æ®æ—¶ï¼Œæ–¹å¯ç§°è¯¥ä¸»é”®ç´¢å¼•ä¸ºèšç°‡ç´¢å¼•ã€‚èšç°‡ç´¢å¼•ä¹Ÿå¯ç†è§£ä¸ºå°†æ•°æ®å­˜å‚¨ä¸ç´¢å¼•æ”¾åˆ°äº†ä¸€å—ï¼Œæ‰¾åˆ°ç´¢å¼•ä¹Ÿå°±æ‰¾åˆ°äº†æ•°æ®ã€‚ éèšç°‡ç´¢å¼•ï¼šæ•°æ®å’Œç´¢å¼•æ˜¯åˆ†å¼€çš„ï¼ŒB+æ ‘å¶å­èŠ‚ç‚¹å­˜æ”¾çš„ä¸æ˜¯æ•°æ®è¡¨çš„è¡Œè®°å½• ","date":"2022-06-13","objectID":"/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BC%98%E5%8C%96/:1:2","tags":["æ•°æ®åº“","SQL"],"title":"æ•°æ®åº“ä¼˜åŒ–","uri":"/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BC%98%E5%8C%96/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"EXPLAIN ä½¿ç”¨æ ¼å¼ï¼šEXPLAIN SQL...; è¿”å›ç»“æœåŒ…å«ï¼š id:é€‰æ‹©æ ‡è¯†ç¬¦ select_type:è¡¨ç¤ºæŸ¥è¯¢çš„ç±»å‹ã€‚ table:è¾“å‡ºç»“æœé›†çš„è¡¨ partitions:åŒ¹é…çš„åˆ†åŒº type:è¡¨ç¤ºè¡¨çš„è¿æ¥ç±»å‹ possible_keys:è¡¨ç¤ºæŸ¥è¯¢æ—¶ï¼Œå¯èƒ½ä½¿ç”¨çš„ç´¢å¼• key:è¡¨ç¤ºå®é™…ä½¿ç”¨çš„ç´¢å¼• key_len:ç´¢å¼•å­—æ®µçš„é•¿åº¦ ref:åˆ—ä¸ç´¢å¼•çš„æ¯”è¾ƒ rows:æ‰«æå‡ºçš„è¡Œæ•°(ä¼°ç®—çš„è¡Œæ•°) filtered:æŒ‰è¡¨æ¡ä»¶è¿‡æ»¤çš„è¡Œç™¾åˆ†æ¯” Extra:æ‰§è¡Œæƒ…å†µçš„æè¿°å’Œè¯´æ˜ ","date":"2022-06-13","objectID":"/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BC%98%E5%8C%96/:1:3","tags":["æ•°æ®åº“","SQL"],"title":"æ•°æ®åº“ä¼˜åŒ–","uri":"/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BC%98%E5%8C%96/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"SQL Server ç´¢å¼• å”¯ä¸€ç´¢å¼•ï¼ˆUNIQUEï¼‰ï¼šå”¯ä¸€ç´¢å¼•ä¸å…è®¸ä¸¤è¡Œå…·æœ‰ç›¸åŒçš„ç´¢å¼•å€¼ ä¸»é”®ç´¢å¼•ï¼šä¸ºè¡¨å®šä¹‰ä¸€ä¸ªä¸»é”®å°†è‡ªåŠ¨åˆ›å»ºä¸»é”®ç´¢å¼•ï¼Œä¸»é”®ç´¢å¼•æ˜¯å”¯ä¸€ç´¢å¼•çš„ç‰¹æ®Šç±»å‹ã€‚ä¸»é”®ç´¢å¼•è¦æ±‚ä¸»é”®ä¸­çš„æ¯ä¸ªå€¼æ˜¯å”¯ä¸€çš„ï¼Œå¹¶ä¸”ä¸èƒ½ä¸ºç©º èšé›†ç´¢å¼•(Clustered)ï¼šè¡¨ä¸­å„è¡Œçš„ç‰©ç†é¡ºåºä¸é”®å€¼çš„é€»è¾‘ï¼ˆç´¢å¼•ï¼‰é¡ºåºç›¸åŒï¼Œæ¯ä¸ªè¡¨æœ€å¤šåªèƒ½æœ‰ä¸€ä¸ªï¼Œè®¾ç½®æŸåˆ—ä¸ºä¸»é”®ï¼Œè¯¥åˆ—å°±é»˜è®¤ä¸ºèšé›†ç´¢å¼• éèšé›†ç´¢å¼•(NonClustered)ï¼šéèšé›†ç´¢å¼•æŒ‡å®šè¡¨çš„é€»è¾‘é¡ºåºã€‚æ•°æ®å­˜å‚¨åœ¨ä¸€ä¸ªä½ç½®ï¼Œç´¢å¼•å­˜å‚¨åœ¨å¦ä¸€ä¸ªä½ç½®ï¼Œç´¢å¼•ä¸­åŒ…å«æŒ‡å‘æ•°æ®å­˜å‚¨ä½ç½®çš„æŒ‡é’ˆã€‚å¯ä»¥æœ‰å¤šä¸ªï¼Œå°äº249ä¸ª SQL ä¼˜åŒ– æ€»ç»“SQLä¼˜åŒ–ä¸­ï¼Œå°±ä¸‰ç‚¹: æœ€å¤§åŒ–åˆ©ç”¨ç´¢å¼•ï¼› å°½å¯èƒ½é¿å…å…¨è¡¨æ‰«æï¼› å‡å°‘æ— æ•ˆæ•°æ®çš„æŸ¥è¯¢ï¼› ","date":"2022-06-13","objectID":"/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BC%98%E5%8C%96/:2:0","tags":["æ•°æ®åº“","SQL"],"title":"æ•°æ®åº“ä¼˜åŒ–","uri":"/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BC%98%E5%8C%96/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"é¿å…ä¸èµ°ç´¢å¼•çš„åœºæ™¯ ","date":"2022-06-13","objectID":"/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BC%98%E5%8C%96/:3:0","tags":["æ•°æ®åº“","SQL"],"title":"æ•°æ®åº“ä¼˜åŒ–","uri":"/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BC%98%E5%8C%96/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"1. å°½é‡é¿å…åœ¨å­—æ®µå¼€å¤´æ¨¡ç³ŠæŸ¥è¯¢ï¼Œä¼šå¯¼è‡´æ•°æ®åº“å¼•æ“æ”¾å¼ƒç´¢å¼•è¿›è¡Œå…¨è¡¨æ‰«ç  ä¾‹å¦‚ï¼š SELECT * FROM user WHERE name LIKE '%æ%' ä¼˜åŒ–æ–¹å¼ï¼šå°½é‡åœ¨å­—æ®µåé¢ä½¿ç”¨æ¨¡ç³ŠæŸ¥è¯¢ï¼Œä¾‹å¦‚ï¼š SELECT * FROM user WHERE name LIKE 'æ%' å¦‚æœéœ€è¦åœ¨å‰é¢ä½¿ç”¨æ¨¡ç³ŠæŸ¥è¯¢ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹æ–¹å¼ï¼š ä½¿ç”¨MySQLå†…ç½®å‡½æ•°INSTR(str, substr)ï¼Œè¿”å›åŒ¹é…å­ä¸²çš„ä½ç½®,ç±»ä¼¼Javaä¸­çš„str.indexOf(substr) ä½¿ç”¨FullTextå…¨æ–‡ç´¢å¼•ï¼Œç”¨match againstæ£€ç´¢ æ•°æ®é‡è¾ƒå¤§çš„æƒ…å†µï¼Œä½¿ç”¨ElasticSearchã€solrï¼Œäº¿çº§æ•°æ®é‡æ£€ç´¢é€Ÿåº¦ç§’çº§ å½“æ•°æ®é‡è¾ƒå°‘æ—¶ï¼ˆå‡ åƒæ¡ï¼‰ï¼Œç›´æ¥ç”¨LIKE '%æ%' ","date":"2022-06-13","objectID":"/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BC%98%E5%8C%96/:3:1","tags":["æ•°æ®åº“","SQL"],"title":"æ•°æ®åº“ä¼˜åŒ–","uri":"/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BC%98%E5%8C%96/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"2. å°½é‡é¿å…ä½¿ç”¨inå’Œnot inï¼Œä¼šå¯¼è‡´å…¨è¡¨æ‰«æ SELECT * FROM table WHERE id IN (2,3) ä¼˜åŒ–æ–¹å¼ï¼šå¦‚æœæ˜¯è¿ç»­æ•°å€¼ï¼Œå¯ä»¥ä½¿ç”¨betweenä»£æ›¿ï¼Œä¾‹å¦‚: SELECT * FROM table WHERE id BETWEEN 2 AND 3 å¦‚æœæ˜¯å­æŸ¥è¯¢ï¼Œå¯ä»¥ä½¿ç”¨EXISTSæˆ–NOT EXISTSä»£æ›¿ï¼Œä¾‹å¦‚: SELECT * FROM table WHERE EXISTS (SELECT id FROM table2 WHERE table.id = table2.id) ","date":"2022-06-13","objectID":"/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BC%98%E5%8C%96/:3:2","tags":["æ•°æ®åº“","SQL"],"title":"æ•°æ®åº“ä¼˜åŒ–","uri":"/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BC%98%E5%8C%96/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"3. å°½é‡é¿å…ä½¿ç”¨ORï¼Œä¼šå¯¼è‡´å…¨è¡¨æ‰«æ SELECT * FROM table WHERE id = 1 OR id = 2 ä¼˜åŒ–æ–¹å¼ï¼šå¯ä»¥ä½¿ç”¨Unionï¼Œä¾‹å¦‚: SELECT * FROM table WHERE id = 1 UNION SELECT * FROM table WHERE id = 2 ","date":"2022-06-13","objectID":"/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BC%98%E5%8C%96/:3:3","tags":["æ•°æ®åº“","SQL"],"title":"æ•°æ®åº“ä¼˜åŒ–","uri":"/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BC%98%E5%8C%96/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"4. å°½é‡é¿å…nullå€¼çš„åˆ¤æ–­ SELECT * FROM table WHERE id IS NULL ä¼˜åŒ–æ–¹å¼ï¼šå¯ä»¥ç»™å­—æ®µæ·»åŠ é»˜è®¤å€¼ï¼Œå¯¹é»˜è®¤å€¼è¿›è¡Œåˆ¤æ–­ï¼Œä¾‹å¦‚ï¼š SELECT * FROM table WHERE id = é»˜è®¤å€¼ ","date":"2022-06-13","objectID":"/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BC%98%E5%8C%96/:3:4","tags":["æ•°æ®åº“","SQL"],"title":"æ•°æ®åº“ä¼˜åŒ–","uri":"/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BC%98%E5%8C%96/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"5. å°½é‡é¿å…åœ¨whereæ¡ä»¶ä¸­ç­‰å·å·¦ä¾§è¿›è¡Œè¡¨è¾¾å¼ã€å‡½æ•°æ“ä½œ å¯ä»¥å°†è¡¨è¾¾å¼ã€å‡½æ•°æ“ä½œç§»åŠ¨åˆ°ç­‰å·å³ä¾§ï¼Œä¾‹å¦‚ï¼š -- å…¨è¡¨æ‰«ç  SELECT * FROM table WHERE score/10 = 9 -- èµ°ç´¢å¼• SELECT * FROM table WHERE score = 10 * 9 ","date":"2022-06-13","objectID":"/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BC%98%E5%8C%96/:3:5","tags":["æ•°æ®åº“","SQL"],"title":"æ•°æ®åº“ä¼˜åŒ–","uri":"/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BC%98%E5%8C%96/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"6. å½“æ•°æ®é‡å¤§æ—¶ï¼Œé¿å…ä½¿ç”¨where 1=1çš„æ¡ä»¶ é€šå¸¸ä¸ºäº†æ–¹ä¾¿æ‹¼æ¥æŸ¥è¯¢æ¡ä»¶ï¼Œä¼šä½¿ç”¨å®ƒæ¥ä½œä¸ºæ¡ä»¶ ä¼˜åŒ–æ–¹å¼ï¼šç”¨ä»£ç æ‹¼æ¥sqlæ—¶è¿›è¡Œåˆ¤æ–­ï¼Œæ²¡whereæ¡ä»¶å°±å»æ‰whereï¼Œæœ‰whereæ¡ä»¶å°±åŠ and ","date":"2022-06-13","objectID":"/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BC%98%E5%8C%96/:3:6","tags":["æ•°æ®åº“","SQL"],"title":"æ•°æ®åº“ä¼˜åŒ–","uri":"/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BC%98%E5%8C%96/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"7. æŸ¥è¯¢æ¡ä»¶ä¸èƒ½ç”¨\u003c\u003eæˆ–è€…!= ä½¿ç”¨ç´¢å¼•åˆ—ä½œä¸ºæ¡ä»¶è¿›è¡ŒæŸ¥è¯¢æ—¶ï¼Œéœ€è¦é¿å…ä½¿ç”¨\u003c\u003eæˆ–è€…!=ç­‰åˆ¤æ–­æ¡ä»¶ã€‚å¦‚ç¡®å®ä¸šåŠ¡éœ€è¦ï¼Œä½¿ç”¨åˆ°ä¸ç­‰äºç¬¦å·ï¼Œéœ€è¦åœ¨é‡æ–°è¯„ä¼°ç´¢å¼•å»ºç«‹ï¼Œé¿å…åœ¨æ­¤å­—æ®µä¸Šå»ºç«‹ç´¢å¼•ï¼Œæ”¹ç”±æŸ¥è¯¢æ¡ä»¶ä¸­å…¶ä»–ç´¢å¼•å­—æ®µä»£æ›¿ ","date":"2022-06-13","objectID":"/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BC%98%E5%8C%96/:3:7","tags":["æ•°æ®åº“","SQL"],"title":"æ•°æ®åº“ä¼˜åŒ–","uri":"/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BC%98%E5%8C%96/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"8. whereæ¡ä»¶ä»…åŒ…å«å¤åˆç´¢å¼•éå‰ç½®åˆ— å¦‚ä¸‹ï¼šå¤åˆï¼ˆè”åˆï¼‰ç´¢å¼•åŒ…å«key_part1ï¼Œkey_part2ï¼Œkey_part3ä¸‰åˆ—ï¼Œä½†SQLè¯­å¥æ²¡æœ‰åŒ…å«ç´¢å¼•å‰ç½®åˆ—\"key_part1\"ï¼ŒæŒ‰ç…§MySQLè”åˆç´¢å¼•çš„æœ€å·¦åŒ¹é…åŸåˆ™ï¼Œä¸ä¼šèµ°è”åˆç´¢å¼• select col1 from table where key_part2=1 and key_part3=2 ","date":"2022-06-13","objectID":"/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BC%98%E5%8C%96/:3:8","tags":["æ•°æ®åº“","SQL"],"title":"æ•°æ®åº“ä¼˜åŒ–","uri":"/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BC%98%E5%8C%96/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"9. éšå¼ç±»å‹è½¬æ¢é€ æˆä¸ä½¿ç”¨ç´¢å¼• å¦‚ä¸‹SQLè¯­å¥ç”±äºç´¢å¼•å¯¹åˆ—ç±»å‹ä¸ºvarcharï¼Œä½†ç»™å®šçš„å€¼ä¸ºæ•°å€¼ï¼Œæ¶‰åŠéšå¼ç±»å‹è½¬æ¢ï¼Œé€ æˆä¸èƒ½æ­£ç¡®èµ°ç´¢å¼• select col1 from table where col_varchar=123; ","date":"2022-06-13","objectID":"/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BC%98%E5%8C%96/:3:9","tags":["æ•°æ®åº“","SQL"],"title":"æ•°æ®åº“ä¼˜åŒ–","uri":"/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BC%98%E5%8C%96/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"10. order by æ¡ä»¶è¦ä¸whereä¸­æ¡ä»¶ä¸€è‡´ï¼Œå¦åˆ™order byä¸ä¼šåˆ©ç”¨ç´¢å¼•è¿›è¡Œæ’åº -- ä¸èµ°ageç´¢å¼• SELECT * FROM t order by age; -- èµ°ageç´¢å¼• SELECT * FROM t where age \u003e 0 order by age; å½“order by ä¸­çš„å­—æ®µå‡ºç°åœ¨whereæ¡ä»¶ä¸­æ—¶ï¼Œæ‰ä¼šåˆ©ç”¨ç´¢å¼•è€Œä¸å†äºŒæ¬¡æ’åºï¼Œæ›´å‡†ç¡®çš„è¯´ï¼Œorder by ä¸­çš„å­—æ®µåœ¨æ‰§è¡Œè®¡åˆ’ä¸­åˆ©ç”¨äº†ç´¢å¼•æ—¶ï¼Œä¸ç”¨æ’åºæ“ä½œ è¿™ä¸ªç»“è®ºä¸ä»…å¯¹order byæœ‰æ•ˆï¼Œå¯¹å…¶ä»–éœ€è¦æ’åºçš„æ“ä½œä¹Ÿæœ‰æ•ˆã€‚æ¯”å¦‚group by ã€union ã€distinctç­‰ ","date":"2022-06-13","objectID":"/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BC%98%E5%8C%96/:3:10","tags":["æ•°æ®åº“","SQL"],"title":"æ•°æ®åº“ä¼˜åŒ–","uri":"/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BC%98%E5%8C%96/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"11. æ­£ç¡®ä½¿ç”¨hintä¼˜åŒ–è¯­å¥ MySQLä¸­å¯ä»¥ä½¿ç”¨hintæŒ‡å®šä¼˜åŒ–å™¨åœ¨æ‰§è¡Œæ—¶é€‰æ‹©æˆ–å¿½ç•¥ç‰¹å®šçš„ç´¢å¼•ã€‚ä¸€èˆ¬è€Œè¨€ï¼Œå¤„äºç‰ˆæœ¬å˜æ›´å¸¦æ¥çš„è¡¨ç»“æ„ç´¢å¼•å˜åŒ–ï¼Œæ›´å»ºè®®é¿å…ä½¿ç”¨hintï¼Œè€Œæ˜¯é€šè¿‡Analyze tableå¤šæ”¶é›†ç»Ÿè®¡ä¿¡æ¯ã€‚ä½†åœ¨ç‰¹å®šåœºåˆä¸‹ï¼ŒæŒ‡å®šhintå¯ä»¥æ’é™¤å…¶ä»–ç´¢å¼•å¹²æ‰°è€ŒæŒ‡å®šæ›´ä¼˜çš„æ‰§è¡Œè®¡åˆ’ã€‚ USE INDEX åœ¨ä½ æŸ¥è¯¢è¯­å¥ä¸­è¡¨åçš„åé¢ï¼Œæ·»åŠ  USE INDEX æ¥æä¾›å¸Œæœ› MySQL å»å‚è€ƒçš„ç´¢å¼•åˆ—è¡¨ï¼Œå°±å¯ä»¥è®© MySQL ä¸å†è€ƒè™‘å…¶ä»–å¯ç”¨çš„ç´¢å¼•ã€‚ä¾‹å­: SELECT col1 FROM table USE INDEX (mod_time, name)â€¦ IGNORE INDEX å¦‚æœåªæ˜¯å•çº¯çš„æƒ³è®© MySQL å¿½ç•¥ä¸€ä¸ªæˆ–è€…å¤šä¸ªç´¢å¼•ï¼Œå¯ä»¥ä½¿ç”¨ IGNORE INDEX ä½œä¸º Hintã€‚ä¾‹å­: SELECT col1 FROM table IGNORE INDEX (priority) â€¦ FORCE INDEX ä¸ºå¼ºåˆ¶ MySQL ä½¿ç”¨ä¸€ä¸ªç‰¹å®šçš„ç´¢å¼•ï¼Œå¯åœ¨æŸ¥è¯¢ä¸­ä½¿ç”¨FORCE INDEX ä½œä¸ºHintã€‚ä¾‹å­: SELECT col1 FROM table FORCE INDEX (mod_time) â€¦ åœ¨æŸ¥è¯¢çš„æ—¶å€™ï¼Œæ•°æ®åº“ç³»ç»Ÿä¼šè‡ªåŠ¨åˆ†ææŸ¥è¯¢è¯­å¥ï¼Œå¹¶é€‰æ‹©ä¸€ä¸ªæœ€åˆé€‚çš„ç´¢å¼•ã€‚ä½†æ˜¯å¾ˆå¤šæ—¶å€™ï¼Œæ•°æ®åº“ç³»ç»Ÿçš„æŸ¥è¯¢ä¼˜åŒ–å™¨å¹¶ä¸ä¸€å®šæ€»æ˜¯èƒ½ä½¿ç”¨æœ€ä¼˜ç´¢å¼•ã€‚å¦‚æœæˆ‘ä»¬çŸ¥é“å¦‚ä½•é€‰æ‹©ç´¢å¼•ï¼Œå¯ä»¥ä½¿ç”¨FORCE INDEXå¼ºåˆ¶æŸ¥è¯¢ä½¿ç”¨æŒ‡å®šçš„ç´¢å¼•ã€‚ ä¾‹å¦‚ï¼šSELECT * FROM students FORCE INDEX (idx_class_id) WHERE class_id = 1 ORDER BY id DESC; ","date":"2022-06-13","objectID":"/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BC%98%E5%8C%96/:3:11","tags":["æ•°æ®åº“","SQL"],"title":"æ•°æ®åº“ä¼˜åŒ–","uri":"/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BC%98%E5%8C%96/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"SELECTè¯­å¥å…¶ä»–ä¼˜åŒ– ","date":"2022-06-13","objectID":"/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BC%98%E5%8C%96/:4:0","tags":["æ•°æ®åº“","SQL"],"title":"æ•°æ®åº“ä¼˜åŒ–","uri":"/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BC%98%E5%8C%96/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"1. é¿å…å‡ºç°select * é¦–å…ˆï¼Œselect * æ“ä½œåœ¨ä»»ä½•ç±»å‹æ•°æ®åº“ä¸­éƒ½ä¸æ˜¯ä¸€ä¸ªå¥½çš„SQLç¼–å†™ä¹ æƒ¯ã€‚ ä½¿ç”¨select * å–å‡ºå…¨éƒ¨åˆ—ï¼Œä¼šè®©ä¼˜åŒ–å™¨æ— æ³•å®Œæˆç´¢å¼•è¦†ç›–æ‰«æè¿™ç±»ä¼˜åŒ–ï¼Œä¼šå½±å“ä¼˜åŒ–å™¨å¯¹æ‰§è¡Œè®¡åˆ’çš„é€‰æ‹©ï¼Œä¹Ÿä¼šå¢åŠ ç½‘ç»œå¸¦å®½æ¶ˆè€—ï¼Œæ›´ä¼šå¸¦æ¥é¢å¤–çš„I/O,å†…å­˜å’ŒCPUæ¶ˆè€—ã€‚ å»ºè®®æå‡ºä¸šåŠ¡å®é™…éœ€è¦çš„åˆ—æ•°ï¼Œå°†æŒ‡å®šåˆ—åä»¥å–ä»£select *ã€‚ ","date":"2022-06-13","objectID":"/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BC%98%E5%8C%96/:4:1","tags":["æ•°æ®åº“","SQL"],"title":"æ•°æ®åº“ä¼˜åŒ–","uri":"/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BC%98%E5%8C%96/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"2. é¿å…å‡ºç°ä¸ç¡®å®šç»“æœçš„å‡½æ•° ç‰¹å®šé’ˆå¯¹ä¸»ä»å¤åˆ¶è¿™ç±»ä¸šåŠ¡åœºæ™¯ã€‚ç”±äºåŸç†ä¸Šä»åº“å¤åˆ¶çš„æ˜¯ä¸»åº“æ‰§è¡Œçš„è¯­å¥ï¼Œä½¿ç”¨å¦‚now()ã€rand()ã€sysdate()ã€current_user()ç­‰ä¸ç¡®å®šç»“æœçš„å‡½æ•°å¾ˆå®¹æ˜“å¯¼è‡´ä¸»åº“ä¸ä»åº“ç›¸åº”çš„æ•°æ®ä¸ä¸€è‡´ã€‚å¦å¤–ä¸ç¡®å®šå€¼çš„å‡½æ•°,äº§ç”Ÿçš„SQLè¯­å¥æ— æ³•åˆ©ç”¨query cacheã€‚ ","date":"2022-06-13","objectID":"/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BC%98%E5%8C%96/:4:2","tags":["æ•°æ®åº“","SQL"],"title":"æ•°æ®åº“ä¼˜åŒ–","uri":"/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BC%98%E5%8C%96/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"3.å¤šè¡¨å…³è”æŸ¥è¯¢æ—¶ï¼Œå°è¡¨åœ¨å‰ï¼Œå¤§è¡¨åœ¨åã€‚ åœ¨MySQLä¸­ï¼Œæ‰§è¡Œ from åçš„è¡¨å…³è”æŸ¥è¯¢æ˜¯ä»å·¦å¾€å³æ‰§è¡Œçš„ï¼ˆOracleç›¸åï¼‰ï¼Œç¬¬ä¸€å¼ è¡¨ä¼šæ¶‰åŠåˆ°å…¨è¡¨æ‰«æï¼Œæ‰€ä»¥å°†å°è¡¨æ”¾åœ¨å‰é¢ï¼Œå…ˆæ‰«å°è¡¨ï¼Œæ‰«æå¿«æ•ˆç‡è¾ƒé«˜ï¼Œåœ¨æ‰«æåé¢çš„å¤§è¡¨ï¼Œæˆ–è®¸åªæ‰«æå¤§è¡¨çš„å‰100è¡Œå°±ç¬¦åˆè¿”å›æ¡ä»¶å¹¶returnäº†ã€‚ ä¾‹å¦‚ï¼šè¡¨1æœ‰50æ¡æ•°æ®ï¼Œè¡¨2æœ‰30äº¿æ¡æ•°æ®ï¼›å¦‚æœå…¨è¡¨æ‰«æè¡¨2ï¼Œä½ å“ï¼Œé‚£å°±å…ˆå»åƒä¸ªé¥­å†è¯´å§æ˜¯å§ã€‚ ","date":"2022-06-13","objectID":"/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BC%98%E5%8C%96/:4:3","tags":["æ•°æ®åº“","SQL"],"title":"æ•°æ®åº“ä¼˜åŒ–","uri":"/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BC%98%E5%8C%96/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"4. ä½¿ç”¨è¡¨çš„åˆ«å å½“åœ¨SQLè¯­å¥ä¸­è¿æ¥å¤šä¸ªè¡¨æ—¶ï¼Œè¯·ä½¿ç”¨è¡¨çš„åˆ«åå¹¶æŠŠåˆ«åå‰ç¼€äºæ¯ä¸ªåˆ—åä¸Šã€‚è¿™æ ·å°±å¯ä»¥å‡å°‘è§£æçš„æ—¶é—´å¹¶å‡å°‘å“ªäº›å‹åˆ—åæ­§ä¹‰å¼•èµ·çš„è¯­æ³•é”™è¯¯ã€‚ ","date":"2022-06-13","objectID":"/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BC%98%E5%8C%96/:4:4","tags":["æ•°æ®åº“","SQL"],"title":"æ•°æ®åº“ä¼˜åŒ–","uri":"/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BC%98%E5%8C%96/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"5. ç”¨whereå­—å¥æ›¿æ¢HAVINGå­—å¥ é¿å…ä½¿ç”¨HAVINGå­—å¥ï¼Œå› ä¸ºHAVINGåªä¼šåœ¨æ£€ç´¢å‡ºæ‰€æœ‰è®°å½•ä¹‹åæ‰å¯¹ç»“æœé›†è¿›è¡Œè¿‡æ»¤ï¼Œè€Œwhereåˆ™æ˜¯åœ¨èšåˆå‰åˆ·é€‰è®°å½•ï¼Œå¦‚æœèƒ½é€šè¿‡whereå­—å¥é™åˆ¶è®°å½•çš„æ•°ç›®ï¼Œé‚£å°±èƒ½å‡å°‘è¿™æ–¹é¢çš„å¼€é”€ã€‚HAVINGä¸­çš„æ¡ä»¶ä¸€èˆ¬ç”¨äºèšåˆå‡½æ•°çš„è¿‡æ»¤ï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œåº”è¯¥å°†æ¡ä»¶å†™åœ¨whereå­—å¥ä¸­ã€‚ whereå’Œhavingçš„åŒºåˆ«ï¼šwhereåé¢ä¸èƒ½ä½¿ç”¨ç»„å‡½æ•° ","date":"2022-06-13","objectID":"/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BC%98%E5%8C%96/:4:5","tags":["æ•°æ®åº“","SQL"],"title":"æ•°æ®åº“ä¼˜åŒ–","uri":"/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BC%98%E5%8C%96/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"6.è°ƒæ•´Whereå­—å¥ä¸­çš„è¿æ¥é¡ºåº MySQLé‡‡ç”¨ä»å·¦å¾€å³ï¼Œè‡ªä¸Šè€Œä¸‹çš„é¡ºåºè§£æwhereå­å¥ã€‚æ ¹æ®è¿™ä¸ªåŸç†ï¼Œåº”å°†è¿‡æ»¤æ•°æ®å¤šçš„æ¡ä»¶å¾€å‰æ”¾ï¼Œæœ€å¿«é€Ÿåº¦ç¼©å°ç»“æœé›†ã€‚ ","date":"2022-06-13","objectID":"/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BC%98%E5%8C%96/:4:6","tags":["æ•°æ®åº“","SQL"],"title":"æ•°æ®åº“ä¼˜åŒ–","uri":"/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BC%98%E5%8C%96/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"å¢åˆ æ”¹ DML è¯­å¥ä¼˜åŒ– ","date":"2022-06-13","objectID":"/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BC%98%E5%8C%96/:5:0","tags":["æ•°æ®åº“","SQL"],"title":"æ•°æ®åº“ä¼˜åŒ–","uri":"/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BC%98%E5%8C%96/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"1. å¤§æ‰¹é‡æ’å…¥æ•°æ® å¦‚æœåŒæ—¶æ‰§è¡Œå¤§é‡çš„æ’å…¥ï¼Œå»ºè®®ä½¿ç”¨å¤šä¸ªå€¼çš„INSERTè¯­å¥(æ–¹æ³•äºŒ)ã€‚è¿™æ¯”ä½¿ç”¨åˆ†å¼€INSERTè¯­å¥å¿«ï¼ˆæ–¹æ³•ä¸€ï¼‰ï¼Œä¸€èˆ¬æƒ…å†µä¸‹æ‰¹é‡æ’å…¥æ•ˆç‡æœ‰å‡ å€çš„å·®åˆ«ã€‚ æ–¹æ³•ä¸€ï¼š insert into T values(1,2); insert into T values(1,3); insert into T values(1,4); æ–¹æ³•äºŒï¼š Insert into T values(1,2),(1,3),(1,4); é€‰æ‹©åä¸€ç§æ–¹æ³•çš„åŸå› æœ‰ä¸‰ã€‚ å‡å°‘SQLè¯­å¥è§£æçš„æ“ä½œï¼ŒMySQLæ²¡æœ‰ç±»ä¼¼Oracleçš„share poolï¼Œé‡‡ç”¨æ–¹æ³•äºŒï¼Œåªéœ€è¦è§£æä¸€æ¬¡å°±èƒ½è¿›è¡Œæ•°æ®çš„æ’å…¥æ“ä½œï¼› åœ¨ç‰¹å®šåœºæ™¯å¯ä»¥å‡å°‘å¯¹DBè¿æ¥æ¬¡æ•° SQLè¯­å¥è¾ƒçŸ­ï¼Œå¯ä»¥å‡å°‘ç½‘ç»œä¼ è¾“çš„IOã€‚ ","date":"2022-06-13","objectID":"/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BC%98%E5%8C%96/:5:1","tags":["æ•°æ®åº“","SQL"],"title":"æ•°æ®åº“ä¼˜åŒ–","uri":"/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BC%98%E5%8C%96/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"2. é€‚å½“ä½¿ç”¨commit é€‚å½“ä½¿ç”¨commitå¯ä»¥é‡Šæ”¾äº‹åŠ¡å ç”¨çš„èµ„æºè€Œå‡å°‘æ¶ˆè€—ï¼Œcommitåèƒ½é‡Šæ”¾çš„èµ„æºå¦‚ä¸‹ï¼š äº‹åŠ¡å ç”¨çš„undoæ•°æ®å—ï¼› äº‹åŠ¡åœ¨redo logä¸­è®°å½•çš„æ•°æ®å—ï¼› é‡Šæ”¾äº‹åŠ¡æ–½åŠ çš„ï¼Œå‡å°‘é”äº‰ç”¨å½±å“æ€§èƒ½ã€‚ç‰¹åˆ«æ˜¯åœ¨éœ€è¦ä½¿ç”¨deleteåˆ é™¤å¤§é‡æ•°æ®çš„æ—¶å€™ï¼Œå¿…é¡»åˆ†è§£åˆ é™¤é‡å¹¶å®šæœŸcommitã€‚ ","date":"2022-06-13","objectID":"/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BC%98%E5%8C%96/:5:2","tags":["æ•°æ®åº“","SQL"],"title":"æ•°æ®åº“ä¼˜åŒ–","uri":"/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BC%98%E5%8C%96/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"3. é¿å…é‡å¤æŸ¥è¯¢æ›´æ–°çš„æ•°æ® é’ˆå¯¹ä¸šåŠ¡ä¸­ç»å¸¸å‡ºç°çš„æ›´æ–°è¡ŒåŒæ—¶åˆå¸Œæœ›è·å¾—æ”¹è¡Œä¿¡æ¯çš„éœ€æ±‚ï¼ŒMySQLå¹¶ä¸æ”¯æŒPostgreSQLé‚£æ ·çš„UPDATE RETURNINGè¯­æ³•ï¼Œåœ¨MySQLä¸­å¯ä»¥é€šè¿‡å˜é‡å®ç°ã€‚ ä¾‹å¦‚ï¼Œæ›´æ–°ä¸€è¡Œè®°å½•çš„æ—¶é—´æˆ³ï¼ŒåŒæ—¶å¸Œæœ›æŸ¥è¯¢å½“å‰è®°å½•ä¸­å­˜æ”¾çš„æ—¶é—´æˆ³æ˜¯ä»€ä¹ˆï¼Œç®€å•æ–¹æ³•å®ç°ï¼š Update t1 set time=now() where col1=1; Select time from t1 where id =1; ä½¿ç”¨å˜é‡ï¼Œå¯ä»¥é‡å†™ä¸ºä»¥ä¸‹æ–¹å¼ï¼š Update t1 set time=now () where col1=1 and @now: = now (); Select @now; å‰åäºŒè€…éƒ½éœ€è¦ä¸¤æ¬¡ç½‘ç»œæ¥å›ï¼Œä½†ä½¿ç”¨å˜é‡é¿å…äº†å†æ¬¡è®¿é—®æ•°æ®è¡¨ï¼Œç‰¹åˆ«æ˜¯å½“t1è¡¨æ•°æ®é‡è¾ƒå¤§æ—¶ï¼Œåè€…æ¯”å‰è€…å¿«å¾ˆå¤šã€‚ ","date":"2022-06-13","objectID":"/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BC%98%E5%8C%96/:5:3","tags":["æ•°æ®åº“","SQL"],"title":"æ•°æ®åº“ä¼˜åŒ–","uri":"/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BC%98%E5%8C%96/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"4.æŸ¥è¯¢ä¼˜å…ˆè¿˜æ˜¯æ›´æ–°ï¼ˆinsertã€updateã€deleteï¼‰ä¼˜å…ˆ MySQL è¿˜å…è®¸æ”¹å˜è¯­å¥è°ƒåº¦çš„ä¼˜å…ˆçº§ï¼Œå®ƒå¯ä»¥ä½¿æ¥è‡ªå¤šä¸ªå®¢æˆ·ç«¯çš„æŸ¥è¯¢æ›´å¥½åœ°åä½œï¼Œè¿™æ ·å•ä¸ªå®¢æˆ·ç«¯å°±ä¸ä¼šç”±äºé”å®šè€Œç­‰å¾…å¾ˆé•¿æ—¶é—´ã€‚æ”¹å˜ä¼˜å…ˆçº§è¿˜å¯ä»¥ç¡®ä¿ç‰¹å®šç±»å‹çš„æŸ¥è¯¢è¢«å¤„ç†å¾—æ›´å¿«ã€‚æˆ‘ä»¬é¦–å…ˆåº”è¯¥ç¡®å®šåº”ç”¨çš„ç±»å‹ï¼Œåˆ¤æ–­åº”ç”¨æ˜¯ä»¥æŸ¥è¯¢ä¸ºä¸»è¿˜æ˜¯ä»¥æ›´æ–°ä¸ºä¸»çš„ï¼Œæ˜¯ç¡®ä¿æŸ¥è¯¢æ•ˆç‡è¿˜æ˜¯ç¡®ä¿æ›´æ–°çš„æ•ˆç‡ï¼Œå†³å®šæ˜¯æŸ¥è¯¢ä¼˜å…ˆè¿˜æ˜¯æ›´æ–°ä¼˜å…ˆã€‚ä¸‹é¢æˆ‘ä»¬æåˆ°çš„æ”¹å˜è°ƒåº¦ç­–ç•¥çš„æ–¹æ³•ä¸»è¦æ˜¯é’ˆå¯¹åªå­˜åœ¨è¡¨é”çš„å­˜å‚¨å¼•æ“ï¼Œæ¯”å¦‚ MyISAM ã€MEMROYã€MERGEï¼Œå¯¹äºInnodb å­˜å‚¨å¼•æ“ï¼Œè¯­å¥çš„æ‰§è¡Œæ˜¯ç”±è·å¾—è¡Œé”çš„é¡ºåºå†³å®šçš„ã€‚MySQL çš„é»˜è®¤çš„è°ƒåº¦ç­–ç•¥å¯ç”¨æ€»ç»“å¦‚ä¸‹ï¼š 1ï¼‰å†™å…¥æ“ä½œä¼˜å…ˆäºè¯»å–æ“ä½œã€‚ 2ï¼‰å¯¹æŸå¼ æ•°æ®è¡¨çš„å†™å…¥æ“ä½œæŸä¸€æ—¶åˆ»åªèƒ½å‘ç”Ÿä¸€æ¬¡ï¼Œå†™å…¥è¯·æ±‚æŒ‰ç…§å®ƒä»¬åˆ°è¾¾çš„æ¬¡åºæ¥å¤„ç†ã€‚ 3ï¼‰å¯¹æŸå¼ æ•°æ®è¡¨çš„å¤šä¸ªè¯»å–æ“ä½œå¯ä»¥åŒæ—¶åœ°è¿›è¡Œã€‚MySQL æä¾›äº†å‡ ä¸ªè¯­å¥è°ƒèŠ‚ç¬¦ï¼Œå…è®¸ä½ ä¿®æ”¹å®ƒçš„è°ƒåº¦ç­–ç•¥ï¼š LOW_PRIORITYå…³é”®å­—åº”ç”¨äºDELETEã€INSERTã€LOAD DATAã€REPLACEå’ŒUPDATEï¼› HIGH_PRIORITYå…³é”®å­—åº”ç”¨äºSELECTå’ŒINSERTè¯­å¥ï¼› DELAYEDå…³é”®å­—åº”ç”¨äºINSERTå’ŒREPLACEè¯­å¥ã€‚ å¦‚æœå†™å…¥æ“ä½œæ˜¯ä¸€ä¸ª LOW_PRIORITYï¼ˆä½ä¼˜å…ˆçº§ï¼‰è¯·æ±‚ï¼Œé‚£ä¹ˆç³»ç»Ÿå°±ä¸ä¼šè®¤ä¸ºå®ƒçš„ä¼˜å…ˆçº§é«˜äºè¯»å–æ“ä½œã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¦‚æœå†™å…¥è€…åœ¨ç­‰å¾…çš„æ—¶å€™ï¼Œç¬¬äºŒä¸ªè¯»å–è€…åˆ°è¾¾äº†ï¼Œé‚£ä¹ˆå°±å…è®¸ç¬¬äºŒä¸ªè¯»å–è€…æ’åˆ°å†™å…¥è€…ä¹‹å‰ã€‚åªæœ‰åœ¨æ²¡æœ‰å…¶å®ƒçš„è¯»å–è€…çš„æ—¶å€™ï¼Œæ‰å…è®¸å†™å…¥è€…å¼€å§‹æ“ä½œã€‚è¿™ç§è°ƒåº¦ä¿®æ”¹å¯èƒ½å­˜åœ¨ LOW_PRIORITYå†™å…¥æ“ä½œæ°¸è¿œè¢«é˜»å¡çš„æƒ…å†µã€‚ SELECT æŸ¥è¯¢çš„HIGH_PRIORITYï¼ˆé«˜ä¼˜å…ˆçº§ï¼‰å…³é”®å­—ä¹Ÿç±»ä¼¼ã€‚å®ƒå…è®¸SELECT æ’å…¥æ­£åœ¨ç­‰å¾…çš„å†™å…¥æ“ä½œä¹‹å‰ï¼Œå³ä½¿åœ¨æ­£å¸¸æƒ…å†µä¸‹å†™å…¥æ“ä½œçš„ä¼˜å…ˆçº§æ›´é«˜ã€‚å¦å¤–ä¸€ç§å½±å“æ˜¯ï¼Œé«˜ä¼˜å…ˆçº§çš„ SELECT åœ¨æ­£å¸¸çš„ SELECT è¯­å¥ä¹‹å‰æ‰§è¡Œï¼Œå› ä¸ºè¿™äº›è¯­å¥ä¼šè¢«å†™å…¥æ“ä½œé˜»å¡ã€‚å¦‚æœå¸Œæœ›æ‰€æœ‰æ”¯æŒLOW_PRIORITY é€‰é¡¹çš„è¯­å¥éƒ½é»˜è®¤åœ°æŒ‰ç…§ä½ä¼˜å…ˆçº§æ¥å¤„ç†ï¼Œé‚£ä¹ˆ è¯·ä½¿ç”¨â€“low-priority-updates é€‰é¡¹æ¥å¯åŠ¨æœåŠ¡å™¨ã€‚é€šè¿‡ä½¿ç”¨ INSERTHIGH_PRIORITY æ¥æŠŠ INSERT è¯­å¥æé«˜åˆ°æ­£å¸¸çš„å†™å…¥ä¼˜å…ˆçº§ï¼Œå¯ä»¥æ¶ˆé™¤è¯¥é€‰é¡¹å¯¹å•ä¸ªINSERTè¯­å¥çš„å½±å“ã€‚ ","date":"2022-06-13","objectID":"/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BC%98%E5%8C%96/:5:4","tags":["æ•°æ®åº“","SQL"],"title":"æ•°æ®åº“ä¼˜åŒ–","uri":"/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BC%98%E5%8C%96/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"æŸ¥è¯¢æ¡ä»¶ä¼˜åŒ– ","date":"2022-06-13","objectID":"/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BC%98%E5%8C%96/:6:0","tags":["æ•°æ®åº“","SQL"],"title":"æ•°æ®åº“ä¼˜åŒ–","uri":"/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BC%98%E5%8C%96/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"1. å¯¹äºå¤æ‚çš„æŸ¥è¯¢ï¼Œå¯ä»¥ä½¿ç”¨ä¸­é—´ä¸´æ—¶è¡¨æš‚å­˜æ•°æ® ","date":"2022-06-13","objectID":"/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BC%98%E5%8C%96/:6:1","tags":["æ•°æ®åº“","SQL"],"title":"æ•°æ®åº“ä¼˜åŒ–","uri":"/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BC%98%E5%8C%96/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"2. ä¼˜åŒ–group byè¯­å¥ é»˜è®¤æƒ…å†µä¸‹ï¼ŒMySQL ä¼šå¯¹GROUP BYåˆ†ç»„çš„æ‰€æœ‰å€¼è¿›è¡Œæ’åºï¼Œå¦‚ â€œGROUP BY col1ï¼Œcol2ï¼Œâ€¦.;â€ æŸ¥è¯¢çš„æ–¹æ³•å¦‚åŒåœ¨æŸ¥è¯¢ä¸­æŒ‡å®š â€œORDER BY col1ï¼Œcol2ï¼Œâ€¦;â€ å¦‚æœæ˜¾å¼åŒ…æ‹¬ä¸€ä¸ªåŒ…å«ç›¸åŒçš„åˆ—çš„ ORDER BYå­å¥ï¼ŒMySQL å¯ä»¥æ¯«ä¸å‡é€Ÿåœ°å¯¹å®ƒè¿›è¡Œä¼˜åŒ–ï¼Œå°½ç®¡ä»ç„¶è¿›è¡Œæ’åºã€‚ å› æ­¤ï¼Œå¦‚æœæŸ¥è¯¢åŒ…æ‹¬ GROUP BY ä½†ä½ å¹¶ä¸æƒ³å¯¹åˆ†ç»„çš„å€¼è¿›è¡Œæ’åºï¼Œä½ å¯ä»¥æŒ‡å®š ORDER BY NULLç¦æ­¢æ’åºã€‚ä¾‹å¦‚ï¼š SELECT col1, col2, COUNT(*) FROM table GROUP BY col1, col2 ORDER BY NULL ","date":"2022-06-13","objectID":"/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BC%98%E5%8C%96/:6:2","tags":["æ•°æ®åº“","SQL"],"title":"æ•°æ®åº“ä¼˜åŒ–","uri":"/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BC%98%E5%8C%96/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"3. ä¼˜åŒ–joinè¯­å¥ MySQLä¸­å¯ä»¥é€šè¿‡å­æŸ¥è¯¢æ¥ä½¿ç”¨ SELECT è¯­å¥æ¥åˆ›å»ºä¸€ä¸ªå•åˆ—çš„æŸ¥è¯¢ç»“æœï¼Œç„¶åæŠŠè¿™ä¸ªç»“æœä½œä¸ºè¿‡æ»¤æ¡ä»¶ç”¨åœ¨å¦ä¸€ä¸ªæŸ¥è¯¢ä¸­ã€‚ä½¿ç”¨å­æŸ¥è¯¢å¯ä»¥ä¸€æ¬¡æ€§çš„å®Œæˆå¾ˆå¤šé€»è¾‘ä¸Šéœ€è¦å¤šä¸ªæ­¥éª¤æ‰èƒ½å®Œæˆçš„ SQL æ“ä½œï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥é¿å…äº‹åŠ¡æˆ–è€…è¡¨é”æ­»ï¼Œå¹¶ä¸”å†™èµ·æ¥ä¹Ÿå¾ˆå®¹æ˜“ã€‚ä½†æ˜¯ï¼Œæœ‰äº›æƒ…å†µä¸‹ï¼Œå­æŸ¥è¯¢å¯ä»¥è¢«æ›´æœ‰æ•ˆç‡çš„è¿æ¥(JOIN)..æ›¿ä»£ã€‚ ä¾‹å­ï¼šå‡è®¾è¦å°†æ‰€æœ‰æ²¡æœ‰è®¢å•è®°å½•çš„ç”¨æˆ·å–å‡ºæ¥ï¼Œå¯ä»¥ç”¨ä¸‹é¢è¿™ä¸ªæŸ¥è¯¢å®Œæˆï¼š SELECT col1 FROM customerinfo WHERE CustomerID NOT in (SELECT CustomerID FROM salesinfo ) å¦‚æœä½¿ç”¨è¿æ¥(JOIN).. æ¥å®Œæˆè¿™ä¸ªæŸ¥è¯¢å·¥ä½œï¼Œé€Ÿåº¦å°†ä¼šæœ‰æ‰€æå‡ã€‚å°¤å…¶æ˜¯å½“ salesinfoè¡¨ä¸­å¯¹ CustomerID å»ºæœ‰ç´¢å¼•çš„è¯ï¼Œæ€§èƒ½å°†ä¼šæ›´å¥½ï¼ŒæŸ¥è¯¢å¦‚ä¸‹ï¼š SELECT col1 FROM customerinfo LEFT JOIN salesinfoON customerinfo.CustomerID=salesinfo.CustomerID WHERE salesinfo.CustomerID IS NULL ","date":"2022-06-13","objectID":"/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BC%98%E5%8C%96/:6:3","tags":["æ•°æ®åº“","SQL"],"title":"æ•°æ®åº“ä¼˜åŒ–","uri":"/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BC%98%E5%8C%96/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"4. ä¼˜åŒ–unionæŸ¥è¯¢ MySQLé€šè¿‡åˆ›å»ºå¹¶å¡«å……ä¸´æ—¶è¡¨çš„æ–¹å¼æ¥æ‰§è¡ŒunionæŸ¥è¯¢ã€‚é™¤éç¡®å®è¦æ¶ˆé™¤é‡å¤çš„è¡Œï¼Œå¦åˆ™å»ºè®®ä½¿ç”¨union allã€‚åŸå› åœ¨äºå¦‚æœæ²¡æœ‰allè¿™ä¸ªå…³é”®è¯ï¼ŒMySQLä¼šç»™ä¸´æ—¶è¡¨åŠ ä¸Šdistincté€‰é¡¹ï¼Œè¿™ä¼šå¯¼è‡´å¯¹æ•´ä¸ªä¸´æ—¶è¡¨çš„æ•°æ®åšå”¯ä¸€æ€§æ ¡éªŒï¼Œè¿™æ ·åšçš„æ¶ˆè€—ç›¸å½“é«˜ã€‚ é«˜æ•ˆï¼š SELECT COL1, COL2, COL3 FROM TABLE WHERE COL1 = 10 UNION ALL SELECT COL1, COL2, COL3 FROM TABLE WHERE COL3= 'TEST'; ä½æ•ˆï¼š SELECT COL1, COL2, COL3 FROM TABLE WHERE COL1 = 10 UNION SELECT COL1, COL2, COL3 FROM TABLE WHERE COL3= 'TEST'; ","date":"2022-06-13","objectID":"/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BC%98%E5%8C%96/:6:4","tags":["æ•°æ®åº“","SQL"],"title":"æ•°æ®åº“ä¼˜åŒ–","uri":"/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BC%98%E5%8C%96/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"5. æ‹†åˆ†å¤æ‚SQLä¸ºå¤šä¸ªå°SQLï¼Œé¿å…å¤§äº‹åŠ¡ ç®€å•çš„SQLå®¹æ˜“ä½¿ç”¨åˆ°MySQLçš„QUERY CACHEï¼› å‡å°‘é”è¡¨æ—¶é—´ç‰¹åˆ«æ˜¯ä½¿ç”¨MyISAMå­˜å‚¨å¼•æ“çš„è¡¨ï¼› å¯ä»¥ä½¿ç”¨å¤šæ ¸CPUã€‚ ","date":"2022-06-13","objectID":"/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BC%98%E5%8C%96/:6:5","tags":["æ•°æ®åº“","SQL"],"title":"æ•°æ®åº“ä¼˜åŒ–","uri":"/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BC%98%E5%8C%96/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"6. ä½¿ç”¨truncateä»£æ›¿delete å½“åˆ é™¤å…¨è¡¨ä¸­è®°å½•æ—¶ï¼Œä½¿ç”¨deleteè¯­å¥çš„æ“ä½œä¼šè¢«è®°å½•åˆ°undoå—ä¸­ï¼Œåˆ é™¤è®°å½•ä¹Ÿè®°å½•binlogï¼Œå½“ç¡®è®¤éœ€è¦åˆ é™¤å…¨è¡¨æ—¶ï¼Œä¼šäº§ç”Ÿå¾ˆå¤§é‡çš„binlogå¹¶å ç”¨å¤§é‡çš„undoæ•°æ®å—ï¼Œæ­¤æ—¶æ—¢æ²¡æœ‰å¾ˆå¥½çš„æ•ˆç‡ä¹Ÿå ç”¨äº†å¤§é‡çš„èµ„æºã€‚ ä½¿ç”¨truncateæ›¿ä»£ï¼Œä¸ä¼šè®°å½•å¯æ¢å¤çš„ä¿¡æ¯ï¼Œæ•°æ®ä¸èƒ½è¢«æ¢å¤ã€‚ä¹Ÿå› æ­¤ä½¿ç”¨truncateæ“ä½œæœ‰å…¶æå°‘çš„èµ„æºå ç”¨ä¸æå¿«çš„æ—¶é—´ã€‚å¦å¤–ï¼Œä½¿ç”¨truncateå¯ä»¥å›æ”¶è¡¨çš„æ°´ä½ï¼Œä½¿è‡ªå¢å­—æ®µå€¼å½’é›¶ã€‚ ","date":"2022-06-13","objectID":"/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BC%98%E5%8C%96/:6:6","tags":["æ•°æ®åº“","SQL"],"title":"æ•°æ®åº“ä¼˜åŒ–","uri":"/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BC%98%E5%8C%96/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"7. ä½¿ç”¨åˆç†çš„åˆ†é¡µæ–¹å¼ä»¥æé«˜åˆ†é¡µæ•ˆç‡ ä½¿ç”¨åˆç†çš„åˆ†é¡µæ–¹å¼ä»¥æé«˜åˆ†é¡µæ•ˆç‡ é’ˆå¯¹å±•ç°ç­‰åˆ†é¡µéœ€æ±‚ï¼Œåˆé€‚çš„åˆ†é¡µæ–¹å¼èƒ½å¤Ÿæé«˜åˆ†é¡µçš„æ•ˆç‡ã€‚ æ¡ˆä¾‹1ï¼š select * from t where thread_id = 10000 and deleted = 0 order by gmt_create asc limit 0, 15; ä¸Šè¿°ä¾‹å­é€šè¿‡ä¸€æ¬¡æ€§æ ¹æ®è¿‡æ»¤æ¡ä»¶å–å‡ºæ‰€æœ‰å­—æ®µè¿›è¡Œæ’åºè¿”å›ã€‚æ•°æ®è®¿é—®å¼€é”€=ç´¢å¼•IO+ç´¢å¼•å…¨éƒ¨è®°å½•ç»“æœå¯¹åº”çš„è¡¨æ•°æ®IOã€‚å› æ­¤ï¼Œè¯¥ç§å†™æ³•è¶Šç¿»åˆ°åé¢æ‰§è¡Œæ•ˆç‡è¶Šå·®ï¼Œæ—¶é—´è¶Šé•¿ï¼Œå°¤å…¶è¡¨æ•°æ®é‡å¾ˆå¤§çš„æ—¶å€™ã€‚ é€‚ç”¨åœºæ™¯ï¼šå½“ä¸­é—´ç»“æœé›†å¾ˆå°ï¼ˆ10000è¡Œä»¥ä¸‹ï¼‰æˆ–è€…æŸ¥è¯¢æ¡ä»¶å¤æ‚ï¼ˆæŒ‡æ¶‰åŠå¤šä¸ªä¸åŒæŸ¥è¯¢å­—æ®µæˆ–è€…å¤šè¡¨è¿æ¥ï¼‰æ—¶é€‚ç”¨ã€‚ æ¡ˆä¾‹2ï¼š select t.* from (select id from t where thread_id = 10000 and deleted = 0 order by gmt_create asc limit 0, 15) a, t where a.id = t.id; ä¸Šè¿°ä¾‹å­å¿…é¡»æ»¡è¶³tè¡¨ä¸»é”®æ˜¯idåˆ—ï¼Œä¸”æœ‰è¦†ç›–ç´¢å¼•secondary key:(thread_id, deleted, gmt_create)ã€‚é€šè¿‡å…ˆæ ¹æ®è¿‡æ»¤æ¡ä»¶åˆ©ç”¨è¦†ç›–ç´¢å¼•å–å‡ºä¸»é”®idè¿›è¡Œæ’åºï¼Œå†è¿›è¡Œjoinæ“ä½œå–å‡ºå…¶ä»–å­—æ®µã€‚æ•°æ®è®¿é—®å¼€é”€=ç´¢å¼•IO+ç´¢å¼•åˆ†é¡µåç»“æœï¼ˆä¾‹å­ä¸­æ˜¯15è¡Œï¼‰å¯¹åº”çš„è¡¨æ•°æ®IOã€‚å› æ­¤ï¼Œè¯¥å†™æ³•æ¯æ¬¡ç¿»é¡µæ¶ˆè€—çš„èµ„æºå’Œæ—¶é—´éƒ½åŸºæœ¬ç›¸åŒï¼Œå°±åƒç¿»ç¬¬ä¸€é¡µä¸€æ ·ã€‚ é€‚ç”¨åœºæ™¯ï¼šå½“æŸ¥è¯¢å’Œæ’åºå­—æ®µï¼ˆå³whereå­å¥å’Œorder byå­å¥æ¶‰åŠçš„å­—æ®µï¼‰æœ‰å¯¹åº”è¦†ç›–ç´¢å¼•æ—¶ï¼Œä¸”ä¸­é—´ç»“æœé›†å¾ˆå¤§çš„æƒ…å†µæ—¶é€‚ç”¨ã€‚ ","date":"2022-06-13","objectID":"/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BC%98%E5%8C%96/:6:7","tags":["æ•°æ®åº“","SQL"],"title":"æ•°æ®åº“ä¼˜åŒ–","uri":"/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BC%98%E5%8C%96/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"å»ºè¡¨ä¼˜åŒ– åœ¨è¡¨ä¸­å»ºç«‹ç´¢å¼•ï¼Œä¼˜å…ˆè€ƒè™‘whereã€order byä½¿ç”¨åˆ°çš„å­—æ®µ å°½é‡ä½¿ç”¨æ•°å­—å‹å­—æ®µï¼ˆå¦‚æ€§åˆ«ï¼Œç”·ï¼š1 å¥³ï¼š2ï¼‰ï¼Œè‹¥åªå«æ•°å€¼ä¿¡æ¯çš„å­—æ®µå°½é‡ä¸è¦è®¾è®¡ä¸ºå­—ç¬¦å‹ï¼Œè¿™ä¼šé™ä½æŸ¥è¯¢å’Œè¿æ¥çš„æ€§èƒ½ï¼Œå¹¶ä¼šå¢åŠ å­˜å‚¨å¼€é”€ã€‚è¿™æ˜¯å› ä¸ºå¼•æ“åœ¨å¤„ç†æŸ¥è¯¢å’Œè¿æ¥æ—¶ä¼š é€ä¸ªæ¯”è¾ƒå­—ç¬¦ä¸²ä¸­æ¯ä¸€ä¸ªå­—ç¬¦ï¼Œè€Œå¯¹äºæ•°å­—å‹è€Œè¨€åªéœ€è¦æ¯”è¾ƒä¸€æ¬¡å°±å¤Ÿäº† æŸ¥è¯¢æ•°æ®é‡å¤§çš„è¡¨ä¼šé€ æˆæŸ¥è¯¢ç¼“æ…¢ã€‚ä¸»è¦çš„åŸå› æ˜¯æ‰«æè¡Œæ•°è¿‡å¤šã€‚è¿™ä¸ªæ—¶å€™å¯ä»¥é€šè¿‡ç¨‹åºï¼Œåˆ†æ®µåˆ†é¡µè¿›è¡ŒæŸ¥è¯¢ï¼Œå¾ªç¯éå†ï¼Œå°†ç»“æœåˆå¹¶å¤„ç†è¿›è¡Œå±•ç¤ºã€‚è¦æŸ¥è¯¢100000åˆ°100050çš„æ•°æ®: SELECT * FROM (SELECT ROW_NUMBER() OVER(ORDER BY ID ASC) AS rowid,* FROM infoTab)t WHERE t.rowid \u003e 100000 AND t.rowid \u003c= 100050 ç”¨varchar/nvarchar ä»£æ›¿ char/nchar å°½å¯èƒ½çš„ä½¿ç”¨ varchar/nvarchar ä»£æ›¿ char/nchar ï¼Œå› ä¸ºé¦–å…ˆå˜é•¿å­—æ®µå­˜å‚¨ç©ºé—´å°ï¼Œå¯ä»¥èŠ‚çœå­˜å‚¨ç©ºé—´ï¼Œå…¶æ¬¡å¯¹äºæŸ¥è¯¢æ¥è¯´ï¼Œåœ¨ä¸€ä¸ªç›¸å¯¹è¾ƒå°çš„å­—æ®µå†…æœç´¢æ•ˆç‡æ˜¾ç„¶è¦é«˜äº›ã€‚ ä¸è¦ä»¥ä¸º NULL ä¸éœ€è¦ç©ºé—´ï¼Œæ¯”å¦‚ï¼šchar(100) å‹ï¼Œåœ¨å­—æ®µå»ºç«‹æ—¶ï¼Œç©ºé—´å°±å›ºå®šäº†ï¼Œ ä¸ç®¡æ˜¯å¦æ’å…¥å€¼ï¼ˆNULLä¹ŸåŒ…å«åœ¨å†…ï¼‰ï¼Œéƒ½æ˜¯å ç”¨ 100ä¸ªå­—ç¬¦çš„ç©ºé—´çš„ï¼Œå¦‚æœæ˜¯varcharè¿™æ ·çš„å˜é•¿å­—æ®µï¼Œ null ä¸å ç”¨ç©ºé—´ã€‚ ","date":"2022-06-13","objectID":"/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BC%98%E5%8C%96/:7:0","tags":["æ•°æ®åº“","SQL"],"title":"æ•°æ®åº“ä¼˜åŒ–","uri":"/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BC%98%E5%8C%96/"},{"categories":["æ”¶è—åˆ†äº«"],"content":"ç®€ä»‹ åœ¨å¤§å‹ä¼ä¸šä¸­ï¼ŒæœåŠ¡å™¨ç½‘ç»œä¸€èˆ¬éƒ½ä¼šæœ‰å„ç§å„æ ·çš„é™åˆ¶ï¼Œå¸¸è§çš„å°±ä¼šæœ‰å ¡å’æœºæˆ–è€…è¿ç»´ç½‘å…³ï¼Œä»¥è¾¾åˆ°æ“ä½œå®¡è®¡ç­‰ç›®çš„ã€‚ä½†å¯¹äºå¼€å‘è€…æ¥è®²ï¼Œè¿™äº›é™åˆ¶å¤§å¤§é™ä½äº†æ•ˆç‡ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ä¸€ä¸ªæ–¹ä¾¿çš„æ–¹å¼æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ æœ¬ç¯‡æ–‡ç« ä¸»è¦é€šè¿‡ä¸ºLinuxå¢åŠ SSHç«¯å£çš„æ–¹å¼æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œé€šè¿‡å¢åŠ SSHè®¿é—®ç«¯å£æ¥ç»•å¼€22ç«¯å£çš„é™åˆ¶ã€‚ ","date":"2022-05-21","objectID":"/linux%E5%A2%9E%E5%8A%A0ssh%E7%AB%AF%E5%8F%A3/:1:0","tags":["Linux"],"title":"Linuxå¢åŠ SSHç«¯å£","uri":"/linux%E5%A2%9E%E5%8A%A0ssh%E7%AB%AF%E5%8F%A3/"},{"categories":["æ”¶è—åˆ†äº«"],"content":"å®ç° SSHé…ç½®æ–‡ä»¶ é€šè¿‡ vi /etc/ssh/sshd_config æ¥é…ç½®SSHç«¯å£ï¼Œåœ¨Port 22åæ·»åŠ ä¸€è¡ŒPort XXå³å¯ é…ç½®SELinux é€šè¿‡ semanage port -l | grep ssh å¯ä»¥çœ‹åˆ°ï¼š ssh_port_t tcp 22 å¯ä»¥çœ‹åˆ°å¹¶æ²¡æœ‰æˆ‘ä»¬æ·»åŠ çš„ç«¯å£ å¯ä»¥æ‰§è¡Œsemanage port -a -tssh_port_t -p tcp XXæ¥æ·»åŠ  å†æ¬¡æ£€æŸ¥ï¼š ssh_port_t tcp XX, 22 é‡å¯SSH systemctl restart sshd.service é€šè¿‡telnetå¯ä»¥éªŒè¯ telnet IPåœ°å€ XX é€šè¿‡ä»¥ä¸Šæ“ä½œåï¼Œå°±å¯ä»¥é€šè¿‡æ–°å¼€æ”¾çš„ç«¯å£æ¥å®ç°å¯¹SHHæœåŠ¡çš„è®¿é—®äº† ","date":"2022-05-21","objectID":"/linux%E5%A2%9E%E5%8A%A0ssh%E7%AB%AF%E5%8F%A3/:2:0","tags":["Linux"],"title":"Linuxå¢åŠ SSHç«¯å£","uri":"/linux%E5%A2%9E%E5%8A%A0ssh%E7%AB%AF%E5%8F%A3/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"Redisç®€ä»‹ Redis æ˜¯å®Œå…¨å¼€æºçš„ï¼Œéµå®ˆ BSD åè®®ï¼Œæ˜¯ä¸€ä¸ªé«˜æ€§èƒ½çš„ key-value æ•°æ®åº“ã€‚ Redis ä¸å…¶ä»– key - value ç¼“å­˜äº§å“æœ‰ä»¥ä¸‹ä¸‰ä¸ªç‰¹ç‚¹ï¼š Redisæ”¯æŒæ•°æ®çš„æŒä¹…åŒ–ï¼Œå¯ä»¥å°†å†…å­˜ä¸­çš„æ•°æ®ä¿å­˜åœ¨ç£ç›˜ä¸­ï¼Œé‡å¯çš„æ—¶å€™å¯ä»¥å†æ¬¡åŠ è½½è¿›è¡Œä½¿ç”¨ã€‚ Redisä¸ä»…ä»…æ”¯æŒç®€å•çš„key-valueç±»å‹çš„æ•°æ®ï¼ŒåŒæ—¶è¿˜æä¾›listï¼Œsetï¼Œzsetï¼Œhashç­‰æ•°æ®ç»“æ„çš„å­˜å‚¨ã€‚ Redisæ”¯æŒæ•°æ®çš„å¤‡ä»½ï¼Œå³master-slaveæ¨¡å¼çš„æ•°æ®å¤‡ä»½ã€‚ ","date":"2022-05-20","objectID":"/redis%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/:1:0","tags":["Redis"],"title":"Rediså­¦ä¹ ","uri":"/redis%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"Redisæ•°æ®ç»“æ„ Stringï¼ˆå­—ç¬¦ä¸²ï¼‰ string æ˜¯ redis æœ€åŸºæœ¬çš„ç±»å‹ï¼Œä½ å¯ä»¥ç†è§£æˆä¸ Memcached ä¸€æ¨¡ä¸€æ ·çš„ç±»å‹ï¼Œä¸€ä¸ª key å¯¹åº”ä¸€ä¸ª valueã€‚ string ç±»å‹æ˜¯äºŒè¿›åˆ¶å®‰å…¨çš„ã€‚æ„æ€æ˜¯ redis çš„ string å¯ä»¥åŒ…å«ä»»ä½•æ•°æ®ã€‚æ¯”å¦‚jpgå›¾ç‰‡æˆ–è€…åºåˆ—åŒ–çš„å¯¹è±¡ã€‚ string ç±»å‹æ˜¯ Redis æœ€åŸºæœ¬çš„æ•°æ®ç±»å‹ï¼Œstring ç±»å‹çš„å€¼æœ€å¤§èƒ½å­˜å‚¨ 512MBã€‚ 127.0.0.1:6379\u003e set name Lesan OK 127.0.0.1:6379\u003e get name \"Lesan\" Hashï¼ˆå“ˆå¸Œï¼‰ Redis hash æ˜¯ä¸€ä¸ªé”®å€¼(key=\u003evalue)å¯¹é›†åˆã€‚ Redis hash æ˜¯ä¸€ä¸ª string ç±»å‹çš„ field å’Œ value çš„æ˜ å°„è¡¨ï¼Œhash ç‰¹åˆ«é€‚åˆç”¨äºå­˜å‚¨å¯¹è±¡ã€‚ 127.0.0.1:6379\u003e hmset lesan field1 \"Hello\" field2 \"World\" OK 127.0.0.1:6379\u003e hget lesan field1 \"Hello\" 127.0.0.1:6379\u003e hget lesan field2 \"World\" Listï¼ˆåˆ—è¡¨ï¼‰ Redis åˆ—è¡¨æ˜¯ç®€å•çš„å­—ç¬¦ä¸²åˆ—è¡¨ï¼ŒæŒ‰ç…§æ’å…¥é¡ºåºæ’åºã€‚ä½ å¯ä»¥æ·»åŠ ä¸€ä¸ªå…ƒç´ åˆ°åˆ—è¡¨çš„å¤´éƒ¨ï¼ˆå·¦è¾¹ï¼‰æˆ–è€…å°¾éƒ¨ï¼ˆå³è¾¹ï¼‰ã€‚ 127.0.0.1:6379\u003e del lesan (integer) 1 127.0.0.1:6379\u003e lpush lesan redis (integer) 1 127.0.0.1:6379\u003e lpush lesan mongodb (integer) 2 127.0.0.1:6379\u003e lpush lesan mysql (integer) 3 127.0.0.1:6379\u003e lrange lesan 0 10 1) \"mysql\" 2) \"mongodb\" 3) \"redis\" Setï¼ˆé›†åˆï¼‰ Redis çš„ Set æ˜¯ string ç±»å‹çš„æ— åºé›†åˆã€‚ é›†åˆæ˜¯é€šè¿‡å“ˆå¸Œè¡¨å®ç°çš„ï¼Œæ‰€ä»¥æ·»åŠ ï¼Œåˆ é™¤ï¼ŒæŸ¥æ‰¾çš„å¤æ‚åº¦éƒ½æ˜¯ O(1)ã€‚ 127.0.0.1:6379\u003e sadd lesan redis (integer) 1 127.0.0.1:6379\u003e sadd lesan redis (integer) 0 127.0.0.1:6379\u003e sadd lesan mongodb (integer) 1 127.0.0.1:6379\u003e sadd lesan mysql (integer) 1 127.0.0.1:6379\u003e smembers lesan 1) \"redis\" 2) \"mysql\" 3) \"mongodb\" zsetï¼ˆæœ‰åºé›†åˆï¼‰ Redis zset å’Œ set ä¸€æ ·ä¹Ÿæ˜¯stringç±»å‹å…ƒç´ çš„é›†åˆ,ä¸”ä¸å…è®¸é‡å¤çš„æˆå‘˜ã€‚ ä¸åŒçš„æ˜¯æ¯ä¸ªå…ƒç´ éƒ½ä¼šå…³è”ä¸€ä¸ªdoubleç±»å‹çš„åˆ†æ•°ã€‚redisæ­£æ˜¯é€šè¿‡åˆ†æ•°æ¥ä¸ºé›†åˆä¸­çš„æˆå‘˜è¿›è¡Œä»å°åˆ°å¤§çš„æ’åºã€‚ zsetçš„æˆå‘˜æ˜¯å”¯ä¸€çš„,ä½†åˆ†æ•°(score)å´å¯ä»¥é‡å¤ã€‚ 127.0.0.1:6379\u003e zadd lesan 0 redis (integer) 1 127.0.0.1:6379\u003e zadd lesan 0 mongodb (integer) 1 127.0.0.1:6379\u003e zadd lesan 0 mysql (integer) 1 127.0.0.1:6379\u003e zadd lesan 0 mysql (integer) 0 127.0.0.1:6379\u003e zrangebyscore lesan 0 100 1) \"mongodb\" 2) \"mysql\" 3) \"redis\" Stream Redis Stream ä¸»è¦ç”¨äºæ¶ˆæ¯é˜Ÿåˆ—ï¼ˆMQï¼ŒMessage Queueï¼‰ï¼ŒRedis æœ¬èº«æ˜¯æœ‰ä¸€ä¸ª Redis å‘å¸ƒè®¢é˜… (pub/sub) æ¥å®ç°æ¶ˆæ¯é˜Ÿåˆ—çš„åŠŸèƒ½ï¼Œä½†å®ƒæœ‰ä¸ªç¼ºç‚¹å°±æ˜¯æ¶ˆæ¯æ— æ³•æŒä¹…åŒ–ï¼Œå¦‚æœå‡ºç°ç½‘ç»œæ–­å¼€ã€Redis å®•æœºç­‰ï¼Œæ¶ˆæ¯å°±ä¼šè¢«ä¸¢å¼ƒã€‚ è€Œ Redis Stream æä¾›äº†æ¶ˆæ¯çš„æŒä¹…åŒ–å’Œä¸»å¤‡å¤åˆ¶åŠŸèƒ½ï¼Œå¯ä»¥è®©ä»»ä½•å®¢æˆ·ç«¯è®¿é—®ä»»ä½•æ—¶åˆ»çš„æ•°æ®ï¼Œå¹¶ä¸”èƒ½è®°ä½æ¯ä¸€ä¸ªå®¢æˆ·ç«¯çš„è®¿é—®ä½ç½®ï¼Œè¿˜èƒ½ä¿è¯æ¶ˆæ¯ä¸ä¸¢å¤±ã€‚ ","date":"2022-05-20","objectID":"/redis%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/:1:1","tags":["Redis"],"title":"Rediså­¦ä¹ ","uri":"/redis%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"Redis å‘½ä»¤ key Redis é”®å‘½ä»¤ç”¨äºç®¡ç† redis çš„é”®ã€‚ DEL KEY_NAME ç”¨äºåˆ é™¤å·²å­˜åœ¨çš„é”®ã€‚ä¸å­˜åœ¨çš„ key ä¼šè¢«å¿½ç•¥ DUMP KEY_NAME ç”¨äºåºåˆ—åŒ–ç»™å®š key ï¼Œå¹¶è¿”å›è¢«åºåˆ—åŒ–çš„å€¼ EXISTS KEY_NAME ç”¨äºæ£€æŸ¥ç»™å®š key æ˜¯å¦å­˜åœ¨ Expire KEY_NAME TIME_IN_SECONDS ç”¨äºè®¾ç½® key çš„è¿‡æœŸæ—¶é—´ï¼Œkey è¿‡æœŸåå°†ä¸å†å¯ç”¨ã€‚å•ä½ä»¥ç§’è®¡ Expireat KEY_NAME TIME_IN_UNIX_TIMESTAMP ç”¨äºä»¥ UNIX æ—¶é—´æˆ³(unix timestamp)æ ¼å¼è®¾ç½® key çš„è¿‡æœŸæ—¶é—´ã€‚key è¿‡æœŸåå°†ä¸å†å¯ç”¨ PEXPIRE key milliseconds ä»¥æ¯«ç§’ä¸ºå•ä½è®¾ç½® key çš„ç”Ÿå­˜æ—¶é—´ PEXPIREAT KEY_NAME TIME_IN_MILLISECONDS_IN_UNIX_TIMESTAMP è®¾ç½® key è¿‡æœŸæ—¶é—´çš„æ—¶é—´æˆ³(unix timestamp) ä»¥æ¯«ç§’è®¡ KEYS PATTERN ç”¨äºæŸ¥æ‰¾æ‰€æœ‰ç¬¦åˆç»™å®šæ¨¡å¼ pattern çš„ key MOVE KEY_NAME DESTINATION_DATABASE ç”¨äºå°†å½“å‰æ•°æ®åº“çš„ key ç§»åŠ¨åˆ°ç»™å®šçš„æ•°æ®åº“ db å½“ä¸­ PERSIST KEY_NAME ç”¨äºç§»é™¤ç»™å®š key çš„è¿‡æœŸæ—¶é—´ï¼Œä½¿å¾— key æ°¸ä¸è¿‡æœŸ PTTL KEY_NAME ä»¥æ¯«ç§’ä¸ºå•ä½è¿”å› key çš„å‰©ä½™è¿‡æœŸæ—¶é—´ TTL KEY_NAME ä»¥ç§’ä¸ºå•ä½è¿”å› key çš„å‰©ä½™è¿‡æœŸæ—¶é—´ RANDOMKEY ä»å½“å‰æ•°æ®åº“ä¸­éšæœºè¿”å›ä¸€ä¸ª key RENAME OLD_KEY_NAME NEW_KEY_NAME ç”¨äºä¿®æ”¹ key çš„åç§° RENAMENX OLD_KEY_NAME NEW_KEY_NAME ç”¨äºåœ¨æ–°çš„ key ä¸å­˜åœ¨æ—¶ä¿®æ”¹ key çš„åç§° SCAN cursor [MATCH pattern] [COUNT count] ç”¨äºè¿­ä»£æ•°æ®åº“ä¸­çš„æ•°æ®åº“é”® TYPE KEY_NAME ç”¨äºè¿”å› key æ‰€å‚¨å­˜çš„å€¼çš„ç±»å‹ æ›´å¤šå‘½ä»¤è¯·å‚è€ƒèœé¸Ÿæ•™ç¨‹ ","date":"2022-05-20","objectID":"/redis%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/:1:2","tags":["Redis"],"title":"Rediså­¦ä¹ ","uri":"/redis%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"Redis åº”ç”¨åœºæ™¯ ç¼“å­˜ ä½œä¸ºKey-Valueå½¢æ€çš„å†…å­˜æ•°æ®åº“ï¼ŒRedis æœ€å…ˆä¼šè¢«æƒ³åˆ°çš„åº”ç”¨åœºæ™¯ä¾¿æ˜¯ä½œä¸ºæ•°æ®ç¼“å­˜ã€‚è€Œä½¿ç”¨ Redis ç¼“å­˜æ•°æ®éå¸¸ç®€å•ï¼Œåªéœ€è¦é€šè¿‡stringç±»å‹å°†åºåˆ—åŒ–åçš„å¯¹è±¡å­˜èµ·æ¥å³å¯ï¼Œä¸è¿‡ä¹Ÿæœ‰ä¸€äº›éœ€è¦æ³¨æ„çš„åœ°æ–¹ï¼š å¿…é¡»ä¿è¯ä¸åŒå¯¹è±¡çš„ key ä¸ä¼šé‡å¤ï¼Œå¹¶ä¸”ä½¿ key å°½é‡çŸ­ï¼Œä¸€èˆ¬ä½¿ç”¨ç±»åï¼ˆè¡¨åï¼‰åŠ ä¸»é”®æ‹¼æ¥è€Œæˆã€‚ é€‰æ‹©ä¸€ä¸ªä¼˜ç§€çš„åºåˆ—åŒ–æ–¹å¼ä¹Ÿå¾ˆé‡è¦ï¼Œç›®çš„æ˜¯æé«˜åºåˆ—åŒ–çš„æ•ˆç‡å’Œå‡å°‘å†…å­˜å ç”¨ã€‚ ç¼“å­˜å†…å®¹ä¸æ•°æ®åº“çš„ä¸€è‡´æ€§ï¼Œè¿™é‡Œä¸€èˆ¬æœ‰ä¸¤ç§åšæ³•ï¼š åªåœ¨æ•°æ®åº“æŸ¥è¯¢åå°†å¯¹è±¡æ”¾å…¥ç¼“å­˜ï¼Œå¦‚æœå¯¹è±¡å‘ç”Ÿäº†ä¿®æ”¹æˆ–åˆ é™¤æ“ä½œï¼Œç›´æ¥æ¸…é™¤å¯¹åº”ç¼“å­˜ï¼ˆæˆ–è®¾ä¸ºè¿‡æœŸï¼‰ã€‚ åœ¨æ•°æ®åº“æ–°å¢å’ŒæŸ¥è¯¢åå°†å¯¹è±¡æ”¾å…¥ç¼“å­˜ï¼Œä¿®æ”¹åæ›´æ–°ç¼“å­˜ï¼Œåˆ é™¤åæ¸…é™¤å¯¹åº”ç¼“å­˜ï¼ˆæˆ–è®¾ä¸ºè¿‡æœŸï¼‰ã€‚ æ•°æ®å…±äº«åˆ†å¸ƒå¼ String ç±»å‹ï¼Œå› ä¸º Redis æ˜¯åˆ†å¸ƒå¼çš„ç‹¬ç«‹æœåŠ¡ï¼Œå¯ä»¥åœ¨å¤šä¸ªåº”ç”¨ä¹‹é—´å…±äº« ä¾‹å¦‚ï¼šåˆ†å¸ƒå¼Session åˆ†å¸ƒå¼é” åœ¨åˆ†å¸ƒå¼ç¯å¢ƒä¸‹ï¼Œå•ä½“é”å·²ä¸åœ¨é€‚ç”¨ï¼ŒRedisä¸­stringçš„setå‘½ä»¤å¢åŠ äº†ä¸€äº›å‚æ•°ï¼š EXï¼šè®¾ç½®é”®çš„è¿‡æœŸæ—¶é—´ï¼ˆå•ä½ä¸ºç§’ï¼‰ PXï¼šè®¾ç½®é”®çš„è¿‡æœŸæ—¶é—´ï¼ˆå•ä½ä¸ºæ¯«ç§’ï¼‰ NXï¼šåªåœ¨é”®ä¸å­˜åœ¨æ—¶ï¼Œæ‰å¯¹é”®è¿›è¡Œè®¾ç½®æ“ä½œã€‚ SET key value NX æ•ˆæœç­‰åŒäº SETNX key value ã€‚ XXï¼šåªåœ¨é”®å·²ç»å­˜åœ¨æ—¶ï¼Œæ‰å¯¹é”®è¿›è¡Œè®¾ç½®æ“ä½œã€‚ ç”±äºè¿™ä¸ªæ“ä½œæ˜¯åŸå­æ€§çš„ï¼Œå¯ä»¥ç®€å•åœ°ä»¥æ­¤å®ç°ä¸€ä¸ªåˆ†å¸ƒå¼çš„é”ï¼Œä¾‹å¦‚ï¼š set lock_key locked NX EX 1 å¦‚æœè¿™ä¸ªæ“ä½œè¿”å›falseï¼Œè¯´æ˜ key çš„æ·»åŠ ä¸æˆåŠŸï¼Œä¹Ÿå°±æ˜¯å½“å‰æœ‰äººåœ¨å ç”¨è¿™æŠŠé”ã€‚è€Œå¦‚æœè¿”å›trueï¼Œåˆ™è¯´æ˜å¾—äº†é”ï¼Œä¾¿å¯ä»¥ç»§ç»­è¿›è¡Œæ“ä½œï¼Œå¹¶ä¸”åœ¨æ“ä½œåé€šè¿‡delå‘½ä»¤é‡Šæ”¾æ‰é”ã€‚å¹¶ä¸”å³ä½¿ç¨‹åºå› ä¸ºæŸäº›åŸå› å¹¶æ²¡æœ‰é‡Šæ”¾é”ï¼Œç”±äºè®¾ç½®äº†è¿‡æœŸæ—¶é—´ï¼Œè¯¥é”ä¹Ÿä¼šåœ¨ 1 ç§’åè‡ªåŠ¨é‡Šæ”¾ï¼Œä¸ä¼šå½±å“åˆ°å…¶ä»–ç¨‹åºçš„è¿è¡Œã€‚ æ¨èä½¿ç”¨ redisson ç¬¬ä¸‰æ–¹åº“å®ç°åˆ†å¸ƒå¼é” å…¨å±€ID intç±»å‹ï¼Œincrbyï¼Œåˆ©ç”¨åŸå­æ€§ incrby userid 1000 åˆ†åº“åˆ†è¡¨çš„åœºæ™¯ï¼Œä¸€æ¬¡æ€§æ‹¿ä¸€æ®µ è®¡æ•°å™¨ intç±»å‹ï¼Œincræ–¹æ³• ä¾‹å¦‚ï¼šæ–‡ç« çš„é˜…è¯»é‡ã€å¾®åšç‚¹èµæ•°ã€å…è®¸ä¸€å®šçš„å»¶è¿Ÿï¼Œå…ˆå†™å…¥Rediså†å®šæ—¶åŒæ­¥åˆ°æ•°æ®åº“ è®¡æ•°åŠŸèƒ½åº”è¯¥æ˜¯æœ€é€‚åˆ Redis çš„ä½¿ç”¨åœºæ™¯ä¹‹ä¸€äº†ï¼Œå› ä¸ºå®ƒé«˜é¢‘ç‡è¯»å†™çš„ç‰¹å¾å¯ä»¥å®Œå…¨å‘æŒ¥ Redis ä½œä¸ºå†…å­˜æ•°æ®åº“çš„é«˜æ•ˆã€‚åœ¨ Redis çš„æ•°æ®ç»“æ„ä¸­ï¼Œstringã€hashå’Œsorted setéƒ½æä¾›äº†incræ–¹æ³•ç”¨äºåŸå­æ€§çš„è‡ªå¢æ“ä½œï¼Œä¸‹é¢ä¸¾ä¾‹è¯´æ˜ä¸€ä¸‹å®ƒä»¬å„è‡ªçš„ä½¿ç”¨åœºæ™¯ï¼š å¦‚æœåº”ç”¨éœ€è¦æ˜¾ç¤ºæ¯å¤©çš„æ³¨å†Œç”¨æˆ·æ•°ï¼Œä¾¿å¯ä»¥ä½¿ç”¨stringä½œä¸ºè®¡æ•°å™¨ï¼Œè®¾å®šä¸€ä¸ªåä¸ºREGISTERED_COUNT_TODAYçš„ keyï¼Œå¹¶åœ¨åˆå§‹åŒ–æ—¶ç»™å®ƒè®¾ç½®ä¸€ä¸ªåˆ°å‡Œæ™¨ 0 ç‚¹çš„è¿‡æœŸæ—¶é—´ï¼Œæ¯å½“ç”¨æˆ·æ³¨å†ŒæˆåŠŸåä¾¿ä½¿ç”¨incrå‘½ä»¤ä½¿è¯¥ key å¢é•¿ 1ï¼ŒåŒæ—¶å½“æ¯å¤©å‡Œæ™¨ 0 ç‚¹åï¼Œè¿™ä¸ªè®¡æ•°å™¨éƒ½ä¼šå› ä¸º key è¿‡æœŸä½¿å€¼æ¸…é›¶ã€‚ æ¯æ¡å¾®åšéƒ½æœ‰ç‚¹èµæ•°ã€è¯„è®ºæ•°ã€è½¬å‘æ•°å’Œæµè§ˆæ•°å››æ¡å±æ€§ï¼Œè¿™æ—¶ç”¨hashè¿›è¡Œè®¡æ•°ä¼šæ›´å¥½ï¼Œå°†è¯¥è®¡æ•°å™¨çš„ key è®¾ä¸ºweibo:weibo_idï¼Œhashçš„ field ä¸ºlike_numberã€comment_numberã€forward_numberå’Œview_numberï¼Œåœ¨å¯¹åº”æ“ä½œåé€šè¿‡hincrbyä½¿hash ä¸­çš„ field è‡ªå¢ã€‚ å¦‚æœåº”ç”¨æœ‰ä¸€ä¸ªå‘å¸–æ’è¡Œæ¦œçš„åŠŸèƒ½ï¼Œä¾¿é€‰æ‹©sorted setå§ï¼Œå°†é›†åˆçš„ key è®¾ä¸ºPOST_RANKã€‚å½“ç”¨æˆ·å‘å¸–åï¼Œä½¿ç”¨zincrbyå°†è¯¥ç”¨æˆ· id çš„ score å¢é•¿ 1ã€‚sorted setä¼šé‡æ–°è¿›è¡Œæ’åºï¼Œç”¨æˆ·æ‰€åœ¨æ’è¡Œæ¦œçš„ä½ç½®ä¹Ÿå°±ä¼šå¾—åˆ°å®æ—¶çš„æ›´æ–°ã€‚ é™æµ intç±»å‹ï¼Œincræ–¹æ³• ä»¥è®¿é—®è€…çš„ipå’Œå…¶ä»–ä¿¡æ¯ä½œä¸ºkeyï¼Œè®¿é—®ä¸€æ¬¡å¢åŠ ä¸€æ¬¡è®¡æ•°ï¼Œè¶…è¿‡æ¬¡æ•°åˆ™è¿”å›false ä½ç»Ÿè®¡ Stringç±»å‹çš„bitcountï¼Œå­—ç¬¦æ˜¯ä»¥8ä½äºŒè¿›åˆ¶å­˜å‚¨çš„ set k1 a setbit k1 6 1 setbit k1 7 0 get k1 å…¶ä¸­6 7 ä»£è¡¨çš„açš„äºŒè¿›åˆ¶ä½çš„ä¿®æ”¹ a-\u003e01100001 b-\u003e01100010 å› ä¸ºbitéå¸¸èŠ‚çœç©ºé—´ï¼Œå¯ä»¥ç”¨æ¥åšå¤§æ•°æ®é‡çš„ç»Ÿè®¡ æ—¶é—´è½´ listä½œä¸ºåŒå‘é“¾è¡¨ï¼Œä¸å…‰å¯ä»¥ä½œä¸ºé˜Ÿåˆ—ä½¿ç”¨ã€‚å¦‚æœå°†å®ƒç”¨ä½œæ ˆä¾¿å¯ä»¥æˆä¸ºä¸€ä¸ªå…¬ç”¨çš„æ—¶é—´è½´ã€‚å½“ç”¨æˆ·å‘å®Œå¾®åšåï¼Œéƒ½é€šè¿‡lpushå°†å®ƒå­˜æ”¾åœ¨ä¸€ä¸ª key ä¸ºLATEST_WEIBOçš„listä¸­ï¼Œä¹‹åä¾¿å¯ä»¥é€šè¿‡lrangeå–å‡ºå½“å‰æœ€æ–°çš„å¾®åšã€‚ æ¶ˆæ¯é˜Ÿåˆ— Redis ä¸­listçš„æ•°æ®ç»“æ„å®ç°æ˜¯åŒå‘é“¾è¡¨ï¼Œæ‰€ä»¥å¯ä»¥éå¸¸ä¾¿æ·çš„åº”ç”¨äºæ¶ˆæ¯é˜Ÿåˆ—ï¼ˆç”Ÿäº§è€… / æ¶ˆè´¹è€…æ¨¡å‹ï¼‰ã€‚æ¶ˆæ¯çš„ç”Ÿäº§è€…åªéœ€è¦é€šè¿‡lpushå°†æ¶ˆæ¯æ”¾å…¥ listï¼Œæ¶ˆè´¹è€…ä¾¿å¯ä»¥é€šè¿‡rpopå–å‡ºè¯¥æ¶ˆæ¯ï¼Œå¹¶ä¸”å¯ä»¥ä¿è¯æ¶ˆæ¯çš„æœ‰åºæ€§ã€‚å¦‚æœéœ€è¦å®ç°å¸¦æœ‰ä¼˜å…ˆçº§çš„æ¶ˆæ¯é˜Ÿåˆ—ä¹Ÿå¯ä»¥é€‰æ‹©sorted setã€‚è€Œpub/subåŠŸèƒ½ä¹Ÿå¯ä»¥ç”¨ä½œå‘å¸ƒè€… / è®¢é˜…è€…æ¨¡å‹çš„æ¶ˆæ¯ã€‚æ— è®ºä½¿ç”¨ä½•ç§æ–¹å¼ï¼Œç”±äº Redis æ‹¥æœ‰æŒä¹…åŒ–åŠŸèƒ½ï¼Œä¹Ÿä¸éœ€è¦æ‹…å¿ƒç”±äºæœåŠ¡å™¨æ•…éšœå¯¼è‡´æ¶ˆæ¯ä¸¢å¤±çš„æƒ…å†µã€‚ Listæä¾›äº†ä¸¤ä¸ªé˜»å¡çš„å¼¹å‡ºæ“ä½œï¼šblpop/brpopï¼Œå¯ä»¥è®¾ç½®è¶…æ—¶æ—¶é—´ blpopï¼šblpop key1 timeout ç§»é™¤å¹¶è·å–åˆ—è¡¨çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œå¦‚æœåˆ—è¡¨æ²¡æœ‰å…ƒç´ ä¼šé˜»å¡åˆ—è¡¨ç›´åˆ°ç­‰å¾…è¶…æ—¶æˆ–å‘ç°å¯å¼¹å‡ºå…ƒç´ ä¸ºæ­¢ã€‚ brpopï¼šbrpop key1 timeout ç§»é™¤å¹¶è·å–åˆ—è¡¨çš„æœ€åä¸€ä¸ªå…ƒç´ ï¼Œå¦‚æœåˆ—è¡¨æ²¡æœ‰å…ƒç´ ä¼šé˜»å¡åˆ—è¡¨ç›´åˆ°ç­‰å¾…è¶…æ—¶æˆ–å‘ç°å¯å¼¹å‡ºå…ƒç´ ä¸ºæ­¢ã€‚ ä¸Šé¢çš„æ“ä½œã€‚å…¶å®å°±æ˜¯javaçš„é˜»å¡é˜Ÿåˆ—ã€‚å­¦ä¹ çš„ä¸œè¥¿è¶Šå¤šã€‚å­¦ä¹ æˆæœ¬è¶Šä½ é˜Ÿåˆ—ï¼šå…ˆè¿›å…ˆé™¤ï¼šrpush blpopï¼Œå·¦å¤´å³å°¾ï¼Œå³è¾¹è¿›å…¥é˜Ÿåˆ—ï¼Œå·¦è¾¹å‡ºé˜Ÿåˆ— æ ˆï¼šå…ˆè¿›åå‡ºï¼šrpush brpop æŠ½å¥– åˆ©ç”¨setç»“æ„çš„æ— åºæ€§,é€šè¿‡ Spopï¼ˆ Redis Spop å‘½ä»¤ç”¨äºç§»é™¤é›†åˆä¸­çš„æŒ‡å®š key çš„ä¸€ä¸ªæˆ–å¤šä¸ªéšæœºå…ƒç´ ï¼Œç§»é™¤åä¼šè¿”å›ç§»é™¤çš„å…ƒç´  ï¼‰ éšæœºè·å¾—å€¼ ç‚¹èµã€ç­¾åˆ°ã€æ‰“å¡ å‡å¦‚å¾®åšIDæ˜¯t1001ï¼Œç”¨æˆ·IDæ˜¯u3001 ç”¨ like:t1001 æ¥ç»´æŠ¤ t1001 è¿™æ¡å¾®åšçš„æ‰€æœ‰ç‚¹èµç”¨æˆ· ç‚¹èµäº†è¿™æ¡å¾®åšï¼šsadd like:t1001 u3001 å–æ¶ˆç‚¹èµï¼šsrem like:t1001 u3001 æ˜¯å¦ç‚¹èµï¼šsismember like:t1001 u3001 ç‚¹èµçš„æ‰€æœ‰ç”¨æˆ·ï¼šsmembers like:t1001 ç‚¹èµæ•°ï¼šscard like:t1001 æ˜¯ä¸æ˜¯æ¯”æ•°æ®åº“ç®€å•å¤šäº†ã€‚ å¥½å‹å…³ç³»ã€ç”¨æˆ·å…³æ³¨ã€æ¨èæ¨¡å‹ è¿™ä¸ªåœºæ™¯æœ€å¼€å§‹æ˜¯æ˜¯ä¸€ç¯‡ä»‹ç»å¾®åš Redis åº”ç”¨çš„ PPT ä¸­çœ‹åˆ°çš„ï¼Œå…¶ä¸­æåˆ°å¾®åšçš„ Redis ä¸»è¦æ˜¯ç”¨åœ¨åœ¨è®¡æ•°å’Œå¥½å‹å…³ç³»ä¸¤æ–¹é¢ä¸Šï¼Œå½“æ—¶å¯¹å¥½å‹å…³ç³»æ–¹é¢çš„ç”¨æ³•ä¸å¤ªäº†è§£ï¼Œåæ¥çœ‹åˆ°ã€ŠRedis è®¾è®¡ä¸å®ç°ã€‹ä¸­ä»‹ç»åˆ°ä½œè€…æœ€å¼€å§‹å»ä½¿ç”¨ Redis ä¾¿æ˜¯å¸Œæœ›èƒ½é€šè¿‡setè§£å†³ä¼ ç»Ÿæ•°æ®åº“æ— æ³•å¿«é€Ÿè®¡ç®—é›†åˆä¸­äº¤é›†è¿™ä¸ªåŠŸèƒ½ã€‚åæ¥è”æƒ³åˆ°å¾®åšå½“å‰çš„ä¸šåŠ¡åœºæ™¯ï¼Œç¡®å®èƒ½å¤Ÿä»¥è¿™ç§æ–¹å¼å®ç°ï¼Œæ‰€ä»¥å§‘ä¸”çŒœæµ‹ä¸€ä¸‹ï¼š å¯¹äºä¸€ä¸ªç”¨æˆ· Aï¼Œå°†å®ƒçš„å…³æ³¨å’Œç²‰ä¸çš„ç”¨æˆ· id éƒ½å­˜æ”¾åœ¨ä¸¤ä¸ª set ä¸­ï¼š A:followï¼šå­˜æ”¾ A æ‰€æœ‰å…³æ³¨çš„ç”¨æˆ· id A:followerï¼šå­˜æ”¾ A æ‰€æœ‰ç²‰ä¸çš„ç”¨æˆ· id é‚£ä¹ˆé€šè¿‡sinterå‘½ä»¤ä¾¿å¯ä»¥æ ¹æ®A:followå’ŒA:followerçš„äº¤é›†å¾—åˆ°ä¸ A äº’ç›¸å…³æ³¨çš„ç”¨æˆ·ã€‚å½“ A è¿›å…¥å¦ä¸€ä¸ªç”¨æˆ· B çš„ä¸»é¡µåï¼ŒA:followå’ŒB:followçš„äº¤é›†ä¾¿æ˜¯ A å’Œ B çš„å…±åŒä¸“æ³¨ï¼ŒA:followå’ŒB:followerçš„äº¤é›†ä¾¿æ˜¯ A å…³æ³¨çš„äººä¹Ÿå…³æ³¨äº† Bï¼›é€šè¿‡sdiffå‘½ä»¤ä¾¿å¯å¾—åˆ°å·®é›†ï¼Œå°±å¯ä»¥å¾—åˆ°ç”¨æˆ·é—´å¯èƒ½è®¤è¯†çš„äºº æ’è¡Œæ¦œ ä½¿ç”¨sorted set(æœ‰åºset)å’Œä¸€ä¸ªè®¡ç®—çƒ­åº¦çš„ç®—æ³•ä¾¿å¯ä»¥è½»æ¾æ‰“é€ ä¸€ä¸ªçƒ­åº¦æ’è¡Œæ¦œï¼Œzrevrangebyscoreå¯ä»¥å¾—åˆ°ä»¥åˆ†æ•°å€’åºæ’åˆ—çš„åºåˆ—ï¼Œzrankå¯ä»¥å¾—åˆ°ä¸€ä¸ªæˆå‘˜åœ¨è¯¥æ’è¡Œæ¦œçš„ä½ç½®ï¼ˆæ˜¯åˆ†æ•°æ­£åºæ’åˆ—æ—¶çš„ä½ç½®ï¼Œå¦‚æœè¦è·å–å€’åºæ’åˆ—æ—¶çš„ä½ç½®éœ€è¦ç”¨zcard-zrankï¼‰ã€‚ id ä¸º 6001 çš„æ–°é—»ç‚¹å‡»æ•°åŠ 1ï¼šzincrby hotNews:20190926 1 n6001 è·å–ä»Šå¤©ç‚¹å‡»æœ€å¤šçš„15æ¡ï¼šzrevrange hotNews:20190926 0 15 withscores æ›´å¤šåº”ç”¨æ¡ˆä¾‹å¯ä»¥æŸ¥çœ‹æœ¬ç¯‡æ–‡ç« ã€æˆ–æœ¬ç¯‡æ–‡ç«  ","date":"2022-05-20","objectID":"/redis%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/:2:0","tags":["Redis"],"title":"Rediså­¦ä¹ ","uri":"/redis%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"Redisé›†ç¾¤éƒ¨ç½² ","date":"2022-05-20","objectID":"/redis%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/:3:0","tags":["Redis"],"title":"Rediså­¦ä¹ ","uri":"/redis%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"ä¸»ä»å¤åˆ¶ éƒ¨ç½²ç®€å•ï¼Œåˆ†ä¸ºä¸€ä¸»ä¸€ä»ï¼Œæˆ–ä¸€ä¸»Nä»ã€‚æ•°æ®åˆ†å¸ƒæ˜¯åœ¨æ‰€æœ‰èŠ‚ç‚¹é€šè¿‡replicationå¤åˆ¶å…¨é‡çš„æ•°æ®ã€‚å¦‚æœä¸»èŠ‚ç‚¹æŒ‚æ‰ï¼Œéœ€è¦æ‰‹åŠ¨æŠŠå…¶ä¸­çš„ä¸€ä¸ªä»èŠ‚ç‚¹è®¾ç½®ä¸ºä¸»èŠ‚ç‚¹ å®è·µï¼š åªéœ€è¦åœ¨ä»åº“ä¸­æ‰§è¡Œslaveof ip port ","date":"2022-05-20","objectID":"/redis%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/:3:1","tags":["Redis"],"title":"Rediså­¦ä¹ ","uri":"/redis%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"å“¨å…µæ¨¡å¼ ç¨å¾®æ¯”ç¬¬ä¸€ç§å¤æ‚ç‚¹ï¼Œå¼•å…¥å“¨å…µï¼Œæ­¤é›†ç¾¤çš„åŸç†è¿˜æ˜¯ä¸»ä»å¤åˆ¶ã€‚ä½†æ˜¯æ­¤é›†ç¾¤ä¸­å¿…é¡»è‡³å°‘3ä¸ªsentinelèŠ‚ç‚¹ï¼Œæ¥å¯¹ä¸€ä¸»ä¸¤ä»çš„èŠ‚ç‚¹è¿›è¡Œç›‘æ§ã€‚å› ä¸ºsentinelé‡Œé¢å­˜åœ¨ä¸€ä¸ªLeaderé€‰ä¸¾æœºåˆ¶ã€‚å¿…é¡»æ˜¯å•æ•°ã€‚æ­¤æ—¶sentinel(å“¨å…µ)å…¶å®å°±æ˜¯ä¸€ä¸ªRedisçš„ç‰¹æ®Šå®ä¾‹ã€‚æ­¤æ—¶çš„ä¸‰ä¸ªsentinelå®ä¾‹åˆç»„æˆäº†ä¸€ä¸ªé›†ç¾¤ï¼Œä¸¤ä¸¤äº’ç›¸ç›‘æ§ï¼Œä¸”è¿™ä¸‰ä¸ªsentinelå®ä¾‹åˆåˆ†åˆ«éƒ½ç›‘æ§äº†æ‰€æœ‰çš„RedisèŠ‚ç‚¹ã€‚å½“ä¸€ä¸ªä¸»èŠ‚ç‚¹ï¼ˆMasterï¼‰æŒ‚æ‰æ—¶ï¼Œæ­¤é›†ç¾¤æ–¹å¼ä¼šé€šè¿‡é…ç½®è‡ªåŠ¨ç”±å¯¹åº”çš„ä»èŠ‚ç‚¹ï¼ˆslaveï¼‰å˜ä¸ºä¸»èŠ‚ç‚¹ã€‚å¦‚æœä¸€ä¸ªä¸»èŠ‚ç‚¹ä¸‹æœ‰Nä¸ªä»èŠ‚ç‚¹ï¼Œåˆ™è¿›è¡Œé€‰ä¸¾æœºåˆ¶æ¥ç¡®å®šå“ªä¸€ä¸ªä»èŠ‚ç‚¹å˜ä¸ºä¸»èŠ‚ç‚¹ã€‚æ­¤æ—¶æ‰€æœ‰èŠ‚ç‚¹çš„æ•°æ®ä¹Ÿéƒ½æ˜¯å…¨é‡çš„ ","date":"2022-05-20","objectID":"/redis%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/:3:2","tags":["Redis"],"title":"Rediså­¦ä¹ ","uri":"/redis%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"åˆ†ç‰‡æ¨¡å¼ æ­¤é›†ç¾¤æ˜¯Redisä»3.0ç‰ˆæœ¬å¼€å§‹æ”¯æŒï¼Œè‡ªå¸¦çš„ä¸€ç§é›†ç¾¤æ–¹å¼ã€‚å®ƒçš„åŸç†ä½¿ç”¨äº†åˆ†å¸ƒçš„æ€æƒ³ï¼Œå…¶æ•°æ®ä¼šå‡åˆ†åˆ°æ‰€æœ‰çš„ä¸»èŠ‚ç‚¹ä¸Šã€‚ä¸”æœ‰ä¸€ä¸ªè™šæ‹Ÿæ§½çš„æ¦‚å¿µã€‚æ­¤éƒ¨ç½²æ–¹å¼ï¼Œå½“æ•°æ®é‡è¿‡å¤§æ—¶ï¼Œä¼šè®©æœåŠ¡å™¨å‡æ‘Šå‹åŠ›ã€‚åœ¨å„ä¸ªä¸»èŠ‚ç‚¹ä¸Šåˆ†é…çš„æ•°æ®éƒ½ä¸æ˜¯å…¨é‡çš„ã€‚æ˜¯åˆ†ç‰‡å­˜å‚¨çš„ã€‚ç›®å‰æ­¤ç§éƒ¨ç½²æ–¹å¼åœ¨ç”Ÿäº§ç¯å¢ƒçš„è¾ƒå¤š å‚è€ƒè‡ªï¼š https://blog.csdn.net/u014659211/article/details/119805443 https://blog.csdn.net/qq_42815754/article/details/82912130 ","date":"2022-05-20","objectID":"/redis%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/:3:3","tags":["Redis"],"title":"Rediså­¦ä¹ ","uri":"/redis%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"é€šè¿‡SpringCloudäº†è§£å¾®æœåŠ¡ ","date":"2022-05-11","objectID":"/%E9%80%9A%E8%BF%87springcloud%E4%BA%86%E8%A7%A3%E5%BE%AE%E6%9C%8D%E5%8A%A1/:0:0","tags":["å¾®æœåŠ¡","SpringCloud"],"title":"é€šè¿‡SpringCloudäº†è§£å¾®æœåŠ¡","uri":"/%E9%80%9A%E8%BF%87springcloud%E4%BA%86%E8%A7%A3%E5%BE%AE%E6%9C%8D%E5%8A%A1/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"ä»€ä¹ˆæ˜¯å¾®æœåŠ¡ï¼Ÿ å¾®æœåŠ¡æ˜¯ä¸€ç§å¼€å‘è½¯ä»¶çš„æ¶æ„å’Œç»„ç»‡æ–¹æ³•ï¼Œå…¶ä¸­è½¯ä»¶ç”±é€šè¿‡æ˜ç¡®å®šä¹‰çš„ API è¿›è¡Œé€šä¿¡çš„å°å‹ç‹¬ç«‹æœåŠ¡ç»„æˆã€‚ ä½¿ç”¨å¾®æœåŠ¡æ¶æ„ï¼Œå°†åº”ç”¨ç¨‹åºæ„å»ºä¸ºç‹¬ç«‹çš„ç»„ä»¶ï¼Œå¹¶å°†æ¯ä¸ªåº”ç”¨ç¨‹åºè¿›ç¨‹ä½œä¸ºä¸€é¡¹æœåŠ¡è¿è¡Œã€‚è¿™äº›æœåŠ¡ä½¿ç”¨è½»é‡çº§ API é€šè¿‡æ˜ç¡®å®šä¹‰çš„æ¥å£è¿›è¡Œé€šä¿¡ã€‚è¿™äº›æœåŠ¡æ˜¯å›´ç»•ä¸šåŠ¡åŠŸèƒ½æ„å»ºçš„ï¼Œæ¯é¡¹æœåŠ¡æ‰§è¡Œä¸€é¡¹åŠŸèƒ½ã€‚ç”±äºå®ƒä»¬æ˜¯ç‹¬ç«‹è¿è¡Œçš„ï¼Œå› æ­¤å¯ä»¥é’ˆå¯¹å„é¡¹æœåŠ¡è¿›è¡Œæ›´æ–°ã€éƒ¨ç½²å’Œæ‰©å±•ï¼Œä»¥æ»¡è¶³å¯¹åº”ç”¨ç¨‹åºç‰¹å®šåŠŸèƒ½çš„éœ€æ±‚ã€‚ ","date":"2022-05-11","objectID":"/%E9%80%9A%E8%BF%87springcloud%E4%BA%86%E8%A7%A3%E5%BE%AE%E6%9C%8D%E5%8A%A1/:1:0","tags":["å¾®æœåŠ¡","SpringCloud"],"title":"é€šè¿‡SpringCloudäº†è§£å¾®æœåŠ¡","uri":"/%E9%80%9A%E8%BF%87springcloud%E4%BA%86%E8%A7%A3%E5%BE%AE%E6%9C%8D%E5%8A%A1/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"å¾®æœåŠ¡çš„ç‰¹æ€§ è‡ªä¸»æ€§ å¯ä»¥å¯¹å¾®æœåŠ¡æ¶æ„ä¸­çš„æ¯ä¸ªç»„ä»¶æœåŠ¡è¿›è¡Œå¼€å‘ã€éƒ¨ç½²ã€è¿è¥å’Œæ‰©å±•ï¼Œè€Œä¸å½±å“å…¶ä»–æœåŠ¡çš„åŠŸèƒ½ã€‚è¿™äº›æœåŠ¡ä¸éœ€è¦ä¸å…¶ä»–æœåŠ¡å…±äº«ä»»ä½•ä»£ç æˆ–å®æ–½ã€‚å„ä¸ªç»„ä»¶ä¹‹é—´çš„ä»»ä½•é€šä¿¡éƒ½æ˜¯é€šè¿‡æ˜ç¡®å®šä¹‰çš„ API è¿›è¡Œçš„ã€‚ ä¸“ç”¨æ€§ æ¯é¡¹æœåŠ¡éƒ½æ˜¯é’ˆå¯¹ä¸€ç»„åŠŸèƒ½è€Œè®¾è®¡çš„ï¼Œå¹¶ä¸“æ³¨äºè§£å†³ç‰¹å®šçš„é—®é¢˜ã€‚å¦‚æœå¼€å‘äººå‘˜é€æ¸å°†æ›´å¤šä»£ç å¢åŠ åˆ°ä¸€é¡¹æœåŠ¡ä¸­å¹¶ä¸”è¿™é¡¹æœåŠ¡å˜å¾—å¤æ‚ï¼Œé‚£ä¹ˆå¯ä»¥å°†å…¶æ‹†åˆ†æˆå¤šé¡¹æ›´å°çš„æœåŠ¡ã€‚ ","date":"2022-05-11","objectID":"/%E9%80%9A%E8%BF%87springcloud%E4%BA%86%E8%A7%A3%E5%BE%AE%E6%9C%8D%E5%8A%A1/:1:1","tags":["å¾®æœåŠ¡","SpringCloud"],"title":"é€šè¿‡SpringCloudäº†è§£å¾®æœåŠ¡","uri":"/%E9%80%9A%E8%BF%87springcloud%E4%BA%86%E8%A7%A3%E5%BE%AE%E6%9C%8D%E5%8A%A1/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"å¾®æœåŠ¡çš„ä¼˜åŠ¿ æ•æ·æ€§ å¾®æœåŠ¡ä¿ƒè¿›è‹¥å¹²å°å‹ç‹¬ç«‹å›¢é˜Ÿå½¢æˆä¸€ä¸ªç»„ç»‡ï¼Œè¿™äº›å›¢é˜Ÿè´Ÿè´£è‡ªå·±çš„æœåŠ¡ã€‚å„å›¢é˜Ÿåœ¨å°å‹ä¸”æ˜“äºç†è§£çš„ç¯å¢ƒä¸­è¡Œäº‹ï¼Œå¹¶ä¸”å¯ä»¥æ›´ç‹¬ç«‹ã€æ›´å¿«é€Ÿåœ°å·¥ä½œã€‚è¿™ç¼©çŸ­äº†å¼€å‘å‘¨æœŸæ—¶é—´ã€‚æ‚¨å¯ä»¥ä»ç»„ç»‡çš„æ€»ååé‡ä¸­æ˜¾è‘—è·ç›Šã€‚ çµæ´»æ‰©å±• é€šè¿‡å¾®æœåŠ¡ï¼Œæ‚¨å¯ä»¥ç‹¬ç«‹æ‰©å±•å„é¡¹æœåŠ¡ä»¥æ»¡è¶³å…¶æ”¯æŒçš„åº”ç”¨ç¨‹åºåŠŸèƒ½çš„éœ€æ±‚ã€‚è¿™ä½¿å›¢é˜Ÿèƒ½å¤Ÿé€‚å½“è°ƒæ•´åŸºç¡€è®¾æ–½éœ€æ±‚ï¼Œå‡†ç¡®è¡¡é‡åŠŸèƒ½æˆæœ¬ï¼Œå¹¶åœ¨æœåŠ¡éœ€æ±‚æ¿€å¢æ—¶ä¿æŒå¯ç”¨æ€§ã€‚ è½»æ¾éƒ¨ç½² å¾®æœåŠ¡æ”¯æŒæŒç»­é›†æˆå’ŒæŒç»­äº¤ä»˜ï¼Œå¯ä»¥è½»æ¾å°è¯•æ–°æƒ³æ³•ï¼Œå¹¶å¯ä»¥åœ¨æ— æ³•æ­£å¸¸è¿è¡Œæ—¶å›æ»šã€‚ç”±äºæ•…éšœæˆæœ¬è¾ƒä½ï¼Œå› æ­¤å¯ä»¥å¤§èƒ†è¯•éªŒï¼Œæ›´è½»æ¾åœ°æ›´æ–°ä»£ç ï¼Œå¹¶ç¼©çŸ­æ–°åŠŸèƒ½çš„ä¸Šå¸‚æ—¶é—´ã€‚ æŠ€æœ¯è‡ªç”± å¾®æœåŠ¡æ¶æ„ä¸éµå¾ªâ€œä¸€åˆ€åˆ‡â€çš„æ–¹æ³•ã€‚å›¢é˜Ÿå¯ä»¥è‡ªç”±é€‰æ‹©æœ€ä½³å·¥å…·æ¥è§£å†³ä»–ä»¬çš„å…·ä½“é—®é¢˜ã€‚å› æ­¤ï¼Œæ„å»ºå¾®æœåŠ¡çš„å›¢é˜Ÿå¯ä»¥ä¸ºæ¯é¡¹ä½œä¸šé€‰æ‹©æœ€ä½³å·¥å…·ã€‚ å¯é‡å¤ä½¿ç”¨çš„ä»£ç  å°†è½¯ä»¶åˆ’åˆ†ä¸ºå°å‹ä¸”æ˜ç¡®å®šä¹‰çš„æ¨¡å—ï¼Œè®©å›¢é˜Ÿå¯ä»¥å°†åŠŸèƒ½ç”¨äºå¤šç§ç›®çš„ã€‚ä¸“ä¸ºæŸé¡¹åŠŸèƒ½ç¼–å†™çš„æœåŠ¡å¯ä»¥ç”¨ä½œå¦ä¸€é¡¹åŠŸèƒ½çš„æ„å»ºå—ã€‚è¿™æ ·åº”ç”¨ç¨‹åºå°±å¯ä»¥è‡ªè¡Œå¼•å¯¼ï¼Œå› ä¸ºå¼€å‘äººå‘˜å¯ä»¥åˆ›å»ºæ–°åŠŸèƒ½ï¼Œè€Œæ— éœ€ä»å¤´å¼€å§‹ç¼–å†™ä»£ç ã€‚ å¼¹æ€§ æœåŠ¡ç‹¬ç«‹æ€§å¢åŠ äº†åº”ç”¨ç¨‹åºåº”å¯¹æ•…éšœçš„å¼¹æ€§ã€‚åœ¨æ•´ä½“å¼æ¶æ„ä¸­ï¼Œå¦‚æœä¸€ä¸ªç»„ä»¶å‡ºç°æ•…éšœï¼Œå¯èƒ½å¯¼è‡´æ•´ä¸ªåº”ç”¨ç¨‹åºæ— æ³•è¿è¡Œã€‚é€šè¿‡å¾®æœåŠ¡ï¼Œåº”ç”¨ç¨‹åºå¯ä»¥é€šè¿‡é™ä½åŠŸèƒ½è€Œä¸å¯¼è‡´æ•´ä¸ªåº”ç”¨ç¨‹åºå´©æºƒæ¥å¤„ç†æ€»ä½“æœåŠ¡æ•…éšœã€‚ ","date":"2022-05-11","objectID":"/%E9%80%9A%E8%BF%87springcloud%E4%BA%86%E8%A7%A3%E5%BE%AE%E6%9C%8D%E5%8A%A1/:1:2","tags":["å¾®æœåŠ¡","SpringCloud"],"title":"é€šè¿‡SpringCloudäº†è§£å¾®æœåŠ¡","uri":"/%E9%80%9A%E8%BF%87springcloud%E4%BA%86%E8%A7%A3%E5%BE%AE%E6%9C%8D%E5%8A%A1/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"SpringCloudæ¡†æ¶ Spring Cloudæ˜¯ä¸€ç³»åˆ—æ¡†æ¶çš„æœ‰åºé›†åˆã€‚å®ƒåˆ©ç”¨Spring Bootçš„å¼€å‘ä¾¿åˆ©æ€§å·§å¦™åœ°ç®€åŒ–äº†åˆ†å¸ƒå¼ç³»ç»ŸåŸºç¡€è®¾æ–½çš„å¼€å‘ï¼Œ å¦‚æœåŠ¡å‘ç°æ³¨å†Œã€é…ç½®ä¸­å¿ƒã€æ¶ˆæ¯æ€»çº¿ã€è´Ÿè½½å‡è¡¡ã€æ–­è·¯å™¨ã€æ•°æ®ç›‘æ§ç­‰ï¼Œéƒ½å¯ä»¥ç”¨Spring Bootçš„å¼€å‘é£æ ¼åšåˆ°ä¸€é”®å¯åŠ¨å’Œéƒ¨ç½²ã€‚Â Spring Cloudå¹¶æ²¡æœ‰é‡å¤åˆ¶é€ è½®å­ï¼Œå®ƒåªæ˜¯å°†ç›®å‰å„å®¶å…¬å¸å¼€å‘çš„æ¯”è¾ƒæˆç†Ÿã€ç»å¾—èµ·å®é™…è€ƒéªŒçš„æœåŠ¡æ¡†æ¶ç»„åˆèµ·æ¥ï¼Œ é€šè¿‡Spring Booté£æ ¼è¿›è¡Œå†å°è£…å±è”½æ‰äº†å¤æ‚çš„é…ç½®å’Œå®ç°åŸç†ï¼Œæœ€ç»ˆç»™å¼€å‘è€…ç•™å‡ºäº†ä¸€å¥—ç®€å•æ˜“æ‡‚ã€æ˜“éƒ¨ç½²å’Œæ˜“ç»´æŠ¤çš„åˆ†å¸ƒå¼ç³»ç»Ÿå¼€å‘å·¥å…·åŒ…ã€‚ å®ƒæœ‰ä»¥ä¸‹ä¼˜ç‚¹ï¼š æŠŠæ¨¡å—æ‹†åˆ†ï¼Œä½¿ç”¨æ¥å£é€šä¿¡ï¼Œé™ä½æ¨¡å—ä¹‹é—´çš„è€¦åˆåº¦ã€‚ æŠŠé¡¹ç›®æ‹†åˆ†æˆè‹¥å¹²ä¸ªå­é¡¹ç›®ï¼Œä¸åŒçš„å›¢é˜Ÿè´Ÿè´£ä¸åŒçš„å­é¡¹ç›®ã€‚ å¢åŠ åŠŸèƒ½æ—¶åªéœ€è¦å†å¢åŠ ä¸€ä¸ªå­é¡¹ç›®ï¼Œè°ƒç”¨å…¶ä»–ç³»ç»Ÿçš„æ¥å£å°±å¯ä»¥ã€‚ å¯ä»¥çµæ´»çš„è¿›è¡Œåˆ†å¸ƒå¼éƒ¨ç½²ã€‚ ","date":"2022-05-11","objectID":"/%E9%80%9A%E8%BF%87springcloud%E4%BA%86%E8%A7%A3%E5%BE%AE%E6%9C%8D%E5%8A%A1/:2:0","tags":["å¾®æœåŠ¡","SpringCloud"],"title":"é€šè¿‡SpringCloudäº†è§£å¾®æœåŠ¡","uri":"/%E9%80%9A%E8%BF%87springcloud%E4%BA%86%E8%A7%A3%E5%BE%AE%E6%9C%8D%E5%8A%A1/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"SpringCloudå¾®æœåŠ¡æ¨¡å—åˆ†æ é€šè¿‡RuoYi-Cloudæ¥æ¥è§¦å¾®æœåŠ¡çš„é¡¹ç›® ","date":"2022-05-11","objectID":"/%E9%80%9A%E8%BF%87springcloud%E4%BA%86%E8%A7%A3%E5%BE%AE%E6%9C%8D%E5%8A%A1/:3:0","tags":["å¾®æœåŠ¡","SpringCloud"],"title":"é€šè¿‡SpringCloudäº†è§£å¾®æœåŠ¡","uri":"/%E9%80%9A%E8%BF%87springcloud%E4%BA%86%E8%A7%A3%E5%BE%AE%E6%9C%8D%E5%8A%A1/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"æœåŠ¡ç½‘å…³ API Gatewayï¼ˆAPIGW / API ç½‘å…³ï¼‰ï¼Œé¡¾åæ€ä¹‰ï¼Œæ˜¯ç³»ç»Ÿå¯¹å¤–çš„å”¯ä¸€å…¥å£ã€‚APIç½‘å…³å°è£…äº†ç³»ç»Ÿå†…éƒ¨æ¶æ„ï¼Œä¸ºæ¯ä¸ªå®¢æˆ·ç«¯æä¾›å®šåˆ¶çš„APIã€‚ è¿‘å‡ å¹´æ¥ç§»åŠ¨åº”ç”¨ä¸ä¼ä¸šé—´äº’è”éœ€æ±‚çš„å…´èµ·ã€‚ä»ä»¥å‰å•ä¸€çš„Webåº”ç”¨ï¼Œæ‰©å±•åˆ°å¤šç§ä½¿ç”¨åœºæ™¯ï¼Œä¸”æ¯ç§ä½¿ç”¨åœºæ™¯å¯¹åå°æœåŠ¡çš„è¦æ±‚éƒ½ä¸å°½ç›¸åŒã€‚ è¿™ä¸ä»…å¢åŠ äº†åå°æœåŠ¡çš„å“åº”é‡ï¼Œè¿˜å¢åŠ äº†åå°æœåŠ¡çš„å¤æ‚æ€§ã€‚éšç€å¾®æœåŠ¡æ¶æ„æ¦‚å¿µçš„æå‡ºï¼ŒAPIç½‘å…³æˆä¸ºäº†å¾®æœåŠ¡æ¶æ„çš„ä¸€ä¸ªæ ‡é…ç»„ä»¶ã€‚ è·¯ç”±ï¼ˆRouteï¼‰ï¼šè·¯ç”±æ˜¯ç½‘å…³æœ€åŸºç¡€çš„éƒ¨åˆ†ï¼Œè·¯ç”±ä¿¡æ¯ç”± IDã€ç›®æ ‡ URIã€ä¸€ç»„æ–­è¨€å’Œä¸€ç»„è¿‡æ»¤å™¨ç»„æˆã€‚å¦‚æœæ–­è¨€ è·¯ç”±ä¸ºçœŸï¼Œåˆ™è¯´æ˜è¯·æ±‚çš„ URI å’Œé…ç½®åŒ¹é…ã€‚ æ–­è¨€ï¼ˆPredicateï¼‰ï¼šJava8 ä¸­çš„æ–­è¨€å‡½æ•°ã€‚Spring Cloud Gateway ä¸­çš„æ–­è¨€å‡½æ•°è¾“å…¥ç±»å‹æ˜¯ Spring 5.0 æ¡†æ¶ä¸­ çš„ ServerWebExchangeã€‚Spring Cloud Gateway ä¸­çš„æ–­è¨€å‡½æ•°å…è®¸å¼€å‘è€…å»å®šä¹‰åŒ¹é…æ¥è‡ªäº Http Request ä¸­çš„ä»» ä½•ä¿¡æ¯ï¼Œæ¯”å¦‚è¯·æ±‚å¤´å’Œå‚æ•°ç­‰ã€‚ è¿‡æ»¤å™¨ï¼ˆFilterï¼‰ï¼šä¸€ä¸ªæ ‡å‡†çš„ Spring Web Filterã€‚Spring Cloud Gateway ä¸­çš„ Filter åˆ†ä¸ºä¸¤ç§ç±»å‹ï¼Œåˆ†åˆ«æ˜¯ Gateway Filter å’Œ Global Filterã€‚è¿‡æ»¤å™¨å°†ä¼šå¯¹è¯·æ±‚å’Œå“åº”è¿›è¡Œå¤„ç†ã€‚ ","date":"2022-05-11","objectID":"/%E9%80%9A%E8%BF%87springcloud%E4%BA%86%E8%A7%A3%E5%BE%AE%E6%9C%8D%E5%8A%A1/:3:1","tags":["å¾®æœåŠ¡","SpringCloud"],"title":"é€šè¿‡SpringCloudäº†è§£å¾®æœåŠ¡","uri":"/%E9%80%9A%E8%BF%87springcloud%E4%BA%86%E8%A7%A3%E5%BE%AE%E6%9C%8D%E5%8A%A1/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"è®¤è¯ä¸­å¿ƒ èº«ä»½è®¤è¯ï¼Œå°±æ˜¯åˆ¤æ–­ä¸€ä¸ªç”¨æˆ·æ˜¯å¦ä¸ºåˆæ³•ç”¨æˆ·çš„å¤„ç†è¿‡ç¨‹ã€‚æœ€å¸¸ç”¨çš„ç®€å•èº«ä»½è®¤è¯æ–¹å¼æ˜¯ç³»ç»Ÿé€šè¿‡æ ¸å¯¹ç”¨æˆ·è¾“å…¥çš„ç”¨æˆ·åå’Œå£ä»¤ï¼Œçœ‹å…¶æ˜¯å¦ä¸ç³»ç»Ÿä¸­å­˜å‚¨çš„è¯¥ç”¨æˆ·çš„ç”¨æˆ·åå’Œå£ä»¤ä¸€è‡´ï¼Œæ¥åˆ¤æ–­ç”¨æˆ·èº«ä»½æ˜¯å¦æ­£ç¡®ã€‚ ç™»å½•è¯·æ±‚åå°æ¥å£ï¼Œä¸ºäº†å®‰å…¨è®¤è¯ï¼Œæ‰€æœ‰è¯·æ±‚éƒ½æºå¸¦tokenä¿¡æ¯è¿›è¡Œå®‰å…¨è®¤è¯ï¼Œæ¯”å¦‚ä½¿ç”¨vueã€reactåè€…h5å¼€å‘çš„appï¼Œç”¨äºæ§åˆ¶å¯è®¿é—®ç³»ç»Ÿçš„èµ„æºã€‚ ","date":"2022-05-11","objectID":"/%E9%80%9A%E8%BF%87springcloud%E4%BA%86%E8%A7%A3%E5%BE%AE%E6%9C%8D%E5%8A%A1/:3:2","tags":["å¾®æœåŠ¡","SpringCloud"],"title":"é€šè¿‡SpringCloudäº†è§£å¾®æœåŠ¡","uri":"/%E9%80%9A%E8%BF%87springcloud%E4%BA%86%E8%A7%A3%E5%BE%AE%E6%9C%8D%E5%8A%A1/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"æ³¨å†Œä¸­å¿ƒ æ³¨å†Œä¸­å¿ƒåœ¨å¾®æœåŠ¡é¡¹ç›®ä¸­æ‰®æ¼”ç€éå¸¸é‡è¦çš„è§’è‰²ï¼Œæ˜¯å¾®æœåŠ¡æ¶æ„ä¸­çš„çº½å¸¦ï¼Œç±»ä¼¼äºé€šè®¯å½•ï¼Œå®ƒè®°å½•äº†æœåŠ¡å’ŒæœåŠ¡åœ°å€çš„æ˜ å°„å…³ç³»ã€‚åœ¨åˆ†å¸ƒå¼æ¶æ„ä¸­ï¼ŒæœåŠ¡ä¼šæ³¨å†Œåˆ°è¿™é‡Œï¼Œå½“æœåŠ¡éœ€è¦è°ƒç”¨å…¶å®ƒæœåŠ¡æ—¶ï¼Œå°±åˆ°è¿™é‡Œæ‰¾åˆ°æœåŠ¡çš„åœ°å€ï¼Œè¿›è¡Œè°ƒç”¨ã€‚ æ³¨å†Œä¸­å¿ƒè§£å†³äº†æœåŠ¡å‘ç°çš„é—®é¢˜ã€‚åœ¨æ²¡æœ‰æ³¨å†Œä¸­å¿ƒæ—¶å€™ï¼ŒæœåŠ¡é—´è°ƒç”¨éœ€è¦çŸ¥é“è¢«è°ƒæ–¹çš„åœ°å€æˆ–è€…ä»£ç†åœ°å€ã€‚å½“æœåŠ¡æ›´æ¢éƒ¨ç½²åœ°å€ï¼Œå°±ä¸å¾—ä¸ä¿®æ”¹è°ƒç”¨å½“ä¸­æŒ‡å®šçš„åœ°å€æˆ–è€…ä¿®æ”¹ä»£ç†é…ç½®ã€‚è€Œæœ‰äº†æ³¨å†Œä¸­å¿ƒä¹‹åï¼Œæ¯ä¸ªæœåŠ¡åœ¨è°ƒç”¨åˆ«äººçš„æ—¶å€™åªéœ€è¦çŸ¥é“æœåŠ¡åç§°å°±å¥½ï¼Œç»§ç»­åœ°å€éƒ½ä¼šé€šè¿‡æ³¨å†Œä¸­å¿ƒåŒæ­¥è¿‡æ¥ã€‚ RuoYi-Cloudä½¿ç”¨çš„æ˜¯Nacos ï¼Œé˜¿é‡Œå·´å·´å¼€æºçš„ä¸€ä¸ªæ›´æ˜“äºæ„å»ºäº‘åŸç”Ÿåº”ç”¨çš„åŠ¨æ€æœåŠ¡å‘ç°ã€é…ç½®ç®¡ç†å’ŒæœåŠ¡ç®¡ç†å¹³å°ã€‚ ","date":"2022-05-11","objectID":"/%E9%80%9A%E8%BF%87springcloud%E4%BA%86%E8%A7%A3%E5%BE%AE%E6%9C%8D%E5%8A%A1/:3:3","tags":["å¾®æœåŠ¡","SpringCloud"],"title":"é€šè¿‡SpringCloudäº†è§£å¾®æœåŠ¡","uri":"/%E9%80%9A%E8%BF%87springcloud%E4%BA%86%E8%A7%A3%E5%BE%AE%E6%9C%8D%E5%8A%A1/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"é…ç½®ä¸­å¿ƒ åœ¨å¾®æœåŠ¡æ¶æ„ä¸­ï¼Œå½“ç³»ç»Ÿä»ä¸€ä¸ªå•ä½“åº”ç”¨ï¼Œè¢«æ‹†åˆ†æˆåˆ†å¸ƒå¼ç³»ç»Ÿä¸Šä¸€ä¸ªä¸ªæœåŠ¡èŠ‚ç‚¹åï¼Œé…ç½®æ–‡ä»¶ä¹Ÿå¿…é¡»è·Ÿç€è¿ç§»ï¼ˆåˆ†å‰²ï¼‰ï¼Œè¿™æ ·é…ç½®å°±åˆ†æ•£äº†ï¼Œä¸ä»…å¦‚æ­¤ï¼Œåˆ†æ•£ä¸­è¿˜åŒ…å«ç€å†—ä½™ï¼Œæ€»å¾—æ¥è¯´ï¼Œé…ç½®ä¸­å¿ƒå°±æ˜¯ä¸€ç§ç»Ÿä¸€ç®¡ç†å„ç§åº”ç”¨é…ç½®çš„åŸºç¡€æœåŠ¡ç»„ä»¶ã€‚ Nacosæ˜¯é˜¿é‡Œå·´å·´å¼€æºçš„ä¸€ä¸ªæ›´æ˜“äºæ„å»ºäº‘åŸç”Ÿåº”ç”¨çš„åŠ¨æ€æœåŠ¡å‘ç°ã€é…ç½®ç®¡ç†å’ŒæœåŠ¡ç®¡ç†å¹³å°ã€‚ é…ç½®ä¸­å¿ƒçš„æœåŠ¡æµç¨‹å¦‚ä¸‹ï¼š ç”¨æˆ·åœ¨é…ç½®ä¸­å¿ƒæ›´æ–°é…ç½®ä¿¡æ¯ã€‚ æœåŠ¡Aå’ŒæœåŠ¡BåŠæ—¶å¾—åˆ°é…ç½®æ›´æ–°é€šçŸ¥ï¼Œä»é…ç½®ä¸­å¿ƒè·å–é…ç½®ã€‚ ","date":"2022-05-11","objectID":"/%E9%80%9A%E8%BF%87springcloud%E4%BA%86%E8%A7%A3%E5%BE%AE%E6%9C%8D%E5%8A%A1/:3:4","tags":["å¾®æœåŠ¡","SpringCloud"],"title":"é€šè¿‡SpringCloudäº†è§£å¾®æœåŠ¡","uri":"/%E9%80%9A%E8%BF%87springcloud%E4%BA%86%E8%A7%A3%E5%BE%AE%E6%9C%8D%E5%8A%A1/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"æœåŠ¡è°ƒç”¨ Feign Feign æ˜¯Spring Cloud Netflixç»„ä»¶ä¸­çš„ä¸€é‡çº§Restfulçš„ HTTP æœåŠ¡å®¢æˆ·ç«¯ï¼Œå®ç°äº†è´Ÿè½½å‡è¡¡å’Œ Rest è°ƒç”¨çš„å¼€æºæ¡†æ¶ï¼Œå°è£…äº†Ribbonå’ŒRestTemplate, å®ç°äº†WebServiceçš„é¢å‘æ¥å£ç¼–ç¨‹ï¼Œè¿›ä¸€æ­¥é™ä½äº†é¡¹ç›®çš„è€¦åˆåº¦ã€‚ ä»€ä¹ˆæ˜¯æœåŠ¡è°ƒç”¨ é¡¾åæ€ä¹‰ï¼Œå°±æ˜¯æœåŠ¡ä¹‹é—´çš„æ¥å£äº’ç›¸è°ƒç”¨ï¼Œåœ¨å¾®æœåŠ¡æ¶æ„ä¸­å¾ˆå¤šåŠŸèƒ½éƒ½éœ€è¦è°ƒç”¨å¤šä¸ªæœåŠ¡æ‰èƒ½å®ŒæˆæŸä¸€é¡¹åŠŸèƒ½ã€‚ ","date":"2022-05-11","objectID":"/%E9%80%9A%E8%BF%87springcloud%E4%BA%86%E8%A7%A3%E5%BE%AE%E6%9C%8D%E5%8A%A1/:3:5","tags":["å¾®æœåŠ¡","SpringCloud"],"title":"é€šè¿‡SpringCloudäº†è§£å¾®æœåŠ¡","uri":"/%E9%80%9A%E8%BF%87springcloud%E4%BA%86%E8%A7%A3%E5%BE%AE%E6%9C%8D%E5%8A%A1/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"ç®€ä»‹ ç”Ÿäº§è€…æ¶ˆè´¹è€…é—®é¢˜ï¼ˆProducer-consumer problemï¼‰ï¼Œä¹Ÿç§°æœ‰é™ç¼“å†²é—®é¢˜ï¼ˆBounded-buffer problemï¼‰ï¼Œæ˜¯ä¸€ä¸ªå¤šçº¿ç¨‹åŒæ­¥é—®é¢˜çš„ç»å…¸æ¡ˆä¾‹ã€‚ç”Ÿäº§è€…ç”Ÿæˆä¸€å®šé‡çš„æ•°æ®æ”¾åˆ°ç¼“å†²åŒºä¸­ï¼Œç„¶åé‡å¤æ­¤è¿‡ç¨‹ï¼›ä¸æ­¤åŒæ—¶ï¼Œæ¶ˆè´¹è€…ä¹Ÿåœ¨ç¼“å†²åŒºæ¶ˆè€—è¿™äº›æ•°æ®ã€‚ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…ä¹‹é—´å¿…é¡»ä¿æŒåŒæ­¥ï¼Œè¦ä¿è¯ç”Ÿäº§è€…ä¸ä¼šåœ¨ç¼“å†²åŒºæ»¡æ—¶æ”¾å…¥æ•°æ®ï¼Œæ¶ˆè´¹è€…ä¹Ÿä¸ä¼šåœ¨ç¼“å†²åŒºç©ºæ—¶æ¶ˆè€—æ•°æ®ã€‚ä¸å¤Ÿå®Œå–„çš„è§£å†³æ–¹æ³•å®¹æ˜“å‡ºç°æ­»é”çš„æƒ…å†µï¼Œæ­¤æ—¶è¿›ç¨‹éƒ½åœ¨ç­‰å¾…å”¤é†’ã€‚ ä¸‹å›¾ä¸ºç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…çš„ç¤ºæ„å›¾ï¼š ","date":"2022-05-08","objectID":"/%E7%94%9F%E4%BA%A7%E8%80%85%E4%B8%8E%E6%B6%88%E8%B4%B9%E8%80%85%E9%97%AE%E9%A2%98/:1:0","tags":["å¤šçº¿ç¨‹"],"title":"ç”Ÿäº§è€…ä¸æ¶ˆè´¹è€…é—®é¢˜","uri":"/%E7%94%9F%E4%BA%A7%E8%80%85%E4%B8%8E%E6%B6%88%E8%B4%B9%E8%80%85%E9%97%AE%E9%A2%98/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"è§£å†³æ€æƒ³ ä¿è¯åŒä¸€èµ„æºè¢«å¤šä¸ªçº¿ç¨‹å¹¶å‘è®¿é—®æ—¶çš„å®Œæ•´æ€§ã€‚å¸¸ç”¨çš„åŒæ­¥æ–¹æ³•æ˜¯é‡‡ç”¨ä¿¡å·æˆ–åŠ é”æœºåˆ¶ï¼Œä¿è¯èµ„æºåœ¨ä»»æ„æ—¶åˆ»è‡³å¤šè¢«ä¸€ä¸ªçº¿ç¨‹è®¿é—® ","date":"2022-05-08","objectID":"/%E7%94%9F%E4%BA%A7%E8%80%85%E4%B8%8E%E6%B6%88%E8%B4%B9%E8%80%85%E9%97%AE%E9%A2%98/:2:0","tags":["å¤šçº¿ç¨‹"],"title":"ç”Ÿäº§è€…ä¸æ¶ˆè´¹è€…é—®é¢˜","uri":"/%E7%94%9F%E4%BA%A7%E8%80%85%E4%B8%8E%E6%B6%88%E8%B4%B9%E8%80%85%E9%97%AE%E9%A2%98/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"Javaå®ç°çš„å‡ ç§æ–¹å¼ wait() / notify() æ–¹æ³• await() / signal() æ–¹æ³•(å¯é‡å…¥é”ReentrantLock) BlockingQueue é˜»å¡é˜Ÿåˆ—æ–¹æ³• ä¿¡å·é‡æ–¹æ³• ç®¡é“æ–¹æ³• ","date":"2022-05-08","objectID":"/%E7%94%9F%E4%BA%A7%E8%80%85%E4%B8%8E%E6%B6%88%E8%B4%B9%E8%80%85%E9%97%AE%E9%A2%98/:2:1","tags":["å¤šçº¿ç¨‹"],"title":"ç”Ÿäº§è€…ä¸æ¶ˆè´¹è€…é—®é¢˜","uri":"/%E7%94%9F%E4%BA%A7%E8%80%85%E4%B8%8E%E6%B6%88%E8%B4%B9%E8%80%85%E9%97%AE%E9%A2%98/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"ä»£ç å®ç° ","date":"2022-05-08","objectID":"/%E7%94%9F%E4%BA%A7%E8%80%85%E4%B8%8E%E6%B6%88%E8%B4%B9%E8%80%85%E9%97%AE%E9%A2%98/:3:0","tags":["å¤šçº¿ç¨‹"],"title":"ç”Ÿäº§è€…ä¸æ¶ˆè´¹è€…é—®é¢˜","uri":"/%E7%94%9F%E4%BA%A7%E8%80%85%E4%B8%8E%E6%B6%88%E8%B4%B9%E8%80%85%E9%97%AE%E9%A2%98/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"wait() / notify() æ–¹æ³• é¦–å…ˆï¼Œå…ˆä»‹ç»ä¸€ä¸‹Thread.sleep()å’ŒObject.wait()ã€Object.notify()çš„åŒºåˆ«ã€‚ sleep()æ˜¯Threadç±»çš„æ–¹æ³•ï¼›è€Œwait()ï¼Œnotify()ï¼ŒnotifyAll()æ˜¯Objectç±»ä¸­å®šä¹‰çš„æ–¹æ³•ï¼›å°½ç®¡è¿™ä¸¤ä¸ªæ–¹æ³•éƒ½ä¼šå½±å“çº¿ç¨‹çš„æ‰§è¡Œè¡Œä¸ºï¼Œä½†æ˜¯æœ¬è´¨ä¸Šæ˜¯æœ‰åŒºåˆ«çš„ Thread.sleep()ä¸ä¼šå¯¼è‡´é”è¡Œä¸ºçš„æ”¹å˜ï¼Œå¦‚æœå½“å‰çº¿ç¨‹æ˜¯æ‹¥æœ‰é”çš„ï¼Œé‚£ä¹ˆThread.sleep()ä¸ä¼šè®©çº¿ç¨‹é‡Šæ”¾é”ã€‚å¦‚æœèƒ½å¤Ÿå¸®åŠ©ä½ è®°å¿†çš„è¯ï¼Œå¯ä»¥ç®€å•è®¤ä¸ºå’Œé”ç›¸å…³çš„æ–¹æ³•éƒ½å®šä¹‰åœ¨Objectç±»ä¸­ï¼Œå› æ­¤è°ƒç”¨Thread.sleep()æ˜¯ä¸ä¼šå½±å“é”çš„ç›¸å…³è¡Œä¸º Thread.sleepå’ŒObject.waitéƒ½ä¼šæš‚åœå½“å‰çš„çº¿ç¨‹ï¼Œå¯¹äºCPUèµ„æºæ¥è¯´ï¼Œä¸ç®¡æ˜¯å“ªç§æ–¹å¼æš‚åœçš„çº¿ç¨‹ï¼Œéƒ½è¡¨ç¤ºå®ƒæš‚æ—¶ä¸å†éœ€è¦CPUçš„æ‰§è¡Œæ—¶é—´ã€‚OSä¼šå°†æ‰§è¡Œæ—¶é—´åˆ†é…ç»™å…¶å®ƒçº¿ç¨‹ã€‚åŒºåˆ«æ˜¯è°ƒç”¨waitåï¼Œéœ€è¦åˆ«çš„çº¿ç¨‹æ‰§è¡Œnotify/notifyAllæ‰èƒ½å¤Ÿé‡æ–°è·å¾—CPUæ‰§è¡Œæ—¶é—´ Thread.sleep()è®©çº¿ç¨‹ä» ã€runningã€‘ -\u003e ã€é˜»å¡æ€ã€‘ æ—¶é—´ç»“æŸ/interrupt -\u003e ã€runnableã€‘;Object.wait()è®©çº¿ç¨‹ä» ã€runningã€‘ -\u003e ã€ç­‰å¾…é˜Ÿåˆ—ã€‘notify -\u003e ã€é”æ± ã€‘ -\u003e ã€runnableã€‘ wait()å’Œnotify()æ–¹æ³•çš„å®ç°ï¼Œç¼“å†²åŒºæ»¡å’Œä¸ºç©ºæ—¶éƒ½è°ƒç”¨wait()æ–¹æ³•ç­‰å¾…ï¼Œå½“ç”Ÿäº§è€…ç”Ÿäº§äº†ä¸€ä¸ªæ•°æ®æˆ–è€…æ¶ˆè´¹è€…æ¶ˆè´¹äº†ä¸€ä¸ªæ•°æ®ä¹‹åä¼šé€šè¿‡notify()å”¤é†’æ‰€æœ‰çº¿ç¨‹ã€‚ import java.util.*; public class Test { // ç¼“å†²åŒºæœ€å¤§å®¹é‡ private static final int MAX_SIZE = 100; // è®¡æ•° private static int count = 0; // ç¼“å†²åŒº private static LinkedList\u003cInteger\u003e list = new LinkedList\u003cInteger\u003e(); public static void main(String[] args) { Thread producer = new Thread(new Producer()); Thread consumer = new Thread(new Consumer()); producer.start(); consumer.start(); } // ç”Ÿäº§è€… public static class Producer implements Runnable { @Override public void run() { while (true) { // ä¸ºlistä¸Šé” synchronized (list) { // ç¼“å†²åŒºæ»¡æ—¶ï¼Œç­‰å¾… while (list.size() == MAX_SIZE) { try { System.out.println(\"list is full, Producer waiting\"); list.wait(); } catch (InterruptedException e) { e.printStackTrace(); } } // ç”Ÿäº§æ•°æ® count++; System.out.println(\"Producer produce \" + count); list.add(count); // å”¤é†’æ¶ˆè´¹è€… list.notifyAll(); // ç­‰å¾…ä¸€æ®µæ—¶é—´å†ç”Ÿäº§ try { Thread.sleep(new Random().nextInt(1000)); } catch (InterruptedException e) { e.printStackTrace(); } } // å½“ç”Ÿäº§100ä¸ªæ•°å°±ç»“æŸ if (count == 100) { break; } } } } // æ¶ˆè´¹è€… public static class Consumer implements Runnable { @Override public void run() { while (true) { // ä¸ºlistä¸Šé” synchronized (list) { // ç¼“å†²åŒºç©ºæ—¶ï¼Œç­‰å¾… while (list.isEmpty()) { try { System.out.println(\"list is empty, Consumer waiting\"); list.wait(); } catch (InterruptedException e) { e.printStackTrace(); } } // æ¶ˆè´¹æ•°æ® int temp = list.poll(); System.out.println(\"Consumer consume \" + temp); // å”¤é†’ç”Ÿäº§è€… list.notifyAll(); } // å½“æ¶ˆè´¹100ä¸ªæ•°å°±ç»“æŸ if (count == 100 \u0026\u0026 list.isEmpty()) { break; } } } } } æ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š æ³¨æ„ï¼š notifyAll()æ–¹æ³•å¯ä½¿æ‰€æœ‰æ­£åœ¨ç­‰å¾…é˜Ÿåˆ—ä¸­ç­‰å¾…åŒä¸€å…±äº«èµ„æºçš„â€œå…¨éƒ¨â€çº¿ç¨‹ä»ç­‰å¾…çŠ¶æ€é€€å‡ºï¼Œè¿›å…¥å¯è¿è¡ŒçŠ¶æ€ã€‚æ­¤æ—¶ï¼Œä¼˜å…ˆçº§æœ€é«˜çš„é‚£ä¸ªçº¿ç¨‹æœ€å…ˆæ‰§è¡Œï¼Œä½†ä¹Ÿæœ‰å¯èƒ½æ˜¯éšæœºæ‰§è¡Œçš„ï¼Œè¿™è¦å–å†³äºJVMè™šæ‹Ÿæœºçš„å®ç°ã€‚å³æœ€ç»ˆä¹Ÿåªæœ‰ä¸€ä¸ªçº¿ç¨‹èƒ½è¢«è¿è¡Œï¼Œä¸Šè¿°çº¿ç¨‹ä¼˜å…ˆçº§éƒ½ç›¸åŒï¼Œæ¯æ¬¡è¿è¡Œçš„çº¿ç¨‹éƒ½ä¸ç¡®å®šæ˜¯å“ªä¸ªï¼Œåæ¥ç»™çº¿ç¨‹è®¾ç½®ä¼˜å…ˆçº§åä¹Ÿè·Ÿé¢„æœŸä¸ä¸€æ ·ï¼Œè¿˜æ˜¯è¦çœ‹JVMçš„å…·ä½“å®ç°å§ã€‚ ","date":"2022-05-08","objectID":"/%E7%94%9F%E4%BA%A7%E8%80%85%E4%B8%8E%E6%B6%88%E8%B4%B9%E8%80%85%E9%97%AE%E9%A2%98/:3:1","tags":["å¤šçº¿ç¨‹"],"title":"ç”Ÿäº§è€…ä¸æ¶ˆè´¹è€…é—®é¢˜","uri":"/%E7%94%9F%E4%BA%A7%E8%80%85%E4%B8%8E%E6%B6%88%E8%B4%B9%E8%80%85%E9%97%AE%E9%A2%98/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"await() / signal() æ–¹æ³•(å¯é‡å…¥é”ReentrantLock) åœ¨JDK5.0ä¹‹åï¼ŒJavaæä¾›äº†æ›´åŠ å¥å£®çš„çº¿ç¨‹å¤„ç†æœºåˆ¶ï¼ŒåŒ…æ‹¬åŒæ­¥ã€é”å®šã€çº¿ç¨‹æ± ç­‰ï¼Œå®ƒä»¬å¯ä»¥å®ç°æ›´ç»†ç²’åº¦çš„çº¿ç¨‹æ§åˆ¶ã€‚ç”¨ReentrantLockå’ŒConditionå¯ä»¥å®ç°ç­‰å¾…/é€šçŸ¥æ¨¡å‹ï¼Œå…·æœ‰æ›´å¤§çš„çµæ´»æ€§ã€‚é€šè¿‡åœ¨Lockå¯¹è±¡ä¸Šè°ƒç”¨newCondition()æ–¹æ³•ï¼Œå°†æ¡ä»¶å˜é‡å’Œä¸€ä¸ªé”å¯¹è±¡è¿›è¡Œç»‘å®šï¼Œè¿›è€Œæ§åˆ¶å¹¶å‘ç¨‹åºè®¿é—®ç«äº‰èµ„æºçš„å®‰å…¨ã€‚ Conditionæ¥å£çš„await()å’Œsignal()å°±æ˜¯å…¶ä¸­ç”¨æ¥åšåŒæ­¥çš„ä¸¤ç§æ–¹æ³•ï¼Œå®ƒä»¬çš„åŠŸèƒ½åŸºæœ¬ä¸Šå’ŒObjectçš„wait()/ nofity()ç›¸åŒï¼Œå®Œå…¨å¯ä»¥å–ä»£å®ƒä»¬ï¼Œä½†æ˜¯å®ƒä»¬å’Œæ–°å¼•å…¥çš„é”å®šæœºåˆ¶Lockç›´æ¥æŒ‚é’©ï¼Œå…·æœ‰æ›´å¤§çš„çµæ´»æ€§ã€‚é€šè¿‡åœ¨Lockå¯¹è±¡ä¸Šè°ƒç”¨newCondition()æ–¹æ³•ï¼Œå°†æ¡ä»¶å˜é‡å’Œä¸€ä¸ªé”å¯¹è±¡è¿›è¡Œç»‘å®šï¼Œè¿›è€Œæ§åˆ¶å¹¶å‘ç¨‹åºè®¿é—®ç«äº‰èµ„æºçš„å®‰å…¨ã€‚ import java.util.*; import java.util.concurrent.locks.*; public class Test1 { private static final int MAX_SIZE = 100; private static int count = 0; private static LinkedList\u003cInteger\u003e list = new LinkedList\u003cInteger\u003e(); // åˆ›å»ºé”åŠå…¶æ¡ä»¶ private static final Lock lock = new ReentrantLock(); private static final Condition fullCondition = lock.newCondition(); private static final Condition emptyCondition = lock.newCondition(); public static void main(String[] args) { Thread producer = new Thread(new Producer()); Thread consumer = new Thread(new Consumer()); producer.start(); consumer.start(); } public static class Producer implements Runnable { @Override public void run() { while (true) { // ä¸Šé” lock.lock(); try { // ç¼“å†²åŒºæ»¡æ—¶ï¼Œç­‰å¾… while (list.size() == MAX_SIZE) { try { System.out.println(\"list is full, Producer waiting\"); fullCondition.await(); } catch (InterruptedException e) { e.printStackTrace(); } } // ç”Ÿäº§æ•°æ® count++; System.out.println(\"Producer produce \" + count); list.add(count); // å”¤é†’æ¶ˆè´¹è€… emptyCondition.signalAll(); } finally { lock.unlock(); } try { Thread.sleep(new Random().nextInt(1000)); } catch (InterruptedException e) { e.printStackTrace(); } if (count == 100) { break; } } } } public static class Consumer implements Runnable { @Override public void run() { while (true) { // ä¸Šé” lock.lock(); try { // ç¼“å†²åŒºç©ºæ—¶ï¼Œç­‰å¾… while (list.isEmpty()) { try { System.out.println(\"list is empty, Consumer waiting\"); emptyCondition.await(); } catch (InterruptedException e) { e.printStackTrace(); } } // æ¶ˆè´¹æ•°æ® int temp = list.poll(); System.out.println(\"Consumer consume \" + temp); // å”¤é†’ç”Ÿäº§è€… fullCondition.signalAll(); } finally { lock.unlock(); } if (count == 100 \u0026\u0026 list.isEmpty()) { break; } } } } } è¿è¡Œç»“æœå¦‚ä¸‹ï¼šï¼ˆä¸ç¬¬ä¸€ç§æ–¹æ³•ç±»ä¼¼ï¼‰ ","date":"2022-05-08","objectID":"/%E7%94%9F%E4%BA%A7%E8%80%85%E4%B8%8E%E6%B6%88%E8%B4%B9%E8%80%85%E9%97%AE%E9%A2%98/:3:2","tags":["å¤šçº¿ç¨‹"],"title":"ç”Ÿäº§è€…ä¸æ¶ˆè´¹è€…é—®é¢˜","uri":"/%E7%94%9F%E4%BA%A7%E8%80%85%E4%B8%8E%E6%B6%88%E8%B4%B9%E8%80%85%E9%97%AE%E9%A2%98/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"BlockingQueue é˜»å¡é˜Ÿåˆ—æ–¹æ³• JDK 1.5 ä»¥åæ–°å¢çš„ java.util.concurrentåŒ…æ–°å¢äº† BlockingQueue æ¥å£ã€‚å¹¶æä¾›äº†å¦‚ä¸‹å‡ ç§é˜»å¡é˜Ÿåˆ—å®ç°ï¼š java.util.concurrent.ArrayBlockingQueue java.util.concurrent.LinkedBlockingQueue java.util.concurrent.SynchronousQueue java.util.concurrent.PriorityBlockingQueue å®ç°ç”Ÿäº§è€…-æ¶ˆè´¹è€…æ¨¡å‹ä½¿ç”¨ ArrayBlockingQueueæˆ–è€… LinkedBlockingQueueå³å¯ã€‚ æˆ‘ä»¬è¿™é‡Œä½¿ç”¨LinkedBlockingQueueï¼Œå®ƒæ˜¯ä¸€ä¸ªå·²ç»åœ¨å†…éƒ¨å®ç°äº†åŒæ­¥çš„é˜Ÿåˆ—ï¼Œå®ç°æ–¹å¼é‡‡ç”¨çš„æ˜¯æˆ‘ä»¬ç¬¬2ç§await()/ signal()æ–¹æ³•ã€‚å®ƒå¯ä»¥åœ¨ç”Ÿæˆå¯¹è±¡æ—¶æŒ‡å®šå®¹é‡å¤§å°ã€‚å®ƒç”¨äºé˜»å¡æ“ä½œçš„æ˜¯put()å’Œtake()æ–¹æ³•ã€‚ put()æ–¹æ³•ï¼šç±»ä¼¼äºæˆ‘ä»¬ä¸Šé¢çš„ç”Ÿäº§è€…çº¿ç¨‹ï¼Œå®¹é‡è¾¾åˆ°æœ€å¤§æ—¶ï¼Œè‡ªåŠ¨é˜»å¡ã€‚ take()æ–¹æ³•ï¼šç±»ä¼¼äºæˆ‘ä»¬ä¸Šé¢çš„æ¶ˆè´¹è€…çº¿ç¨‹ï¼Œå®¹é‡ä¸º0æ—¶ï¼Œè‡ªåŠ¨é˜»å¡ã€‚ import java.util.*; import java.util.concurrent.LinkedBlockingQueue; public class Test2 { private static final int MAX_SIZE = 100; private static int count = 0; // åˆ›å»ºé˜»å¡é˜Ÿåˆ— private static LinkedBlockingQueue\u003cInteger\u003e blockingQueue = new LinkedBlockingQueue\u003cInteger\u003e(MAX_SIZE); public static void main(String[] args) { Thread producer = new Thread(new Producer()); Thread consumer = new Thread(new Consumer()); producer.start(); consumer.start(); } public static class Producer implements Runnable { @Override public void run() { while (true) { try { count++; // ç”Ÿäº§æ•°æ®åˆ°é˜»å¡é˜Ÿåˆ— blockingQueue.put(count); System.out.println(\"Producer produce \" + count); } catch (InterruptedException e) { e.printStackTrace(); } try { Thread.sleep(new Random().nextInt(1000)); } catch (InterruptedException e) { e.printStackTrace(); } if (count == 100) { break; } } } } public static class Consumer implements Runnable { @Override public void run() { while (true) { try { // ä»é˜»å¡é˜Ÿåˆ—æ¶ˆè´¹æ•°æ® int value = blockingQueue.take(); System.out.println(\"Consumer consume \" + value); } catch (InterruptedException e) { e.printStackTrace(); } if (count == 100 \u0026\u0026 blockingQueue.isEmpty()) { break; } } } } } ","date":"2022-05-08","objectID":"/%E7%94%9F%E4%BA%A7%E8%80%85%E4%B8%8E%E6%B6%88%E8%B4%B9%E8%80%85%E9%97%AE%E9%A2%98/:3:3","tags":["å¤šçº¿ç¨‹"],"title":"ç”Ÿäº§è€…ä¸æ¶ˆè´¹è€…é—®é¢˜","uri":"/%E7%94%9F%E4%BA%A7%E8%80%85%E4%B8%8E%E6%B6%88%E8%B4%B9%E8%80%85%E9%97%AE%E9%A2%98/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"ä¿¡å·é‡æ–¹æ³• Semaphoreï¼ˆä¿¡å·é‡ï¼‰æ˜¯ç”¨æ¥æ§åˆ¶åŒæ—¶è®¿é—®ç‰¹å®šèµ„æºçš„çº¿ç¨‹æ•°é‡ï¼Œå®ƒé€šè¿‡åè°ƒå„ä¸ªçº¿ç¨‹ï¼Œä»¥ä¿è¯åˆç†çš„ä½¿ç”¨å…¬å…±èµ„æºï¼Œåœ¨æ“ä½œç³»ç»Ÿä¸­æ˜¯ä¸€ä¸ªéå¸¸é‡è¦çš„é—®é¢˜ï¼Œå¯ä»¥ç”¨æ¥è§£å†³å“²å­¦å®¶å°±é¤é—®é¢˜ã€‚Javaä¸­çš„Semaphoreç»´æŠ¤äº†ä¸€ä¸ªè®¸å¯é›†ï¼Œä¸€å¼€å§‹å…ˆè®¾å®šè¿™ä¸ªè®¸å¯é›†çš„æ•°é‡ï¼Œå¯ä»¥ä½¿ç”¨acquire()æ–¹æ³•è·å¾—ä¸€ä¸ªè®¸å¯ï¼Œå½“è®¸å¯ä¸è¶³æ—¶ä¼šè¢«é˜»å¡ï¼Œrelease()æ·»åŠ ä¸€ä¸ªè®¸å¯ã€‚ Semaphoreå¯ä»¥ç”¨æ¥æ„å»ºä¸€äº›å¯¹è±¡æ± ï¼Œèµ„æºæ± ä¹‹ç±»çš„ï¼Œæ¯”å¦‚æ•°æ®åº“è¿æ¥æ± ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥åˆ›å»ºè®¡æ•°ä¸º1çš„Semaphoreï¼Œå°†å…¶ä½œä¸ºä¸€ç§ç±»ä¼¼äº’æ–¥é”çš„æœºåˆ¶ï¼Œè¿™ä¹Ÿå«äºŒå…ƒä¿¡å·é‡ï¼Œè¡¨ç¤ºä¸¤ç§äº’æ–¥çŠ¶æ€ã€‚ åœ¨ä¸‹åˆ—ä»£ç ä¸­ï¼Œè¿˜åŠ å…¥äº†å¦å¤–ä¸€ä¸ªmutexä¿¡å·é‡ï¼Œç»´æŠ¤ç”Ÿäº§è€…æ¶ˆè´¹è€…ä¹‹é—´çš„åŒæ­¥å…³ç³»ï¼Œä¿è¯ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…ä¹‹é—´çš„äº¤æ›¿è¿›è¡Œ import java.util.*; import java.util.concurrent.Semaphore; public class Test3 { private static final int MAX_SIZE = 100; private static int count = 0; private static LinkedList\u003cInteger\u003e list = new LinkedList\u003cInteger\u003e(); // åˆ›å»ºä¿¡å·é‡ final static Semaphore notFull = new Semaphore(MAX_SIZE); final static Semaphore notEmpty = new Semaphore(0); final static Semaphore mutex = new Semaphore(1); public static void main(String[] args) { Thread producer = new Thread(new Producer()); Thread consumer = new Thread(new Consumer()); producer.start(); consumer.start(); } public static class Producer implements Runnable { @Override public void run() { while (true) { try { // è·å–è®¸å¯ notFull.acquire(); mutex.acquire(); // ç”Ÿäº§æ•°æ® count++; list.add(count); System.out.println(\"Producer produce \" + count); } catch (InterruptedException e) { e.printStackTrace(); } finally { // é‡Šæ”¾è®¸å¯ mutex.release(); notEmpty.release(); } try { Thread.sleep(new Random().nextInt(1000)); } catch (InterruptedException e) { e.printStackTrace(); } if (count == 100) { break; } } } } public static class Consumer implements Runnable { @Override public void run() { while (true) { try { // è·å–è®¸å¯ notEmpty.acquire(); mutex.acquire(); // æ¶ˆè´¹æ•°æ® int value = list.poll(); System.out.println(\"Consumer consume \" + value); } catch (InterruptedException e) { e.printStackTrace(); } finally { // é‡Šæ”¾è®¸å¯ mutex.release(); notFull.release(); } if (count == 100 \u0026\u0026 list.isEmpty()) { break; } } } } } ","date":"2022-05-08","objectID":"/%E7%94%9F%E4%BA%A7%E8%80%85%E4%B8%8E%E6%B6%88%E8%B4%B9%E8%80%85%E9%97%AE%E9%A2%98/:3:4","tags":["å¤šçº¿ç¨‹"],"title":"ç”Ÿäº§è€…ä¸æ¶ˆè´¹è€…é—®é¢˜","uri":"/%E7%94%9F%E4%BA%A7%E8%80%85%E4%B8%8E%E6%B6%88%E8%B4%B9%E8%80%85%E9%97%AE%E9%A2%98/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"ç®¡é“æ–¹æ³• åœ¨javaçš„ioåŒ…ä¸‹ï¼ŒPipedOutputStreamå’ŒPipedInputStreamåˆ†åˆ«æ˜¯ç®¡é“è¾“å‡ºæµå’Œç®¡é“è¾“å…¥æµã€‚ å®ƒä»¬çš„ä½œç”¨æ˜¯è®©å¤šçº¿ç¨‹å¯ä»¥é€šè¿‡ç®¡é“è¿›è¡Œçº¿ç¨‹é—´çš„é€šè®¯ã€‚åœ¨ä½¿ç”¨ç®¡é“é€šä¿¡æ—¶ï¼Œå¿…é¡»å°†PipedOutputStreamå’ŒPipedInputStreamé…å¥—ä½¿ç”¨ã€‚ ä½¿ç”¨æ–¹æ³•ï¼šå…ˆåˆ›å»ºä¸€ä¸ªç®¡é“è¾“å…¥æµå’Œç®¡é“è¾“å‡ºæµï¼Œç„¶åå°†è¾“å…¥æµå’Œè¾“å‡ºæµè¿›è¡Œè¿æ¥ï¼Œç”¨ç”Ÿäº§è€…çº¿ç¨‹å¾€ç®¡é“è¾“å‡ºæµä¸­å†™å…¥æ•°æ®ï¼Œæ¶ˆè´¹è€…åœ¨ç®¡é“è¾“å…¥æµä¸­è¯»å–æ•°æ®ï¼Œè¿™æ ·å°±å¯ä»¥å®ç°äº†ä¸åŒçº¿ç¨‹é—´çš„ç›¸äº’é€šè®¯ã€‚ ä½†æ˜¯è¿™ç§æ–¹å¼åœ¨ç”Ÿäº§è€…å’Œç”Ÿäº§è€…ã€æ¶ˆè´¹è€…å’Œæ¶ˆè´¹è€…ä¹‹é—´ä¸èƒ½ä¿è¯åŒæ­¥ï¼Œä¹Ÿå°±æ˜¯è¯´åœ¨ä¸€ä¸ªç”Ÿäº§è€…å’Œä¸€ä¸ªæ¶ˆè´¹è€…çš„æƒ…å†µä¸‹æ˜¯å¯ä»¥ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…ä¹‹é—´äº¤æ›¿è¿è¡Œçš„ï¼Œå¤šä¸ªç”Ÿæˆè€…å’Œå¤šä¸ªæ¶ˆè´¹è€…è€…ä¹‹é—´åˆ™ä¸è¡Œã€‚ è¿™ç§æ–¹å¼åªé€‚ç”¨äºä¸¤ä¸ªçº¿ç¨‹ä¹‹é—´é€šä¿¡ï¼Œä¸é€‚åˆå¤šä¸ªçº¿ç¨‹ä¹‹é—´é€šä¿¡ã€‚ import java.io.IOException; import java.io.PipedInputStream; import java.io.PipedOutputStream; import java.util.*; public class Test4 { // æ§åˆ¶ç”Ÿäº§å’Œæ¶ˆè´¹ä¸ª100æ¬¡ private static int countP = 0; private static int countS = 0; // åˆ›å»ºç®¡é“è¾“å…¥æµå’Œç®¡é“è¾“å‡ºæµ final static PipedInputStream pis = new PipedInputStream(); final static PipedOutputStream pos = new PipedOutputStream(); // å°†è¾“å…¥æµå’Œè¾“å‡ºæµè¿›è¡Œè¿æ¥ static { try { pis.connect(pos); } catch (IOException e) { e.printStackTrace(); } } public static void main(String[] args) { Thread producer = new Thread(new Producer()); Thread consumer = new Thread(new Consumer()); producer.start(); consumer.start(); } public static class Producer implements Runnable { @Override public void run() { try { while (true) { // å†™å…¥æ•°æ® countP++; pos.write(countP); pos.flush(); System.out.println(\"Producer produce \" + countP); Thread.sleep(new Random().nextInt(1000)); if (countP == 100) { break; } } } catch (Exception e) { e.printStackTrace(); } finally { try { // å…³é—­è¾“å‡ºæµ pos.close(); } catch (IOException e) { e.printStackTrace(); } } } } public static class Consumer implements Runnable { @Override public void run() { try { while (true) { // è¯»å–æ•°æ® countS++; int value = pis.read(); System.out.println(\"Consumer consume \" + value); if (countS == 100) { break; } } } catch (IOException e) { e.printStackTrace(); } finally { try { // å…³é—­è¾“å…¥æµ pis.close(); } catch (IOException e) { e.printStackTrace(); } } } } } ","date":"2022-05-08","objectID":"/%E7%94%9F%E4%BA%A7%E8%80%85%E4%B8%8E%E6%B6%88%E8%B4%B9%E8%80%85%E9%97%AE%E9%A2%98/:3:5","tags":["å¤šçº¿ç¨‹"],"title":"ç”Ÿäº§è€…ä¸æ¶ˆè´¹è€…é—®é¢˜","uri":"/%E7%94%9F%E4%BA%A7%E8%80%85%E4%B8%8E%E6%B6%88%E8%B4%B9%E8%80%85%E9%97%AE%E9%A2%98/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"åœ¨è¿›è¡Œåä¸ºæœºè¯•æ—¶é‡åˆ°äº†æŠ¥æ•°æ¸¸æˆçš„ç¼–ç¨‹é¢˜ï¼ˆçº¦ç‘Ÿå¤«ç¯ï¼‰ï¼Œä½†æ˜¯çœ‹äº†å¾ˆå¤šç½‘ä¸Šçš„è§£é¢˜éƒ½éå¸¸é•¿ï¼Œäºæ˜¯ç»è¿‡ä¸æ–­çš„å­¦ä¹ å‚è€ƒï¼Œæœ‰äº†ä¸‹é¢è¿™ä¸ªè§£é¢˜æ–¹æ³•ï¼Œä¹Ÿä¸çŸ¥é“æ˜¯ä¸æ˜¯æœ€å¥½çš„ğŸ˜­ é¢˜ç›®ï¼š 100ä¸ªäººå›´æˆä¸€åœˆï¼Œæ¯ä¸ªäººæœ‰ä¸€ä¸ªç¼–ç ï¼Œç¼–å·ä»1å¼€å§‹åˆ°100.ä»–ä»¬ä»1å¼€å§‹ä¾æ¬¡æŠ¥æ•°ï¼ŒæŠ¥åˆ°ä¸ºMçš„äººè‡ªåŠ¨é€€å‡ºåœˆåœˆï¼Œç„¶åä¸‹ä¸€ä¸ªäººæ¥ç€ä»1å¼€å§‹æŠ¥æ•°ï¼Œç›´åˆ°å‰©ä½™çš„äººæ•°å°äºMã€‚è¯·é—®æœ€åå‰©ä½™çš„äººåœ¨åŸå…ˆçš„ç¼–å·ä¸ºå¤šå°‘ï¼Ÿ ä¾‹å¦‚ï¼šè¾“å…¥M=3æ—¶ï¼Œè¾“å‡ºä¸ºï¼šâ€œ58ï¼Œ91â€ï¼›è¾“å…¥M=4æ—¶ï¼Œè¾“å‡ºä¸ºï¼š â€œ34ï¼Œ45ï¼Œ 97â€ è§£ç­”ï¼š import java.util.*; public class test { public static void main(String[] args) { Scanner in = new Scanner(System.in); int n = in.nextInt(); List list = new ArrayList\u003cInteger\u003e(100); for (int i = 1; i \u003c= 100; i++) { list.add(i); } int i = 0; while (list.size() \u003e= n) { i = (i + n - 1) % list.size(); list.remove(i); } list.stream().forEach(System.out::println); } } ","date":"2022-04-17","objectID":"/%E5%8D%8E%E4%B8%BA%E6%9C%BA%E8%AF%95%E9%A2%98-%E6%8A%A5%E6%95%B0%E6%B8%B8%E6%88%8F/:0:0","tags":["é¢è¯•"],"title":"åä¸ºæœºè¯•é¢˜ï¼šæŠ¥æ•°æ¸¸æˆ","uri":"/%E5%8D%8E%E4%B8%BA%E6%9C%BA%E8%AF%95%E9%A2%98-%E6%8A%A5%E6%95%B0%E6%B8%B8%E6%88%8F/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"æœ¬ç¯‡ç¬”è®°ä¸»è¦è®°å½•æˆ‘åœ¨å­¦ä¹ Javaçš„streamæµä¸­è®°å½•çš„ç¬”è®° ","date":"2022-04-17","objectID":"/java%E5%AD%A6%E4%B9%A0stream%E6%B5%81%E4%BD%BF%E7%94%A8/:0:0","tags":["Java"],"title":"Java Streamæµå­¦ä¹ ç¬”è®°","uri":"/java%E5%AD%A6%E4%B9%A0stream%E6%B5%81%E4%BD%BF%E7%94%A8/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"streamæ˜¯ä»€ä¹ˆ æµæ˜¯ä»æ”¯æŒæ•°æ®å¤„ç†æ“ä½œçš„æºç”Ÿæˆçš„å…ƒç´ åºåˆ—ï¼Œæºå¯ä»¥æ˜¯æ•°ç»„ã€æ–‡ä»¶ã€é›†åˆã€å‡½æ•°ã€‚æµä¸æ˜¯é›†åˆå…ƒç´ ï¼Œå®ƒä¸æ˜¯æ•°æ®ç»“æ„å¹¶ä¸ä¿å­˜æ•°æ®ï¼Œå®ƒçš„ä¸»è¦ç›®çš„åœ¨äºè®¡ç®— ","date":"2022-04-17","objectID":"/java%E5%AD%A6%E4%B9%A0stream%E6%B5%81%E4%BD%BF%E7%94%A8/:1:0","tags":["Java"],"title":"Java Streamæµå­¦ä¹ ç¬”è®°","uri":"/java%E5%AD%A6%E4%B9%A0stream%E6%B5%81%E4%BD%BF%E7%94%A8/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"ç”Ÿæˆstreamçš„æ–¹æ³• ç”Ÿæˆæµçš„æ–¹å¼ä¸»è¦æœ‰äº”ç§ é€šè¿‡é›†åˆç”Ÿæˆï¼Œåº”ç”¨ä¸­æœ€å¸¸ç”¨çš„ä¸€ç§ List\u003cInteger\u003e integerList = Arrays.asList(1, 2, 3, 4, 5, 6); Stream\u003cInteger\u003e stream = integerList.stream(); é€šè¿‡æ•°ç»„ç”Ÿæˆ int[] intArr = {1, 2, 3, 4, 5, 6}; IntStream stream = Arrays.stream(intArr); é€šè¿‡Arrays.streamæ–¹æ³•ç”Ÿæˆæµï¼Œå¹¶ä¸”è¯¥æ–¹æ³•ç”Ÿæˆçš„æµæ˜¯æ•°å€¼æµã€å³IntStreamã€‘è€Œä¸æ˜¯ Streamã€‚è¡¥å……ä¸€ç‚¹ä½¿ç”¨æ•°å€¼æµå¯ä»¥é¿å…è®¡ç®—è¿‡ç¨‹ä¸­æ‹†ç®±è£…ç®±ï¼Œæé«˜æ€§èƒ½ã€‚Stream APIæä¾›äº†mapToIntã€mapToDoubleã€mapToLongä¸‰ç§æ–¹å¼å°†å¯¹è±¡æµã€å³Stream ã€‘è½¬æ¢æˆå¯¹åº”çš„æ•°å€¼æµï¼ŒåŒæ—¶æä¾›äº†boxedæ–¹æ³•å°†æ•°å€¼æµè½¬æ¢ä¸ºå¯¹è±¡æµ é€šè¿‡å€¼ç”Ÿæˆ // é€šè¿‡Streamçš„ofæ–¹æ³•ç”Ÿæˆæµï¼Œé€šè¿‡Streamçš„emptyæ–¹æ³•å¯ä»¥ç”Ÿæˆä¸€ä¸ªç©ºæµ Stream\u003cInteger\u003e stream = Stream.of(1, 2, 3, 4, 5, 6); é€šè¿‡æ–‡ä»¶ç”Ÿæˆ // é€šè¿‡Files.lineæ–¹æ³•å¾—åˆ°ä¸€ä¸ªæµï¼Œå¹¶ä¸”å¾—åˆ°çš„æ¯ä¸ªæµæ˜¯ç»™å®šæ–‡ä»¶ä¸­çš„ä¸€è¡Œ Stream\u003cString\u003e lines = Files.lines(Paths.get(\"data.txt\"), Charset.defaultCharset()); é€šè¿‡å‡½æ•°ç”Ÿæˆ // 1.iterator // terateæ–¹æ³•æ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªä¸ºåˆå§‹åŒ–å€¼ï¼Œç¬¬äºŒä¸ªä¸ºè¿›è¡Œçš„å‡½æ•°æ“ä½œï¼Œå› ä¸ºiteratorç”Ÿæˆçš„æµä¸ºæ— é™æµï¼Œé€šè¿‡limitæ–¹æ³•å¯¹æµè¿›è¡Œäº†æˆªæ–­ï¼Œåªç”Ÿæˆ5ä¸ªå¶æ•° Stream\u003cInteger\u003e stream = Stream.iterate(0, n -\u003e n + 2).limit(5); // 2.generator // generateæ–¹æ³•æ¥å—ä¸€ä¸ªå‚æ•°ï¼Œæ–¹æ³•å‚æ•°ç±»å‹ä¸ºSupplier ï¼Œç”±å®ƒä¸ºæµæä¾›å€¼ã€‚generateç”Ÿæˆçš„æµä¹Ÿæ˜¯æ— é™æµï¼Œå› æ­¤é€šè¿‡limitå¯¹æµè¿›è¡Œäº†æˆªæ–­ Stream\u003cDouble\u003e stream = Stream.generate(Math::random).limit(5); ","date":"2022-04-17","objectID":"/java%E5%AD%A6%E4%B9%A0stream%E6%B5%81%E4%BD%BF%E7%94%A8/:2:0","tags":["Java"],"title":"Java Streamæµå­¦ä¹ ç¬”è®°","uri":"/java%E5%AD%A6%E4%B9%A0stream%E6%B5%81%E4%BD%BF%E7%94%A8/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"streamçš„æ“ä½œç±»å‹ ä¸­é—´æ“ä½œ ä¸€ä¸ªæµå¯ä»¥åé¢è·Ÿéšé›¶ä¸ªæˆ–å¤šä¸ªä¸­é—´æ“ä½œã€‚å…¶ç›®çš„ä¸»è¦æ˜¯æ‰“å¼€æµï¼Œåšå‡ºæŸç§ç¨‹åº¦çš„æ•°æ®æ˜ å°„/è¿‡æ»¤ï¼Œç„¶åè¿”å›ä¸€ä¸ªæ–°çš„æµï¼Œäº¤ç»™ä¸‹ä¸€ä¸ªæ“ä½œä½¿ç”¨ã€‚è¿™ç±»æ“ä½œéƒ½æ˜¯æƒ°æ€§åŒ–çš„ï¼Œä»…ä»…è°ƒç”¨åˆ°è¿™ç±»æ–¹æ³•ï¼Œå¹¶æ²¡æœ‰çœŸæ­£å¼€å§‹æµçš„éå†ï¼ŒçœŸæ­£çš„éå†éœ€ç­‰åˆ°ç»ˆç«¯æ“ä½œæ—¶ï¼Œå¸¸è§çš„ä¸­é—´æ“ä½œæœ‰ä¸‹é¢å³å°†ä»‹ç»çš„ filterã€map ç­‰ã€‚ ç»ˆç«¯æ“ä½œ ä¸€ä¸ªæµæœ‰ä¸”åªèƒ½æœ‰ä¸€ä¸ªç»ˆç«¯æ“ä½œï¼Œå½“è¿™ä¸ªæ“ä½œæ‰§è¡Œåï¼Œæµå°±è¢«å…³é—­äº†ï¼Œæ— æ³•å†è¢«æ“ä½œï¼Œå› æ­¤ä¸€ä¸ªæµåªèƒ½è¢«éå†ä¸€æ¬¡ï¼Œè‹¥æƒ³åœ¨éå†éœ€è¦é€šè¿‡æºæ•°æ®åœ¨ç”Ÿæˆæµã€‚ç»ˆç«¯æ“ä½œçš„æ‰§è¡Œï¼Œæ‰ä¼šçœŸæ­£å¼€å§‹æµçš„éå†ã€‚å¦‚ä¸‹é¢å³å°†ä»‹ç»çš„ countã€collect ç­‰ã€‚ ","date":"2022-04-17","objectID":"/java%E5%AD%A6%E4%B9%A0stream%E6%B5%81%E4%BD%BF%E7%94%A8/:3:0","tags":["Java"],"title":"Java Streamæµå­¦ä¹ ç¬”è®°","uri":"/java%E5%AD%A6%E4%B9%A0stream%E6%B5%81%E4%BD%BF%E7%94%A8/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"streamçš„ä½¿ç”¨ ","date":"2022-04-17","objectID":"/java%E5%AD%A6%E4%B9%A0stream%E6%B5%81%E4%BD%BF%E7%94%A8/:4:0","tags":["Java"],"title":"Java Streamæµå­¦ä¹ ç¬”è®°","uri":"/java%E5%AD%A6%E4%B9%A0stream%E6%B5%81%E4%BD%BF%E7%94%A8/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"ä¸­é—´æ“ä½œ filter ç­›é€‰ // é€šè¿‡ä½¿ç”¨filteræ–¹æ³•è¿›è¡Œæ¡ä»¶ç­›é€‰ï¼Œfilterçš„æ–¹æ³•å‚æ•°ä¸ºä¸€ä¸ªæ¡ä»¶ï¼ˆè¿‡æ»¤ä¿ç•™å‡½æ•°è¿”å›å€¼ä¸º true çš„å…ƒç´ ï¼‰ List\u003cInteger\u003e integerList = Arrays.asList(1, 2, 3, 4, 5, 6); Stream\u003cInteger\u003e stream = integerList.stream().filter(i -\u003e i \u003e 3); // ç»“æœä¸ºï¼š4,5,6 distinct å»é‡ // é€šè¿‡distinctæ–¹æ³•å¿«é€Ÿå»é™¤é‡å¤çš„å…ƒç´  List\u003cInteger\u003e integerList = Arrays.asList(1, 1, 2, 3, 4, 5); Stream\u003cInteger\u003e stream = integerList.stream().distinct(); // ç»“æœä¸ºï¼š1,2,3,4,5 limit è¿”å›æŒ‡å®šæµä¸ªæ•° // é€šè¿‡limitæ–¹æ³•æŒ‡å®šè¿”å›æµçš„ä¸ªæ•°ï¼Œlimitçš„å‚æ•°å€¼å¿…é¡» \u003e=0ï¼Œå¦åˆ™å°†ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚ List\u003cInteger\u003e integerList = Arrays.asList(1, 1, 2, 3, 4, 5); Stream\u003cInteger\u003e stream = integerList.stream().limit(3); ç»“æœä¸ºï¼š 1,1,2 skip è·³è¿‡æµä¸­çš„å…ƒç´  // é€šè¿‡skipæ–¹æ³•è·³è¿‡æµä¸­çš„å…ƒç´ ï¼Œskipçš„å‚æ•°å€¼å¿…é¡»\u003e=0ï¼Œå¦åˆ™å°†ä¼šæŠ›å‡ºå¼‚å¸¸ List\u003cInteger\u003e integerList = Arrays.asList(1, 1, 2, 3, 4, 5); Stream\u003cInteger\u003e stream = integerList.stream().skip(2); // ç»“æœä¸ºï¼š 2,3,4,5 map æµæ˜ å°„ // æ‰€è°“æµæ˜ å°„å°±æ˜¯å°†æ¥å—çš„å…ƒç´ æ˜ å°„æˆå¦å¤–ä¸€ä¸ªå…ƒç´  List\u003cString\u003e stringList = Arrays.asList(\"Java 8\", \"Lambdas\", \"In\", \"Action\"); List\u003cInteger\u003e collect = stringList.stream() .map(String::length) .collect(Collectors.toList()); // é€šè¿‡mapæ–¹æ³•å¯ä»¥å®Œæˆæ˜ å°„ï¼Œè¯¥ä¾‹å­å®Œæˆä¸­ String -\u003e Integer çš„æ˜ å°„ // ç»“æœä¸ºï¼š[6, 7, 2, 6] flatMap æµè½¬æ¢ // å°†ä¸€ä¸ªæµä¸­çš„æ¯ä¸ªå€¼éƒ½è½¬æ¢ä¸ºå¦ä¸€ä¸ªæµ List\u003cString\u003e wordList = Arrays.asList(\"Java 8\", \"Lambdas\", \"In\", \"Action\"); List\u003cString\u003e strList = wordList.stream() .map(w -\u003e w.split(\" \")) .flatMap(Arrays::stream) .distinct() .collect(Collectors.toList()); // map(w -\u003e w.split(\" \")) çš„è¿”å›å€¼ä¸º Stream\u003cString[]\u003eï¼Œæƒ³è·å– Streamï¼Œå¯ä»¥é€šè¿‡flatMapæ–¹æ³•å®Œæˆ Stream -\u003eStream çš„è½¬æ¢ // ç»“æœä¸ºï¼š[Java, 8, Lambdas, In, Action] allMatch åŒ¹é…æ‰€æœ‰å…ƒç´  // åŒ¹é…æµä¸­æ‰€æœ‰å…ƒç´ æ˜¯å¦æ»¡è¶³æ¡ä»¶ List\u003cInteger\u003e integerList = Arrays.asList(1, 2, 3, 4, 5); if (integerList.stream().allMatch(i -\u003e i \u003e 3)) { System.out.println(\"æ‰€æœ‰å…ƒç´ å€¼éƒ½å¤§äº3\"); } else { System.out.println(\"å¹¶éæ‰€æœ‰å…ƒç´ å€¼éƒ½å¤§äº3\"); } // ç»“æœä¸ºï¼šå¹¶éæ‰€æœ‰å…ƒç´ å€¼éƒ½å¤§äº3 anyMatchåŒ¹é…å…¶ä¸­ä¸€ä¸ª // åŒ¹é…æµä¸­æ˜¯å¦å­˜åœ¨ä¸€ä¸ªæ»¡è¶³æ¡ä»¶çš„å…ƒç´  List\u003cInteger\u003e integerList = Arrays.asList(1, 2, 3, 4, 5); if (integerList.stream().anyMatch(i -\u003e i \u003e 3)) { System.out.println(\"å­˜åœ¨å€¼å¤§äº3çš„å…ƒç´ \"); } else { System.out.println(\"ä¸å­˜åœ¨å€¼å¤§äº3çš„å…ƒç´ \"); } // ç»“æœä¸ºï¼šå­˜åœ¨å€¼å¤§äº3çš„å…ƒç´  // ä¸Šè¿°ä»£ç ç­‰åŒäºï¼š for (Integer i : integerList) { if (i \u003e 3) { System.out.println(\"å­˜åœ¨å¤§äº3çš„å€¼\"); break; } } noneMatchå…¨éƒ¨ä¸åŒ¹é… List\u003cInteger\u003e integerList = Arrays.asList(1, 2, 3, 4, 5); if (integerList.stream().noneMatch(i -\u003e i \u003e 3)) { System.out.println(\"å€¼éƒ½å°äº3çš„å…ƒç´ \"); } else { System.out.println(\"å€¼ä¸éƒ½å°äº3çš„å…ƒç´ \"); } ","date":"2022-04-17","objectID":"/java%E5%AD%A6%E4%B9%A0stream%E6%B5%81%E4%BD%BF%E7%94%A8/:4:1","tags":["Java"],"title":"Java Streamæµå­¦ä¹ ç¬”è®°","uri":"/java%E5%AD%A6%E4%B9%A0stream%E6%B5%81%E4%BD%BF%E7%94%A8/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"ç»ˆç«¯æ“ä½œ count ç»Ÿè®¡æµä¸­å…ƒç´ ä¸ªæ•° List\u003cInteger\u003e integerList = Arrays.asList(1, 2, 3, 4, 5); Long result = integerList.stream().count(); // ç»“æœä¸ºï¼š5 findFirst æŸ¥æ‰¾ç¬¬ä¸€ä¸ª List\u003cInteger\u003e integerList = Arrays.asList(1, 2, 3, 4, 5); Optional\u003cInteger\u003e result = integerList.stream().filter(i -\u003e i \u003e 3).findFirst(); System.out.println(result.orElse(-1)); // ç»“æœä¸ºï¼š4 findAny éšæœºæŸ¥æ‰¾ä¸€ä¸ª List\u003cInteger\u003e integerList = Arrays.asList(1, 2, 3, 4, 5); Optional\u003cInteger\u003e result = integerList.stream().filter(i -\u003e i \u003e 3).findAny(); System.out.println(result.orElse(-1)); // ç»“æœä¸ºï¼š4 // é€šè¿‡findAnyæ–¹æ³•æŸ¥æ‰¾åˆ°å…¶ä¸­ä¸€ä¸ªå¤§äºä¸‰çš„å…ƒç´ å¹¶æ‰“å°ï¼Œå› ä¸ºå†…éƒ¨è¿›è¡Œä¼˜åŒ–çš„åŸå› ï¼Œå½“æ‰¾åˆ°ç¬¬ä¸€ä¸ªæ»¡è¶³å¤§äºä¸‰çš„å…ƒç´ æ—¶å°±ç»“æŸï¼Œè¯¥æ–¹æ³•ç»“æœå’ŒfindFirstæ–¹æ³•ç»“æœä¸€æ ·ã€‚æä¾›findAnyæ–¹æ³•æ˜¯ä¸ºäº†æ›´å¥½çš„åˆ©ç”¨å¹¶è¡Œæµï¼ŒfindFirstæ–¹æ³•åœ¨å¹¶è¡Œä¸Šé™åˆ¶æ›´å¤šã€æœ¬ç¯‡æ–‡ç« å°†ä¸ä»‹ç»å¹¶è¡Œæµã€‘ reduce å°†æµä¸­çš„å…ƒç´ ç»„åˆ ç”¨äºæ±‚å’Œ List\u003cInteger\u003e integerList = Arrays.asList(1, 2, 3, 4, 5); int sum = integerList.stream() .reduce(0, Integer::sum); // ç»“æœä¸ºï¼š15 // reduceæ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œä¸€ä¸ªåˆå§‹å€¼è¿™é‡Œæ˜¯0ï¼Œä¸€ä¸ª BinaryOperatoraccumulator æ¥å°†ä¸¤ä¸ªå…ƒç´ ç»“åˆèµ·æ¥äº§ç”Ÿä¸€ä¸ªæ–°å€¼ï¼Œå¦å¤–reduceæ–¹æ³•è¿˜æœ‰ä¸€ä¸ªæ²¡æœ‰åˆå§‹åŒ–å€¼çš„é‡è½½æ–¹æ³• ç”¨äºå–å¾—æœ€å¤§å’Œæœ€å°å€¼ List\u003cString\u003e stringList = Arrays.asList(\"Java 8\", \"Lambdas\", \"In\", \"Action\"); Optional\u003cInteger\u003e min = stringList.stream() .map(String::length) .reduce(Integer::min); Optional\u003cInteger\u003e max = stringList.stream() .map(String::length) .reduce(Integer::max); // ç»“æœä¸ºï¼šOptional[2] å’Œ Optional[7] min/max è·å–æœ€å°æœ€å¤§å€¼ // å†™æ³•1 List\u003cString\u003e stringList = Arrays.asList(\"Java 8\", \"Lambdas\", \"In\", \"Action\"); Optional\u003cInteger\u003e min = stringList.stream() .map(String::length) .min(Integer::compareTo); Optional\u003cInteger\u003e max = stringList.stream() .map(String::length) .max(Integer::compareTo); // å†™æ³•2 List\u003cString\u003e stringList = Arrays.asList(\"Java 8\", \"Lambdas\", \"In\", \"Action\"); OptionalInt min = stringList.stream() .mapToInt(String::length) .min(); OptionalInt max = stringList.stream() .mapToInt(String::length) .max(); // ä½¿ç”¨reduce List\u003cString\u003e stringList = Arrays.asList(\"Java 8\", \"Lambdas\", \"In\", \"Action\"); Optional\u003cInteger\u003e min = stringList.stream() .map(String::length) .reduce(Integer::min); Optional\u003cInteger\u003e max = stringList.stream() .map(String::length) .reduce(Integer::max); sum / summingxxx / reduce æ±‚å’Œ // æ–¹å¼1ï¼šsum List\u003cString\u003e stringList = Arrays.asList(\"Java 8\", \"Lambdas\", \"In\", \"Action\"); int sum = stringList.stream() .mapToInt(String::length) .sum(); // æ–¹å¼2ï¼šsummingInt List\u003cString\u003e stringList = Arrays.asList(\"Java 8\", \"Lambdas\", \"In\", \"Action\"); // å¦‚æœæ•°æ®ç±»å‹ä¸ºdoubleã€longï¼Œåˆ™é€šè¿‡summingDoubleã€summingLongæ–¹æ³•è¿›è¡Œæ±‚å’Œ int sum = stringList.stream() .collect(summingInt(String::length)); // æ–¹å¼3ï¼šreduce List\u003cString\u003e stringList = Arrays.asList(\"Java 8\", \"Lambdas\", \"In\", \"Action\"); int sum = stringList.stream() .map(String::length) .reduce(0, Integer::sum); åœ¨ä¸Šé¢æ±‚å’Œã€æ±‚æœ€å¤§å€¼ã€æœ€å°å€¼çš„æ—¶å€™ï¼Œå¯¹äºç›¸åŒæ“ä½œæœ‰ä¸åŒçš„æ–¹æ³•å¯ä»¥é€‰æ‹©æ‰§è¡Œã€‚å¯ä»¥é€‰æ‹©collectã€reduceã€min/max/sumæ–¹æ³•ï¼Œæ¨èä½¿ç”¨minã€maxã€sumæ–¹æ³•ã€‚å› ä¸ºå®ƒæœ€ç®€æ´æ˜“è¯»ï¼ŒåŒæ—¶é€šè¿‡mapToIntå°†å¯¹è±¡æµè½¬æ¢ä¸ºæ•°å€¼æµï¼Œé¿å…äº†è£…ç®±å’Œæ‹†ç®±æ“ä½œ averagingxxx æ±‚å¹³å‡å€¼ // averagingxxx List\u003cString\u003e stringList = Arrays.asList(\"Java 8\", \"Lambdas\", \"In\", \"Action\"); double average = stringList.stream() .collect(averagingInt(String::length)); summarizingxxx åŒæ—¶æ±‚æ€»å’Œã€å¹³å‡å€¼ã€æœ€å¤§å€¼ã€æœ€å°å€¼ // å¦‚æœæ•°æ®ç±»å‹ä¸ºdoubleã€longï¼Œåˆ™é€šè¿‡summarizingDoubleã€summarizingLongæ–¹æ³• List\u003cString\u003e stringList = Arrays.asList(\"Java 8\", \"Lambdas\", \"In\", \"Action\"); IntSummaryStatistics intSummaryStatistics = stringList.stream() .collect(summarizingInt(String::length)); double average = intSummaryStatistics.getAverage(); // è·å–å¹³å‡å€¼ int min = intSummaryStatistics.getMin(); // è·å–æœ€å°å€¼ int max = intSummaryStatistics.getMax(); // è·å–æœ€å¤§å€¼ long sum = intSummaryStatistics.getSum(); // è·å–æ€»å’Œ foreach éå† List\u003cString\u003e stringList = Arrays.asList(\"Java 8\", \"Lambdas\", \"In\", \"Action\"); stringList.stream().forEach(System.out::println); collect è¿”å›é›†åˆ List\u003cString\u003e stringList = Arrays.asList(\"Java 8\", \"Lambdas\", \"In\", \"Action\"); List\u003cInteger\u003e intList = stringList.stream() .map(String::length) .collect(toList()); Set\u003cInteger\u003e intSet = stringList.stream() .map(String::length) .collect(toSet()); // ç­‰ä»· List\u003cInteger\u003e intList = new ArrayList\u003c\u003e(); Set\u003cInteger\u003e intSet = new HashSet\u003c\u003e(); for (String item : stringList) { intList.add(item.length()); intSet.add(item.length()); } é€šè¿‡éå†å’Œè¿”å›é›†åˆçš„ä½¿ç”¨å‘ç°æµåªæ˜¯æŠŠåŸæ¥çš„å¤–éƒ¨è¿­ä»£æ”¾åˆ°äº†å†…éƒ¨è¿›è¡Œï¼Œè¿™ä¹Ÿæ˜¯æµçš„ä¸»è¦ç‰¹ç‚¹ä¹‹ä¸€ã€‚å†…éƒ¨è¿­ä»£å¯ä»¥å‡","date":"2022-04-17","objectID":"/java%E5%AD%A6%E4%B9%A0stream%E6%B5%81%E4%BD%BF%E7%94%A8/:4:2","tags":["Java"],"title":"Java Streamæµå­¦ä¹ ç¬”è®°","uri":"/java%E5%AD%A6%E4%B9%A0stream%E6%B5%81%E4%BD%BF%E7%94%A8/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"SQL è¡Œè½¬åˆ—ï¼Œåˆ—è½¬è¡Œ è¡Œåˆ—è½¬æ¢åœ¨åšæŠ¥è¡¨åˆ†ææ—¶è¿˜æ˜¯ç»å¸¸ä¼šé‡åˆ°çš„ï¼Œä»Šå¤©å°±è¯´ä¸€ä¸‹å¦‚ä½•å®ç°è¡Œåˆ—è½¬æ¢å§ã€‚ è¡Œåˆ—è½¬æ¢å°±æ˜¯å¦‚ä¸‹å›¾æ‰€ç¤ºä¸¤ç§å±•ç¤ºå½¢å¼çš„äº’ç›¸è½¬æ¢ ","date":"2022-04-03","objectID":"/%E8%A1%8C%E8%BD%AC%E5%88%97%E5%88%97%E8%BD%AC%E8%A1%8C/:0:0","tags":["SQL"],"title":"æ•°æ®åº“Tip:è¡Œè½¬åˆ—ã€åˆ—è½¬è¡Œ","uri":"/%E8%A1%8C%E8%BD%AC%E5%88%97%E5%88%97%E8%BD%AC%E8%A1%8C/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"è¡Œè½¬åˆ— å‡å¦‚æˆ‘ä»¬æœ‰ä¸‹è¡¨ï¼š ä½¿ç”¨PIVOTå®ç° SELECT * FROM student PIVOT ( SUM(score) FOR subject IN (è¯­æ–‡, æ•°å­¦, è‹±è¯­) ) é€šè¿‡ä¸Šé¢ SQL è¯­å¥å³å¯å¾—åˆ°ä¸‹é¢çš„ç»“æœ PIVOT åè·Ÿä¸€ä¸ªèšåˆå‡½æ•°æ¥æ‹¿åˆ°ç»“æœï¼ŒFOR åé¢è·Ÿçš„ç§‘ç›®æ˜¯æˆ‘ä»¬è¦è½¬æ¢çš„åˆ—ï¼Œè¿™æ ·çš„è¯ç§‘ç›®ä¸­çš„è¯­æ–‡ã€æ•°å­¦ã€è‹±è¯­å°±å°±è¢«è½¬æ¢ä¸ºåˆ—ã€‚IN åé¢è·Ÿçš„å°±æ˜¯å…·ä½“çš„ç§‘ç›®å€¼ã€‚ åˆ†ç»„åä½¿ç”¨caseè¿›è¡Œæ¡ä»¶åˆ¤æ–­å¤„ç† å½“ç„¶æˆ‘ä»¬ä¹Ÿå¯ä»¥ç”¨ CASE WHEN å¾—åˆ°åŒæ ·çš„ç»“æœï¼Œå°±æ˜¯å†™èµ·æ¥éº»çƒ¦ä¸€ç‚¹ã€‚ SELECT name, MAX( CASE WHEN subject='è¯­æ–‡' THEN score ELSE 0 END) AS \"è¯­æ–‡\", MAX( CASE WHEN subject='æ•°å­¦' THEN score ELSE 0 END) AS \"æ•°å­¦\", MAX( CASE WHEN subject='è‹±è¯­' THEN score ELSE 0 END) AS \"è‹±è¯­\" FROM student GROUP BY name ä½¿ç”¨ CASE WHEN å¯ä»¥å¾—åˆ°å’Œ PIVOT åŒæ ·çš„ç»“æœï¼Œæ²¡æœ‰ PIVOT ç®€å•ç›´è§‚ã€‚ ","date":"2022-04-03","objectID":"/%E8%A1%8C%E8%BD%AC%E5%88%97%E5%88%97%E8%BD%AC%E8%A1%8C/:1:0","tags":["SQL"],"title":"æ•°æ®åº“Tip:è¡Œè½¬åˆ—ã€åˆ—è½¬è¡Œ","uri":"/%E8%A1%8C%E8%BD%AC%E5%88%97%E5%88%97%E8%BD%AC%E8%A1%8C/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"åˆ—è½¬è¡Œ å‡è®¾æˆ‘ä»¬æœ‰ä¸‹è¡¨ student1 ä½¿ç”¨UNPIVOTå®ç° SELECT * FROM student1 UNPIVOT ( score FOR subject IN (\"è¯­æ–‡\",\"æ•°å­¦\",\"è‹±è¯­\") ) é€šè¿‡ UNPIVOT å³å¯å¾—åˆ°å¦‚ä¸‹ç»“æœï¼š åˆ†ç»„åä½¿ç”¨caseè¿›è¡Œæ¡ä»¶åˆ¤æ–­å¤„ç† æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨ä¸‹é¢æ–¹æ³•å¾—åˆ°åŒæ ·ç»“æœ SELECT NAME, 'è¯­æ–‡' AS subject , MAX(\"è¯­æ–‡\") AS score FROM student1 GROUP BY NAME UNION SELECT NAME, 'æ•°å­¦' AS subject , MAX(\"æ•°å­¦\") AS score FROM student1 GROUP BY NAME UNION SELECT NAME, 'è‹±è¯­' AS subject , MAX(\"è‹±è¯­\") AS score FROM student1 GROUP BY NAME UNION \u0026 UNION ALL UNION æ“ä½œç¬¦ç”¨äºåˆå¹¶ä¸¤ä¸ªæˆ–å¤šä¸ª SELECT è¯­å¥çš„ç»“æœé›†ã€‚ è¯·æ³¨æ„ï¼ŒUNION å†…éƒ¨çš„ SELECT è¯­å¥å¿…é¡»æ‹¥æœ‰ç›¸åŒæ•°é‡çš„åˆ—ã€‚åˆ—ä¹Ÿå¿…é¡»æ‹¥æœ‰ç›¸ä¼¼çš„æ•°æ®ç±»å‹ã€‚åŒæ—¶ï¼Œæ¯æ¡ SELECT è¯­å¥ä¸­çš„åˆ—çš„é¡ºåºå¿…é¡»ç›¸åŒã€‚ SQL UNION è¯­æ³• SELECT column_name(s) FROM table_name1 UNION SELECT column_name(s) FROM table_name2 **æ³¨é‡Šï¼š**é»˜è®¤åœ°ï¼ŒUNION æ“ä½œç¬¦é€‰å–ä¸åŒçš„å€¼ã€‚å¦‚æœå…è®¸é‡å¤çš„å€¼ï¼Œè¯·ä½¿ç”¨ UNION ALLã€‚ SQL UNION ALL è¯­æ³• SELECT column_name(s) FROM table_name1 UNION ALL SELECT column_name(s) FROM table_name2 å¦å¤–ï¼ŒUNION ç»“æœé›†ä¸­çš„åˆ—åæ€»æ˜¯ç­‰äº UNION ä¸­ç¬¬ä¸€ä¸ª SELECT è¯­å¥ä¸­çš„åˆ—åã€‚ ","date":"2022-04-03","objectID":"/%E8%A1%8C%E8%BD%AC%E5%88%97%E5%88%97%E8%BD%AC%E8%A1%8C/:2:0","tags":["SQL"],"title":"æ•°æ®åº“Tip:è¡Œè½¬åˆ—ã€åˆ—è½¬è¡Œ","uri":"/%E8%A1%8C%E8%BD%AC%E5%88%97%E5%88%97%E8%BD%AC%E8%A1%8C/"},{"categories":["æ”¶è—åˆ†äº«"],"content":"Yapiç®€ä»‹ Yapi ç”± YMFE å¼€æºï¼Œæ—¨åœ¨ä¸ºå¼€å‘ã€äº§å“ã€æµ‹è¯•äººå‘˜æä¾›æ›´ä¼˜é›…çš„æ¥å£ç®¡ç†æœåŠ¡ï¼Œå¯ä»¥å¸®åŠ©å¼€å‘è€…è½»æ¾åˆ›å»ºã€å‘å¸ƒã€ç»´æŠ¤ API æƒé™ç®¡ç† YApi æˆç†Ÿçš„å›¢é˜Ÿç®¡ç†æ‰å¹³åŒ–é¡¹ç›®æƒé™é…ç½®æ»¡è¶³å„ç±»ä¼ä¸šçš„éœ€æ±‚ å¯è§†åŒ–æ¥å£ç®¡ç† åŸºäº websocket çš„å¤šäººåä½œæ¥å£ç¼–è¾‘åŠŸèƒ½å’Œç±» postman æµ‹è¯•å·¥å…·ï¼Œè®©å¤šäººåä½œæˆå€æå‡å¼€å‘æ•ˆç‡ Mock Server æ˜“ç”¨çš„ Mock Serverï¼Œå†ä¹Ÿä¸ç”¨æ‹…å¿ƒ mock æ•°æ®çš„ç”Ÿæˆäº† è‡ªåŠ¨åŒ–æµ‹è¯• å®Œå–„çš„æ¥å£è‡ªåŠ¨åŒ–æµ‹è¯•,ä¿è¯æ•°æ®çš„æ­£ç¡®æ€§ æ•°æ®å¯¼å…¥ æ”¯æŒå¯¼å…¥ swagger, postman, har æ•°æ®æ ¼å¼ï¼Œæ–¹ä¾¿è¿ç§»æ—§é¡¹ç›® æ’ä»¶æœºåˆ¶ å¼ºå¤§çš„æ’ä»¶æœºåˆ¶ï¼Œæ»¡è¶³å„ç±»ä¸šåŠ¡éœ€æ±‚ ","date":"2022-04-03","objectID":"/%E5%88%86%E4%BA%AB%E4%B8%80%E4%B8%AA%E5%8F%AF%E4%BB%A5%E7%A7%81%E6%9C%89%E9%83%A8%E7%BD%B2%E7%9A%84%E6%8E%A5%E5%8F%A3%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9Fyapi/:1:0","tags":["æ”¶è—åˆ†äº«"],"title":"åˆ†äº«ä¸€ä¸ªå¯ä»¥ç§æœ‰éƒ¨ç½²çš„æ¥å£ç®¡ç†ç³»ç»ŸYapi","uri":"/%E5%88%86%E4%BA%AB%E4%B8%80%E4%B8%AA%E5%8F%AF%E4%BB%A5%E7%A7%81%E6%9C%89%E9%83%A8%E7%BD%B2%E7%9A%84%E6%8E%A5%E5%8F%A3%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9Fyapi/"},{"categories":["æ”¶è—åˆ†äº«"],"content":"Yapiä½¿ç”¨Dockerå®‰è£… ç”±äºå†…ç½‘å¼€å‘ç¯å¢ƒï¼Œå¯¼è‡´å®‰è£…å„ç§ç¯å¢ƒæˆ–è€…ç³»ç»Ÿéå¸¸ä¸æ–¹ä¾¿ï¼Œæ‰€ä»¥ä¸ªäººæ¯”è¾ƒæ¨èé€šè¿‡dockeræ¥å®‰è£… æ‹‰å–é•œåƒ docker pull registry.cn-hangzhou.aliyuncs.com/anoy/yapi åˆ›å»ºæŒ‚è½½ç›®å½• mkdir -p /data/yapi/mongodata è¿è¡Œä¸“ç”¨mongoï¼ˆä¹Ÿå¯ä»¥æ”¾åœ¨å·²æœ‰çš„mongoï¼‰ docker run -d --name yapimongo --restart always -v /data/yapi/mongodata:/data/db mongo åˆå§‹åŒ– Yapi æ•°æ®åº“ç´¢å¼•åŠç®¡ç†å‘˜è´¦å· docker run -it --rm --link yapimongo:mongo --entrypoint npm --workdir /api/vendors registry.cn-hangzhou.aliyuncs.com/anoy/yapi run install-server --rmï¼šåœ¨ Docker å®¹å™¨é€€å‡ºæ—¶ï¼Œé»˜è®¤å®¹å™¨å†…éƒ¨çš„æ–‡ä»¶ç³»ç»Ÿä»ç„¶è¢«ä¿ç•™ï¼Œä»¥æ–¹ä¾¿è°ƒè¯•å¹¶ä¿ç•™ç”¨æˆ·æ•°æ®ã€‚ä½†æ˜¯ï¼Œå¯¹äº foreground å®¹å™¨ï¼Œç”±äºå…¶åªæ˜¯åœ¨å¼€å‘è°ƒè¯•è¿‡ç¨‹ä¸­çŸ­æœŸè¿è¡Œï¼Œå…¶ç”¨æˆ·æ•°æ®å¹¶æ— ä¿ç•™çš„å¿…è¦ï¼Œå› è€Œå¯ä»¥åœ¨å®¹å™¨å¯åŠ¨æ—¶è®¾ç½® â€“rm é€‰é¡¹ï¼Œè¿™æ ·åœ¨å®¹å™¨é€€å‡ºæ—¶å°±èƒ½å¤Ÿè‡ªåŠ¨æ¸…ç†å®¹å™¨å†…éƒ¨çš„æ–‡ä»¶ç³»ç»Ÿ --entrypointï¼šç±»ä¼¼äº CMD æŒ‡ä»¤ï¼Œä½†å…¶ä¸ä¼šè¢« docker run çš„å‘½ä»¤è¡Œå‚æ•°æŒ‡å®šçš„æŒ‡ä»¤æ‰€è¦†ç›–ï¼Œè€Œä¸”è¿™äº›å‘½ä»¤è¡Œå‚æ•°ä¼šè¢«å½“ä½œå‚æ•°é€ç»™ ENTRYPOINT æŒ‡ä»¤æŒ‡å®šçš„ç¨‹åºã€‚ä½†æ˜¯, å¦‚æœè¿è¡Œ docker run æ—¶ä½¿ç”¨äº† â€“entrypoint é€‰é¡¹ï¼Œå°†è¦†ç›– ENTRYPOINT æŒ‡ä»¤æŒ‡å®šçš„ç¨‹åº --workdirï¼šæŒ‡å®šå·¥ä½œç›®å½•ã€‚ç”¨ WORKDIR æŒ‡å®šçš„å·¥ä½œç›®å½•ï¼Œä¼šåœ¨æ„å»ºé•œåƒçš„æ¯ä¸€å±‚ä¸­éƒ½å­˜åœ¨ runï¼šç”¨äºæ‰§è¡Œåé¢è·Ÿç€çš„å‘½ä»¤è¡Œå‘½ä»¤ åˆ›å»ºYapiå®¹å™¨å¹¶å¯åŠ¨ docker run -d --name yapi --restart=always --link yapimongo:mongo --workdir /api/vendors -p 3001:3000 registry.cn-hangzhou.aliyuncs.com/anoy/yapi server/app.js --linkï¼šç”¨äºå®¹å™¨ç›´æ¥çš„äº’é€š ä½¿ç”¨Yapi è®¿é—® http://localhost:3000 ç™»å½•è´¦å·admin@admin.comï¼Œå¯†ç ymfe.org Yapié…ç½® # è¿›å…¥Yapiå®¹å™¨ä¸­ docker exec -it yapi /bin/bash # ä¿®æ”¹é…ç½®æ–‡ä»¶ vi ../config.json # ä¿®æ”¹å†…å®¹å¦‚ä¸‹ { \"port\": \"3000\", \"adminAccount\": \"admin@admin.com\", \"closeRegister\":true, # é…ç½®ç¦ç”¨æ³¨å†Œï¼Œä¸»è¦æ˜¯æ·»åŠ è¿™å¥é…ç½® \"db\": { # é…ç½®MongoDB \"servername\": \"mongo\", \"DATABASE\": \"yapi\", \"port\": 27017 } } # é€€å‡º exit # é‡å¯å®¹å™¨ docker restart yapi æœ¬æ–‡å‚è€ƒè‡³ï¼š dockerå®‰è£…yapi å…·ä½“ä½¿ç”¨å¯å‚è€ƒå®˜æ–¹æ•™ç¨‹ ","date":"2022-04-03","objectID":"/%E5%88%86%E4%BA%AB%E4%B8%80%E4%B8%AA%E5%8F%AF%E4%BB%A5%E7%A7%81%E6%9C%89%E9%83%A8%E7%BD%B2%E7%9A%84%E6%8E%A5%E5%8F%A3%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9Fyapi/:2:0","tags":["æ”¶è—åˆ†äº«"],"title":"åˆ†äº«ä¸€ä¸ªå¯ä»¥ç§æœ‰éƒ¨ç½²çš„æ¥å£ç®¡ç†ç³»ç»ŸYapi","uri":"/%E5%88%86%E4%BA%AB%E4%B8%80%E4%B8%AA%E5%8F%AF%E4%BB%A5%E7%A7%81%E6%9C%89%E9%83%A8%E7%BD%B2%E7%9A%84%E6%8E%A5%E5%8F%A3%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9Fyapi/"},{"categories":["å®è·µç¬”è®°"],"content":"æœ¬ç¯‡æ–‡ç« è®°å½•æœ¬äººæ­å»ºCI\u0026CDå®ç°æŒç»­é›†æˆå’ŒæŒç»­éƒ¨ç½² ","date":"2022-04-01","objectID":"/%E8%AE%B0%E4%B8%80%E6%AC%A1%E6%90%AD%E5%BB%BAgitlab-jenkins%E5%AE%9E%E7%8E%B0cicd/:0:0","tags":["Docker","gitlab","jenkins"],"title":"è®°ä¸€æ¬¡æ­å»ºgitlab+jenkinså®ç°CI\u0026CD","uri":"/%E8%AE%B0%E4%B8%80%E6%AC%A1%E6%90%AD%E5%BB%BAgitlab-jenkins%E5%AE%9E%E7%8E%B0cicd/"},{"categories":["å®è·µç¬”è®°"],"content":"1.ä½¿ç”¨dockerå®‰è£…gitlab ","date":"2022-04-01","objectID":"/%E8%AE%B0%E4%B8%80%E6%AC%A1%E6%90%AD%E5%BB%BAgitlab-jenkins%E5%AE%9E%E7%8E%B0cicd/:1:0","tags":["Docker","gitlab","jenkins"],"title":"è®°ä¸€æ¬¡æ­å»ºgitlab+jenkinså®ç°CI\u0026CD","uri":"/%E8%AE%B0%E4%B8%80%E6%AC%A1%E6%90%AD%E5%BB%BAgitlab-jenkins%E5%AE%9E%E7%8E%B0cicd/"},{"categories":["å®è·µç¬”è®°"],"content":"ä¸‹è½½é•œåƒ ï¼ˆä½¿ç”¨ä¸­æ–‡ç¤¾åŒºç‰ˆï¼‰ docker pull twang2218/gitlab-ce-zh ","date":"2022-04-01","objectID":"/%E8%AE%B0%E4%B8%80%E6%AC%A1%E6%90%AD%E5%BB%BAgitlab-jenkins%E5%AE%9E%E7%8E%B0cicd/:1:1","tags":["Docker","gitlab","jenkins"],"title":"è®°ä¸€æ¬¡æ­å»ºgitlab+jenkinså®ç°CI\u0026CD","uri":"/%E8%AE%B0%E4%B8%80%E6%AC%A1%E6%90%AD%E5%BB%BAgitlab-jenkins%E5%AE%9E%E7%8E%B0cicd/"},{"categories":["å®è·µç¬”è®°"],"content":"åˆ›å»ºæ‰€éœ€ç›®å½•ä¸ºåç»­æŒ‚è½½æ–‡ä»¶ è¿›å…¥æ‰€éœ€ç›®å½•åï¼Œæ‰“å¼€PowerShellï¼Œé€šè¿‡ä»¥ä¸‹å‘½ä»¤è¿›è¡Œç›®å½•åˆ›å»º mkdir -p gitlab/etc ã€ mkdir -p gitlab/etc ã€ mkdir -p gitlab/etc ç›®å½•ç»“æ„å¦‚ä¸‹å›¾æ‰€ç¤º ","date":"2022-04-01","objectID":"/%E8%AE%B0%E4%B8%80%E6%AC%A1%E6%90%AD%E5%BB%BAgitlab-jenkins%E5%AE%9E%E7%8E%B0cicd/:1:2","tags":["Docker","gitlab","jenkins"],"title":"è®°ä¸€æ¬¡æ­å»ºgitlab+jenkinså®ç°CI\u0026CD","uri":"/%E8%AE%B0%E4%B8%80%E6%AC%A1%E6%90%AD%E5%BB%BAgitlab-jenkins%E5%AE%9E%E7%8E%B0cicd/"},{"categories":["å®è·µç¬”è®°"],"content":"å¯åŠ¨å®¹å™¨ é•œåƒä¸‹è½½å®Œæˆåå¯é€šè¿‡docker imagesæŸ¥çœ‹ä¸‹è½½ç»“æœï¼Œå†é€šè¿‡é•œåƒå¯åŠ¨ä¸ºå®¹å™¨ docker run -d -p 9443:443 -p 9080:80 -p 9022:22 --restart always --name testgitlab -v D:\\testgitlab\\gitlab\\etc:/etc/gitlab -v D:\\testgitlab\\gitlab\\log:/var/log/gitlab -v D:\\testgitlab\\gitlab\\data:/var/opt/gitlab --privileged=true twang2218/gitlab-ce-zh # æ‰§è¡Œå®Œæˆåä¼šè¿”å›ä¸€ä¸²å­—ç¬¦ä¸² å…¶ä¸­ï¼š -dï¼šåå°æ‰§è¡Œ -pï¼šç«¯å£æ˜ å°„ --restartï¼šé‡å¯æœºåˆ¶ --nameï¼šå®¹å™¨åç§° -vï¼šæŒ‚è½½æ–‡ä»¶ï¼Œä½¿å¾—å®¹å™¨å†…æ–‡ä»¶åœ¨å®¿ä¸»æœºå†…æœ‰æ˜ å°„ --privilegedï¼šä½¿å¾—å®¹å™¨è·å–å®¿ä¸»æœºrootæƒé™ ","date":"2022-04-01","objectID":"/%E8%AE%B0%E4%B8%80%E6%AC%A1%E6%90%AD%E5%BB%BAgitlab-jenkins%E5%AE%9E%E7%8E%B0cicd/:1:3","tags":["Docker","gitlab","jenkins"],"title":"è®°ä¸€æ¬¡æ­å»ºgitlab+jenkinså®ç°CI\u0026CD","uri":"/%E8%AE%B0%E4%B8%80%E6%AC%A1%E6%90%AD%E5%BB%BAgitlab-jenkins%E5%AE%9E%E7%8E%B0cicd/"},{"categories":["å®è·µç¬”è®°"],"content":"è¿›å…¥å®¹å™¨ï¼Œä¿®æ”¹é…ç½® è¾“å…¥å‘½ä»¤ docker exec -it testgitlab bash å³å¯è¿›å…¥åˆšåˆšåˆ›å»ºå¥½çš„å®¹å™¨ ä¿®æ”¹gitlab.rbé…ç½®çš„ä¸¤ç§æ–¹å¼ï¼š1. è¿›å…¥æŒ‚è½½å¥½çš„etcç›®å½•ä¸‹æ‰¾åˆ°gitlab.rbæ–‡ä»¶è¿›è¡Œä¿®æ”¹ï¼›2. é€šè¿‡è¿›å…¥å®¹å™¨å†…è¿›è¡Œå‘½ä»¤è¡Œvi /etc/gitlab/gitlab.rb ä¿®æ”¹ # æ•´ä¸ªgitlab.rbéƒ½æ˜¯æ³¨é‡Šäº†çš„ï¼Œæˆ‘ä»¬å¯ä»¥æŒ‰éœ€åŠ å…¥æˆ‘ä»¬çš„é…ç½® # 1. gitlabè®¿é—®åœ°å€ï¼Œå¯ä»¥å†™åŸŸåã€‚å¦‚æœç«¯å£ä¸å†™çš„è¯é»˜è®¤ä¸º80ç«¯å£ eaxternal_url 'http://192.168.3.12:9080' # 2. sshä¸»æœºip gitlab_rails['gitlab_ssh_host'] = '192.168.3.12' # 3. sshè¿æ¥ç«¯å£ gitlab_rails['gitlab_shell_ssh_port'] = 9022 # 4. é˜²æ­¢å†…å­˜å ç”¨è¿‡å¤§ï¼Œé™åˆ¶çº¿ç¨‹æ•° unicorn['worker_processes'] = 2 ä¿®æ”¹gitlab.ymlé…ç½®ï¼ˆè¿™ä¸€æ­¥åŸæœ¬ä¸æ˜¯å¿…é¡»çš„ï¼Œå› ä¸ºgitlab.rbå†…é…ç½®ä¼šè¦†ç›–è¿™ä¸ªï¼Œä¸ºäº†é˜²æ­¢æ²¡æœ‰æˆåŠŸè¦†ç›–æ‰€ä»¥æˆ‘åœ¨è¿™é‡Œè¿›è¡Œé…ç½®ï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥é€‰æ‹©ä¸ä¿®æ”¹gitlab.rbç›´æ¥ä¿®æ”¹è¿™é‡Œï¼‰ é€šè¿‡å‘½ä»¤è¡Œvi /opt/gitlab/embedded/service/gitlab-rails/config/gitlab.ymlä¿®æ”¹ï¼Œæˆ–è€…æ‰¾åˆ°æŒ‚è½½æ–‡ä»¶ä¿®æ”¹ ä¿®æ”¹ä¸Šå›¾çº¢æ¡†é…ç½® è®©ä¿®æ”¹åçš„é…ç½®ç”Ÿæ•ˆï¼Œå¹¶é‡å¯ gitlab-ctl reconfigure ã€ gitlab-ctl restart ã€ exitï¼ˆé€€å‡ºå®¹å™¨å‘½ä»¤è¡Œï¼‰ æˆ–è€…é‡å¯å®¹å™¨docker restart testgitlab ","date":"2022-04-01","objectID":"/%E8%AE%B0%E4%B8%80%E6%AC%A1%E6%90%AD%E5%BB%BAgitlab-jenkins%E5%AE%9E%E7%8E%B0cicd/:1:4","tags":["Docker","gitlab","jenkins"],"title":"è®°ä¸€æ¬¡æ­å»ºgitlab+jenkinså®ç°CI\u0026CD","uri":"/%E8%AE%B0%E4%B8%80%E6%AC%A1%E6%90%AD%E5%BB%BAgitlab-jenkins%E5%AE%9E%E7%8E%B0cicd/"},{"categories":["å®è·µç¬”è®°"],"content":"è®¿é—®gitlab è¾“å…¥http://192.168.3.12:9080æ‰“å¼€é¡µé¢ï¼ˆipè¯·è¾“å…¥å‰é¢è®¾ç½®çš„ï¼‰ï¼Œé»˜è®¤è´¦æˆ·rootï¼Œå¯†ç éœ€è¦é‡æ–°è®¾ç½®è‡³å°‘8ä½ ","date":"2022-04-01","objectID":"/%E8%AE%B0%E4%B8%80%E6%AC%A1%E6%90%AD%E5%BB%BAgitlab-jenkins%E5%AE%9E%E7%8E%B0cicd/:1:5","tags":["Docker","gitlab","jenkins"],"title":"è®°ä¸€æ¬¡æ­å»ºgitlab+jenkinså®ç°CI\u0026CD","uri":"/%E8%AE%B0%E4%B8%80%E6%AC%A1%E6%90%AD%E5%BB%BAgitlab-jenkins%E5%AE%9E%E7%8E%B0cicd/"},{"categories":["å®è·µç¬”è®°"],"content":"2.ä½¿ç”¨dockerå®‰è£…jenkins ","date":"2022-04-01","objectID":"/%E8%AE%B0%E4%B8%80%E6%AC%A1%E6%90%AD%E5%BB%BAgitlab-jenkins%E5%AE%9E%E7%8E%B0cicd/:2:0","tags":["Docker","gitlab","jenkins"],"title":"è®°ä¸€æ¬¡æ­å»ºgitlab+jenkinså®ç°CI\u0026CD","uri":"/%E8%AE%B0%E4%B8%80%E6%AC%A1%E6%90%AD%E5%BB%BAgitlab-jenkins%E5%AE%9E%E7%8E%B0cicd/"},{"categories":["å®è·µç¬”è®°"],"content":"ä¸‹è½½é•œåƒ docker pull jenkins/jenkins ","date":"2022-04-01","objectID":"/%E8%AE%B0%E4%B8%80%E6%AC%A1%E6%90%AD%E5%BB%BAgitlab-jenkins%E5%AE%9E%E7%8E%B0cicd/:2:1","tags":["Docker","gitlab","jenkins"],"title":"è®°ä¸€æ¬¡æ­å»ºgitlab+jenkinså®ç°CI\u0026CD","uri":"/%E8%AE%B0%E4%B8%80%E6%AC%A1%E6%90%AD%E5%BB%BAgitlab-jenkins%E5%AE%9E%E7%8E%B0cicd/"},{"categories":["å®è·µç¬”è®°"],"content":"åˆ›å»ºæ‰€éœ€ç›®å½•ä¸ºåç»­æŒ‚è½½æ–‡ä»¶ åœ¨æœåŠ¡å™¨ä¸Šå…ˆåˆ›å»ºä¸€ä¸ªjenkinså·¥ä½œç›®å½• /var/jenkins_mountï¼Œèµ‹äºˆç›¸åº”æƒé™ï¼Œç¨åæˆ‘ä»¬å°†jenkinså®¹å™¨ç›®å½•æŒ‚è½½åˆ°è¿™ä¸ªç›®å½•ä¸Šï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥å¾ˆæ–¹ä¾¿åœ°å¯¹å®¹å™¨å†…çš„é…ç½®æ–‡ä»¶è¿›è¡Œä¿®æ”¹ã€‚å¦‚ä½•åç»­åœ¨å®¹å™¨å†…ä¿®æ”¹çš„è¯ä¼šéå¸¸éº»çƒ¦ï¼Œç”±äºå®¹å™¨ä¸­æ— viå‘½ä»¤ã€‚ mkdir -p /var/jenkins_mount ã€ chmod 777 /var/jenkins_mount ","date":"2022-04-01","objectID":"/%E8%AE%B0%E4%B8%80%E6%AC%A1%E6%90%AD%E5%BB%BAgitlab-jenkins%E5%AE%9E%E7%8E%B0cicd/:2:2","tags":["Docker","gitlab","jenkins"],"title":"è®°ä¸€æ¬¡æ­å»ºgitlab+jenkinså®ç°CI\u0026CD","uri":"/%E8%AE%B0%E4%B8%80%E6%AC%A1%E6%90%AD%E5%BB%BAgitlab-jenkins%E5%AE%9E%E7%8E%B0cicd/"},{"categories":["å®è·µç¬”è®°"],"content":"å¯åŠ¨å®¹å™¨ docker run -d -p 10240:8080 -p 10241:50000 -v D:\\testjenkins\\jenkins_mount:/var/jenkins_home -v /etc/localtime:/etc/localtime --name testjenkins jenkins/jenkins # å…¶ä¸­-v /etc/localtime:/etc/localtimeè®©å®¹å™¨ä½¿ç”¨å’ŒæœåŠ¡å™¨åŒæ ·çš„æ—¶é—´è®¾ç½® å¯ä»¥é€šè¿‡docker psæ¥æŸ¥çœ‹å¯åŠ¨æƒ…å†µ å¯ä»¥é€šè¿‡docker logs testjenkinsæ¥æŸ¥çœ‹å®¹å™¨æ—¥å¿— ","date":"2022-04-01","objectID":"/%E8%AE%B0%E4%B8%80%E6%AC%A1%E6%90%AD%E5%BB%BAgitlab-jenkins%E5%AE%9E%E7%8E%B0cicd/:2:3","tags":["Docker","gitlab","jenkins"],"title":"è®°ä¸€æ¬¡æ­å»ºgitlab+jenkinså®ç°CI\u0026CD","uri":"/%E8%AE%B0%E4%B8%80%E6%AC%A1%E6%90%AD%E5%BB%BAgitlab-jenkins%E5%AE%9E%E7%8E%B0cicd/"},{"categories":["å®è·µç¬”è®°"],"content":"ä¿®æ”¹é…ç½® è¿›å…¥åˆšåˆšæŒ‚è½½çš„æ–‡ä»¶ï¼Œä¿®æ”¹hudson.model.UpdateCenter.xmlæ–‡ä»¶ å°† url ä¿®æ”¹ä¸º æ¸…åå¤§å­¦å®˜æ–¹é•œåƒï¼šhttps://mirrors.tuna.tsinghua.edu.cn/jenkins/updates/update-center.json ï¼Œé…ç½®é•œåƒåŠ é€Ÿ è¿˜éœ€è¦ä¿®æ”¹default.jsonæ–‡ä»¶ï¼Œä½ç½®ä¸ºcd /var/jenkins_home/updates ä½¿ç”¨sedå‘½ä»¤ä¿®æ”¹default.json linuxä¸‹ï¼š sed -i 's/http:\\/\\/updates.jenkins-ci.org\\/download/https:\\/\\/mirrors.tuna.tsinghua.edu.cn\\/jenkins/g' default.json \u0026\u0026 sed -i 's/http:\\/\\/www.google.com/https:\\/\\/www.baidu.com/g' default.json macä¸‹ï¼š sed -i \"\" 's/http:\\/\\/updates.jenkins-ci.org\\/download/https:\\/\\/mirrors.tuna.tsinghua.edu.cn\\/jenkins/g' default.json \u0026\u0026 sed -i \"\" 's/http:\\/\\/www.google.com/https:\\/\\/www.baidu.com/g' default.json é‡å¯å®¹å™¨ docker restart testjenkins ","date":"2022-04-01","objectID":"/%E8%AE%B0%E4%B8%80%E6%AC%A1%E6%90%AD%E5%BB%BAgitlab-jenkins%E5%AE%9E%E7%8E%B0cicd/:2:4","tags":["Docker","gitlab","jenkins"],"title":"è®°ä¸€æ¬¡æ­å»ºgitlab+jenkinså®ç°CI\u0026CD","uri":"/%E8%AE%B0%E4%B8%80%E6%AC%A1%E6%90%AD%E5%BB%BAgitlab-jenkins%E5%AE%9E%E7%8E%B0cicd/"},{"categories":["å®è·µç¬”è®°"],"content":"è®¿é—®jenkins è¾“å…¥http://localhost:10240æ‰“å¼€é¡µé¢ é€‰æ‹©é»˜è®¤æ’ä»¶å®‰è£…å³å¯ ","date":"2022-04-01","objectID":"/%E8%AE%B0%E4%B8%80%E6%AC%A1%E6%90%AD%E5%BB%BAgitlab-jenkins%E5%AE%9E%E7%8E%B0cicd/:2:5","tags":["Docker","gitlab","jenkins"],"title":"è®°ä¸€æ¬¡æ­å»ºgitlab+jenkinså®ç°CI\u0026CD","uri":"/%E8%AE%B0%E4%B8%80%E6%AC%A1%E6%90%AD%E5%BB%BAgitlab-jenkins%E5%AE%9E%E7%8E%B0cicd/"},{"categories":["å®è·µç¬”è®°"],"content":"3.gitlab + jenkins ä¸ºäº†å®ç°è‡ªåŠ¨æŒç»­æ„å»º, ä¸éœ€è¦äººå·¥æ“ä½œ ( ç•™äººå·¥æ“ä½œç”¨äºå¤„ç†ç‰¹æ®Šæƒ…å†µ )ï¼Œé€šè¿‡gitlab+jenkinså®ç°CI\u0026CDï¼Œå…·ä½“æµç¨‹å¦‚ä¸‹ å¼€å‘æäº¤ä»£ç  å¼€å‘å¯¹éœ€è¦å‘å¸ƒçš„ç‰ˆæœ¬æ‰“ä¸Š Tag è§¦å‘ GitLab çš„ tag push äº‹ä»¶, è°ƒç”¨ Webhook Webhook è§¦å‘ Jenkins çš„æ„å»ºä»»åŠ¡ Jenkins æ„å»ºå®Œé¡¹ç›®å¯ä»¥æŒ‰ç‰ˆæœ¬å·ä¸Šä¼ åˆ°ä»“åº“ã€éƒ¨ç½²ã€é€šçŸ¥ç›¸å…³äººå‘˜ç­‰ç­‰ ","date":"2022-04-01","objectID":"/%E8%AE%B0%E4%B8%80%E6%AC%A1%E6%90%AD%E5%BB%BAgitlab-jenkins%E5%AE%9E%E7%8E%B0cicd/:3:0","tags":["Docker","gitlab","jenkins"],"title":"è®°ä¸€æ¬¡æ­å»ºgitlab+jenkinså®ç°CI\u0026CD","uri":"/%E8%AE%B0%E4%B8%80%E6%AC%A1%E6%90%AD%E5%BB%BAgitlab-jenkins%E5%AE%9E%E7%8E%B0cicd/"},{"categories":["å®è·µç¬”è®°"],"content":"é…ç½®gitlab å»ºä¸€ä¸ªæµ‹è¯•é¡¹ç›® test ï¼Œéšä¾¿ commit ä¸€äº›å†…å®¹ï¼Œæ¯”å¦‚é€šè¿‡ç½‘é¡µæ·»åŠ README.md åˆ›å»ºè´¦å·çš„ access token ï¼Œç”¨äº Jenkins è°ƒç”¨ GitLab çš„ API è®°ä¸‹ç”Ÿæˆçš„ access token , åé¢éœ€è¦ç”¨åˆ°ï¼ï¼ï¼ä¸”å®ƒåªä¼šå±•ç¤ºä¸€æ¬¡ï¼Œè¯·è®°å½•å¥½ï¼ï¼ï¼ ","date":"2022-04-01","objectID":"/%E8%AE%B0%E4%B8%80%E6%AC%A1%E6%90%AD%E5%BB%BAgitlab-jenkins%E5%AE%9E%E7%8E%B0cicd/:3:1","tags":["Docker","gitlab","jenkins"],"title":"è®°ä¸€æ¬¡æ­å»ºgitlab+jenkinså®ç°CI\u0026CD","uri":"/%E8%AE%B0%E4%B8%80%E6%AC%A1%E6%90%AD%E5%BB%BAgitlab-jenkins%E5%AE%9E%E7%8E%B0cicd/"},{"categories":["å®è·µç¬”è®°"],"content":"é…ç½®jenkins å®‰è£…ç¯å¢ƒæ‰€éœ€æ’ä»¶ Git Parameter ( ç”¨äºå‚æ•°åŒ–æ„å»ºä¸­åŠ¨æ€è·å–é¡¹ç›®åˆ†æ”¯ ) Generic Webhook Trigger ( ç”¨äºè§£æ Webhook ä¼ è¿‡æ¥çš„å‚æ•° ) GitLab ( ç”¨äºæ¨é€æ„å»ºç»“æœç»™ GitLab ) æ·»åŠ  GitLab å‡­æ® åœ¨ç³»ç»Ÿé…ç½®ä¸­é…ç½®gitlab åˆ›å»ºæ–°çš„FreeStyleä»»åŠ¡ General å‹¾é€‰ å‚æ•°åŒ–æ„å»ºè¿‡ç¨‹, æ·»åŠ  Git Parameter ç±»å‹çš„å‚æ•° ref , è¿™æ ·æ„å»ºçš„æ—¶å€™å°±å¯ä»¥æŒ‡å®šåˆ†æ”¯è¿›è¡Œæ„å»º æºç ç®¡ç† é€‰æ‹© Git , æ·»åŠ é¡¹ç›®åœ°å€å’Œæˆæƒæ–¹å¼ ( å¸å·å¯†ç  æˆ–è€… ssh key ) , åˆ†æ”¯å¡«å†™æ„å»ºå‚æ•° $ref æ„å»ºè§¦å‘å™¨ é€‰æ‹© Generic Webhook Trigger æ–¹å¼ç”¨äºè§£æ GitLab æ¨è¿‡æ¥çš„è¯¦ç»†å‚æ•° ( jsonpath åœ¨çº¿æµ‹è¯• ) ã€‚å…¶ä»–è§¦å‘æ–¹å¼ä¸­: Trigger builds remotely æ˜¯ Jenkins è‡ªå¸¦çš„, Build when a change is pushed to GitLab æ˜¯ GitLab æ’ä»¶ æä¾›çš„, éƒ½å±äºç®€å•çš„è§¦å‘æ„å»º, æ— æ³•åšå¤æ‚çš„å¤„ç† Optional filter è™½ç„¶ Generic Webhook Trigger æä¾›äº† Token å‚æ•°è¿›è¡Œé‰´æƒ, ä½†ä¸ºäº†é¿å…ä¸åŒé¡¹ç›®è¿›è¡Œæ··è°ƒ ( æ¯”å¦‚ A é¡¹ç›®æäº¤ä»£ç å´è§¦å‘äº† B é¡¹ç›®çš„æ„å»º) , è¿˜è¦å¯¹è¯·æ±‚åšä¸‹è¿‡æ»¤ã€‚Optional filter ä¸­ Text å¡«å†™éœ€è¦æ ¡éªŒçš„å†…å®¹ ( å¯ä½¿ç”¨å˜é‡ ) , Expression ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼å¯¹ Text è¿›è¡ŒåŒ¹é…, åŒ¹é…æˆåŠŸæ‰å…è®¸è§¦å‘æ„å»º æ„å»º æ„å»ºå†…å®¹æŒ‰è‡ªå·±å®é™…çš„é¡¹ç›®ç±»å‹è¿›è¡Œè°ƒæ•´, ä½¿ç”¨ Maven æ’ä»¶ æˆ– è„šæœ¬ ç­‰ç­‰ æ„å»ºåæ“ä½œ æ„å»ºåæ“ä½œæ·»åŠ  Publish build status to GitLab åŠ¨ä½œ, å®ç°æ„å»ºç»“æŸåé€šçŸ¥æ„å»ºç»“æœç»™ GitLab åœ¨GitLabçš„é¡¹ç›®é¡µé¢ä¸­, æ·»åŠ ä¸€ä¸ªWebhook æ·»åŠ ä¸€ä¸ª Webhook ( http://JENKINS_URL/generic-webhook-trigger/invoke?token=\u003cä¸Šé¢ Jenkins é¡¹ç›®é…ç½®ä¸­çš„ token\u003e ) , è§¦å‘å™¨é€‰æ‹© æ ‡ç­¾æ¨é€äº‹ä»¶ã€‚å› ä¸ºæ—¥å¸¸å¼€å‘ä¸­ push æ“ä½œæ¯”è¾ƒé¢‘ç¹è€Œä¸”ä¸æ˜¯æ¯ä¸ªç‰ˆæœ¬éƒ½éœ€è¦æ„å»º, æ‰€ä»¥åªé’ˆå¯¹éœ€è¦æ„å»ºçš„ç‰ˆæœ¬æ‰“ä¸Š Tag å°±å¥½äº† http://172.20.10.7:10240//generic-webhook-trigger/invoke?token=d63ad84eb18cb04d4459ec347a196dce åˆ›å»ºå®Œä½¿ç”¨ test æŒ‰é’® å…ˆæµ‹è¯•ä¸‹, å¯èƒ½ä¼šå‡ºç°ä¸‹é¢çš„é”™è¯¯ Requests to the local network are not allowed é€šè¿‡ä¸‹é¢æ–¹æ³•è§£å†³ ","date":"2022-04-01","objectID":"/%E8%AE%B0%E4%B8%80%E6%AC%A1%E6%90%AD%E5%BB%BAgitlab-jenkins%E5%AE%9E%E7%8E%B0cicd/:3:2","tags":["Docker","gitlab","jenkins"],"title":"è®°ä¸€æ¬¡æ­å»ºgitlab+jenkinså®ç°CI\u0026CD","uri":"/%E8%AE%B0%E4%B8%80%E6%AC%A1%E6%90%AD%E5%BB%BAgitlab-jenkins%E5%AE%9E%E7%8E%B0cicd/"},{"categories":["å®è·µç¬”è®°"],"content":"æµ‹è¯•æ•ˆæœ å°†ä»£ç æ‹‰ä¸‹æ¥åœ¨æœ¬åœ°æ“ä½œé€šè¿‡IDEAè¿›è¡Œæ“ä½œ ç„¶åä½¿ç”¨å¿«æ·é”® Cmd + Shift + K è°ƒå‡º Push çª—å£ , æŠŠ Tag æ¨é€åˆ° GitLab ä¸­ å›åˆ° GitLab é¡µé¢å¯ä»¥çœ‹åˆ°è§¦å‘äº† Webhook , View details æŸ¥çœ‹è¯·æ±‚è¯¦æƒ…, Response body ä¸­ triggered å­—æ®µå€¼ä¸º true åˆ™è¡¨ç¤ºæˆåŠŸè§¦å‘äº† Jenkins è¿›è¡Œæ„å»º æ³¨æ„: æ¯æ·»åŠ ä¸€ä¸ª Tag å°±ä¼šè§¦å‘ä¸€æ¬¡äº‹ä»¶, ä¸ç®¡æ˜¯ä¸æ˜¯ä¸€èµ· push çš„ã€‚æ‰€ä»¥ä¸€æ¬¡ push å¤šä¸ª Tag ä¼šè§¦å‘ Jenkins è¿›è¡Œå¤šæ¬¡æ„å»ºã€‚ä¸è¿‡ Jenkins å·²ç»åšäº†å¤„ç†, é»˜è®¤ä¸²è¡Œæ‰§è¡Œä»»åŠ¡ ( ä¸€ä¸ªä»»åŠ¡ç»“æŸå†æ‰§è¡Œä¸‹ä¸€ä¸ª ) , è€Œä¸”åœ¨æ„å»ºå‰æœ‰ä¸€ä¸ª pending çŠ¶æ€, æ­¤æ—¶è¢«å¤šæ¬¡è§¦å‘ä¼šè¿›è¡Œåˆå¹¶, å¹¶å–é¦–æ¬¡è§¦å‘çš„å‚æ•°, å¦‚ä¸‹å›¾æ‰€ç¤º: ","date":"2022-04-01","objectID":"/%E8%AE%B0%E4%B8%80%E6%AC%A1%E6%90%AD%E5%BB%BAgitlab-jenkins%E5%AE%9E%E7%8E%B0cicd/:3:3","tags":["Docker","gitlab","jenkins"],"title":"è®°ä¸€æ¬¡æ­å»ºgitlab+jenkinså®ç°CI\u0026CD","uri":"/%E8%AE%B0%E4%B8%80%E6%AC%A1%E6%90%AD%E5%BB%BAgitlab-jenkins%E5%AE%9E%E7%8E%B0cicd/"},{"categories":["å®è·µç¬”è®°"],"content":"å…³äº Tag çš„å‡ ç‚¹è¯´æ˜ æ¨é€ Tag åˆ°è¿œç«¯çš„æ—¶å€™, è¿œç«¯å·²å­˜åœ¨ ( åŒå ) çš„ Tag ä¸ä¼šè¢«æ·»åŠ åˆ°è¿œç«¯ æ‹‰å–è¿œç«¯çš„ Tag æ—¶, æœ¬åœ°å·²å­˜åœ¨ ( åŒå ) çš„ Tag ä¸ä¼šæ·»åŠ åˆ°æœ¬åœ° æ‹‰å–è¿œç«¯çš„ Tag æ—¶, æœ¬åœ°ä¸ä¼šåˆ é™¤è¿œç«¯å·²åˆ é™¤çš„ Tag , éœ€è¦åŒæ­¥è¿œç«¯çš„ Tag å¯ä»¥å…ˆåˆ é™¤æœ¬åœ°æ‰€æœ‰ Tag å† pull åˆ é™¤ Tag ä¹Ÿä¼šæ¨é€äº‹ä»¶, è¦åšå¥½è¿‡æ»¤ ( ä¸Šé¢é…ç½®ä¸­å·²ä½¿ç”¨ commitsId å­—æ®µè¿›è¡Œè¿‡æ»¤ ) æœ¬ç¯‡æ–‡ç« äº§è€ƒä¸‹åˆ—æ–‡ç« ï¼š dockerå®‰è£…gitlab dockerå®‰è£…jenkins dockerä¸­jenkinsæ’ä»¶åŠ é€Ÿ æ•´åˆgitlab+jenkins ","date":"2022-04-01","objectID":"/%E8%AE%B0%E4%B8%80%E6%AC%A1%E6%90%AD%E5%BB%BAgitlab-jenkins%E5%AE%9E%E7%8E%B0cicd/:3:4","tags":["Docker","gitlab","jenkins"],"title":"è®°ä¸€æ¬¡æ­å»ºgitlab+jenkinså®ç°CI\u0026CD","uri":"/%E8%AE%B0%E4%B8%80%E6%AC%A1%E6%90%AD%E5%BB%BAgitlab-jenkins%E5%AE%9E%E7%8E%B0cicd/"},{"categories":["å®è·µç¬”è®°"],"content":"Docker ç®€ä»‹ Docker æ˜¯ä¸€ä¸ªå¼€æºçš„åº”ç”¨å®¹å™¨å¼•æ“ï¼ŒåŸºäº Go è¯­è¨€ å¹¶éµä» Apache2.0 åè®®å¼€æºã€‚Docker å¯ä»¥è®©å¼€å‘è€…æ‰“åŒ…ä»–ä»¬çš„åº”ç”¨ä»¥åŠä¾èµ–åŒ…åˆ°ä¸€ä¸ªè½»é‡çº§ã€å¯ç§»æ¤çš„å®¹å™¨ä¸­ï¼Œç„¶åå‘å¸ƒåˆ°ä»»ä½•æµè¡Œçš„ Linux æœºå™¨ä¸Šï¼Œä¹Ÿå¯ä»¥å®ç°è™šæ‹ŸåŒ–ã€‚å®¹å™¨æ˜¯å®Œå…¨ä½¿ç”¨æ²™ç®±æœºåˆ¶ï¼Œç›¸äº’ä¹‹é—´ä¸ä¼šæœ‰ä»»ä½•æ¥å£ï¼ˆç±»ä¼¼ iPhone çš„ appï¼‰,æ›´é‡è¦çš„æ˜¯å®¹å™¨æ€§èƒ½å¼€é”€æä½ã€‚ Docker çš„åº”ç”¨åœºæ™¯ï¼š Web åº”ç”¨çš„è‡ªåŠ¨åŒ–æ‰“åŒ…å’Œå‘å¸ƒã€‚ è‡ªåŠ¨åŒ–æµ‹è¯•å’ŒæŒç»­é›†æˆã€å‘å¸ƒã€‚ åœ¨æœåŠ¡å‹ç¯å¢ƒä¸­éƒ¨ç½²å’Œè°ƒæ•´æ•°æ®åº“æˆ–å…¶ä»–çš„åå°åº”ç”¨ã€‚ ä»å¤´ç¼–è¯‘æˆ–è€…æ‰©å±•ç°æœ‰çš„ OpenShift æˆ– Cloud Foundry å¹³å°æ¥æ­å»ºè‡ªå·±çš„ PaaS ç¯å¢ƒã€‚ Docker çš„ä¼˜ç‚¹ï¼š Docker æ˜¯ä¸€ä¸ªç”¨äºå¼€å‘ï¼Œäº¤ä»˜å’Œè¿è¡Œåº”ç”¨ç¨‹åºçš„å¼€æ”¾å¹³å°ã€‚Docker ä½¿æ‚¨èƒ½å¤Ÿå°†åº”ç”¨ç¨‹åºä¸åŸºç¡€æ¶æ„åˆ†å¼€ï¼Œä»è€Œå¯ä»¥å¿«é€Ÿäº¤ä»˜è½¯ä»¶ã€‚å€ŸåŠ© Dockerï¼Œæ‚¨å¯ä»¥ä¸ç®¡ç†åº”ç”¨ç¨‹åºç›¸åŒçš„æ–¹å¼æ¥ç®¡ç†åŸºç¡€æ¶æ„ã€‚é€šè¿‡åˆ©ç”¨ Docker çš„æ–¹æ³•æ¥å¿«é€Ÿäº¤ä»˜ï¼Œæµ‹è¯•å’Œéƒ¨ç½²ä»£ç ï¼Œæ‚¨å¯ä»¥å¤§å¤§å‡å°‘ç¼–å†™ä»£ç å’Œåœ¨ç”Ÿäº§ç¯å¢ƒä¸­è¿è¡Œä»£ç ä¹‹é—´çš„å»¶è¿Ÿã€‚ å¿«é€Ÿï¼Œä¸€è‡´åœ°äº¤ä»˜æ‚¨çš„åº”ç”¨ç¨‹åº å“åº”å¼éƒ¨ç½²å’Œæ‰©å±• åœ¨åŒä¸€ç¡¬ä»¶ä¸Šè¿è¡Œæ›´å¤šå·¥ä½œè´Ÿè½½ ","date":"2022-03-27","objectID":"/%E6%9E%84%E5%BB%BA%E4%B8%80%E4%B8%AA%E5%B8%A6libgdiplus%E7%9A%84dotnetcore%E5%9F%BA%E7%A1%80%E9%95%9C%E5%83%8F/:1:0","tags":["Docker",".NET","Linux"],"title":"æ„å»ºä¸€ä¸ªå¸¦libgdiplusçš„DotNetCoreåŸºç¡€Dockeré•œåƒ","uri":"/%E6%9E%84%E5%BB%BA%E4%B8%80%E4%B8%AA%E5%B8%A6libgdiplus%E7%9A%84dotnetcore%E5%9F%BA%E7%A1%80%E9%95%9C%E5%83%8F/"},{"categories":["å®è·µç¬”è®°"],"content":"Docker å‘½ä»¤ è¯¦ç»†å‘½ä»¤å¯ä»¥æŸ¥çœ‹Docker å‘½ä»¤å¤§å…¨ ","date":"2022-03-27","objectID":"/%E6%9E%84%E5%BB%BA%E4%B8%80%E4%B8%AA%E5%B8%A6libgdiplus%E7%9A%84dotnetcore%E5%9F%BA%E7%A1%80%E9%95%9C%E5%83%8F/:2:0","tags":["Docker",".NET","Linux"],"title":"æ„å»ºä¸€ä¸ªå¸¦libgdiplusçš„DotNetCoreåŸºç¡€Dockeré•œåƒ","uri":"/%E6%9E%84%E5%BB%BA%E4%B8%80%E4%B8%AA%E5%B8%A6libgdiplus%E7%9A%84dotnetcore%E5%9F%BA%E7%A1%80%E9%95%9C%E5%83%8F/"},{"categories":["å®è·µç¬”è®°"],"content":"å¸¸ç”¨é•œåƒå‘½ä»¤ 1. æŸ¥çœ‹æœåŠ¡å™¨ä¸­ Docker é•œåƒåˆ—è¡¨ docker images 2. æœç´¢é•œåƒ docker search é•œåƒå 3. æ‹‰å–é•œåƒï¼ˆä¸åŠ tag(ç‰ˆæœ¬å·)å°±é»˜è®¤æ‹‰å–Dockerä»“åº“ä¸­è¯¥é•œåƒçš„æœ€æ–°ç‰ˆæœ¬latest; åŠ :tagåˆ™æ˜¯æ‹‰å–æŒ‡å®šç‰ˆæœ¬ï¼‰ docker pull é•œåƒå docker pull é•œåƒå:v1 4. è¿è¡Œé•œåƒ docker run -itd --name=\"nginx\" --restart=always -p 80:80 -v /data:/data nginx:latest 5. åˆ é™¤é•œåƒ docker rmi -f é•œåƒå/é•œåƒID 6. ä¿å­˜é•œåƒ docker save nginx -o /nginx.tar 7. åŠ è½½é•œåƒ docker load -i é•œåƒæ–‡ä»¶ä½ç½® ","date":"2022-03-27","objectID":"/%E6%9E%84%E5%BB%BA%E4%B8%80%E4%B8%AA%E5%B8%A6libgdiplus%E7%9A%84dotnetcore%E5%9F%BA%E7%A1%80%E9%95%9C%E5%83%8F/:2:1","tags":["Docker",".NET","Linux"],"title":"æ„å»ºä¸€ä¸ªå¸¦libgdiplusçš„DotNetCoreåŸºç¡€Dockeré•œåƒ","uri":"/%E6%9E%84%E5%BB%BA%E4%B8%80%E4%B8%AA%E5%B8%A6libgdiplus%E7%9A%84dotnetcore%E5%9F%BA%E7%A1%80%E9%95%9C%E5%83%8F/"},{"categories":["å®è·µç¬”è®°"],"content":"å¸¸ç”¨å®¹å™¨å‘½ä»¤ 1. æŸ¥çœ‹æ­£åœ¨è¿è¡Œå®¹å™¨åˆ—è¡¨ docker ps 2. æŸ¥çœ‹æ‰€æœ‰å®¹å™¨ docker ps -a 3. åœæ­¢å®¹å™¨ docker stop å®¹å™¨å/å®¹å™¨ID 4. åˆ é™¤å®¹å™¨ docker rm -f å®¹å™¨å/å®¹å™¨ID 5. è¿›å…¥å®¹å™¨æ–¹å¼ docker exec -it å®¹å™¨å/å®¹å™¨ID /bin/bash exit/ctl+p+q #é€€å‡º 6. é‡å¯å®¹å™¨ docker restart å®¹å™¨å/å®¹å™¨ID 7. å¯åŠ¨å®¹å™¨ docker start å®¹å™¨å/å®¹å™¨ID 8. kill å®¹å™¨ docker kill å®¹å™¨å/å®¹å™¨ID 9. å®¹å™¨æ–‡ä»¶æ‹·è´ docker cp å®¹å™¨å/ID:å®¹å™¨å†…è·¯å¾„ å®¹å™¨å¤–è·¯å¾„ #å®¹å™¨å†…æ‹·å‡º docker cp å®¹å™¨å¤–è·¯å¾„ å®¹å™¨å/ID:å®¹å™¨å†…è·¯å¾„ #å®¹å™¨å¤–æ‹·å…¥ 10. æŸ¥çœ‹å®¹å™¨æ—¥å¿— docker logs -f --tail=100 å®¹å™¨ #tailæŸ¥çœ‹æœ«å°¾å¤šå°‘è¡Œ é»˜è®¤all 11. ä¿®æ”¹å­˜åœ¨å®¹å™¨çš„å¯åŠ¨é…ç½® docker update --restart=always å®¹å™¨ 12. æ›´æ¢å®¹å™¨å docker rename å®¹å™¨ å®¹å™¨æ–°åå­— 13. é€šè¿‡å®¹å™¨æäº¤é•œåƒï¼ï¼ï¼### docker commit -a=\"æäº¤ä½œè€…\" -m=\"æäº¤ä¿¡æ¯\" å®¹å™¨ æäº¤é•œåƒ:tag ","date":"2022-03-27","objectID":"/%E6%9E%84%E5%BB%BA%E4%B8%80%E4%B8%AA%E5%B8%A6libgdiplus%E7%9A%84dotnetcore%E5%9F%BA%E7%A1%80%E9%95%9C%E5%83%8F/:2:2","tags":["Docker",".NET","Linux"],"title":"æ„å»ºä¸€ä¸ªå¸¦libgdiplusçš„DotNetCoreåŸºç¡€Dockeré•œåƒ","uri":"/%E6%9E%84%E5%BB%BA%E4%B8%80%E4%B8%AA%E5%B8%A6libgdiplus%E7%9A%84dotnetcore%E5%9F%BA%E7%A1%80%E9%95%9C%E5%83%8F/"},{"categories":["å®è·µç¬”è®°"],"content":"Docker è¿ç»´å‘½ä»¤ 1. æŸ¥çœ‹Dockerå·¥ä½œç›®å½• sudo docker info | grep \"Docker Root Dir\" 2. æŸ¥çœ‹Dockerç£ç›˜å ç”¨æ€»ä½“æƒ…å†µ du -hs /var/lib/docker/ 3. æŸ¥çœ‹Dockerçš„ç£ç›˜ä½¿ç”¨å…·ä½“æƒ…å†µ docker system df 4. åˆ é™¤æ— ç”¨çš„å®¹å™¨å’Œé•œåƒ docker rm `docker ps -a | grep Exited | awk '{print $1}'` docker rmi -f `docker images | grep '\u003cnone\u003e' | awk '{print $3}'` 5. æ¸…é™¤æ‰€æœ‰æ— å®¹å™¨ä½¿ç”¨çš„é•œåƒ docker system prune -a 6. æŸ¥æ‰¾å¤§æ–‡ä»¶ find / -type f -size +100M -print0 | xargs -0 du -h | sort -nr 7. æŸ¥æ‰¾æŒ‡å®šDockerä½¿ç”¨ç›®å½•ä¸‹å¤§äºæŒ‡å®šå¤§å°æ–‡ä»¶ find / -type f -size +100M -print0 | xargs -0 du -h | sort -nr | grep '/var/lib/docker/overlap2/*' ","date":"2022-03-27","objectID":"/%E6%9E%84%E5%BB%BA%E4%B8%80%E4%B8%AA%E5%B8%A6libgdiplus%E7%9A%84dotnetcore%E5%9F%BA%E7%A1%80%E9%95%9C%E5%83%8F/:2:3","tags":["Docker",".NET","Linux"],"title":"æ„å»ºä¸€ä¸ªå¸¦libgdiplusçš„DotNetCoreåŸºç¡€Dockeré•œåƒ","uri":"/%E6%9E%84%E5%BB%BA%E4%B8%80%E4%B8%AA%E5%B8%A6libgdiplus%E7%9A%84dotnetcore%E5%9F%BA%E7%A1%80%E9%95%9C%E5%83%8F/"},{"categories":["å®è·µç¬”è®°"],"content":"æ„å»ºä¸€ä¸ªå¸¦libgdiplusçš„DotNetCoreåŸºç¡€é•œåƒ é€šè¿‡Dockeræ‹‰å–ä¸€ä¸ª.netcore3.1åŸºç¡€é•œåƒï¼šdocker pull mcr.microsoft.com/dotnet/aspnet:3.1 è¿›å…¥å®¹å™¨ï¼šdocker run -it mcr.microsoft.com/dotnet/aspnet:3.1 /bin/bash å®‰è£…libgdiplusï¼š apt-get update -y apt-get install -y libgdiplus apt-get clean ln -s /usr/lib/libgdiplus.so /usr/lib/gdiplus.dll æäº¤ä¸ºæ–°é•œåƒï¼šdocker commit -a=\"Lesan\" -m=\"added libgdiplus based on .netcore3.1\" 28a66ebccd55 dotnetcore-with-libgdiplus:v3.1 ä¿®æ”¹é¡¹ç›®DockerfileåŸºç¡€é•œåƒä¸ºåˆšåˆšæ„å»ºçš„è‡ªå®šä¹‰é•œåƒdotnetcore-with-libgdiplus:v3.1 å€Ÿé‰´å‚è€ƒä»¥ä¸‹æ–‡ç« ï¼š https://blog.csdn.net/leilei1366615/article/details/106267225 https://www.runoob.com/docker/docker-command-manual.html https://blog.csdn.net/u014374975/article/details/115436174 ","date":"2022-03-27","objectID":"/%E6%9E%84%E5%BB%BA%E4%B8%80%E4%B8%AA%E5%B8%A6libgdiplus%E7%9A%84dotnetcore%E5%9F%BA%E7%A1%80%E9%95%9C%E5%83%8F/:3:0","tags":["Docker",".NET","Linux"],"title":"æ„å»ºä¸€ä¸ªå¸¦libgdiplusçš„DotNetCoreåŸºç¡€Dockeré•œåƒ","uri":"/%E6%9E%84%E5%BB%BA%E4%B8%80%E4%B8%AA%E5%B8%A6libgdiplus%E7%9A%84dotnetcore%E5%9F%BA%E7%A1%80%E9%95%9C%E5%83%8F/"},{"categories":["å®è·µç¬”è®°"],"content":"æœ¬ç¬”è®°ä¸ºDockerä¸Kubernetesçš„å®è·µç¬”è®° ","date":"2022-03-27","objectID":"/%E5%AD%A6%E4%B9%A0%E4%BD%BF%E7%94%A8docker%E4%B8%8Ekubernetes/:0:0","tags":["Docker","K8S",".NET"],"title":"å­¦ä¹ ä½¿ç”¨Dockerä¸Kubernetes","uri":"/%E5%AD%A6%E4%B9%A0%E4%BD%BF%E7%94%A8docker%E4%B8%8Ekubernetes/"},{"categories":["å®è·µç¬”è®°"],"content":"å°†.NET Coreçš„é¡¹ç›®å‘å¸ƒä¸ºDockeré•œåƒ ","date":"2022-03-27","objectID":"/%E5%AD%A6%E4%B9%A0%E4%BD%BF%E7%94%A8docker%E4%B8%8Ekubernetes/:1:0","tags":["Docker","K8S",".NET"],"title":"å­¦ä¹ ä½¿ç”¨Dockerä¸Kubernetes","uri":"/%E5%AD%A6%E4%B9%A0%E4%BD%BF%E7%94%A8docker%E4%B8%8Ekubernetes/"},{"categories":["å®è·µç¬”è®°"],"content":"é€šè¿‡VSæ”¯æŒåˆ›å»ºDockeré•œåƒ ç¬¬ä¸€æ­¥ï¼Œåˆ›å»ºä¸€ä¸ªç©ºçš„.NET Coreé¡¹ç›®ï¼Œç”¨æ¥æµ‹è¯• ç¬¬äºŒæ­¥ï¼Œä¸ºé¡¹ç›®æ·»åŠ Dockeræ”¯æŒ æ·»åŠ æˆåŠŸåä¼šåœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»ºDockerfileï¼Œä»¥åŠåœ¨Docker Desktopä¸­åˆ›å»ºå¯¹åº”çš„imageåŠcontainerï¼Œå¦‚ä¸‹å›¾æ‰€ç¤º ","date":"2022-03-27","objectID":"/%E5%AD%A6%E4%B9%A0%E4%BD%BF%E7%94%A8docker%E4%B8%8Ekubernetes/:1:1","tags":["Docker","K8S",".NET"],"title":"å­¦ä¹ ä½¿ç”¨Dockerä¸Kubernetes","uri":"/%E5%AD%A6%E4%B9%A0%E4%BD%BF%E7%94%A8docker%E4%B8%8Ekubernetes/"},{"categories":["å®è·µç¬”è®°"],"content":"é€šè¿‡å·²å‘å¸ƒçš„æ–‡ä»¶åŒ…åˆ›å»ºDockeré•œåƒ ç¬¬ä¸€æ­¥ï¼Œå°†é¡¹ç›®å‘å¸ƒåˆ°æ–‡ä»¶å¤¹ ç¬¬äºŒæ­¥ï¼Œå»åˆ°å‘å¸ƒçš„æ–‡ä»¶å¤¹ä¸‹ï¼Œæ·»åŠ Dockerfileæ¥æ„å»ºé•œåƒ FROM mcr.microsoft.com/dotnet/core/aspnet:3.1-buster-slim AS base # é…ç½®å·¥ä½œç›®å½• WORKDIR /app # æš´éœ²å®¹å™¨ç«¯å£ EXPOSE 80 EXPOSE 443 # è®¾ç½®æ—¶åŒº ENV TZ = Asia/shanghai RUN ln -snf /usr/share/zoneinfo/$TZ /etc/localtime \u0026\u0026 $TZ \u003e /etc/timezone #æ‰§è¡Œå‘½ä»¤ # å¤åˆ¶æ–‡ä»¶åˆ°å·¥ä½œç›®å½• COPY . . #æŒ‡å®šæ‰§è¡Œç¨‹åº ENTRYPOINT [\"dotnet\", \"DockerAndK8s.dll\"] ç¬¬ä¸‰æ­¥ï¼Œé€šè¿‡Dockerå‘½ä»¤è¿›è¡Œæ„å»ºé•œåƒ ç¬¬äº”æ­¥ï¼Œå¯åŠ¨é•œåƒ æœ€åï¼Œåœ¨æµè§ˆå™¨ä¸­è®¿é—®å¯ä»¥å‘ç°æˆåŠŸéƒ¨ç½² ","date":"2022-03-27","objectID":"/%E5%AD%A6%E4%B9%A0%E4%BD%BF%E7%94%A8docker%E4%B8%8Ekubernetes/:1:2","tags":["Docker","K8S",".NET"],"title":"å­¦ä¹ ä½¿ç”¨Dockerä¸Kubernetes","uri":"/%E5%AD%A6%E4%B9%A0%E4%BD%BF%E7%94%A8docker%E4%B8%8Ekubernetes/"},{"categories":["å®è·µç¬”è®°"],"content":"å°†é•œåƒå‘å¸ƒåˆ°Docker Hub é€šè¿‡å‘½ä»¤è¡Œè¿›è¡Œ F:\\Visual Studio\\repos\\DockerAndK8s\\output\u003edocker tag dockerandk8s:v1 lesan0u0/dockerandk8s:v1 F:\\Visual Studio\\repos\\DockerAndK8s\\output\u003edocker push lesan0u0/dockerandk8s:v1 ","date":"2022-03-27","objectID":"/%E5%AD%A6%E4%B9%A0%E4%BD%BF%E7%94%A8docker%E4%B8%8Ekubernetes/:1:3","tags":["Docker","K8S",".NET"],"title":"å­¦ä¹ ä½¿ç”¨Dockerä¸Kubernetes","uri":"/%E5%AD%A6%E4%B9%A0%E4%BD%BF%E7%94%A8docker%E4%B8%8Ekubernetes/"},{"categories":["å®è·µç¬”è®°"],"content":"æ·»åŠ Kubernetesæ”¯æŒ Kubernetesçš„å®‰è£…ä¸ä½¿ç”¨é€šè¿‡æœ¬ç¯‡æ–‡ç«  ASP.NET Core on K8Så­¦ä¹ åˆæ¢ï¼ˆ1ï¼‰K8Så•èŠ‚ç‚¹ç¯å¢ƒæ­å»º ç¬¬ä¸€æ­¥ï¼Œæ‰“å¼€æ§åˆ¶é¢æ¿ kubectl create -f kubernetes-dashboard.yaml // éƒ¨ç½²Kubernetes dashboard kubectl get pod -n kubernetes-dashboard // æ£€æŸ¥ kubernetes-dashboard åº”ç”¨çŠ¶æ€ kubectl proxy // å¼€å¯ API Server è®¿é—®ä»£ç† //dashboardåœ°å€ http://localhost:8001/api/v1/namespaces/kubernetes-dashboard/services/https:kubernetes-dashboard:/proxy/ // æ§åˆ¶å°è®¿é—®ä»¤ç‰Œ $TOKEN=((kubectl -n kube-system describe secret default | Select-String \"token:\") -split \" +\")[1] kubectl config set-credentials docker-desktop --token=\"${TOKEN}\" echo $TOKEN ç¬¬äºŒæ­¥ï¼Œå‡†å¤‡Department YAML apiVersion: apps/v1 kind: Deployment metadata: name: dockerandk8s namespace: test labels: name: dockerandk8s spec: replicas: 2 selector: matchLabels: name: dockerandk8s template: metadata: labels: name: dockerandk8s spec: containers: - name: dockerandk8s image: lesan0u0/dockerandk8s:v1 ports: - containerPort: 80 imagePullPolicy: Always --- kind: Service apiVersion: v1 metadata: name: dockerandk8s namespace: test spec: type: NodePort ports: - port: 80 targetPort: 80 selector: name: dockerandk8s ç¬¬ä¸‰æ­¥ï¼Œé€šè¿‡kubectléƒ¨ç½²åˆ°K8S kubectl create -f deploy.yaml //éƒ¨ç½² kubectl get svc -n aspnetcore //éªŒè¯ å¯ä»¥é€šè¿‡Dashboardæ¥æŸ¥çœ‹éƒ¨ç½²æƒ…å†µ æœ€åï¼Œå¤§åŠŸå‘Šæˆ ","date":"2022-03-27","objectID":"/%E5%AD%A6%E4%B9%A0%E4%BD%BF%E7%94%A8docker%E4%B8%8Ekubernetes/:2:0","tags":["Docker","K8S",".NET"],"title":"å­¦ä¹ ä½¿ç”¨Dockerä¸Kubernetes","uri":"/%E5%AD%A6%E4%B9%A0%E4%BD%BF%E7%94%A8docker%E4%B8%8Ekubernetes/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"ç®€ä»‹ Javaé›†åˆæ¡†æ¶ä¸ºç¨‹åºå‘˜æä¾›äº†é¢„å…ˆåŒ…è£…çš„æ•°æ®ç»“æ„å’Œç®—æ³•æ¥æ“çºµä»–ä»¬ã€‚è¿™ä½¿å¾—æˆ‘ä»¬ä½¿ç”¨å¤æ‚çš„æ•°æ®ç»“æ„å˜å¾—éå¸¸çš„æ–¹ä¾¿ï¼Œå¹¶ä¸”è¿™äº›é›†åˆæ¡†æ¶æ˜¯é«˜æ€§èƒ½çš„ï¼ŒåŸºæœ¬é›†åˆï¼ˆåŠ¨æ€æ•°ç»„ï¼Œé“¾è¡¨ï¼Œæ ‘ï¼Œå“ˆå¸Œè¡¨ï¼‰çš„å®ç°ä¹Ÿå¿…é¡»æ˜¯é«˜æ•ˆçš„ï¼›å…è®¸ä¸åŒç±»å‹çš„é›†åˆï¼Œä»¥ç±»ä¼¼çš„æ–¹å¼å·¥ä½œï¼Œå…·æœ‰é«˜åº¦çš„äº’æ“ä½œæ€§ã€‚ ä»ä¸Šé¢çš„é›†åˆæ¡†æ¶å›¾å¯ä»¥çœ‹åˆ°ï¼ŒJava é›†åˆæ¡†æ¶ä¸»è¦åŒ…æ‹¬ä¸¤ç§ç±»å‹çš„å®¹å™¨ï¼Œä¸€ç§æ˜¯é›†åˆï¼ˆCollectionï¼‰ï¼Œå­˜å‚¨ä¸€ä¸ªå…ƒç´ é›†åˆï¼Œå¦ä¸€ç§æ˜¯å›¾ï¼ˆMapï¼‰ï¼Œå­˜å‚¨é”®/å€¼å¯¹æ˜ å°„ã€‚Collection æ¥å£åˆæœ‰ 3 ç§å­ç±»å‹ï¼ŒListã€Set å’Œ Queueï¼Œå†ä¸‹é¢æ˜¯ä¸€äº›æŠ½è±¡ç±»ï¼Œæœ€åæ˜¯å…·ä½“å®ç°ç±»ï¼Œå¸¸ç”¨çš„æœ‰ ArrayListã€LinkedListã€HashSetã€LinkedHashSetã€HashMapã€LinkedHashMap ç­‰ç­‰ã€‚ é›†åˆæ¡†æ¶æ˜¯ä¸€ä¸ªç”¨æ¥ä»£è¡¨å’Œæ“çºµé›†åˆçš„ç»Ÿä¸€æ¶æ„ã€‚æ‰€æœ‰çš„é›†åˆæ¡†æ¶éƒ½åŒ…å«å¦‚ä¸‹å†…å®¹ï¼š æ¥å£ï¼šæ˜¯ä»£è¡¨é›†åˆçš„æŠ½è±¡æ•°æ®ç±»å‹ã€‚ä¾‹å¦‚ Collectionã€Listã€Setã€Map ç­‰ã€‚ä¹‹æ‰€ä»¥å®šä¹‰å¤šä¸ªæ¥å£ï¼Œæ˜¯ä¸ºäº†ä»¥ä¸åŒçš„æ–¹å¼æ“ä½œé›†åˆå¯¹è±¡ å®ç°ï¼ˆç±»ï¼‰ï¼šæ˜¯é›†åˆæ¥å£çš„å…·ä½“å®ç°ã€‚ä»æœ¬è´¨ä¸Šè®²ï¼Œå®ƒä»¬æ˜¯å¯é‡å¤ä½¿ç”¨çš„æ•°æ®ç»“æ„ï¼Œä¾‹å¦‚ï¼šArrayListã€LinkedListã€HashSetã€HashMapã€‚ ç®—æ³•ï¼šæ˜¯å®ç°é›†åˆæ¥å£çš„å¯¹è±¡é‡Œçš„æ–¹æ³•æ‰§è¡Œçš„ä¸€äº›æœ‰ç”¨çš„è®¡ç®—ï¼Œä¾‹å¦‚ï¼šæœç´¢å’Œæ’åºã€‚è¿™äº›ç®—æ³•è¢«ç§°ä¸ºå¤šæ€ï¼Œé‚£æ˜¯å› ä¸ºç›¸åŒçš„æ–¹æ³•å¯ä»¥åœ¨ç›¸ä¼¼çš„æ¥å£ä¸Šæœ‰ç€ä¸åŒçš„å®ç°ã€‚ é™¤äº†é›†åˆï¼Œè¯¥æ¡†æ¶ä¹Ÿå®šä¹‰äº†å‡ ä¸ª Map æ¥å£å’Œç±»ã€‚Map é‡Œå­˜å‚¨çš„æ˜¯é”®/å€¼å¯¹ã€‚å°½ç®¡ Map ä¸æ˜¯é›†åˆï¼Œä½†æ˜¯å®ƒä»¬å®Œå…¨æ•´åˆåœ¨é›†åˆä¸­ã€‚ Java é›†åˆæ¡†æ¶æä¾›äº†ä¸€å¥—æ€§èƒ½ä¼˜è‰¯ï¼Œä½¿ç”¨æ–¹ä¾¿çš„æ¥å£å’Œç±»ï¼Œjavaé›†åˆæ¡†æ¶ä½äºjava.utilåŒ…ä¸­ï¼Œ æ‰€ä»¥å½“ä½¿ç”¨é›†åˆæ¡†æ¶çš„æ—¶å€™éœ€è¦è¿›è¡Œå¯¼åŒ…ã€‚ ä¸‹é¢æˆ‘ä»¬å°±åˆ†åˆ«è¯¦ç»†ä»‹ç»é›†åˆæ¡†æ¶ä¸­çš„æ¯ä¸ªæ•°æ®ç»“æ„ï¼ ","date":"2022-03-20","objectID":"/java%E9%9B%86%E5%90%88%E5%AD%A6%E4%B9%A0/:1:0","tags":["Javaé›†åˆ"],"title":"Javaé›†åˆå­¦ä¹ ","uri":"/java%E9%9B%86%E5%90%88%E5%AD%A6%E4%B9%A0/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"Listæ¥å£ ","date":"2022-03-20","objectID":"/java%E9%9B%86%E5%90%88%E5%AD%A6%E4%B9%A0/:2:0","tags":["Javaé›†åˆ"],"title":"Javaé›†åˆå­¦ä¹ ","uri":"/java%E9%9B%86%E5%90%88%E5%AD%A6%E4%B9%A0/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"ç®€ä»‹ Listé›†åˆä»£è¡¨ä¸€ä¸ªæœ‰åºã€å¯é‡å¤é›†åˆï¼Œé›†åˆä¸­æ¯ä¸ªå…ƒç´ éƒ½æœ‰å…¶å¯¹åº”çš„é¡ºåºç´¢å¼•ã€‚Listé›†åˆé»˜è®¤æŒ‰ç…§å…ƒç´ çš„æ·»åŠ é¡ºåºè®¾ç½®å…ƒç´ çš„ç´¢å¼•ï¼Œå¯ä»¥é€šè¿‡ç´¢å¼•ï¼ˆç±»ä¼¼æ•°ç»„çš„ä¸‹æ ‡ï¼‰æ¥è®¿é—®æŒ‡å®šä½ç½®çš„é›†åˆå…ƒç´ ã€‚ å®ç°Listæ¥å£çš„é›†åˆä¸»è¦æœ‰ï¼šArrayListã€LinkedListã€Vectorã€Stackã€‚ List:å…ƒç´ æ˜¯æœ‰åºçš„(æ€ä¹ˆå­˜çš„å°±æ€ä¹ˆå–å‡ºæ¥ï¼Œé¡ºåºä¸ä¼šä¹±)ï¼Œå…ƒç´ å¯ä»¥é‡å¤ï¼ˆè§’æ ‡1ä¸Šæœ‰ä¸ª3ï¼Œè§’æ ‡2ä¸Šä¹Ÿå¯ä»¥æœ‰ä¸ª3ï¼‰å› ä¸ºè¯¥é›†åˆä½“ç³»æœ‰ç´¢å¼• ArrayListï¼šåº•å±‚çš„æ•°æ®ç»“æ„ä½¿ç”¨çš„æ˜¯æ•°ç»„ç»“æ„ï¼ˆæ•°ç»„é•¿åº¦æ˜¯å¯å˜çš„ç™¾åˆ†ä¹‹äº”åå»¶é•¿ï¼‰ï¼ˆç‰¹ç‚¹æ˜¯æŸ¥è¯¢å¾ˆå¿«ï¼Œä½†å¢åˆ è¾ƒæ…¢ï¼‰çº¿ç¨‹ä¸åŒæ­¥ LinkedListï¼šåº•å±‚çš„æ•°æ®ç»“æ„æ˜¯é“¾è¡¨ç»“æ„ï¼ˆç‰¹ç‚¹æ˜¯æŸ¥è¯¢è¾ƒæ…¢ï¼Œå¢åˆ è¾ƒå¿«ï¼‰ çº¿ç¨‹ä¸åŒæ­¥ Vectorï¼šåº•å±‚æ˜¯æ•°ç»„æ•°æ®ç»“æ„ çº¿ç¨‹åŒæ­¥ï¼ˆæ•°ç»„é•¿åº¦æ˜¯å¯å˜çš„ç™¾åˆ†ä¹‹ç™¾å»¶é•¿ï¼‰ï¼ˆæ— è®ºæŸ¥è¯¢è¿˜æ˜¯å¢åˆ éƒ½å¾ˆæ…¢ï¼Œè¢«ArrayListæ›¿ä»£äº†ï¼‰ Listæ’åºé€šç”¨æ–¹æ³• Collections.sort(list, new Comparator() { public int compare(Student s1, Student s2) { //å…ˆæŒ‰æˆç»© é™åº æ’åºï¼Œå¦‚æœæˆç»©ä¸€æ ·çš„è¯æŒ‰id å‡åº æ’åº if(s1.getScore()\u003es2.getScore()){ //greater return -1; }else if(s1.getScore()==s2.getScore()){ //equals if(s1.getId()\u003es2.getId()){ return 1; }else if(s1.getId()==s2.getId()){ return 0; }else{ return -1; } }else{ //less return 1; }ã€€} }); Listé€šç”¨æ–¹æ³• List list = new ArrayList(); // å‘åˆ—è¡¨çš„å°¾éƒ¨è¿½åŠ æŒ‡å®šçš„å…ƒç´  list.add(\"lwc\"); // åœ¨åˆ—è¡¨çš„æŒ‡å®šä½ç½®æ’å…¥æŒ‡å®šå…ƒç´  list.add(1, \"nxj\"); // è¿½åŠ æŒ‡å®š collection ä¸­çš„æ‰€æœ‰å…ƒç´ åˆ°æ­¤åˆ—è¡¨çš„ç»“å°¾ list.addAll(new ArrayList()); // ä»åˆ—è¡¨ä¸­ç§»é™¤æ‰€æœ‰å…ƒç´  list.clear(); // å¦‚æœåˆ—è¡¨åŒ…å«æŒ‡å®šçš„å…ƒç´ ,åˆ™è¿”å›true list.contains(\"nxj\"); // å¦‚æœåˆ—è¡¨åŒ…å«æŒ‡å®š collection çš„æ‰€æœ‰å…ƒç´ ,åˆ™è¿”å› true list.containsAll(new ArrayList()); // æ¯”è¾ƒæŒ‡å®šçš„å¯¹è±¡ä¸åˆ—è¡¨æ˜¯å¦ç›¸ç­‰ list.equals(new ArrayList()); // è¿”å›åˆ—è¡¨ä¸­æŒ‡å®šä½ç½®çš„å…ƒç´  list.get(0); // è¿”å›åˆ—è¡¨çš„å“ˆå¸Œç å€¼ list.hashCode(); // è¿”å›åˆ—è¡¨ä¸­é¦–æ¬¡å‡ºç°æŒ‡å®šå…ƒç´ çš„ç´¢å¼•,å¦‚æœåˆ—è¡¨ä¸åŒ…å«æ­¤å…ƒç´ ,åˆ™è¿”å› -1 list.indexOf(\"lwc\"); // è¿”å›åˆ—è¡¨ä¸­æœ€åå‡ºç°æŒ‡å®šå…ƒç´ çš„ç´¢å¼•,å¦‚æœåˆ—è¡¨ä¸åŒ…å«æ­¤å…ƒç´ ,åˆ™è¿”å› -1 list.lastIndexOf(\"lwc\"); // å¦‚æœåˆ—è¡¨ä¸åŒ…å«å…ƒç´ ,åˆ™è¿”å› true list.isEmpty(); // ç§»é™¤åˆ—è¡¨ä¸­æŒ‡å®šä½ç½®çš„å…ƒç´  list.remove(0); // ç§»é™¤åˆ—è¡¨ä¸­å‡ºç°çš„é¦–ä¸ªæŒ‡å®šå…ƒç´  list.remove(\"lwc\"); // ä»åˆ—è¡¨ä¸­ç§»é™¤æŒ‡å®š collection ä¸­åŒ…å«çš„æ‰€æœ‰å…ƒç´  list.removeAll(new ArrayList()); // ç”¨æŒ‡å®šå…ƒç´ æ›¿æ¢åˆ—è¡¨ä¸­æŒ‡å®šä½ç½®çš„å…ƒç´  list.set(0, \"lp\"); // è¿”å›åˆ—è¡¨ä¸­çš„å…ƒç´ æ•° list.size(); // è¿”å›åˆ—è¡¨ä¸­æŒ‡å®šçš„fromIndex(åŒ…æ‹¬)å’ŒtoIndex(ä¸åŒ…æ‹¬)ä¹‹é—´çš„éƒ¨åˆ†è§†å›¾ list.subList(1, 2); // è¿”å›ä»¥æ­£ç¡®é¡ºåºåŒ…å«åˆ—è¡¨ä¸­çš„æ‰€æœ‰å…ƒç´ çš„æ•°ç»„ list.toArray(); // è¿”å›ä»¥æ­£ç¡®é¡ºåºåŒ…å«åˆ—è¡¨ä¸­æ‰€æœ‰å…ƒç´ çš„æ•°ç»„ list.toArray(new String[] { \"a\", \"b\" }); Listé€šç”¨éå† // è¿­ä»£æ–¹å¼ // ç¬¬ä¸€ç§for-sizeå¾ªç¯ for (int i = 0; i \u003c sites.size(); i++) { System.out.println(sites.get(i)); } // ç¬¬äºŒç§for-eachå¾ªç¯ for (String i : sites) { System.out.println(i); } // ç¬¬ä¸‰ç§Iteratorå¾ªç¯ for(Iterator\u003cString\u003e it = sites.iterator(); it.hasNext();){ String value=it.next(); } ","date":"2022-03-20","objectID":"/java%E9%9B%86%E5%90%88%E5%AD%A6%E4%B9%A0/:2:1","tags":["Javaé›†åˆ"],"title":"Javaé›†åˆå­¦ä¹ ","uri":"/java%E9%9B%86%E5%90%88%E5%AD%A6%E4%B9%A0/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"ArrayListç±» ArrayListæ˜¯ä¸€ä¸ªåŠ¨æ€æ•°ç»„ï¼Œä¹Ÿæ˜¯æˆ‘ä»¬æœ€å¸¸ç”¨çš„é›†åˆï¼Œæ˜¯Listç±»çš„å…¸å‹å®ç°ã€‚å®ƒå…è®¸ä»»ä½•ç¬¦åˆè§„åˆ™çš„å…ƒç´ æ’å…¥ç”šè‡³åŒ…æ‹¬nullã€‚æ¯ä¸€ä¸ªArrayListéƒ½æœ‰ä¸€ä¸ªåˆå§‹å®¹é‡ï¼ˆ10ï¼‰ï¼Œè¯¥å®¹é‡ä»£è¡¨äº†æ•°ç»„çš„å¤§å°ã€‚éšç€å®¹å™¨ä¸­çš„å…ƒç´ ä¸æ–­å¢åŠ ï¼Œå®¹å™¨çš„å¤§å°ä¹Ÿä¼šéšç€å¢åŠ ã€‚åœ¨æ¯æ¬¡å‘å®¹å™¨ä¸­å¢åŠ å…ƒç´ çš„åŒæ—¶éƒ½ä¼šè¿›è¡Œå®¹é‡æ£€æŸ¥ï¼Œå½“å¿«æº¢å‡ºæ—¶ï¼Œå°±ä¼šè¿›è¡Œæ‰©å®¹æ“ä½œã€‚æ‰€ä»¥å¦‚æœæˆ‘ä»¬æ˜ç¡®æ‰€æ’å…¥å…ƒç´ çš„å¤šå°‘ï¼Œæœ€å¥½æŒ‡å®šä¸€ä¸ªåˆå§‹å®¹é‡å€¼ï¼Œé¿å…è¿‡å¤šçš„è¿›è¡Œæ‰©å®¹æ“ä½œè€Œæµªè´¹æ—¶é—´ã€æ•ˆç‡ã€‚ ç¤ºä¾‹ï¼š import java.util.ArrayList; public class Test { public static void main(String[] args) { ArrayList\u003cString\u003e sites = new ArrayList\u003cString\u003e(); // åˆ›å»ºArrayList sites.add(\"Google\"); // æ·»åŠ å…ƒç´  sites.add(\"Runoob\"); sites.add(\"Taobao\"); sites.add(\"Weibo\"); sites.set(2, \"Wiki\"); // ä¿®æ”¹å…ƒç´  sites.remove(3); // åˆ é™¤å…ƒç´ ï¼Œä¸‹æ ‡ä¸º3çš„å…ƒç´ ï¼Œå°±æ˜¯ç¬¬å››ä¸ªå…ƒç´  System.out.println(sites.get(1)); // è®¿é—®å…ƒç´  System.out.println(sites.size()); // è·å–å¤§å° // å°† lambda è¡¨è¾¾å¼ä¼ é€’ç»™ forEach numbers.forEach((e) -\u003e { e = e * 10; System.out.print(e + \" \"); }); } } ","date":"2022-03-20","objectID":"/java%E9%9B%86%E5%90%88%E5%AD%A6%E4%B9%A0/:2:2","tags":["Javaé›†åˆ"],"title":"Javaé›†åˆå­¦ä¹ ","uri":"/java%E9%9B%86%E5%90%88%E5%AD%A6%E4%B9%A0/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"LinkedListç±» é“¾è¡¨ï¼ˆLinked listï¼‰æ˜¯ä¸€ç§å¸¸è§çš„åŸºç¡€æ•°æ®ç»“æ„ï¼Œæ˜¯ä¸€ç§çº¿æ€§è¡¨ï¼Œä½†æ˜¯å¹¶ä¸ä¼šæŒ‰çº¿æ€§çš„é¡ºåºå­˜å‚¨æ•°æ®ï¼Œè€Œæ˜¯åœ¨æ¯ä¸€ä¸ªèŠ‚ç‚¹é‡Œå­˜åˆ°ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„åœ°å€ã€‚é“¾è¡¨å¯åˆ†ä¸ºå•å‘é“¾è¡¨å’ŒåŒå‘é“¾è¡¨ã€‚Java LinkedListï¼ˆé“¾è¡¨ï¼‰ ç±»ä¼¼äº ArrayListï¼Œæ˜¯ä¸€ç§å¸¸ç”¨çš„æ•°æ®å®¹å™¨ã€‚ä¸ ArrayList ç›¸æ¯”ï¼ŒLinkedList çš„å¢åŠ å’Œåˆ é™¤çš„æ“ä½œæ•ˆç‡æ›´é«˜ï¼Œè€ŒæŸ¥æ‰¾å’Œä¿®æ”¹çš„æ“ä½œæ•ˆç‡è¾ƒä½ã€‚ ä»¥ä¸‹æƒ…å†µä½¿ç”¨ ArrayList : é¢‘ç¹è®¿é—®åˆ—è¡¨ä¸­çš„æŸä¸€ä¸ªå…ƒç´ ã€‚ åªéœ€è¦åœ¨åˆ—è¡¨æœ«å°¾è¿›è¡Œæ·»åŠ å’Œåˆ é™¤å…ƒç´ æ“ä½œã€‚ ä»¥ä¸‹æƒ…å†µä½¿ç”¨ LinkedList : ä½ éœ€è¦é€šè¿‡å¾ªç¯è¿­ä»£æ¥è®¿é—®åˆ—è¡¨ä¸­çš„æŸäº›å…ƒç´ ã€‚ éœ€è¦é¢‘ç¹çš„åœ¨åˆ—è¡¨å¼€å¤´ã€ä¸­é—´ã€æœ«å°¾ç­‰ä½ç½®è¿›è¡Œæ·»åŠ å’Œåˆ é™¤å…ƒç´ æ“ä½œã€‚ LinkedList ç»§æ‰¿äº† AbstractSequentialList ç±»ã€‚ LinkedList å®ç°äº† Queue æ¥å£ï¼Œå¯ä½œä¸ºé˜Ÿåˆ—ä½¿ç”¨ã€‚ LinkedList å®ç°äº† List æ¥å£ï¼Œå¯è¿›è¡Œåˆ—è¡¨çš„ç›¸å…³æ“ä½œã€‚ LinkedList å®ç°äº† Deque æ¥å£ï¼Œå¯ä½œä¸ºé˜Ÿåˆ—ä½¿ç”¨ã€‚ LinkedList å®ç°äº† Cloneable æ¥å£ï¼Œå¯å®ç°å…‹éš†ã€‚ LinkedList å®ç°äº† java.io.Serializable æ¥å£ï¼Œå³å¯æ”¯æŒåºåˆ—åŒ–ï¼Œèƒ½é€šè¿‡åºåˆ—åŒ–å»ä¼ è¾“ã€‚ ç¤ºä¾‹ï¼š import java.util.LinkedList; public class Test { public static void main(String[] args) { LinkedList\u003cString\u003e sites = new LinkedList\u003cString\u003e(); //åˆ›å»ºLinkedList sites.add(\"Google\"); //æ·»åŠ å…ƒç´  sites.add(\"Runoob\"); sites.add(\"Taobao\"); sites.addFirst(\"Wiki\"); //å¤´éƒ¨æ·»åŠ å…ƒç´  sites.addLast(\"Weibo\"); //å°¾éƒ¨æ·»åŠ å…ƒç´  sites.removeFirst(); //ç§»é™¤å¤´éƒ¨å…ƒç´  sites.removeLast(); //ç§»é™¤å°¾éƒ¨å…ƒç´  System.out.println(sites.getFirst()); //è·å–å¤´éƒ¨å…ƒç´  System.out.println(sites.getLast()); //è·å–å°¾éƒ¨å…ƒç´  } } ","date":"2022-03-20","objectID":"/java%E9%9B%86%E5%90%88%E5%AD%A6%E4%B9%A0/:2:3","tags":["Javaé›†åˆ"],"title":"Javaé›†åˆå­¦ä¹ ","uri":"/java%E9%9B%86%E5%90%88%E5%AD%A6%E4%B9%A0/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"Setæ¥å£ ","date":"2022-03-20","objectID":"/java%E9%9B%86%E5%90%88%E5%AD%A6%E4%B9%A0/:3:0","tags":["Javaé›†åˆ"],"title":"Javaé›†åˆå­¦ä¹ ","uri":"/java%E9%9B%86%E5%90%88%E5%AD%A6%E4%B9%A0/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"ç®€ä»‹ Setä½“ç³»é›†åˆå¯ä»¥çŸ¥é“æŸç‰©æ˜¯å¦å·²è¿‘å­˜åœ¨äºé›†åˆä¸­,ä¸ä¼šå­˜å‚¨é‡å¤çš„å…ƒç´ ã€‚åŠ å…¥Setçš„æ¯ä¸ªå…ƒç´ å¿…é¡»æ˜¯å”¯ä¸€çš„ï¼Œå¦åˆ™ï¼ŒSetæ˜¯ä¸ä¼šæŠŠå®ƒåŠ è¿›å»çš„ã€‚è¦æƒ³åŠ è¿›Setï¼ŒObjectå¿…é¡»å®šä¹‰equals()ï¼Œè¿™æ ·æ‰èƒ½æ ‡æ˜å¯¹è±¡çš„å”¯ä¸€æ€§ã€‚Setçš„æ¥å£å’ŒCollectionçš„ä¸€æ‘¸ä¸€æ ·ã€‚Setçš„æ¥å£ä¸ä¿è¯å®ƒä¼šç”¨å“ªç§é¡ºåºæ¥å­˜å‚¨å…ƒç´ ã€‚ Set HashSet : ä¸ºå¿«é€ŸæŸ¥æ‰¾è®¾è®¡çš„Setã€‚å­˜å…¥HashSetçš„å¯¹è±¡å¿…é¡»å®šä¹‰hashCode()ã€‚ TreeSet : ä¿å­˜æ¬¡åºçš„Set, åº•å±‚ä¸ºæ ‘ç»“æ„ã€‚ä½¿ç”¨å®ƒå¯ä»¥ä»Setä¸­æå–æœ‰åºçš„åºåˆ—ã€‚ LinkedHashSet : å…·æœ‰HashSetçš„æŸ¥è¯¢é€Ÿåº¦ï¼Œä¸”å†…éƒ¨ä½¿ç”¨é“¾è¡¨ç»´æŠ¤å…ƒç´ çš„é¡ºåº(æ’å…¥çš„æ¬¡åº)ã€‚äºæ˜¯åœ¨ä½¿ç”¨è¿­ä»£å™¨éå†Setæ—¶ï¼Œç»“æœä¼šæŒ‰å…ƒç´ æ’å…¥çš„æ¬¡åºæ˜¾ç¤ºã€‚ Setæ’åº //æŠŠHashSetä¿å­˜åœ¨ArrayListé‡Œï¼Œå†ç”¨Collections.sort()æ–¹æ³•æ¯”è¾ƒ final HashSet\u003cInteger\u003e va = new HashSet\u003cInteger\u003e(); va.add(2007111315); va.add(2007111314); va.add(2007111318); va.add(2007111313); final List\u003cInteger\u003e list = new ArrayList\u003cInteger\u003e(); for(final Integer value : va){ list.add(value); } Collections.sort(list); System.out.println(list); //æŠŠè¿™ä¸ªHashSetåšä¸ºæ„é€ å‚æ•°æ”¾åˆ°TreeSetä¸­å°±å¯ä»¥æ’åºäº† final TreeSet ts = new TreeSet(va); ts.comparator(); System.out.println(ts); Setéå† //Iteratorè¿­ä»£éå† Set\u003cString\u003e set = new HashSet\u003cString\u003e(); Iterator\u003cString\u003e it = set.iterator(); while (it.hasNext()) { String str = it.next(); System.out.println(str); } //for-eachå¾ªç¯éå† for (String str : set) { System.out.println(str); } Setè½¬List //é€šè¿‡ArrayListè¿›è¡Œè½¬æ¢ List\u003cString\u003e list1 = new ArrayList\u003cString\u003e(set); //Listå®ç°ç±»è¿›è¡Œè½¬æ¢ List\u003cString\u003e list2 = new ArrayList\u003cString\u003e (); list2.addAll(set); ","date":"2022-03-20","objectID":"/java%E9%9B%86%E5%90%88%E5%AD%A6%E4%B9%A0/:3:1","tags":["Javaé›†åˆ"],"title":"Javaé›†åˆå­¦ä¹ ","uri":"/java%E9%9B%86%E5%90%88%E5%AD%A6%E4%B9%A0/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"HashSetç±» HashSetä½¿ç”¨çš„æ˜¯ç›¸å½“å¤æ‚çš„æ–¹å¼æ¥å­˜å‚¨å…ƒç´ çš„ï¼Œä½¿ç”¨HashSetèƒ½å¤Ÿæœ€å¿«çš„è·å–é›†åˆä¸­çš„å…ƒç´ ï¼Œæ•ˆç‡éå¸¸é«˜ï¼ˆä»¥ç©ºé—´æ¢æ—¶é—´ï¼‰ã€‚å®ƒä¼šæ ¹æ®hashcodeå’Œequalsæ¥åˆ¤æ–­æ˜¯å¦æ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼Œå¦‚æœhashcodeä¸€æ ·ï¼Œå¹¶ä¸”equalsè¿”å›trueï¼Œåˆ™æ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼Œä¸èƒ½é‡å¤å­˜æ”¾ã€‚ |â€“HashSet åº•å±‚æ˜¯ç”±HashMapå®ç°çš„ï¼Œé€šè¿‡å¯¹è±¡çš„hashCodeæ–¹æ³•ä¸equalsæ–¹æ³•æ¥ä¿è¯æ’å…¥å…ƒç´ çš„å”¯ä¸€æ€§ï¼Œæ— åº(å­˜å‚¨é¡ºåºå’Œå–å‡ºé¡ºåºä¸ä¸€è‡´)ï¼Œã€‚ â€‹ |â€“LinkedHashSet åº•å±‚æ•°æ®ç»“æ„ç”±å“ˆå¸Œè¡¨å’Œé“¾è¡¨ç»„æˆã€‚å“ˆå¸Œè¡¨ä¿è¯å…ƒç´ çš„å”¯ä¸€æ€§ï¼Œé“¾è¡¨ä¿è¯å…ƒç´ æœ‰åºã€‚(å­˜å‚¨å’Œå–å‡ºæ˜¯ä¸€è‡´) LinkedHashSetç±» LinkedHashSetæ˜¯HashSetçš„ä¸€ä¸ªå­ç±»ï¼Œå…·æœ‰HashSetçš„ç‰¹æ€§ï¼Œä¹Ÿæ˜¯æ ¹æ®å…ƒç´ çš„hashCodeå€¼æ¥å†³å®šå…ƒç´ çš„å­˜å‚¨ä½ç½®ã€‚ä½†å®ƒä½¿ç”¨é“¾è¡¨ç»´æŠ¤å…ƒç´ çš„æ¬¡åºï¼Œå…ƒç´ çš„é¡ºåºä¸æ·»åŠ é¡ºåºä¸€è‡´ã€‚ç”±äºLinkedHashSetéœ€è¦ç»´æŠ¤å…ƒç´ çš„æ’å…¥é¡ºåºï¼Œå› æ­¤æ€§èƒ½ç•¥ä½äºHashSetï¼Œä½†åœ¨è¿­ä»£è®¿é—®Seté‡Œçš„å…¨éƒ¨å…ƒç´ æ—¶ç”±å¾ˆå¥½çš„æ€§èƒ½ã€‚ (1)HashSetæ˜¯Setæ¥å£çš„å®ç°ã€‚HashSetæŒ‰Hashç®—æ³•æ¥å­˜å‚¨é›†åˆä¸­çš„å…ƒç´ ï¼Œå…·æœ‰å¾ˆå¥½çš„å­˜å–å’ŒæŸ¥æ‰¾æ€§èƒ½ã€‚ (2)HashSetä¸æ˜¯åŒæ­¥çš„ï¼Œå¤šä¸ªçº¿ç¨‹è®¿é—®æ˜¯éœ€è¦é€šè¿‡ä»£ç ä¿è¯åŒæ­¥ (3)HashSeté›†åˆå…ƒç´ å€¼å¯ä»¥ä½¿nullã€‚ (4)HashSetä¸èƒ½ä¿è¯å…ƒç´ çš„æ’åˆ—é¡ºåºï¼Œé¡ºåºå¯èƒ½ä¸æ·»åŠ é¡ºåºä¸åŒï¼Œé¡ºåºä¹Ÿæœ‰å¯èƒ½å‘ç”Ÿå˜åŒ–ã€‚ (5)å½“å‘HashSeté›†åˆä¸­å­˜å…¥ä¸€ä¸ªå…ƒç´ æ—¶ï¼ŒHashSetä¼šè°ƒç”¨è¯¥å¯¹è±¡çš„hashCode()æ–¹æ³•æ¥å¾—åˆ°è¯¥å¯¹è±¡çš„hashCodeå€¼ï¼Œç„¶åæ ¹æ®è¯¥HashCodeå€¼å†³å®šè¯¥å¯¹è±¡åœ¨HashSetä¸­çš„å­˜å‚¨ä½ç½®ã€‚å¦‚æœæœ‰ä¸¤ä¸ªå…ƒç´ é€šè¿‡equals()æ–¹æ³•æ¯”è¾ƒè¿”å›trueï¼Œä½†å®ƒä»¬çš„hashCode()æ–¹æ³•è¿”å›å€¼ä¸ç›¸ç­‰ï¼ŒHashSetå°†ä¼šæŠŠå®ƒä»¬å­˜å‚¨åœ¨ä¸åŒçš„ä½ç½®ï¼Œä¾ç„¶å¯ä»¥æ·»åŠ æˆåŠŸã€‚å³ï¼ŒHashSeté›†åˆåˆ¤æ–­ä¸¤ä¸ªå…ƒç´ ç›¸ç­‰çš„æ ‡å‡†æ˜¯ä¸¤ä¸ªå¯¹è±¡é€šè¿‡equals()æ–¹æ³•æ¯”è¾ƒç›¸ç­‰ï¼Œå¹¶ä¸”ä¸¤ä¸ªå¯¹è±¡çš„hashCode()æ–¹æ³•è¿”å›å€¼ä¹Ÿç›¸ç­‰ã€‚ ","date":"2022-03-20","objectID":"/java%E9%9B%86%E5%90%88%E5%AD%A6%E4%B9%A0/:3:2","tags":["Javaé›†åˆ"],"title":"Javaé›†åˆå­¦ä¹ ","uri":"/java%E9%9B%86%E5%90%88%E5%AD%A6%E4%B9%A0/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"TreeSetç±» TreeSetæ—¶SortedSetæ¥å£çš„å®ç°ç±»ï¼ŒTreeSetå¯ä»¥ä¿è¯å…ƒç´ å¤„äºæ’åºçŠ¶æ€ï¼Œå®ƒé‡‡ç”¨çº¢é»‘æ ‘çš„æ•°æ®ç»“æ„æ¥å­˜å‚¨é›†åˆå…ƒç´ ã€‚TreeSetæ”¯æŒä¸¤ç§æ’åºæ–¹æ³•ï¼šè‡ªç„¶æ’åºå’Œå®šåˆ¶æ’åºï¼Œé»˜è®¤é‡‡ç”¨è‡ªç„¶æ’åºã€‚ è‡ªç„¶æ’åº TreeSetä¼šè°ƒç”¨é›†åˆå…ƒç´ çš„compareTo(Object obj)æ–¹æ³•æ¥æ¯”è¾ƒå…ƒç´ çš„å¤§å°å…³ç³»ï¼Œç„¶åå°†å…ƒç´ æŒ‰ç…§å‡åºæ’åˆ—ï¼Œè¿™å°±æ˜¯è‡ªç„¶æ’åºã€‚å¦‚æœè¯•å›¾å°†ä¸€ä¸ªå¯¹è±¡æ·»åŠ åˆ°TreeSeté›†åˆä¸­ï¼Œåˆ™è¯¥å¯¹è±¡å¿…é¡»å®ç°Comparableæ¥å£ï¼Œå¦åˆ™ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚å½“ä¸€ä¸ªå¯¹è±¡è°ƒç”¨æ–¹æ³•ä¸å¦ä¸€ä¸ªå¯¹è±¡æ¯”è¾ƒæ—¶ï¼Œä¾‹å¦‚obj1.compareTo(obj2)ï¼Œå¦‚æœè¯¥æ–¹æ³•è¿”å›0ï¼Œåˆ™ä¸¤ä¸ªå¯¹è±¡ç›¸ç­‰ï¼›å¦‚æœè¿”å›ä¸€ä¸ªæ­£æ•°ï¼Œåˆ™obj1å¤§äºobj2ï¼›å¦‚æœè¿”å›ä¸€ä¸ªè´Ÿæ•°ï¼Œåˆ™obj1å°äºobj2ã€‚ Javaå¸¸ç”¨ç±»ä¸­å·²ç»å®ç°äº†Comparableæ¥å£çš„ç±»æœ‰ä»¥ä¸‹å‡ ä¸ªï¼š â™¦ BigDecimalã€BigDecimalä»¥åŠæ‰€æœ‰æ•°å€¼å‹å¯¹åº”çš„åŒ…è£…ç±»ï¼šæŒ‰ç…§å®ƒä»¬å¯¹åº”çš„æ•°å€¼å¤§å°è¿›è¡Œæ¯”è¾ƒã€‚ â™¦ Charchterï¼šæŒ‰ç…§å­—ç¬¦çš„unicodeå€¼è¿›è¡Œæ¯”è¾ƒã€‚ â™¦ Booleanï¼štrueå¯¹åº”çš„åŒ…è£…ç±»å®ä¾‹å¤§äºfalseå¯¹åº”çš„åŒ…è£…ç±»å®ä¾‹ã€‚ â™¦ Stringï¼šæŒ‰ç…§å­—ç¬¦ä¸²ä¸­çš„å­—ç¬¦çš„unicodeå€¼è¿›è¡Œæ¯”è¾ƒã€‚ â™¦ Dateã€Timeï¼šåé¢çš„æ—¶é—´ã€æ—¥æœŸæ¯”å‰é¢çš„æ—¶é—´ã€æ—¥æœŸå¤§ã€‚ å¯¹äºTreeSeté›†åˆè€Œè¨€ï¼Œå®ƒåˆ¤æ–­ä¸¤ä¸ªå¯¹è±¡æ˜¯å¦ç›¸ç­‰çš„æ ‡å‡†æ˜¯ï¼šä¸¤ä¸ªå¯¹è±¡é€šè¿‡compareTo(Object obj)æ–¹æ³•æ¯”è¾ƒæ˜¯å¦è¿”å›0ï¼Œå¦‚æœè¿”å›0åˆ™ç›¸ç­‰ã€‚ å®šåˆ¶æ’åº æƒ³è¦å®ç°å®šåˆ¶æ’åºï¼Œéœ€è¦åœ¨åˆ›å»ºTreeSeté›†åˆå¯¹è±¡æ—¶ï¼Œæä¾›ä¸€ä¸ªComparatorå¯¹è±¡ä¸è¯¥TreeSeté›†åˆå…³è”ï¼Œç”±Comparatorå¯¹è±¡è´Ÿè´£é›†åˆå…ƒç´ çš„æ’åºé€»è¾‘ã€‚ ç»¼ä¸Šï¼šè‡ªç„¶æ’åºå®ç°çš„æ˜¯Comparableæ¥å£ï¼Œå®šåˆ¶æ’åºå®ç°çš„æ˜¯Comparatoræ¥å£ã€‚ ","date":"2022-03-20","objectID":"/java%E9%9B%86%E5%90%88%E5%AD%A6%E4%B9%A0/:3:3","tags":["Javaé›†åˆ"],"title":"Javaé›†åˆå­¦ä¹ ","uri":"/java%E9%9B%86%E5%90%88%E5%AD%A6%E4%B9%A0/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"Mapæ¥å£ ","date":"2022-03-20","objectID":"/java%E9%9B%86%E5%90%88%E5%AD%A6%E4%B9%A0/:4:0","tags":["Javaé›†åˆ"],"title":"Javaé›†åˆå­¦ä¹ ","uri":"/java%E9%9B%86%E5%90%88%E5%AD%A6%E4%B9%A0/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"ç®€ä»‹ Map æä¾›äº†ä¸€ä¸ªæ›´é€šç”¨çš„å…ƒç´ å­˜å‚¨æ–¹æ³•ã€‚Map é›†åˆç±»ç”¨äºå­˜å‚¨å…ƒç´ å¯¹ï¼ˆç§°ä½œâ€œé”®â€å’Œâ€œå€¼â€ï¼‰ï¼Œå…¶ä¸­æ¯ä¸ªé”®æ˜ å°„åˆ°ä¸€ä¸ªå€¼ã€‚ä»æ¦‚å¿µä¸Šè€Œè¨€ï¼Œæ‚¨å¯ä»¥å°† List çœ‹ä½œæ˜¯å…·æœ‰æ•°å€¼é”®çš„ Mapã€‚ Map æ˜¯æ˜ å°„æ¥å£ï¼ŒMapä¸­å­˜å‚¨çš„å†…å®¹æ˜¯é”®å€¼å¯¹(key-value)ã€‚ TreeMap ç»§æ‰¿äºAbstractMapï¼Œä¸”å®ç°äº†NavigableMapæ¥å£ï¼›å› æ­¤ï¼ŒTreeMapä¸­çš„å†…å®¹æ˜¯â€œæœ‰åºçš„é”®å€¼å¯¹â€ HashMap ç»§æ‰¿äºAbstractMapï¼Œä½†æ²¡å®ç°NavigableMapæ¥å£ï¼›å› æ­¤ï¼ŒHashMapçš„å†…å®¹æ˜¯â€œé”®å€¼å¯¹ï¼Œä½†ä¸ä¿è¯æ¬¡åºâ€ Hashtable è™½ç„¶ä¸æ˜¯ç»§æ‰¿äºAbstractMapï¼Œä½†å®ƒç»§æ‰¿äºDictionary(Dictionaryä¹Ÿæ˜¯é”®å€¼å¯¹çš„æ¥å£)ï¼Œè€Œä¸”ä¹Ÿå®ç°Mapæ¥å£ï¼›å› æ­¤ï¼ŒHashtableçš„å†…å®¹ä¹Ÿæ˜¯â€œé”®å€¼å¯¹ï¼Œä¹Ÿä¸ä¿è¯æ¬¡åºâ€ã€‚ä½†å’ŒHashMapç›¸æ¯”ï¼ŒHashtableæ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œè€Œä¸”å®ƒæ”¯æŒé€šè¿‡Enumerationå»éå†ã€‚ Mapé€šç”¨æ–¹æ³• abstract void clear() abstract boolean containsKey(Object key) abstract boolean containsValue(Object value) abstract Set\u003cEntry\u003cK, V\u003e\u003e entrySet() abstract boolean equals(Object object) abstract V get(Object key) abstract int hashCode() abstract boolean isEmpty() abstract Set\u003cK\u003e keySet() abstract V put(K key, V value) abstract void putAll(Map\u003c? extends K, ? extends V\u003e map) abstract V remove(Object key) abstract int size() abstract Collection\u003cV\u003e values() Mapæä¾›æ¥å£åˆ†åˆ«ç”¨äºè¿”å› é”®é›†ã€å€¼é›†æˆ–é”®-å€¼æ˜ å°„å…³ç³»é›†ã€‚entrySet()ç”¨äºè¿”å›é”®-å€¼é›†çš„Seté›†åˆ;keySet()ç”¨äºè¿”å›é”®é›†çš„Seté›†åˆ;values()ç”¨æˆ·è¿”å›å€¼é›†çš„Collectioné›†åˆ,å› ä¸ºMapä¸­ä¸èƒ½åŒ…å«é‡å¤çš„é”®ï¼›æ¯ä¸ªé”®æœ€å¤šåªèƒ½æ˜ å°„åˆ°ä¸€ä¸ªå€¼ã€‚æ‰€ä»¥ï¼Œé”®-å€¼é›†ã€é”®é›†éƒ½æ˜¯Setï¼Œå€¼é›†æ—¶Collectionã€‚ Mapæä¾›äº†â€œé”®-å€¼å¯¹â€ã€â€œæ ¹æ®é”®è·å–å€¼â€ã€â€œåˆ é™¤é”®â€ã€â€œè·å–å®¹é‡å¤§å°â€ç­‰æ–¹æ³•ã€‚ Mapéå† //ç”¨forå¾ªç¯éå† for(Map.Entry\u003cString, String\u003e entry:map.entrySet()){ System.out.println(entry.getKey()+\"---\u003e\"+entry.getValue()); } //ç”¨Iteratorè¿­ä»£éå† Set set = map.entrySet(); Iterator i = set.iterator(); while(i.hasNext()){ Map.Entry\u003cString, String\u003e entry1=(Map.Entry\u003cString, String\u003e)i.next(); System.out.println(entry1.getKey()+\"==\"+entry1.getValue()); } //ç”¨keySet()è¿­ä»£éå† Iterator it=map.keySet().iterator(); while(it.hasNext()){ String key; String value; key=it.next().toString(); value=map.get(key); System.out.println(key+\"--\"+value); } ","date":"2022-03-20","objectID":"/java%E9%9B%86%E5%90%88%E5%AD%A6%E4%B9%A0/:4:1","tags":["Javaé›†åˆ"],"title":"Javaé›†åˆå­¦ä¹ ","uri":"/java%E9%9B%86%E5%90%88%E5%AD%A6%E4%B9%A0/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"HashMapç±» HashMapæ˜¯æˆ‘ä»¬ä½¿ç”¨éå¸¸å¤šçš„Collectionï¼Œå®ƒæ˜¯åŸºäºå“ˆå¸Œè¡¨çš„ Map æ¥å£çš„å®ç°ï¼Œä»¥key-valueçš„å½¢å¼å­˜åœ¨ã€‚ HashMapå®ç°æä¾›æ‰€æœ‰å¯é€‰çš„æ˜ å°„æ“ä½œï¼Œå¹¶å…è®¸ä½¿ç”¨ null å€¼å’Œ null é”®ã€‚ï¼ˆé™¤äº†ä¸åŒæ­¥å’Œå…è®¸ä½¿ç”¨ null ä¹‹å¤–ï¼ŒHashMap ç±»ä¸ Hashtable å¤§è‡´ç›¸åŒã€‚ï¼‰æ­¤ç±»ä¸ä¿è¯æ˜ å°„çš„é¡ºåºï¼Œç‰¹åˆ«æ˜¯å®ƒä¸ä¿è¯è¯¥é¡ºåºæ’ä¹…ä¸å˜ã€‚ HashMapä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå¦‚æœæƒ³è¦çº¿ç¨‹å®‰å…¨çš„HashMapï¼Œå¯ä»¥é€šè¿‡Collectionsç±»çš„é™æ€æ–¹æ³•synchronizedMapè·å¾—çº¿ç¨‹å®‰å…¨çš„HashMap,ä¾‹å¦‚ï¼šMap map = Collections.synchronizedMap(new HashMap()); å½’çº³èµ·æ¥ç®€å•åœ°è¯´ï¼ŒHashMap åœ¨åº•å±‚å°† key-value å½“æˆä¸€ä¸ªæ•´ä½“è¿›è¡Œå¤„ç†ï¼Œè¿™ä¸ªæ•´ä½“å°±æ˜¯ä¸€ä¸ª Entry å¯¹è±¡ã€‚HashMap åº•å±‚é‡‡ç”¨ä¸€ä¸ª Entry[] æ•°ç»„æ¥ä¿å­˜æ‰€æœ‰çš„ key-value å¯¹ï¼Œå½“éœ€è¦å­˜å‚¨ä¸€ä¸ª Entry å¯¹è±¡æ—¶ï¼Œä¼šæ ¹æ® Hash ç®—æ³•æ¥å†³å®šå…¶å­˜å‚¨ä½ç½®ï¼›å½“éœ€è¦å–å‡ºä¸€ä¸ª Entry æ—¶ï¼Œä¹Ÿä¼šæ ¹æ® Hash ç®—æ³•æ‰¾åˆ°å…¶å­˜å‚¨ä½ç½®ï¼Œç›´æ¥å–å‡ºè¯¥ Entryã€‚ç”±æ­¤å¯è§ï¼šHashMap ä¹‹æ‰€ä»¥èƒ½å¿«é€Ÿå­˜ã€å–å®ƒæ‰€åŒ…å«çš„ Entryï¼Œå®Œå…¨ç±»ä¼¼äºç°å®ç”Ÿæ´»ä¸­æ¯äº²ä»å°æ•™æˆ‘ä»¬çš„ï¼šä¸åŒçš„ä¸œè¥¿è¦æ”¾åœ¨ä¸åŒçš„ä½ç½®ï¼Œéœ€è¦æ—¶æ‰èƒ½å¿«é€Ÿæ‰¾åˆ°å®ƒã€‚ å½“åˆ›å»º HashMap æ—¶ï¼Œæœ‰ä¸€ä¸ªé»˜è®¤çš„è´Ÿè½½å› å­ï¼ˆload factorï¼‰ï¼Œå…¶é»˜è®¤å€¼ä¸º 0.75ï¼Œè¿™æ˜¯æ—¶é—´å’Œç©ºé—´æˆæœ¬ä¸Šä¸€ç§æŠ˜è¡·ï¼šå¢å¤§è´Ÿè½½å› å­å¯ä»¥å‡å°‘ Hash è¡¨ï¼ˆå°±æ˜¯é‚£ä¸ª Entry æ•°ç»„ï¼‰æ‰€å ç”¨çš„å†…å­˜ç©ºé—´ï¼Œä½†ä¼šå¢åŠ æŸ¥è¯¢æ•°æ®çš„æ—¶é—´å¼€é”€ï¼Œè€ŒæŸ¥è¯¢æ˜¯æœ€é¢‘ç¹çš„çš„æ“ä½œï¼ˆHashMap çš„ get() ä¸ put() æ–¹æ³•éƒ½è¦ç”¨åˆ°æŸ¥è¯¢ï¼‰ï¼›å‡å°è´Ÿè½½å› å­ä¼šæé«˜æ•°æ®æŸ¥è¯¢çš„æ€§èƒ½ï¼Œä½†ä¼šå¢åŠ  Hash è¡¨æ‰€å ç”¨çš„å†…å­˜ç©ºé—´ã€‚ LinkedHashMapå®ç°ç±» LinkedHashMapä½¿ç”¨åŒå‘é“¾è¡¨æ¥ç»´æŠ¤key-valueå¯¹çš„æ¬¡åºï¼ˆå…¶å®åªéœ€è¦è€ƒè™‘keyçš„æ¬¡åºå³å¯ï¼‰ï¼Œè¯¥é“¾è¡¨è´Ÿè´£ç»´æŠ¤Mapçš„è¿­ä»£é¡ºåºï¼Œä¸æ’å…¥é¡ºåºä¸€è‡´ï¼Œå› æ­¤æ€§èƒ½æ¯”HashMapä½ï¼Œä½†åœ¨è¿­ä»£è®¿é—®Mapé‡Œçš„å…¨éƒ¨å…ƒç´ æ—¶æœ‰è¾ƒå¥½çš„æ€§èƒ½ã€‚ HashMapæŒ‰ç…§keyè¿›è¡Œæ’åº HashMapæœ¬èº«å°±æ˜¯å‡åºæ’åˆ—,å¦‚æœè¦è·å–é›†åˆæ•°æ®ï¼Œè§å¦‚ä¸‹ä»£ç ï¼š Map\u003cString, Integer\u003e map = new HashMap\u003cString, Integer\u003e(); map.put(\"d\", 3); map.put(\"c\", 1); Set keySet = map.keySet(); Collections.sort(keySet); for(Iterator ite = keySet.iterator(); ite.hasNext();) { String temp = ite.next(); System.out.println(\"key-value: \"+temp+\",\"+map.getValue(temp); } ä½†æ˜¯å¦‚æœæƒ³è¦é€šè¿‡keyè¿›è¡Œé™åºæ’åˆ—ï¼Œåˆ™éœ€è¦é‡å†™sortæ–¹æ³•ï¼Œè§å¦‚ä¸‹ä»£ç ï¼š Collections.sort(keySet, new Comparator() { public int compare(Object o1, Object o2) { //å¦‚æœmapé‡Œé¢æ˜¯å…¶ä»–ç±»å‹ç›´æ¥æ›´æ”¹sorté‡Œé¢çš„æ¯”è¾ƒæ–¹æ³•ã€‚ if (Integer.parseInt(o1.toString()) \u003e Integer.parseInt(o2.toString()) return 1; if (Integer.parseInt(o1.toString()) == Integer.parseInt(o2.toString()) return 0; else return - 1; } }); HashMapæŒ‰ç…§valueå€¼æ’åºçš„æ–¹æ³• HashMapçš„valueå€¼æ²¡æœ‰æ’åºåŠŸèƒ½ï¼Œè‹¥è¦è¿›è¡Œè¾ƒè½»æ¾çš„æ’åºï¼Œå¯æ”¹å†™Comparatoræ¥å£æ–¹æ³•compareè¿›è¡Œæ’åºï¼Œä»£ç å¦‚ä¸‹ï¼š Map\u003cString, Integer\u003e map = new HashMap\u003cString, Integer\u003e(); map.put(\"d\", 2); map.put(\"c\", 1); map.put(\"b\", 1); map.put(\"a\", 3); List\u003cMap.Entry\u003cString, Integer\u003e\u003e infoIds = new ArrayList\u003cMap.Entry\u003cString, Integer\u003e\u003e(map.entrySet()); //æ’åºå‰ for (int i = 0; i \u003c infoIds.size(); i++) { String id = infoIds.get(i).toString(); System.out.println(id); } //æ ¹æ®valueæ’åº Collections.sort(infoIds, new Comparator\u003cMap.Entry\u003cString, Integer\u003e\u003e() { public int compare(Map.Entry\u003cString, Integer\u003e o1, Map.Entry\u003cString, Integer\u003e o2) { return (o2.getValue() - o1.getValue()); //return (o1.getKey()).toString().compareTo(o2.getKey()); } }); //æ’åºå for (int i = 0; i \u003c infoIds.size(); i++) { String id = infoIds.get(i).toString(); System.out.println(id); } ","date":"2022-03-20","objectID":"/java%E9%9B%86%E5%90%88%E5%AD%A6%E4%B9%A0/:4:2","tags":["Javaé›†åˆ"],"title":"Javaé›†åˆå­¦ä¹ ","uri":"/java%E9%9B%86%E5%90%88%E5%AD%A6%E4%B9%A0/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"TreeMapç±» TreeMapç»§æ‰¿äº†NavigableMapï¼Œè€ŒNavigableMapç»§æ‰¿è‡ªSortedMapï¼Œä¸ºSortedMapæ·»åŠ äº†æœç´¢é€‰é¡¹ï¼ŒNavigableMapæœ‰å‡ ç§æ–¹æ³•ï¼Œåˆ†åˆ«æ˜¯ä¸åŒçš„æ¯”è¾ƒè¦æ±‚ï¼šfloorKeyæ˜¯å°äºç­‰äºï¼ŒceilingKeyæ˜¯å¤§äºç­‰äºï¼ŒlowerKeyæ˜¯å°äºï¼ŒhigherKeyæ˜¯å¤§äºã€‚TreeMapçš„æœ¬è´¨æ˜¯R-B Tree(çº¢é»‘æ ‘)ï¼Œå®ƒåŒ…å«å‡ ä¸ªé‡è¦çš„æˆå‘˜å˜é‡ï¼š root, size, comparatorã€‚ TreeMap æ˜¯ä¸€ä¸ªæœ‰åºçš„key-valueé›†åˆï¼Œå®ƒæ˜¯é€šè¿‡çº¢é»‘æ ‘å®ç°çš„ã€‚ TreeMap ç»§æ‰¿äºAbstractMapï¼Œæ‰€ä»¥å®ƒæ˜¯ä¸€ä¸ªMapï¼Œå³ä¸€ä¸ªkey-valueé›†åˆã€‚ TreeMap å®ç°äº†NavigableMapæ¥å£ï¼Œæ„å‘³ç€å®ƒæ”¯æŒä¸€ç³»åˆ—çš„å¯¼èˆªæ–¹æ³•ã€‚æ¯”å¦‚è¿”å›æœ‰åºçš„keyé›†åˆã€‚ TreeMap å®ç°äº†Cloneableæ¥å£ï¼Œæ„å‘³ç€å®ƒèƒ½è¢«å…‹éš†ã€‚ TreeMap å®ç°äº†java.io.Serializableæ¥å£ï¼Œæ„å‘³ç€å®ƒæ”¯æŒåºåˆ—åŒ–ã€‚ TreeMapåŸºäºçº¢é»‘æ ‘ï¼ˆRed-Black treeï¼‰å®ç°ã€‚è¯¥æ˜ å°„æ ¹æ®å…¶é”®çš„è‡ªç„¶é¡ºåºè¿›è¡Œæ’åºï¼Œæˆ–è€…æ ¹æ®åˆ›å»ºæ˜ å°„æ—¶æä¾›çš„ Comparator è¿›è¡Œæ’åºï¼Œå…·ä½“å–å†³äºä½¿ç”¨çš„æ„é€ æ–¹æ³•ã€‚ TreeMapçš„åŸºæœ¬æ“ä½œ containsKeyã€getã€put å’Œ remove çš„æ—¶é—´å¤æ‚åº¦æ˜¯ log(n) ã€‚ TreeMapæ˜¯éåŒæ­¥çš„ã€‚ å®ƒçš„iterator æ–¹æ³•è¿”å›çš„è¿­ä»£å™¨æ˜¯fail-fastlçš„ã€‚ ","date":"2022-03-20","objectID":"/java%E9%9B%86%E5%90%88%E5%AD%A6%E4%B9%A0/:4:3","tags":["Javaé›†åˆ"],"title":"Javaé›†åˆå­¦ä¹ ","uri":"/java%E9%9B%86%E5%90%88%E5%AD%A6%E4%B9%A0/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"HashTableç±» hashTableå°†keyå’Œvalueç»“åˆèµ·æ¥æ„æˆé”®å€¼å¯¹é€šè¿‡put(key,value)æ–¹æ³•ä¿å­˜èµ·æ¥ï¼Œç„¶åé€šè¿‡get(key)æ–¹æ³•è·å–ç›¸å¯¹åº”çš„valueå€¼ã€‚å®ƒæ˜¯çº¿ç¨‹å®‰å…¨çš„å“ˆå¸Œæ˜ å°„è¡¨ï¼Œå†…éƒ¨é‡‡ç”¨Entry[]æ•°ç»„ï¼Œæ¯ä¸ªEntryå‡å¯ä½œä¸ºé“¾è¡¨çš„å¤´ï¼Œç”¨æ¥è§£å†³å†²çªï¼ˆç¢°æ’ï¼‰ã€‚åŒæ—¶Hashtablesæä¾›äº†ä¸€ä¸ªå¾ˆæœ‰ç”¨çš„æ–¹æ³•å¯ä»¥ä½¿åº”ç”¨ç¨‹åºçš„æ€§èƒ½è¾¾åˆ°æœ€ä½³ã€‚ çº¿ç¨‹å®‰å…¨ã€‚ Keyã€Valueå‡ä¸èƒ½ä¸ºnullã€‚ åŒ…å«äº†ä¸€ä¸ªEntry[]æ•°ç»„ï¼Œè€ŒEntryåˆæ˜¯ä¸€ä¸ªé“¾è¡¨ï¼Œç”¨æ¥å¤„ç†å†²çªã€‚ æ¯ä¸ªKeyå¯¹åº”äº†Entryæ•°ç»„ä¸­å›ºå®šçš„ä½ç½®ï¼ˆè®°ä¸ºindexï¼‰ï¼Œç§°ä¸ºæ§½ä½ï¼ˆSlotï¼‰ã€‚æ§½ä½è®¡ç®—å…¬å¼ä¸ºï¼š (key.hashCode() \u0026 0x7FFFFFFF) % Entry[].length() ã€‚ å½“Entry[]çš„å®é™…å…ƒç´ æ•°é‡ï¼ˆCountï¼‰è¶…è¿‡äº†åˆ†é…å®¹é‡ï¼ˆCapacityï¼‰çš„75%æ—¶ï¼Œæ–°å»ºä¸€ä¸ªEntry[]æ˜¯åŸå…ˆçš„2å€ï¼Œå¹¶é‡æ–°Hashï¼ˆrehashï¼‰ã€‚ rehashçš„æ ¸å¿ƒæ€è·¯æ˜¯ï¼Œå°†æ—§Entry[]æ•°ç»„çš„å…ƒç´ é‡æ–°è®¡ç®—æ§½ä½ï¼Œæ•£åˆ—åˆ°æ–°Entry[]ä¸­ã€‚ HashTableä¸HashMapçš„åŒºåˆ« HashTableå’ŒHashMapå­˜åœ¨å¾ˆå¤šçš„ç›¸åŒç‚¹ï¼Œä½†æ˜¯ä»–ä»¬è¿˜æ˜¯æœ‰å‡ ä¸ªæ¯”è¾ƒé‡è¦çš„ä¸åŒç‚¹ã€‚ ç¬¬ä¸€ï¼šæˆ‘ä»¬ä»ä»–ä»¬çš„å®šä¹‰å°±å¯ä»¥çœ‹å‡ºä»–ä»¬çš„ä¸åŒï¼ŒHashTableåŸºäºDictionaryç±»ï¼Œè€ŒHashMapæ˜¯åŸºäºAbstractMapã€‚Dictionaryæ˜¯ä»€ä¹ˆï¼Ÿå®ƒæ˜¯ä»»ä½•å¯å°†é”®æ˜ å°„åˆ°ç›¸åº”å€¼çš„ç±»çš„æŠ½è±¡çˆ¶ç±»ï¼Œè€ŒAbstractMapæ˜¯åŸºäºMapæ¥å£çš„éª¨å¹²å®ç°ï¼Œå®ƒä»¥æœ€å¤§é™åº¦åœ°å‡å°‘å®ç°æ­¤æ¥å£æ‰€éœ€çš„å·¥ä½œã€‚ ç¬¬äºŒï¼šHashMapå¯ä»¥å…è®¸å­˜åœ¨ä¸€ä¸ªä¸ºnullçš„keyå’Œä»»æ„ä¸ªä¸ºnullçš„valueï¼Œä½†æ˜¯HashTableä¸­çš„keyå’Œvalueéƒ½ä¸å…è®¸ä¸ºnullã€‚å½“HashMapé‡åˆ°ä¸ºnullçš„keyæ—¶ï¼Œå®ƒä¼šè°ƒç”¨putForNullKeyæ–¹æ³•æ¥è¿›è¡Œå¤„ç†ã€‚å¯¹äºvalueæ²¡æœ‰è¿›è¡Œä»»ä½•å¤„ç†ï¼Œåªè¦æ˜¯å¯¹è±¡éƒ½å¯ä»¥ã€‚ è€Œå½“HashTableé‡åˆ°nullæ—¶ï¼Œä»–ä¼šç›´æ¥æŠ›å‡ºNullPointerExceptionå¼‚å¸¸ä¿¡æ¯ã€‚ ç¬¬ä¸‰ï¼šHashtableçš„æ–¹æ³•æ˜¯åŒæ­¥çš„ï¼Œè€ŒHashMapçš„æ–¹æ³•ä¸æ˜¯ã€‚æ‰€ä»¥æœ‰äººä¸€èˆ¬éƒ½å»ºè®®å¦‚æœæ˜¯æ¶‰åŠåˆ°å¤šçº¿ç¨‹åŒæ­¥æ—¶é‡‡ç”¨HashTableï¼Œæ²¡æœ‰æ¶‰åŠå°±é‡‡ç”¨HashMapï¼Œä½†æ˜¯åœ¨Collectionsç±»ä¸­å­˜åœ¨ä¸€ä¸ªé™æ€æ–¹æ³•ï¼šsynchronizedMap()ï¼Œè¯¥æ–¹æ³•åˆ›å»ºäº†ä¸€ä¸ªçº¿ç¨‹å®‰å…¨çš„Mapå¯¹è±¡ï¼Œå¹¶æŠŠå®ƒä½œä¸ºä¸€ä¸ªå°è£…çš„å¯¹è±¡æ¥è¿”å›ï¼Œæ‰€ä»¥é€šè¿‡Collectionsç±»çš„synchronizedMapæ–¹æ³•æ˜¯å¯ä»¥æˆ‘ä»¬ä½ åŒæ­¥è®¿é—®æ½œåœ¨çš„HashMapã€‚ ","date":"2022-03-20","objectID":"/java%E9%9B%86%E5%90%88%E5%AD%A6%E4%B9%A0/:4:4","tags":["Javaé›†åˆ"],"title":"Javaé›†åˆå­¦ä¹ ","uri":"/java%E9%9B%86%E5%90%88%E5%AD%A6%E4%B9%A0/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"Queueæ¥å£ Queueï¼Œjavaä¸­æ¨¡æ‹Ÿé˜Ÿåˆ—çš„ä¸€ç§æ•°æ®ç»“æ„ï¼Œå…ˆè¿›å…ˆå‡ºï¼ˆFIFOï¼‰,ä¸æ”¯æŒéšæœºè®¿é—®æ•°æ®ï¼Œé€šè¿‡offerï¼ˆï¼‰æ–¹æ³•å¢åŠ æ•°æ®åˆ°é˜Ÿåˆ—å°¾éƒ¨ï¼Œpollï¼ˆï¼‰è·å–é˜Ÿåˆ—å¤´éƒ¨å…ƒç´ ï¼Œå¯ä»¥å°†Queueçœ‹æˆä¸€ä¸ªé€šé“ï¼Œæœ€å…ˆèµ°è¿›çš„é€šé“çš„ä¹Ÿæ˜¯æœ€å…ˆèµ°å‡ºé€šé“çš„ï¼Œæœ€åèµ°è¿›å»çš„ï¼Œåœ¨é€šé“é‡Œé¢å‘†çš„æ—¶é—´æœ€ä¹…ã€‚ å¸¸ç”¨æ–¹æ³•ï¼š add å¢åŠ ä¸€ä¸ªå…ƒç´¢å¦‚æœé˜Ÿåˆ—å·²æ»¡ï¼Œåˆ™æŠ›å‡ºä¸€ä¸ªIIIegaISlabEepeplianå¼‚å¸¸ remove ç§»é™¤å¹¶è¿”å›é˜Ÿåˆ—å¤´éƒ¨çš„å…ƒç´ ï¼Œå¦‚æœé˜Ÿåˆ—ä¸ºç©ºï¼Œåˆ™æŠ›å‡ºä¸€ä¸ªNoSuchElementExceptionå¼‚å¸¸ element è¿”å›é˜Ÿåˆ—å¤´éƒ¨çš„å…ƒç´ ï¼Œå¦‚æœé˜Ÿåˆ—ä¸ºç©ºï¼Œåˆ™æŠ›å‡ºä¸€ä¸ªNoSuchElementExceptionå¼‚å¸¸ offer æ·»åŠ ä¸€ä¸ªå…ƒç´ å¹¶è¿”å›trueï¼Œå¦‚æœé˜Ÿåˆ—å·²æ»¡ï¼Œåˆ™è¿”å›false poll ç§»é™¤å¹¶è¿”é—®é˜Ÿåˆ—å¤´éƒ¨çš„å…ƒç´ ï¼Œå¦‚æœé˜Ÿåˆ—ä¸ºç©ºï¼Œåˆ™è¿”å›null peek è¿”å›é˜Ÿåˆ—å¤´éƒ¨çš„å…ƒç´ ï¼Œå¦‚æœé˜Ÿåˆ—ä¸ºç©ºï¼Œåˆ™è¿”å›null put æ·»åŠ ä¸€ä¸ªå…ƒç´ ï¼Œå¦‚æœé˜Ÿåˆ—æ»¡ï¼Œåˆ™é˜»å¡ take ç§»é™¤å¹¶è¿”å›é˜Ÿåˆ—å¤´éƒ¨çš„å…ƒç´ ï¼Œå¦‚æœé˜Ÿåˆ—ä¸ºç©ºï¼Œåˆ™é˜»å¡ drainTo(list) ä¸€æ¬¡æ€§å–å‡ºé˜Ÿåˆ—æ‰€æœ‰å…ƒç´  ","date":"2022-03-20","objectID":"/java%E9%9B%86%E5%90%88%E5%AD%A6%E4%B9%A0/:5:0","tags":["Javaé›†åˆ"],"title":"Javaé›†åˆå­¦ä¹ ","uri":"/java%E9%9B%86%E5%90%88%E5%AD%A6%E4%B9%A0/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"PriorityQueueç±» ä¼˜å…ˆé˜Ÿåˆ—PriorityQueueæ˜¯Queueæ¥å£çš„å®ç°ï¼Œå¯ä»¥å¯¹å…¶ä¸­å…ƒç´ è¿›è¡Œæ’åºï¼Œå¯ä»¥æ”¾åŸºæœ¬æ•°æ®ç±»å‹çš„åŒ…è£…ç±»ï¼ˆå¦‚ï¼šIntegerï¼ŒLongç­‰ï¼‰æˆ–è‡ªå®šä¹‰çš„ç±»å¯¹äºåŸºæœ¬æ•°æ®ç±»å‹çš„åŒ…è£…å™¨ç±»ï¼Œä¼˜å…ˆé˜Ÿåˆ—ä¸­å…ƒç´ é»˜è®¤æ’åˆ—é¡ºåºæ˜¯å‡åºæ’åˆ—ï¼Œä½†å¯¹äºè‡ªå·±å®šä¹‰çš„ç±»æ¥è¯´ï¼Œéœ€è¦è‡ªå·±å®šä¹‰æ¯”è¾ƒå™¨ã€‚ å¸¸ç”¨æ–¹æ³•ï¼š peek()//è¿”å›é˜Ÿé¦–å…ƒç´  poll()//è¿”å›é˜Ÿé¦–å…ƒç´ ï¼Œé˜Ÿé¦–å…ƒç´ å‡ºé˜Ÿåˆ— add()//æ·»åŠ å…ƒç´  size()//è¿”å›é˜Ÿåˆ—å…ƒç´ ä¸ªæ•° isEmpty()//åˆ¤æ–­é˜Ÿåˆ—æ˜¯å¦ä¸ºç©ºï¼Œä¸ºç©ºè¿”å›true,ä¸ç©ºè¿”å›false ç¤ºä¾‹ï¼š public static void main(String[] args) { //ä¸ç”¨æ¯”è¾ƒå™¨ï¼Œé»˜è®¤å‡åºæ’åˆ— Queue\u003cInteger\u003e q = new PriorityQueue\u003c\u003e(); q.add(3); q.add(2); q.add(4); while(!q.isEmpty()) { System.out.print(q.poll()+\" \"); //2 3 4 } //ä½¿ç”¨è‡ªå®šä¹‰æ¯”è¾ƒå™¨ï¼Œé™åºæ’åˆ— Queue\u003cInteger\u003e qq = new PriorityQueue\u003c\u003e(new Comparator\u003cInteger\u003e() { public int compare(Integer e1, Integer e2) { return e2 - e1; //å‡åº:e1-e2,é™åº:e2-e1 } }); qq.add(3); qq.add(2); qq.add(4); while(!qq.isEmpty()) { System.out.print(qq.poll()+\" \"); //4 3 2 } } æœ¬æ–‡å‚è€ƒè‡³ï¼Œå¦‚éœ€æ›´å¤šè¯¦æƒ…ï¼Œè¯·æŸ¥é˜…ä»¥ä¸‹ç½‘ç«™ èœé¸Ÿæ•™ç¨‹ Java School ","date":"2022-03-20","objectID":"/java%E9%9B%86%E5%90%88%E5%AD%A6%E4%B9%A0/:5:1","tags":["Javaé›†åˆ"],"title":"Javaé›†åˆå­¦ä¹ ","uri":"/java%E9%9B%86%E5%90%88%E5%AD%A6%E4%B9%A0/"},{"categories":["å®è·µç¬”è®°"],"content":"æ¶ˆæ¯æ¨é€æ˜¯å¤§éƒ¨åˆ†ç³»ç»Ÿéƒ½éœ€è¦åšåˆ°çš„åŠŸèƒ½ï¼Œåœ¨.NETä¸­æˆ‘åˆ†åˆ«é€šè¿‡RabbitMQã€MQTTã€SignalRå®ç°æ¶ˆæ¯æ¨é€åŠŸèƒ½ï¼Œæœ¬ç¯‡æ–‡ç« å°†é€šè¿‡å®ƒä»¬å®ç°ç®€å•çš„æ¨é€åŠŸèƒ½ï¼Œæ‰‹æŠŠæ‰‹å¸¦å¤§å®¶å®Œæˆç¼–ç¨‹ã€‚æœ¬æ–‡ç¯å¢ƒä¸º.NET Core 3.1ä¸‹ ","date":"2022-03-19","objectID":"/%E5%AE%9E%E7%8E%B0%E7%AE%80%E5%8D%95%E6%B6%88%E6%81%AF%E6%8E%A8%E9%80%81%E5%8A%9F%E8%83%BD/:0:0","tags":["æ¶ˆæ¯æ¨é€",".NET"],"title":"å®ç°ç®€å•æ¶ˆæ¯æ¨é€åŠŸèƒ½","uri":"/%E5%AE%9E%E7%8E%B0%E7%AE%80%E5%8D%95%E6%B6%88%E6%81%AF%E6%8E%A8%E9%80%81%E5%8A%9F%E8%83%BD/"},{"categories":["å®è·µç¬”è®°"],"content":"SignalRå®ç° ","date":"2022-03-19","objectID":"/%E5%AE%9E%E7%8E%B0%E7%AE%80%E5%8D%95%E6%B6%88%E6%81%AF%E6%8E%A8%E9%80%81%E5%8A%9F%E8%83%BD/:1:0","tags":["æ¶ˆæ¯æ¨é€",".NET"],"title":"å®ç°ç®€å•æ¶ˆæ¯æ¨é€åŠŸèƒ½","uri":"/%E5%AE%9E%E7%8E%B0%E7%AE%80%E5%8D%95%E6%B6%88%E6%81%AF%E6%8E%A8%E9%80%81%E5%8A%9F%E8%83%BD/"},{"categories":["å®è·µç¬”è®°"],"content":"ç®€ä»‹ SignalRæ˜¯ä¸€ä¸ªå¼€æºçš„åº“ï¼Œè·¨å¹³å°ï¼›è®©Webåº”ç”¨ä¸å…¶ä»–åº”ç”¨é€šè®¯å˜å¾—å¾ˆç®€å•ï¼ŒWebæœåŠ¡ç«¯å¯ä»¥å®æ—¶çš„å°†å†…å®¹æ¨é€ç»™å¯¹åº”çš„å®¢æˆ·ç«¯ï¼Œå®¢æˆ·ç«¯å‘é€çš„ä¿¡æ¯ä¹Ÿå¯ä»¥å®æ—¶åˆ°å…¶ä»–å®¢æˆ·ç«¯ã€‚ SignalRæä¾›äº†ä¸€ç§è¿œç¨‹è¿‡ç¨‹è°ƒç”¨(RPC)çš„æ–¹å¼ï¼Œä½¿å¾—å®¢æˆ·ç«¯å¯ä»¥è°ƒç”¨æœåŠ¡å™¨çš„æ–¹æ³•ï¼ŒåŒæ ·åœ¨æœåŠ¡å™¨ç«¯çš„æ–¹æ³•ä¸­ä¹Ÿèƒ½è°ƒç”¨å®¢æˆ·ç«¯çš„æ–¹æ³•ã€‚ ","date":"2022-03-19","objectID":"/%E5%AE%9E%E7%8E%B0%E7%AE%80%E5%8D%95%E6%B6%88%E6%81%AF%E6%8E%A8%E9%80%81%E5%8A%9F%E8%83%BD/:1:1","tags":["æ¶ˆæ¯æ¨é€",".NET"],"title":"å®ç°ç®€å•æ¶ˆæ¯æ¨é€åŠŸèƒ½","uri":"/%E5%AE%9E%E7%8E%B0%E7%AE%80%E5%8D%95%E6%B6%88%E6%81%AF%E6%8E%A8%E9%80%81%E5%8A%9F%E8%83%BD/"},{"categories":["å®è·µç¬”è®°"],"content":"ç¤ºä¾‹ NugetåŒ…ä¸ºï¼š \u003cPackageReference Include=\"Microsoft.AspNetCore.SignalR.Core\" Version=\"1.1.0\" /\u003e é¦–å…ˆæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªè‡ªå·±çš„SignalR Hub using Microsoft.AspNetCore.SignalR; using System.Threading.Tasks; namespace KBEAM.Hubs { public class ChatHub : Hub // ç»§æ‰¿è‡ªSignalR Hubåº“ { public async Task SendMessage(string user, string message) { await Clients.All.SendAsync(\"ReceiveMessage\", user, message); } public async Task SendMessageToGroup(string group, string message) { await Clients.Group(group).SendAsync(\"ReceiveMessageFromGroup\", group, message); } public async Task AddToGroup(string groupName) { await Groups.AddToGroupAsync(Context.ConnectionId, groupName); await Clients.Group(groupName).SendAsync(\"ReceiveMessage\", $\"{Context.ConnectionId} has joined the group {groupName}.\"); } public async Task RemoveFromGroup(string groupName) { await Groups.RemoveFromGroupAsync(Context.ConnectionId, groupName); //await Clients.Group(groupName).SendAsync(\"ReceiveMessage\", $\"{Context.ConnectionId} has left the group {groupName}.\"); } } } åœ¨Startup.csæ–‡ä»¶ä¸­æ³¨å†Œç›¸å…³æœåŠ¡åŠç®¡é“ // 1.åœ¨ConfigureServiceså‡½æ•°ä¸­æ·»åŠ ä»¥ä¸‹è¯­å¥ï¼Œæ³¨å†Œç›¸å…³æœåŠ¡ services.AddSignalR(); // 2.åœ¨Configureå‡½æ•°ä¸­æ·»åŠ ä»¥ä¸‹è¯­å¥ï¼Œé…ç½®ç®¡é“ç»ˆç»“ç‚¹ app.UseEndpoints(endpoints =\u003e { // ... endpoints.MapHub\u003cChatHub\u003e(\"/chatHub\"); // ... }); ç¼–å†™æœåŠ¡ç«¯ä¸šåŠ¡ï¼Œæ¨é€æ¶ˆæ¯ // å®šä¹‰ä¸€ä¸ªä¸Šä¸‹æ–‡ private readonly IHubContext\u003cChatHub\u003e hubContext; // é€šè¿‡æ„é€ å‡½æ•°æ³¨å…¥ä¾èµ– public MonitorService(IHubContext\u003cChatHub\u003e hub) { hubContext = hub; } //åœ¨éœ€è¦çš„åœ°æ–¹è°ƒç”¨æ–¹æ³•ï¼Œè¿›è¡Œæ¶ˆæ¯æ¨é€ await hubContext.Clients.Group(group).SendAsync(\"ReceiveMessageFromGroup\",group, \"éœ€è¦å‘é€çš„æ¶ˆæ¯\"); JSå®¢æˆ·ç«¯ç¨‹åºç¼–å†™ é¦–å…ˆï¼Œéœ€è¦é€šè¿‡npmæ¥å®‰è£…SignalRå°è£…å¥½çš„JSæ–‡ä»¶ï¼Œnpm install @microsoft/signalr // 1.é¦–å…ˆè¿›è¡ŒSignalRå®¢æˆ·ç«¯è¿æ¥ const signalR = require(\"@microsoft/signalr\") let conn = new signalR.HubConnectionBuilder() .withUrl(\"http://localhost:8988/chatHub\") .withAutomaticReconnect() .configureLogging(signalR.LogLevel.Error) .build() export default conn import signalR from \"@/utils/signalR\"; // 2.å®¢æˆ·ç«¯è°ƒç”¨æœåŠ¡ç«¯æ–¹æ³•ï¼ˆRPCï¼‰ signalR.invoke(\"AddToGroup\", \"groupName\").catch(function (err) { // åŠ å…¥ç”¨æˆ·ç»„ return console.error(err.toString()); }); signalR.invoke(\"RemoveFromGroup\", \"å¤§å±\").catch(function (err) { // ç§»é™¤ç”¨æˆ·ç»„ return console.error(err.toString()); }); // 3.å®¢æˆ·ç«¯ç›‘å¬æœåŠ¡å™¨æ¶ˆæ¯ signalR.on(\"ReceiveMessageFromGroup\", function (group, message) { console.log(group + \" \" + message); that.lineChartData = JSON.parse(message); }); ","date":"2022-03-19","objectID":"/%E5%AE%9E%E7%8E%B0%E7%AE%80%E5%8D%95%E6%B6%88%E6%81%AF%E6%8E%A8%E9%80%81%E5%8A%9F%E8%83%BD/:1:2","tags":["æ¶ˆæ¯æ¨é€",".NET"],"title":"å®ç°ç®€å•æ¶ˆæ¯æ¨é€åŠŸèƒ½","uri":"/%E5%AE%9E%E7%8E%B0%E7%AE%80%E5%8D%95%E6%B6%88%E6%81%AF%E6%8E%A8%E9%80%81%E5%8A%9F%E8%83%BD/"},{"categories":["å®è·µç¬”è®°"],"content":"RabbitMQå®ç° ","date":"2022-03-19","objectID":"/%E5%AE%9E%E7%8E%B0%E7%AE%80%E5%8D%95%E6%B6%88%E6%81%AF%E6%8E%A8%E9%80%81%E5%8A%9F%E8%83%BD/:2:0","tags":["æ¶ˆæ¯æ¨é€",".NET"],"title":"å®ç°ç®€å•æ¶ˆæ¯æ¨é€åŠŸèƒ½","uri":"/%E5%AE%9E%E7%8E%B0%E7%AE%80%E5%8D%95%E6%B6%88%E6%81%AF%E6%8E%A8%E9%80%81%E5%8A%9F%E8%83%BD/"},{"categories":["å®è·µç¬”è®°"],"content":"ç®€ä»‹ RabbitMQæ˜¯å®ç°äº†é«˜çº§æ¶ˆæ¯é˜Ÿåˆ—åè®®ï¼ˆAMQPï¼‰çš„å¼€æºæ¶ˆæ¯ä»£ç†è½¯ä»¶ï¼ˆäº¦ç§°é¢å‘æ¶ˆæ¯çš„ä¸­é—´ä»¶ï¼‰ï¼Œç”±ä»¥é«˜æ€§èƒ½ã€å¥å£®ä»¥åŠå¯ä¼¸ç¼©æ€§å‡ºåçš„ Erlang å†™æˆã€‚ ","date":"2022-03-19","objectID":"/%E5%AE%9E%E7%8E%B0%E7%AE%80%E5%8D%95%E6%B6%88%E6%81%AF%E6%8E%A8%E9%80%81%E5%8A%9F%E8%83%BD/:2:1","tags":["æ¶ˆæ¯æ¨é€",".NET"],"title":"å®ç°ç®€å•æ¶ˆæ¯æ¨é€åŠŸèƒ½","uri":"/%E5%AE%9E%E7%8E%B0%E7%AE%80%E5%8D%95%E6%B6%88%E6%81%AF%E6%8E%A8%E9%80%81%E5%8A%9F%E8%83%BD/"},{"categories":["å®è·µç¬”è®°"],"content":"ç¤ºä¾‹ é¦–å…ˆæ‚¨éœ€è¦åœ¨ç”µè„‘ä¸Šå®‰è£…å¥½ ErlangåŠRabbitMQæœåŠ¡å™¨ï¼Œè¿™ä¸€æ­¥å¤§å®¶å°±è‡ªè¡Œæœç´¢è§£å†³å§ï¼Œç½‘ä¸Šåº”è¯¥æœ‰å¾ˆå¤šçš„è§£å†³æ–¹æ³• RabbitMQå‡†å¤‡ é¦–å…ˆå¼€å¯Stompæ’ä»¶ rabbitmq-plugins enable rabbitmq_management # å¼€å¯æ­¤æ’ä»¶åæœ‰ç®¡ç†ç•Œé¢http://localhost:15672/ rabbitmq-plugins enable rabbitmq_web_stomp rabbitmq-plugins enable rabbitmq_web_stomp_examples æœåŠ¡ç«¯å‘é€æ¶ˆæ¯ æ‰€éœ€NugetåŒ…ï¼š \u003cPackageReference Include=\"RabbitMQ.Client\" Version=\"6.2.4\" /\u003e // å»ºç«‹RabbitMQè¿æ¥ private static readonly ConnectionFactory rabbitMqFactory = new ConnectionFactory() { HostName = \"localhost\", UserName = \"ç”¨æˆ·å\", Password = \"å¯†ç \", Port = 5672, VirtualHost = \"è™šæ‹Ÿä¸»æœºé…ç½®\" }; // å‘é€æ¶ˆæ¯ using (IConnection conn = rabbitMqFactory.CreateConnection()) { using (IModel channel = conn.CreateModel()) { channel.ExchangeDeclare(\"monitor\", ExchangeType.Direct, durable: true, autoDelete: false, arguments: null); channel.QueueDeclare(\"message\", durable: true, autoDelete: false, exclusive: false, arguments: null); channel.QueueBind(\"message\", \"monitor\", routingKey: \"message\"); var props = channel.CreateBasicProperties(); props.Persistent = true; channel.BasicPublish(exchange: \"monitor\", routingKey: \"message\", basicProperties: props, body: Encoding.UTF8.GetBytes(JsonConvert.SerializeObject(new { expectedData, actualData }))); } } å…·ä½“RabbitMQä½¿ç”¨å¯ä»¥çœ‹æˆ‘çš„RabbitMQå­¦ä¹ ç¬”è®° å®¢æˆ·ç«¯æ¥å—æ¶ˆæ¯ é¦–å…ˆéœ€è¦å®‰è£…npmåº“æ–‡ä»¶ï¼Œnpm install stompjs import Stomp from \"stompjs\"; // å®šä¹‰ä¸€ä¸ªRabbitMQå®¢æˆ·ç«¯ data() { return { client: Stomp.client(\"ws://localhost:15674/ws\"), }; }, // åˆå§‹åŒ–è¿æ¥æ“ä½œ created() { this.client.connect( \"ç”¨æˆ·å\", \"å¯†ç \", this.onConnected, this.onFailed, \"è™šæ‹Ÿä¸»æœºåç§°\" ); } methods: { onConnected: function () { //è®¢é˜…é¢‘é“ // const topic = localStorage.getItem(\"Lesan\"); console.log(\"è¿æ¥æˆåŠŸ\"); this.client.subscribe( \"/exchange/monitor/message\", this.responseCallback, this.onFailed ); }, onFailed: function (frame) { console.log(\"MQ Failed: \" + frame); this.$message.error(\"è¿æ¥å¤±è´¥\"); }, // å›ä¼ æ¶ˆæ¯ responseCallback: function (frame) { console.log(\"MQ msg=\u003e\" + frame.body); this.lineChartData = JSON.parse(frame.body); //æ¥æ”¶æ¶ˆæ¯å¤„ç† }, // æ–­å¼€ç›¸åº”çš„è¿æ¥ close: function () { this.client.disconnect(function () { console.log(\"å·²é€€å‡ºè´¦å·\"); }); }, }, ","date":"2022-03-19","objectID":"/%E5%AE%9E%E7%8E%B0%E7%AE%80%E5%8D%95%E6%B6%88%E6%81%AF%E6%8E%A8%E9%80%81%E5%8A%9F%E8%83%BD/:2:2","tags":["æ¶ˆæ¯æ¨é€",".NET"],"title":"å®ç°ç®€å•æ¶ˆæ¯æ¨é€åŠŸèƒ½","uri":"/%E5%AE%9E%E7%8E%B0%E7%AE%80%E5%8D%95%E6%B6%88%E6%81%AF%E6%8E%A8%E9%80%81%E5%8A%9F%E8%83%BD/"},{"categories":["å®è·µç¬”è®°"],"content":"MQTTå®ç° ","date":"2022-03-19","objectID":"/%E5%AE%9E%E7%8E%B0%E7%AE%80%E5%8D%95%E6%B6%88%E6%81%AF%E6%8E%A8%E9%80%81%E5%8A%9F%E8%83%BD/:3:0","tags":["æ¶ˆæ¯æ¨é€",".NET"],"title":"å®ç°ç®€å•æ¶ˆæ¯æ¨é€åŠŸèƒ½","uri":"/%E5%AE%9E%E7%8E%B0%E7%AE%80%E5%8D%95%E6%B6%88%E6%81%AF%E6%8E%A8%E9%80%81%E5%8A%9F%E8%83%BD/"},{"categories":["å®è·µç¬”è®°"],"content":"ç®€ä»‹ MQTTæ˜¯IBMå¼€å‘çš„ä¸€ä¸ªå³æ—¶é€šè®¯åè®®ï¼Œè¯¥åè®®æ”¯æŒæ‰€æœ‰çš„å¹³å°ï¼Œå‡ ä¹å¯ä»¥æŠŠæ‰€æœ‰è”ç½‘çš„ç‰©å“å’Œå¤–éƒ¨è¿æ¥èµ·æ¥ã€‚ ä½¿ç”¨å‘å¸ƒ/è®¢é˜…æ¶ˆæ¯æ¨¡å¼ï¼Œæä¾›ä¸€å¯¹å¤šçš„æ¶ˆæ¯å‘å¸ƒï¼Œè§£é™¤åº”ç”¨ç¨‹åºè€¦åˆã€‚è¿™ä¸€ç‚¹å¾ˆç±»ä¼¼äºXMPPï¼Œä½†æ˜¯MQTTçš„ä¿¡æ¯å†—ä½™è¿œå°äºXMPPã€‚ ä½¿ç”¨TCP/IPæä¾›ç½‘ç»œè¿æ¥ã€‚ä¸»æµçš„MQTTæ˜¯åŸºäºTCPè¿æ¥è¿›è¡Œæ•°æ®æ¨é€çš„ï¼Œä½†æ˜¯åŒæ ·æœ‰åŸºäºUDPçš„ç‰ˆæœ¬ï¼Œå«åšMQTT-SNã€‚è¿™ä¸¤ç§ç‰ˆæœ¬ç”±äºåŸºäºä¸åŒçš„è¿æ¥æ–¹å¼ï¼Œä¼˜ç¼ºç‚¹è‡ªç„¶ä¹Ÿå°±å„æœ‰ä¸åŒäº†ã€‚ ä¸‰ç§æ¶ˆæ¯ä¼ è¾“æ–¹å¼QoSï¼š 0ä»£è¡¨â€œè‡³å¤šä¸€æ¬¡â€ï¼Œæ¶ˆæ¯å‘å¸ƒå®Œå…¨ä¾èµ–åº•å±‚ TCP/IP åè®®ã€‚ä¼šå‘ç”Ÿæ¶ˆæ¯ä¸¢å¤±æˆ–é‡å¤ã€‚è¿™ä¸€çº§åˆ«å¯ç”¨äºå¦‚ä¸‹æƒ…å†µï¼Œç¯å¢ƒä¼ æ„Ÿå™¨æ•°æ®ï¼Œä¸¢å¤±ä¸€æ¬¡è¯»è®°å½•æ— æ‰€è°“ï¼Œå› ä¸ºä¸ä¹…åè¿˜ä¼šæœ‰ç¬¬äºŒæ¬¡å‘é€ 1ä»£è¡¨â€œè‡³å°‘ä¸€æ¬¡â€ï¼Œç¡®ä¿æ¶ˆæ¯åˆ°è¾¾ï¼Œä½†æ¶ˆæ¯é‡å¤å¯èƒ½ä¼šå‘ç”Ÿ 2ä»£è¡¨â€œåªæœ‰ä¸€æ¬¡â€ï¼Œç¡®ä¿æ¶ˆæ¯åˆ°è¾¾ä¸€æ¬¡ã€‚è¿™ä¸€çº§åˆ«å¯ç”¨äºå¦‚ä¸‹æƒ…å†µï¼Œåœ¨è®¡è´¹ç³»ç»Ÿä¸­ï¼Œæ¶ˆæ¯é‡å¤æˆ–ä¸¢å¤±ä¼šå¯¼è‡´ä¸æ­£ç¡®çš„ç»“æœ ","date":"2022-03-19","objectID":"/%E5%AE%9E%E7%8E%B0%E7%AE%80%E5%8D%95%E6%B6%88%E6%81%AF%E6%8E%A8%E9%80%81%E5%8A%9F%E8%83%BD/:3:1","tags":["æ¶ˆæ¯æ¨é€",".NET"],"title":"å®ç°ç®€å•æ¶ˆæ¯æ¨é€åŠŸèƒ½","uri":"/%E5%AE%9E%E7%8E%B0%E7%AE%80%E5%8D%95%E6%B6%88%E6%81%AF%E6%8E%A8%E9%80%81%E5%8A%9F%E8%83%BD/"},{"categories":["å®è·µç¬”è®°"],"content":"ç¤ºä¾‹ æœåŠ¡ç«¯å¼€å‘ æ‰€éœ€NugetåŒ…ï¼š\u003cPackageReference Include=\"MQTTnet.AspNetCore\" Version=\"3.1.2\" /\u003e å¯¹Program.csä¿®æ”¹ï¼š public static IHostBuilder CreateHostBuilder(string[] args) =\u003e Host.CreateDefaultBuilder(args) .ConfigureWebHostDefaults(webBuilder =\u003e { webBuilder.UseKestrel(o =\u003e { o.ListenAnyIP(8988); o.ListenAnyIP(1884, t =\u003e t.UseMqtt()); }); webBuilder.UseStartup\u003cStartup\u003e(); //webBuilder.UseUrls(\"http://0.0.0.0:8988\"); }); å¯¹Startup.csä¿®æ”¹ï¼š // åœ¨ConfigureServiceså‡½æ•°ä¸­æ·»åŠ  services.AddHostedMqttServer(mqttServer =\u003e mqttServer.WithoutDefaultEndpoint().WithConnectionValidator(c =\u003e { if (c.Username != \"admin\" || c.Password != \"123456\") { c.ReasonCode = MqttConnectReasonCode.BadUserNameOrPassword; return; } c.ReasonCode = MqttConnectReasonCode.Success; })) .AddMqttConnectionHandler() .AddConnections(); // åœ¨Configureå‡½æ•°ä¸­æ·»åŠ  app.UseEndpoints(endpoints =\u003e { endpoints.MapConnectionHandler\u003cMqttConnectionHandler\u003e( \"/mqtt\", httpConnectionDispatcherOptions =\u003e httpConnectionDispatcherOptions.WebSockets.SubProtocolSelector = protocolList =\u003e protocolList.FirstOrDefault() ?? string.Empty); }); app.UseMqttServer(S =\u003e { MqttHelper.Server = S; S.ClientConnectedHandler = new MqttServerClientConnectedHandlerDelegate(OnConnected); S.StartedHandler = new MqttServerStartedHandlerDelegate(OnStarted); }); // æ·»åŠ äº‹ä»¶å¤„ç†å‡½æ•° private void OnStarted(EventArgs obj) { RecurringJob.AddOrUpdate\u003cMonitorService\u003e(\"MonitorData\", p =\u003e p.UpdateDataAsync(\"å¤§å±\"), \"0/15 * * * * *\"); } private void OnConnected(MqttServerClientConnectedEventArgs args) { Console.WriteLine(args.ClientId); } // æ¶ˆæ¯æ¨é€æ–¹æ³• MqttHelper.PublishAsync(\"monitor\", JsonConvert.SerializeObject(new { expectedData, actualData })); æ·»åŠ MqttHelperç±»ï¼š using MQTTnet.Server; using System.Text; namespace Common { public class MqttHelper { public static IMqttServer Server { get; set; } public static void PublishAsync(string topic, byte[] payload) { if (Server != null) { Server.PublishAsync(new MQTTnet.MqttApplicationMessage() { Topic = topic, Payload = payload }, new System.Threading.CancellationToken(false)); } } public static void PublishAsync(string topic, string payload) { if (Server != null) { Server.PublishAsync(new MQTTnet.MqttApplicationMessage() { Topic = topic, Payload = Encoding.UTF8.GetBytes(payload) }, new System.Threading.CancellationToken(false)); ; } } } } å®¢æœç«¯å¼€å‘ é¦–å…ˆéœ€è¦å¼•å…¥npmåŒ…ï¼šnpm install mqtt import mqtt from \"mqtt\"; // è¿æ¥MqttæœåŠ¡å™¨ï¼Œå¹¶è®¢é˜…æ¶ˆæ¯ mounted() { let that = this; let mqttClient = mqtt.connect(\"ws://localhost:8988/mqtt\", { username: \"ç”¨æˆ·å\", password: \"å¯†ç \", clientId: \"å®¢æˆ·ç«¯ID\", }); mqttClient.on(\"connect\", (e) =\u003e { console.log(\"connected\", e); mqttClient.subscribe(\"monitor\", { qos: 1 }, (err) =\u003e { if (!err) { console.log(\"subscribed\"); } }); }); mqttClient.on(\"message\", (topic, message) =\u003e { console.log(topic, message.toString()); that.lineChartData = JSON.parse(message.toString()); }); }, ","date":"2022-03-19","objectID":"/%E5%AE%9E%E7%8E%B0%E7%AE%80%E5%8D%95%E6%B6%88%E6%81%AF%E6%8E%A8%E9%80%81%E5%8A%9F%E8%83%BD/:3:2","tags":["æ¶ˆæ¯æ¨é€",".NET"],"title":"å®ç°ç®€å•æ¶ˆæ¯æ¨é€åŠŸèƒ½","uri":"/%E5%AE%9E%E7%8E%B0%E7%AE%80%E5%8D%95%E6%B6%88%E6%81%AF%E6%8E%A8%E9%80%81%E5%8A%9F%E8%83%BD/"},{"categories":["å®è·µç¬”è®°"],"content":"å…¶ä»– Vueå‰ç«¯æµ‹è¯•å®¢æˆ·ç«¯å…¨éƒ¨ä»£ç ï¼Œé€šè¿‡Vue-cliæ­å»ºçš„é¡¹ç›®ï¼Œä¿®æ”¹App.vueå³å¯ \u003ctemplate\u003e \u003cdiv id=\"app\"\u003e \u003cimg alt=\"Vue logo\" src=\"./assets/logo.png\" /\u003e \u003cHelloWorld msg=\"Welcome to Your Vue.js App\" /\u003e \u003c/div\u003e \u003c/template\u003e \u003cscript\u003e import HelloWorld from \"./components/HelloWorld.vue\"; import mqtt from \"mqtt\"; import Stomp from \"stompjs\"; export default { name: \"App\", components: { HelloWorld, }, data() { return { rabbitClient: Stomp.client(\"ws://172.21.30.233:15674/ws\"), }; }, created() {}, mounted() { // this.useMqtt(); // this.useRabbitMQ(); this.useSignalR(); }, methods: { useSignalR() { const signalR = require(\"@microsoft/signalr\"); const conn = new signalR.HubConnectionBuilder() .withUrl(\"http://172.21.30.233:8988/chatHub\") .withAutomaticReconnect() .configureLogging(signalR.LogLevel.Error) .build(); conn .start() .then(() =\u003e { console.log(\"conneted\"); conn.invoke(\"AddToGroup\", \"å¤§å±\").catch(function (err) { return console.error(err.toString()); }); conn.on(\"ReceiveMessageFromGroup\", function (group, message) { console.log(group + \" \" + message); }); }) .catch((err) =\u003e { return console.error(err.toString()); }); }, useMqtt() { let mqttClient = mqtt.connect(\"ws://172.21.30.233:8988/mqtt\", { username: \"admin\", password: \"123456\", // clientId: \"Lesan\", }); mqttClient.on(\"connect\", (e) =\u003e { console.log(\"connected\", e); mqttClient.subscribe(\"monitor\", { qos: 1 }, (err) =\u003e { if (!err) { console.log(\"subscribed\"); } }); }); mqttClient.on(\"message\", (topic, message) =\u003e { console.log(topic, message.toString()); }); }, useRabbitMQ() { // this.rabbitClient.heartbeat.outgoing = 0; // this.rabbitClient.heartbeat.incoming = 0; this.rabbitClient.connect( \"KB\", \"KB\", this.onConnected, this.onFailed, \"kb_monitor\" ); }, onConnected: function () { //è®¢é˜…é¢‘é“ // const topic = localStorage.getItem(\"Lesan\"); console.log(\"è¿æ¥æˆåŠŸ\"); this.rabbitClient.subscribe( \"/exchange/monitor/message\", this.responseCallback, this.onFailed ); }, onFailed: function (frame) { console.log(\"MQ Failed: \" + frame); this.$message.error(\"è¿æ¥å¤±è´¥\"); }, // å›ä¼ æ¶ˆæ¯ responseCallback: function (frame) { console.log(\"MQ msg=\u003e\" + frame.body); //æ¥æ”¶æ¶ˆæ¯å¤„ç† }, // æ–­å¼€ç›¸åº”çš„è¿æ¥ close: function () { this.rabbitClient.disconnect(function () { console.log(\"å·²é€€å‡ºè´¦å·\"); }); }, }, }; \u003c/script\u003e \u003cstyle\u003e #app { font-family: Avenir, Helvetica, Arial, sans-serif; -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; text-align: center; color: #2c3e50; margin-top: 60px; } \u003c/style\u003e ","date":"2022-03-19","objectID":"/%E5%AE%9E%E7%8E%B0%E7%AE%80%E5%8D%95%E6%B6%88%E6%81%AF%E6%8E%A8%E9%80%81%E5%8A%9F%E8%83%BD/:4:0","tags":["æ¶ˆæ¯æ¨é€",".NET"],"title":"å®ç°ç®€å•æ¶ˆæ¯æ¨é€åŠŸèƒ½","uri":"/%E5%AE%9E%E7%8E%B0%E7%AE%80%E5%8D%95%E6%B6%88%E6%81%AF%E6%8E%A8%E9%80%81%E5%8A%9F%E8%83%BD/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"RabbitMQç®€è¿° MQå…¨ç§°ä¸ºMessage Queue, æ¶ˆæ¯é˜Ÿåˆ—ï¼ˆMQï¼‰æ˜¯ä¸€ç§åº”ç”¨ç¨‹åºå¯¹åº”ç”¨ç¨‹åºçš„é€šä¿¡æ–¹æ³•ã€‚RabbitMQæ˜¯ä¸€ä¸ªåœ¨AMQPåŸºç¡€ä¸Šå®Œæ•´çš„ï¼Œå¯å¤ç”¨çš„ä¼ä¸šæ¶ˆæ¯ç³»ç»Ÿã€‚ä»–éµå¾ªMozilla Public Licenseå¼€æºåè®®ã€‚AMQP(é«˜çº§æ¶ˆæ¯é˜Ÿåˆ—åè®®) æ˜¯ä¸€ä¸ªå¼‚æ­¥æ¶ˆæ¯ä¼ é€’æ‰€ä½¿ç”¨çš„åº”ç”¨å±‚åè®®è§„èŒƒï¼Œä½œä¸ºçº¿è·¯å±‚åè®®ï¼Œè€Œä¸æ˜¯APIï¼ˆä¾‹å¦‚JMSï¼‰ï¼ŒAMQP å®¢æˆ·ç«¯èƒ½å¤Ÿæ— è§†æ¶ˆæ¯çš„æ¥æºä»»æ„å‘é€å’Œæ¥å—ä¿¡æ¯ã€‚AMQPçš„åŸå§‹ç”¨é€”åªæ˜¯ä¸ºé‡‘èç•Œæä¾›ä¸€ä¸ªå¯ä»¥å½¼æ­¤åä½œçš„æ¶ˆæ¯åè®®ï¼Œè€Œç°åœ¨çš„ç›®æ ‡åˆ™æ˜¯ä¸ºé€šç”¨æ¶ˆæ¯é˜Ÿåˆ—æ¶æ„æä¾›é€šç”¨æ„å»ºå·¥å…·ã€‚å› æ­¤ï¼Œé¢å‘æ¶ˆæ¯çš„ä¸­é—´ä»¶ ï¼ˆMOMï¼‰ç³»ç»Ÿï¼Œä¾‹å¦‚å‘å¸ƒ/è®¢é˜…é˜Ÿåˆ—ï¼Œæ²¡æœ‰ä½œä¸ºåŸºæœ¬å…ƒç´ å®ç°ã€‚AMQPå½“ä¸­æœ‰å››ä¸ªæ¦‚å¿µéå¸¸é‡è¦ï¼ˆä¸€ä¸ªè™šæ‹Ÿä¸»æœºæŒæœ‰ä¸€ç»„äº¤æ¢æœºã€é˜Ÿåˆ—å’Œç»‘å®šï¼‰ï¼š virtual hostï¼Œè™šæ‹Ÿä¸»æœº exchangeï¼Œäº¤æ¢æœº queueï¼Œé˜Ÿåˆ— bindingï¼Œç»‘å®š ","date":"2022-02-17","objectID":"/rabbitmq%E5%AD%A6%E4%B9%A0/:1:0","tags":["RabbitMQ",".NET"],"title":"RabbitMQå­¦ä¹ ","uri":"/rabbitmq%E5%AD%A6%E4%B9%A0/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"æ¶ˆæ¯ä¼ é€’è¿‡ç¨‹ ä¸Šå›¾ä¸ºRabbitMQä¸­ä¸€äº›é‡è¦åè¯çš„æ¦‚è¿°ï¼Œå…¶ä¸­åŒ…æ‹¬Connectionã€Channelã€Exchangeã€Queueã€Bindã€Routing Key ä¸Šå›¾ä¸ºæ¶ˆæ¯ä»ç”Ÿäº§åˆ°æ¶ˆè´¹çš„æ•´ä¸ªæµç¨‹ï¼Œå…¶ä¸­Exchangeï¼Œä¸Queueéƒ½æ˜¯å¯ä»¥è®¾ç½®ç›¸å…³å±æ€§ï¼Œé˜Ÿåˆ—çš„æŒä¹…åŒ–ï¼Œäº¤æ¢å™¨ç±»å‹åˆ¶å®š è¿™ä¸ªè¿‡ç¨‹èµ°åˆ†ä¸‰ä¸ªéƒ¨åˆ†ï¼Œ1ã€å®¢æˆ·ç«¯ï¼ˆç”Ÿäº§æ¶ˆæ¯é˜Ÿåˆ—ï¼‰ï¼Œ2ã€RabbitMQæœåŠ¡ç«¯ï¼ˆè´Ÿè´£è·¯ç”±è§„åˆ™çš„ç»‘å®šä¸æ¶ˆæ¯çš„åˆ†å‘ï¼‰ï¼Œ3ã€å®¢æˆ·ç«¯ï¼ˆæ¶ˆè´¹æ¶ˆæ¯é˜Ÿåˆ—ä¸­çš„æ¶ˆæ¯ï¼‰ ç”±å›¾å¯ä»¥çœ‹å‡ºï¼Œä¸€ä¸ªæ¶ˆæ¯å¯ä»¥èµ°ä¸€æ¬¡ç½‘ç»œå´è¢«åˆ†å‘åˆ°ä¸åŒçš„æ¶ˆæ¯é˜Ÿåˆ—ä¸­ï¼Œç„¶åè¢«å¤šä¸ªçš„å®¢æˆ·ç«¯æ¶ˆè´¹ï¼Œé‚£ä¹ˆè¿™ä¸ªè¿‡ç¨‹å°±æ˜¯RabbitMQçš„æ ¸å¿ƒæœºåˆ¶ï¼ŒRabbitMQçš„è·¯ç”±ç±»å‹ä¸æ¶ˆè´¹æ¨¡å¼ ","date":"2022-02-17","objectID":"/rabbitmq%E5%AD%A6%E4%B9%A0/:2:0","tags":["RabbitMQ",".NET"],"title":"RabbitMQå­¦ä¹ ","uri":"/rabbitmq%E5%AD%A6%E4%B9%A0/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"RabbitMQä¸­Exchangeçš„ç±»å‹ ç±»å‹æœ‰4ç§ï¼Œdirectï¼Œfanoutï¼Œtopicï¼Œheadersã€‚å…¶ä¸­headersä¸å¸¸ç”¨ï¼Œæœ¬ç¯‡ä¸åšä»‹ç»ï¼Œå…¶ä»–ä¸‰ç§ç±»å‹ï¼Œä¼šåšè¯¦ç»†ä»‹ç»ã€‚ é‚£ä¹ˆè¿™äº›ç±»å‹æ˜¯ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿå°±æ˜¯Exchangeä¸é˜Ÿåˆ—è¿›è¡Œç»‘å®šåï¼Œæ¶ˆæ¯æ ¹æ®exchangçš„ç±»å‹ï¼ŒæŒ‰ç…§ä¸åŒçš„ç»‘å®šè§„åˆ™åˆ†å‘æ¶ˆæ¯åˆ°æ¶ˆæ¯é˜Ÿåˆ—ä¸­ï¼Œå¯ä»¥æ˜¯ä¸€ä¸ªæ¶ˆæ¯è¢«åˆ†å‘ç»™å¤šä¸ªæ¶ˆæ¯é˜Ÿåˆ—ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªæ¶ˆæ¯åˆ†å‘åˆ°ä¸€ä¸ªæ¶ˆæ¯é˜Ÿåˆ—ã€‚å…·ä½“è¯·çœ‹ä¸‹æ–‡ã€‚ ä»‹ç»ä¹‹åˆè¿˜è¦è¯´ä¸‹RoutingKeyï¼Œè¿™æ˜¯ä¸ªä»€ä¹ˆç©æ„å‘¢ï¼Ÿä»–æ˜¯exchangeä¸æ¶ˆæ¯é˜Ÿåˆ—ç»‘å®šä¸­çš„ä¸€ä¸ªæ ‡è¯†ã€‚æœ‰äº›è·¯ç”±ç±»å‹ä¼šæŒ‰ç…§æ ‡è¯†å¯¹åº”æ¶ˆæ¯é˜Ÿåˆ—ï¼Œæœ‰äº›è·¯ç”±ç±»å‹å¿½ç•¥routingkeyã€‚å…·ä½“çœ‹ä¸‹æ–‡ã€‚ ","date":"2022-02-17","objectID":"/rabbitmq%E5%AD%A6%E4%B9%A0/:3:0","tags":["RabbitMQ",".NET"],"title":"RabbitMQå­¦ä¹ ","uri":"/rabbitmq%E5%AD%A6%E4%B9%A0/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"Exchangeç±»å‹direct æ ¹æ®äº¤æ¢å™¨åç§°ä¸routingkeyæ¥æ‰¾é˜Ÿåˆ—çš„ Note:æ¶ˆæ¯ä»clientå‘å‡ºï¼Œä¼ é€ç»™äº¤æ¢å™¨ChangeAï¼ŒRoutingKeyä¸ºroutingkey.ZLH,é‚£ä¹ˆä¸ç®¡ä½ å‘é€ç»™Queue1ï¼Œè¿˜æ˜¯Queue2ä¸€ä¸ªæ¶ˆæ¯éƒ½ä¼šä¿å­˜åœ¨Queue1ï¼ŒQueue2ï¼ŒQueue3ï¼Œä¸‰ä¸ªé˜Ÿåˆ—ä¸­ã€‚è¿™å°±æ˜¯äº¤æ¢å™¨çš„directç±»å‹çš„è·¯ç”±è§„åˆ™ã€‚åªè¦æ‰¾åˆ°è·¯ç”±å™¨ä¸routingkeyç»‘å®šçš„é˜Ÿåˆ—ï¼Œé‚£ä¹ˆä»–æœ‰å¤šå°‘é˜Ÿåˆ—ï¼Œä»–å°±åˆ†å‘ç»™å¤šå°‘é˜Ÿåˆ—ã€‚ ","date":"2022-02-17","objectID":"/rabbitmq%E5%AD%A6%E4%B9%A0/:3:1","tags":["RabbitMQ",".NET"],"title":"RabbitMQå­¦ä¹ ","uri":"/rabbitmq%E5%AD%A6%E4%B9%A0/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"Exchangeç±»å‹fanout è¿™ä¸ªç±»å‹å¿½ç•¥Routingkeyï¼Œä»–ä¸ºå¹¿æ’­æ¨¡å¼ Note:æ¶ˆæ¯ä»å®¢æˆ·ç«¯å‘å‡ºï¼Œåªè¦queueä¸exchangeæœ‰ç»‘å®šï¼Œé‚£ä¹ˆä»–ä¸ç®¡ä½ çš„Routingkeyæ˜¯ä»€ä¹ˆä»–éƒ½ä¼šå°†æ¶ˆæ¯åˆ†å‘ç»™æ‰€æœ‰ä¸è¯¥exchangç»‘å®šçš„é˜Ÿåˆ—ä¸­ã€‚ ","date":"2022-02-17","objectID":"/rabbitmq%E5%AD%A6%E4%B9%A0/:3:2","tags":["RabbitMQ",".NET"],"title":"RabbitMQå­¦ä¹ ","uri":"/rabbitmq%E5%AD%A6%E4%B9%A0/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"Exchangeç±»å‹topic è¿™ä¸ªç±»å‹çš„è·¯ç”±è§„åˆ™å¦‚æœä½ æŒæ¡å•¦ï¼Œé‚£æ˜¯ç›¸å½“çš„å¥½ç”¨ï¼Œä¸çµæ´»ã€‚ä»–æ˜¯æ ¹æ®RoutingKeyçš„è®¾ç½®ï¼Œæ¥åšåŒ¹é…çš„ï¼Œå…¶ä¸­è¿™é‡Œè¿˜æœ‰ä¸¤ä¸ªé€šé…ç¬¦ä¸ºï¼š *ï¼Œä»£è¡¨ä»»æ„çš„ä¸€ä¸ªè¯ã€‚ä¾‹å¦‚topic.zlh.*ï¼Œä»–èƒ½å¤ŸåŒ¹é…åˆ°ï¼Œtopic.zlh.one ,topic.zlh.two ,topic.zlh.abc, â€¦. #ï¼Œä»£è¡¨ä»»æ„å¤šä¸ªè¯ã€‚ä¾‹å¦‚topic.#ï¼Œä»–èƒ½å¤ŸåŒ¹é…åˆ°ï¼Œtopic.zlh.one ,topic.zlh.two ,topic.zlh.abc, â€¦. Noteï¼šè¿™ä¸ªå›¾çœ‹ä¸Šå»å¾ˆä¹±ï¼Œä½†æ˜¯ä»–æ˜¯æ ¹æ®åŒ¹é…ç¬¦åšåŒ¹é…çš„ï¼Œè¿™é‡Œæˆ‘å»ºè®®ä½ è‡ªå·±åšä¸‹æ¶ˆæ¯é˜Ÿåˆ—çš„å…·ä½“æ“ä½œã€‚ ","date":"2022-02-17","objectID":"/rabbitmq%E5%AD%A6%E4%B9%A0/:3:3","tags":["RabbitMQ",".NET"],"title":"RabbitMQå­¦ä¹ ","uri":"/rabbitmq%E5%AD%A6%E4%B9%A0/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"æ¶ˆæ¯é˜Ÿåˆ—çš„æ¶ˆè´¹ä¸æ¶ˆæ¯ç¡®è®¤ ","date":"2022-02-17","objectID":"/rabbitmq%E5%AD%A6%E4%B9%A0/:4:0","tags":["RabbitMQ",".NET"],"title":"RabbitMQå­¦ä¹ ","uri":"/rabbitmq%E5%AD%A6%E4%B9%A0/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"æ¶ˆæ¯é˜Ÿåˆ—çš„æ¶ˆè´¹ Note:å¦‚æœä¸€ä¸ªæ¶ˆæ¯é˜Ÿåˆ—ä¸­æœ‰å¤§é‡æ¶ˆæ¯ç­‰å¾…æ“ä½œæ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨å¤šä¸ªå®¢æˆ·ç«¯æ¥å¤„ç†æ¶ˆæ¯ï¼Œè¿™é‡Œçš„åˆ†å‘æœºåˆ¶æ˜¯é‡‡ç”¨è´Ÿè½½å‡è¡¡ç®—æ³•ä¸­çš„è½®è¯¢ã€‚ç¬¬ä¸€ä¸ªæ¶ˆæ¯ç»™Aï¼Œä¸‹ä¸€ä¸ªæ¶ˆæ¯ç»™Bï¼Œä¸‹ä¸‹ä¸€ä¸ªæ¶ˆæ¯ç»™Aï¼Œä¸‹ä¸‹ä¸‹ä¸€ä¸ªæ¶ˆæ¯ç»™Bâ€¦â€¦ä»¥æ­¤ç±»æ¨ ","date":"2022-02-17","objectID":"/rabbitmq%E5%AD%A6%E4%B9%A0/:4:1","tags":["RabbitMQ",".NET"],"title":"RabbitMQå­¦ä¹ ","uri":"/rabbitmq%E5%AD%A6%E4%B9%A0/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"æ¶ˆæ¯ç¡®è®¤ ä¿è¯æ¶ˆæ¯çš„å®‰å…¨æ€§ï¼Œä¿è¯æ­¤æ¶ˆæ¯è¢«æ­£ç¡®å¤„ç†åæ‰èƒ½åœ¨æœåŠ¡ç«¯çš„æ¶ˆæ¯é˜Ÿåˆ—ä¸­åˆ é™¤ã€‚é‚£ä¹ˆrabbitmqæä¾›å•¦ackåº”ç­”æœºåˆ¶ï¼Œæ¥å®ç°è¿™ä¸€åŠŸèƒ½ã€‚ ackåº”ç­”æœ‰ä¸¤ç§æ–¹å¼ï¼š1ã€è‡ªåŠ¨åº”ç­”ï¼Œ2ã€æ‰‹åŠ¨åº”ç­” ","date":"2022-02-17","objectID":"/rabbitmq%E5%AD%A6%E4%B9%A0/:4:2","tags":["RabbitMQ",".NET"],"title":"RabbitMQå­¦ä¹ ","uri":"/rabbitmq%E5%AD%A6%E4%B9%A0/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"ä½¿ç”¨ä¾‹å­ ","date":"2022-02-17","objectID":"/rabbitmq%E5%AD%A6%E4%B9%A0/:5:0","tags":["RabbitMQ",".NET"],"title":"RabbitMQå­¦ä¹ ","uri":"/rabbitmq%E5%AD%A6%E4%B9%A0/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"ç”Ÿäº§è€… using RabbitMQ.Client; using System; using System.Text; namespace RabbitMQProduct { internal class Program { static void Main(string[] args) { Console.WriteLine(\"Welcome to RabbitMQ Product!\"); DirectExchangeSendMsg(); // TopicExchangeSendMsg(); Console.WriteLine(\"æŒ‰ä»»æ„å€¼ï¼Œé€€å‡ºç¨‹åº\"); Console.ReadKey(); } /// \u003csummary\u003e /// è¿æ¥é…ç½® /// \u003c/summary\u003e private static readonly ConnectionFactory rabbitMqFactory = new ConnectionFactory() { UserName = \"guest\", Password = \"guest\", Port = 5672, //VirtualHost = \"LesanVirtualHost\" }; /// \u003csummary\u003e /// è·¯ç”±åç§° /// \u003c/summary\u003e const string ExchangeName = \"Lesan.exchange\"; //é˜Ÿåˆ—åç§° const string QueueName = \"Lesan.queue\"; /// \u003csummary\u003e /// è·¯ç”±åç§° /// \u003c/summary\u003e const string TopExchangeName = \"topic.Lesan.exchange\"; //é˜Ÿåˆ—åç§° const string TopQueueName = \"topic.Lesan.queue\"; /// \u003csummary\u003e /// å•ç‚¹ç²¾ç¡®è·¯ç”±æ¨¡å¼ /// \u003c/summary\u003e public static void DirectExchangeSendMsg() { using (IConnection conn = rabbitMqFactory.CreateConnection()) { using (IModel channel = conn.CreateModel()) { //è®¾ç½®äº¤æ¢å™¨çš„ç±»å‹ channel.ExchangeDeclare(ExchangeName, ExchangeType.Direct, durable: true, autoDelete: false, arguments: null); //å£°æ˜ä¸€ä¸ªé˜Ÿåˆ—ï¼Œè®¾ç½®é˜Ÿåˆ—æ˜¯å¦æŒä¹…åŒ–ï¼Œæ’ä»–æ€§ï¼Œä¸è‡ªåŠ¨åˆ é™¤ channel.QueueDeclare(QueueName, durable: true, autoDelete: false, exclusive: false, arguments: null); //ç»‘å®šæ¶ˆæ¯é˜Ÿåˆ—ï¼Œäº¤æ¢å™¨ï¼Œroutingkey channel.QueueBind(QueueName, ExchangeName, routingKey: QueueName); var props = channel.CreateBasicProperties(); //é˜Ÿåˆ—æŒä¹…åŒ– props.Persistent = true; string vadata = Console.ReadLine(); while (vadata != \"exit\") { var msgBody = Encoding.UTF8.GetBytes(vadata); //å‘é€ä¿¡æ¯ channel.BasicPublish(exchange: ExchangeName, routingKey: QueueName, basicProperties: props, body: msgBody); Console.WriteLine(string.Format(\"***å‘é€æ—¶é—´:{0}ï¼Œå‘é€å®Œæˆï¼Œè¾“å…¥exité€€å‡ºæ¶ˆæ¯å‘é€\", DateTime.Now.ToString(\"yyyy-MM-dd HH:mm:ss\"))); vadata = Console.ReadLine(); } } } } /// \u003csummary\u003e /// topic æ¨¡ç³ŠåŒ¹é…æ¨¡å¼ï¼Œç¬¦å·â€œ#â€åŒ¹é…ä¸€ä¸ªæˆ–å¤šä¸ªè¯ï¼Œç¬¦å·â€œ*â€åŒ¹é…ä¸å¤šä¸å°‘ä¸€ä¸ªè¯ã€‚å› æ­¤â€œlog.#â€èƒ½å¤ŸåŒ¹é…åˆ°â€œlog.info.oaâ€ï¼Œä½†æ˜¯â€œlog.*â€ åªä¼šåŒ¹é…åˆ°â€œlog.errorâ€ /// \u003c/summary\u003e public static void TopicExchangeSendMsg() { using (IConnection conn = rabbitMqFactory.CreateConnection()) { using (IModel channel = conn.CreateModel()) { channel.ExchangeDeclare(TopExchangeName, ExchangeType.Topic, durable: false, autoDelete: false, arguments: null); channel.QueueDeclare(TopQueueName, durable: false, autoDelete: false, exclusive: false, arguments: null); channel.QueueBind(TopQueueName, TopExchangeName, routingKey: TopQueueName); //var props = channel.CreateBasicProperties(); //props.Persistent = true; string vadata = Console.ReadLine(); while (vadata != \"exit\") { var msgBody = Encoding.UTF8.GetBytes(vadata); channel.BasicPublish(exchange: TopExchangeName, routingKey: TopQueueName, basicProperties: null, body: msgBody); Console.WriteLine(string.Format(\"***å‘é€æ—¶é—´:{0}ï¼Œå‘é€å®Œæˆï¼Œè¾“å…¥exité€€å‡ºæ¶ˆæ¯å‘é€\", DateTime.Now.ToString(\"yyyy-MM-dd HH:mm:ss\"))); vadata = Console.ReadLine(); } } } } } } ","date":"2022-02-17","objectID":"/rabbitmq%E5%AD%A6%E4%B9%A0/:5:1","tags":["RabbitMQ",".NET"],"title":"RabbitMQå­¦ä¹ ","uri":"/rabbitmq%E5%AD%A6%E4%B9%A0/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"æ¶ˆè´¹è€… using RabbitMQ.Client; using RabbitMQ.Client.Events; using System; using System.Text; namespace RabbitMQConsumer { internal class Program { static void Main(string[] args) { Console.WriteLine(\"Welcome to RabbitMQ Consumer!\"); //DirectAcceptExchange(); //DirectAcceptExchangeEvent(); DirectAcceptExchangeTask(); //TopicAcceptExchange(); Console.WriteLine(\"æŒ‰ä»»æ„å€¼ï¼Œé€€å‡ºç¨‹åº\"); Console.ReadKey(); } /// \u003csummary\u003e /// è¿æ¥é…ç½® /// \u003c/summary\u003e private static readonly ConnectionFactory rabbitMqFactory = new ConnectionFactory() { UserName = \"guest\", Password = \"guest\", Port = 5672, //VirtualHost = \"LesanVirtualHost\" }; /// \u003csummary\u003e /// è·¯ç”±åç§° /// \u003c/summary\u003e const string ExchangeName = \"Lesan.exchange\"; //é˜Ÿåˆ—åç§° const string QueueName = \"Lesan.queue\"; /// \u003csummary\u003e /// è·¯ç”±åç§° /// \u003c/summary\u003e const string TopExchangeName = \"topic.Lesan.exchange\"; //é˜Ÿåˆ—åç§° const string TopQueueName = \"topic.Lesan.queue\"; /// \u003csummary\u003e /// åŸºäºæ—¶é—´è½®è¯¢çš„ï¼Œæ¯éš”ä¸€æ®µæ—¶é—´è·å–ä¸€æ¬¡ /// \u003c/summary\u003e public static void DirectAcceptExchange() { using (IConnection conn = rabbitMqFactory.CreateConnection()) { using (IModel channel = conn.CreateModel()) { //è®¾ç½®äº¤æ¢å™¨çš„ç±»å‹ channel.ExchangeDeclare(ExchangeName, ExchangeType.Direct, durable: true, autoDelete: false, arguments: null); //å£°æ˜ä¸€ä¸ªé˜Ÿåˆ—ï¼Œè®¾ç½®é˜Ÿåˆ—æ˜¯å¦æŒä¹…åŒ–ï¼Œæ’ä»–æ€§ï¼Œä¸è‡ªåŠ¨åˆ é™¤ channel.QueueDeclare(QueueName, durable: true, autoDelete: false, exclusive: false, arguments: null); //ç»‘å®šæ¶ˆæ¯é˜Ÿåˆ—ï¼Œäº¤æ¢å™¨ï¼Œroutingkey channel.QueueBind(QueueName, ExchangeName, routingKey: QueueName); while (true) { BasicGetResult msgResponse = channel.BasicGet(QueueName, true); if (msgResponse != null) { var msgBody = Encoding.UTF8.GetString(msgResponse.Body.ToArray()); Console.WriteLine(string.Format(\"***æ¥æ”¶æ—¶é—´:{0}ï¼Œæ¶ˆæ¯å†…å®¹ï¼š{1}\", DateTime.Now.ToString(\"yyyy-MM-dd HH:mm:ss\"), msgBody)); } System.Threading.Thread.Sleep(TimeSpan.FromSeconds(1)); } } } } /// \u003csummary\u003e /// åŸºäºäº‹ä»¶çš„ï¼Œå½“æ¶ˆæ¯åˆ°è¾¾æ—¶è§¦å‘äº‹ä»¶ï¼Œè·å–æ•°æ® /// \u003c/summary\u003e public static void DirectAcceptExchangeEvent() { using (IConnection conn = rabbitMqFactory.CreateConnection()) { using (IModel channel = conn.CreateModel()) { //channel.ExchangeDeclare(ExchangeName, \"direct\", durable: true, autoDelete: false, arguments: null); channel.QueueDeclare(QueueName, durable: true, autoDelete: false, exclusive: false, arguments: null); //channel.QueueBind(QueueName, ExchangeName, routingKey: QueueName); var consumer = new EventingBasicConsumer(channel); consumer.Received += (model, ea) =\u003e { var msgBody = Encoding.UTF8.GetString(ea.Body.ToArray()); Console.WriteLine(string.Format(\"***æ¥æ”¶æ—¶é—´:{0}ï¼Œæ¶ˆæ¯å†…å®¹ï¼š{1}\", DateTime.Now.ToString(\"yyyy-MM-dd HH:mm:ss\"), msgBody)); }; channel.BasicConsume(QueueName, true, consumer: consumer); Console.WriteLine(\"æŒ‰ä»»æ„å€¼ï¼Œé€€å‡ºç¨‹åº\"); Console.ReadKey(); } } } /// \u003csummary\u003e /// åŸºäºäº‹ä»¶çš„ï¼Œå½“æ¶ˆæ¯åˆ°è¾¾æ—¶è§¦å‘äº‹ä»¶ï¼Œè·å–æ•°æ® /// \u003c/summary\u003e public static void DirectAcceptExchangeTask() { using (IConnection conn = rabbitMqFactory.CreateConnection()) { using (IModel channel = conn.CreateModel()) { //channel.ExchangeDeclare(ExchangeName, \"direct\", durable: true, autoDelete: false, arguments: null); channel.QueueDeclare(QueueName, durable: true, autoDelete: false, exclusive: false, arguments: null); channel.BasicQos(prefetchSize: 0, prefetchCount: 1, global: false);//å‘Šè¯‰brokeråŒä¸€æ—¶é—´åªå¤„ç†ä¸€ä¸ªæ¶ˆæ¯ //channel.QueueBind(QueueName, ExchangeName, routingKey: QueueName); //å®šä¹‰è¿™ä¸ªé˜Ÿåˆ—çš„æ¶ˆè´¹è€… var consumer = new EventingBasicConsumer(channel); consumer.Received += (model, ea) =\u003e { var msgBody = Encoding.UTF8.GetString(ea.Body.ToArray()); Console.WriteLine(string.Format(\"***æ¥æ”¶æ—¶é—´:{0}ï¼Œæ¶ˆæ¯å†…å®¹ï¼š{1}\", DateTime.Now.ToString(\"yyyy-MM-dd HH:mm:ss\"), msgBody)); int dots = msgBody.Split('.').Length - 1; System.Threading.Thread.Sleep(dots * 1000); //å¤„ç†å®Œæˆï¼Œå‘Šè¯‰Brokerå¯ä»¥æœåŠ¡ç«¯å¯ä»¥åˆ é™¤æ¶ˆæ¯ï¼Œåˆ†é…æ–°çš„æ¶ˆæ¯è¿‡æ¥ channel.BasicAck(deliveryTag: ea.DeliveryTag, multiple: false); }; //noAckè®¾ç½®false,å‘Šè¯‰brokerï¼Œå‘é€æ¶ˆæ¯ä¹‹åï¼Œæ¶ˆæ¯æš‚æ—¶ä¸è¦åˆ é™¤ï¼Œç­‰æ¶ˆè´¹è€…å¤„ç†å®Œæˆå†è¯´ //falseä¸ºæ‰‹åŠ¨åº”ç­”ï¼Œtrueä¸ºè‡ªåŠ¨åº”ç­” channel.BasicConsume(QueueName, false, consumer: consumer); Console.WriteLine(\"æŒ‰ä»»æ„å€¼ï¼Œé€€å‡ºç¨‹åº\"); Console.ReadKey(); } } } /// \u003csummary\u003e /// topic æ¨¡ç³ŠåŒ¹é…æ¨¡å¼ï¼Œç¬¦å·â€œ#â€åŒ¹é…ä¸€ä¸ªæˆ–å¤šä¸ªè¯ï¼Œç¬¦å·â€œ*â€åŒ¹é…ä¸å¤šä¸å°‘ä¸€ä¸ªè¯ã€‚å› æ­¤â€œlog.#â€èƒ½å¤ŸåŒ¹é…åˆ°â€œlog.info.oaâ€ï¼Œä½†æ˜¯â€œlog.*â€ åªä¼šåŒ¹é…åˆ°â€œlog.errorâ€ /","date":"2022-02-17","objectID":"/rabbitmq%E5%AD%A6%E4%B9%A0/:5:2","tags":["RabbitMQ",".NET"],"title":"RabbitMQå­¦ä¹ ","uri":"/rabbitmq%E5%AD%A6%E4%B9%A0/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"å¼•ç”¨ ä»¥ä¸Šç¬”è®°æ‘˜å½•è‡ªç½‘ç»œ https://www.cnblogs.com/knowledgesea/p/5296008.html https://www.cnblogs.com/personblog/p/10681741.html ","date":"2022-02-17","objectID":"/rabbitmq%E5%AD%A6%E4%B9%A0/:6:0","tags":["RabbitMQ",".NET"],"title":"RabbitMQå­¦ä¹ ","uri":"/rabbitmq%E5%AD%A6%E4%B9%A0/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"æœ¬æ–‡ä¸ºä¸ªäººå­¦ä¹ å’Œå®è·µ Nginx çš„ç¬”è®° ","date":"2022-02-16","objectID":"/nginx%E5%AD%A6%E4%B9%A0/:0:0","tags":["Nginx"],"title":"Nginxå­¦ä¹ ","uri":"/nginx%E5%AD%A6%E4%B9%A0/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"Nginx å¸¸ç”¨åŠŸèƒ½ Nginx æœ‰ä»¥ä¸‹å‡ ä¸ªå¸¸ç”¨åŠŸèƒ½ åå‘ä»£ç† è¿™æ˜¯å®ƒçš„ä¸»è¦åŠŸèƒ½ä¹‹ä¸€ï¼Œå®¢æˆ·ç«¯å‘æœåŠ¡å™¨å‘é€è¯·æ±‚æ—¶ï¼Œä¼šå…ˆé€šè¿‡ Nginx æœåŠ¡å™¨ï¼Œç”±æœåŠ¡å™¨å°†è¯·æ±‚åˆ†å‘åˆ°ç›¸åº”çš„WebæœåŠ¡å™¨ã€‚æ­£å‘ä»£ç†æ˜¯ä»£ç†å®¢æˆ·ç«¯ï¼Œè€Œåå‘ä»£ç†åˆ™æ˜¯ä»£ç†æœåŠ¡å™¨ï¼ŒNginx åœ¨æä¾›åå‘ä»£ç†æœåŠ¡æ–¹é¢ï¼Œé€šè¿‡ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼è¿›è¡Œç›¸å…³é…ç½®ï¼Œé‡‡å–ä¸åŒçš„è½¬å‘ç­–ç•¥ï¼Œé…ç½®ç›¸å½“çµæ´»ï¼Œè€Œä¸”åœ¨é…ç½®åç«¯è½¬å‘è¯·æ±‚æ—¶ï¼Œå®Œå…¨ä¸ç”¨å…³å¿ƒç½‘ç»œç¯å¢ƒå¦‚ä½•ï¼Œå¯ä»¥æŒ‡å®šä»»æ„çš„IPåœ°å€å’Œç«¯å£å·ï¼Œæˆ–å…¶ä»–ç±»å‹çš„è¿æ¥ã€è¯·æ±‚ç­‰ã€‚ è´Ÿè½½å‡è¡¡ è¿™ä¹Ÿæ˜¯ Nginx æœ€å¸¸ç”¨çš„åŠŸèƒ½ä¹‹ä¸€ï¼Œè´Ÿè½½å‡è¡¡ï¼Œä¸€æ–¹é¢æ˜¯å°†å•ä¸€çš„é‡è´Ÿè½½åˆ†æ‹…åˆ°å¤šä¸ªç½‘ç»œèŠ‚ç‚¹ä¸Šåšå¹¶è¡Œå¤„ç†ï¼Œæ¯ä¸ªèŠ‚ç‚¹å¤„ç†ç»“æŸåå°†ç»“æœæ±‡æ€»è¿”å›ç»™ç”¨æˆ·ï¼Œè¿™æ ·å¯ä»¥å¤§å¹…åº¦æé«˜ç½‘ç»œç³»ç»Ÿçš„å¤„ç†èƒ½åŠ›ï¼›å¦ä¸€æ–¹é¢å°†å¤§é‡çš„å‰ç«¯å¹¶å‘è¯·æ±‚æˆ–æ•°æ®æµé‡åˆ†æ‹…åˆ°å¤šä¸ªåç«¯ç½‘ç»œèŠ‚ç‚¹åˆ†åˆ«å¤„ç†ï¼Œè¿™æ ·å¯ä»¥æœ‰æ•ˆå‡å°‘å‰ç«¯ç”¨æˆ·ç­‰å¾…ç›¸åº”çš„æ—¶é—´ã€‚è€Œ Nginx è´Ÿè½½å‡è¡¡éƒ½æ˜¯å±äºåä¸€æ–¹é¢ï¼Œä¸»è¦æ˜¯å¯¹å¤§é‡å‰ç«¯è®¿é—®æˆ–æµé‡è¿›è¡Œåˆ†æµï¼Œå·²ä¿è¯å‰ç«¯ç”¨æˆ·è®¿é—®æ•ˆç‡ï¼Œå¹¶å¯ä»¥å‡å°‘åç«¯æœåŠ¡å™¨å¤„ç†å‹åŠ›ã€‚ Webç¼“å­˜ åœ¨å¾ˆå¤šä¼˜ç§€çš„ç½‘ç«™ä¸­ï¼ŒNginx å¯ä»¥ä½œä¸ºå‰ç½®ç¼“å­˜æœåŠ¡å™¨ï¼Œå®ƒè¢«ç”¨äºç¼“å­˜å‰ç«¯è¯·æ±‚ï¼Œä»è€Œæé«˜ WebæœåŠ¡å™¨çš„æ€§èƒ½ã€‚Nginx ä¼šå¯¹ç”¨æˆ·å·²ç»è®¿é—®è¿‡çš„å†…å®¹åœ¨æœåŠ¡å™¨æœ¬åœ°å»ºç«‹å‰¯æœ¬ï¼Œè¿™æ ·åœ¨ä¸€æ®µæ—¶é—´å†…å†æ¬¡è®¿é—®è¯¥æ•°æ®ï¼Œå°±ä¸éœ€è¦é€šè¿‡ Nginx æœåŠ¡å™¨å‘åç«¯å‘å‡ºè¯·æ±‚ã€‚å‡è½»ç½‘ç»œæ‹¥å µï¼Œå‡å°æ•°æ®ä¼ è¾“å»¶æ—¶ï¼Œæé«˜ç”¨æˆ·è®¿é—®é€Ÿåº¦ã€‚ ","date":"2022-02-16","objectID":"/nginx%E5%AD%A6%E4%B9%A0/:1:0","tags":["Nginx"],"title":"Nginxå­¦ä¹ ","uri":"/nginx%E5%AD%A6%E4%B9%A0/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"Nginx å®‰è£… ","date":"2022-02-16","objectID":"/nginx%E5%AD%A6%E4%B9%A0/:2:0","tags":["Nginx"],"title":"Nginxå­¦ä¹ ","uri":"/nginx%E5%AD%A6%E4%B9%A0/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"ä¸‹è½½åœ°å€ Nginx ä¸‹è½½åœ°å€ï¼šhttp://nginx.org/en/download.html ","date":"2022-02-16","objectID":"/nginx%E5%AD%A6%E4%B9%A0/:2:1","tags":["Nginx"],"title":"Nginxå­¦ä¹ ","uri":"/nginx%E5%AD%A6%E4%B9%A0/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"Windows ç‰ˆæœ¬å®‰è£… è§£å‹ä¸‹è½½çš„æ–‡ä»¶å ä¸‹é¢å¯¹ä¸Šé¢æ–‡ä»¶å¤¹è¿›è¡Œä»‹ç»ï¼š conf ç›®å½•ï¼šå­˜æ”¾ Nginx çš„ä¸»è¦é…ç½®æ–‡ä»¶ï¼Œå¾ˆå¤šåŠŸèƒ½å®ç°éƒ½æ˜¯é€šè¿‡é…ç½®è¯¥ç›®å½•ä¸‹çš„ nginx.conf æ–‡ä»¶ï¼Œåé¢æˆ‘ä»¬ä¼šè¯¦ç»†ä»‹ç»ã€‚ docsç›®å½•ï¼šå­˜æ”¾ Nginx æœåŠ¡å™¨çš„ä¸»è¦æ–‡æ¡£èµ„æ–™ï¼ŒåŒ…æ‹¬ Nginx æœåŠ¡å™¨çš„ LICENSEã€OpenSSL çš„ LICENSE ã€PCRE çš„ LICENSE ä»¥åŠ zlib çš„ LICENSE ï¼Œè¿˜åŒ…æ‹¬æœ¬ç‰ˆæœ¬çš„ NginxæœåŠ¡å™¨å‡çº§çš„ç‰ˆæœ¬å˜æ›´è¯´æ˜ï¼Œä»¥åŠ README æ–‡æ¡£ã€‚ htmlç›®å½•ï¼šå­˜æ”¾äº†ä¸¤ä¸ªåç¼€åä¸º .html çš„é™æ€ç½‘é¡µæ–‡ä»¶ï¼Œè¿™ä¸¤ä¸ªæ–‡ä»¶ä¸ Nginx æœåŠ¡å™¨çš„è¿è¡Œç›¸å…³ã€‚ logsç›®å½•ï¼šå­˜æ”¾ Nginx æœåŠ¡å™¨è¿è¡Œçš„æ—¥å¿—æ–‡ä»¶ã€‚ nginx.exeï¼šå¯åŠ¨ Nginx æœåŠ¡å™¨çš„exeæ–‡ä»¶ï¼Œå¦‚æœ conf ç›®å½•ä¸‹çš„ nginx.conf æ–‡ä»¶é…ç½®æ­£ç¡®çš„è¯ï¼Œé€šè¿‡è¯¥æ–‡ä»¶å³å¯å¯åŠ¨ Nginx æœåŠ¡å™¨ã€‚ å…³é—­ nginx çš„æ–¹æ³•ï¼š è¿›å…¥åˆ° nginx ç›®å½•å¹¶ä¸”è¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼šnginx.exe -s stop ","date":"2022-02-16","objectID":"/nginx%E5%AD%A6%E4%B9%A0/:2:2","tags":["Nginx"],"title":"Nginxå­¦ä¹ ","uri":"/nginx%E5%AD%A6%E4%B9%A0/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"Linux ç‰ˆæœ¬å®‰è£… é¦–å…ˆéœ€è¦å®‰è£… nginx çš„ä¾èµ–ç¯å¢ƒï¼š yum install gcc-c++ yum install -y pcre pcre-devel yum install -y zlib zlib-devel yum install -y openssl openssl-devel å¯¹äº gccï¼Œå› ä¸ºå®‰è£…nginxéœ€è¦å…ˆå°†å®˜ç½‘ä¸‹è½½çš„æºç è¿›è¡Œç¼–è¯‘ï¼Œç¼–è¯‘ä¾èµ–gccç¯å¢ƒï¼Œå¦‚æœæ²¡æœ‰gccç¯å¢ƒçš„è¯ï¼Œéœ€è¦å®‰è£…gccã€‚ å¯¹äº pcreï¼Œprce(Perl Compatible Regular Expressions)æ˜¯ä¸€ä¸ªPerlåº“ï¼ŒåŒ…æ‹¬ perl å…¼å®¹çš„æ­£åˆ™è¡¨è¾¾å¼åº“ã€‚nginxçš„httpæ¨¡å—ä½¿ç”¨pcreæ¥è§£ææ­£åˆ™è¡¨è¾¾å¼ï¼Œæ‰€ä»¥éœ€è¦åœ¨linuxä¸Šå®‰è£…pcreåº“ã€‚ å¯¹äº zlibï¼Œzlibåº“æä¾›äº†å¾ˆå¤šç§å‹ç¼©å’Œè§£å‹ç¼©çš„æ–¹å¼ï¼Œnginxä½¿ç”¨zlibå¯¹httpåŒ…çš„å†…å®¹è¿›è¡Œgzipï¼Œæ‰€ä»¥éœ€è¦åœ¨linuxä¸Šå®‰è£…zlibåº“ã€‚ å¯¹äº opensslï¼ŒOpenSSL æ˜¯ä¸€ä¸ªå¼ºå¤§çš„å®‰å…¨å¥—æ¥å­—å±‚å¯†ç åº“ï¼Œå›Šæ‹¬ä¸»è¦çš„å¯†ç ç®—æ³•ã€å¸¸ç”¨çš„å¯†é’¥å’Œè¯ä¹¦å°è£…ç®¡ç†åŠŸèƒ½åŠSSLåè®®ï¼Œå¹¶æä¾›ä¸°å¯Œçš„åº”ç”¨ç¨‹åºä¾›æµ‹è¯•æˆ–å…¶å®ƒç›®çš„ä½¿ç”¨ã€‚nginxä¸ä»…æ”¯æŒhttpåè®®ï¼Œè¿˜æ”¯æŒhttpsï¼ˆå³åœ¨sslåè®®ä¸Šä¼ è¾“httpï¼‰ï¼Œæ‰€ä»¥éœ€è¦åœ¨linuxå®‰è£…opensslåº“ã€‚ ç¼–è¯‘åŠå®‰è£…ï¼š 1. é¦–å…ˆå°†ä¸‹è½½çš„æ–‡ä»¶æ”¾åˆ° Linux ç³»ç»Ÿä¸­ï¼Œç„¶åè§£å‹ï¼š tar -zxvf nginx-1.14.0.tar.gz 2. æ¥ç€è¿›å…¥è§£å‹ä¹‹åçš„ç›®å½•è¿›è¡Œç¼–è¯‘å®‰è£… ./configure --prefix=/usr/local/nginx make make install 3. è¿›å…¥åˆ°/usr/local/nginxç›®å½•ï¼Œå†è¿›å…¥sbinç›®å½•ï¼Œé€šè¿‡ä»¥ä¸‹å‘½ä»¤å¯åŠ¨nginx: ./nginx é€šè¿‡ ps -ef | grep nginx æŸ¥çœ‹nginxçš„è¿›ç¨‹ 4. å…³é—­nginxï¼š å¿«é€Ÿå…³é—­ï¼šcd /usr/local/nginx/sbin ./nginx -s stop ç›¸å½“äºç›´æ¥killæ‰nginxçš„è¿›ç¨‹id å¹³ç¼“å…³é—­ï¼šcd /usr/local/nginx/sbin ./nginx -s quit ç­‰nginxæœåŠ¡å¤„ç†å®Œæ‰€æœ‰è¯·æ±‚åå†å…³é—­è¿æ¥ï¼Œåœæ­¢å·¥ä½œ 5. é‡å¯nginx å…ˆåœæ­¢å†å¯åŠ¨ï¼š./nginx -s quit ./nginx é‡æ–°åŠ è½½é…ç½®æ–‡ä»¶ï¼š./nginx -s reload 6. æ£€æµ‹é…ç½®æ–‡ä»¶è¯­æ³•æ˜¯å¦æ­£ç¡® æŒ‡å®šéœ€è¦æ£€æµ‹çš„é…ç½®æ–‡ä»¶ï¼šnginx -t -c /usr/local/nginx/conf/nginx.conf æ£€æµ‹é»˜è®¤nginx.confé…ç½®æ–‡ä»¶ï¼šnginx -t ","date":"2022-02-16","objectID":"/nginx%E5%AD%A6%E4%B9%A0/:2:3","tags":["Nginx"],"title":"Nginxå­¦ä¹ ","uri":"/nginx%E5%AD%A6%E4%B9%A0/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"nginx.conf é…ç½®æ–‡ä»¶ æ ¹æ®é»˜è®¤é…ç½®æ–‡ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥å°†nginx.confé…ç½®æ–‡ä»¶åˆ†ä¸ºä¸‰éƒ¨åˆ†ï¼š ","date":"2022-02-16","objectID":"/nginx%E5%AD%A6%E4%B9%A0/:3:0","tags":["Nginx"],"title":"Nginxå­¦ä¹ ","uri":"/nginx%E5%AD%A6%E4%B9%A0/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"å…¨å±€å— ä»é…ç½®æ–‡ä»¶å¼€å§‹åˆ° events å—ä¹‹é—´çš„å†…å®¹ï¼Œä¸»è¦ä¼šè®¾ç½®ä¸€äº›å½±å“ nginx æœåŠ¡å™¨æ•´ä½“è¿è¡Œçš„é…ç½®æŒ‡ä»¤ï¼Œä¸»è¦åŒ…æ‹¬é…ç½®è¿è¡Œ Nginx æœåŠ¡å™¨çš„ç”¨æˆ·ï¼ˆç»„ï¼‰ã€å…è®¸ç”Ÿæˆçš„ worker process æ•°ï¼Œè¿›ç¨‹ PID å­˜æ”¾è·¯å¾„ã€æ—¥å¿—å­˜æ”¾è·¯å¾„å’Œç±»å‹ä»¥åŠé…ç½®æ–‡ä»¶çš„å¼•å…¥ç­‰ã€‚ æ¯”å¦‚ï¼šworker_processes 1; è¿™æ˜¯NginxæœåŠ¡å™¨å¹¶å‘å¤„ç†æœåŠ¡çš„å…³é”®é…ç½®ï¼Œworker_processes å€¼è¶Šå¤§ï¼Œå¯ä»¥æ”¯æŒçš„å¹¶å‘å¤„ç†é‡ä¹Ÿè¶Šå¤šï¼Œä½†æ˜¯ä¼šå—åˆ°ç¡¬ä»¶ã€è½¯ä»¶ç­‰è®¾å¤‡çš„åˆ¶çº¦ã€‚ ","date":"2022-02-16","objectID":"/nginx%E5%AD%A6%E4%B9%A0/:3:1","tags":["Nginx"],"title":"Nginxå­¦ä¹ ","uri":"/nginx%E5%AD%A6%E4%B9%A0/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"events å— æ¯”å¦‚ï¼š events { worker_connections 1024; } events å—æ¶‰åŠçš„æŒ‡ä»¤ä¸»è¦å½±å“ Nginx æœåŠ¡å™¨ä¸ç”¨æˆ·çš„ç½‘ç»œè¿æ¥ï¼Œå¸¸ç”¨çš„è®¾ç½®åŒ…æ‹¬æ˜¯å¦å¼€å¯å¯¹å¤š work process ä¸‹çš„ç½‘ç»œè¿æ¥è¿›è¡Œåºåˆ—åŒ–ï¼Œæ˜¯å¦å…è®¸åŒæ—¶æ¥æ”¶å¤šä¸ªç½‘ç»œè¿æ¥ï¼Œé€‰å–å“ªç§äº‹ä»¶é©±åŠ¨æ¨¡å‹æ¥å¤„ç†è¿æ¥è¯·æ±‚ï¼Œæ¯ä¸ª word process å¯ä»¥åŒæ—¶æ”¯æŒçš„æœ€å¤§è¿æ¥æ•°ç­‰ã€‚ ä¸Šè¿°ä¾‹å­å°±è¡¨ç¤ºæ¯ä¸ª work process æ”¯æŒçš„æœ€å¤§è¿æ¥æ•°ä¸º 1024. è¿™éƒ¨åˆ†çš„é…ç½®å¯¹ Nginx çš„æ€§èƒ½å½±å“è¾ƒå¤§ï¼Œåœ¨å®é™…ä¸­åº”è¯¥çµæ´»é…ç½®ã€‚ ","date":"2022-02-16","objectID":"/nginx%E5%AD%A6%E4%B9%A0/:3:2","tags":["Nginx"],"title":"Nginxå­¦ä¹ ","uri":"/nginx%E5%AD%A6%E4%B9%A0/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"http å— http { include mime.types; default_type application/octet-stream; sendfile on; keepalive_timeout 65; server { listen 80; server_name localhost; location / { root html; index index.html index.htm; } error_page 500 502 503 504 /50x.html; location = /50x.html { root html; } } } è¿™æ˜¯NginxæœåŠ¡å™¨é…ç½®ä¸­æœ€é¢‘ç¹çš„éƒ¨åˆ†ï¼Œä»£ç†ã€ç¼“å­˜å’Œæ—¥å¿—å®šä¹‰ç­‰ç»å¤§å¤šæ•°åŠŸèƒ½å’Œç¬¬ä¸‰æ–¹æ¨¡å—çš„é…ç½®éƒ½åœ¨è¿™é‡Œã€‚ http å—ä¹Ÿå¯ä»¥åŒ…æ‹¬ httpå…¨å±€å—ã€server å—ï¼š httpå…¨å±€å— httpå…¨å±€å—é…ç½®çš„æŒ‡ä»¤åŒ…æ‹¬æ–‡ä»¶å¼•å…¥ã€MIME-TYPE å®šä¹‰ã€æ—¥å¿—è‡ªå®šä¹‰ã€è¿æ¥è¶…æ—¶æ—¶é—´ã€å•é“¾æ¥è¯·æ±‚æ•°ä¸Šé™ç­‰ã€‚ serverå— è¿™å—å’Œè™šæ‹Ÿä¸»æœºæœ‰å¯†åˆ‡å…³ç³»ï¼Œè™šæ‹Ÿä¸»æœºä»ç”¨æˆ·è§’åº¦çœ‹ï¼Œå’Œä¸€å°ç‹¬ç«‹çš„ç¡¬ä»¶ä¸»æœºæ˜¯å®Œå…¨ä¸€æ ·çš„ï¼Œè¯¥æŠ€æœ¯çš„äº§ç”Ÿæ˜¯ä¸ºäº†èŠ‚çœäº’è”ç½‘æœåŠ¡å™¨ç¡¬ä»¶æˆæœ¬ã€‚åé¢ä¼šè¯¦ç»†ä»‹ç»è™šæ‹Ÿä¸»æœºçš„æ¦‚å¿µã€‚ æ¯ä¸ª http å—å¯ä»¥åŒ…æ‹¬å¤šä¸ª server å—ï¼Œè€Œæ¯ä¸ª server å—å°±ç›¸å½“äºä¸€ä¸ªè™šæ‹Ÿä¸»æœºã€‚ è€Œæ¯ä¸ª server å—ä¹Ÿåˆ†ä¸ºå…¨å±€ server å—ï¼Œä»¥åŠå¯ä»¥åŒæ—¶åŒ…å«å¤šä¸ª locaton å—ã€‚ å…¨å±€serverå—ï¼šæœ€å¸¸è§çš„é…ç½®æ˜¯æœ¬è™šæ‹Ÿæœºä¸»æœºçš„ç›‘å¬é…ç½®å’Œæœ¬è™šæ‹Ÿä¸»æœºçš„åç§°æˆ–IPé…ç½®ã€‚ locationå—ï¼šä¸€ä¸ª server å—å¯ä»¥é…ç½®å¤šä¸ª location å—ã€‚ è¿™å—çš„ä¸»è¦ä½œç”¨æ˜¯åŸºäº Nginx æœåŠ¡å™¨æ¥æ”¶åˆ°çš„è¯·æ±‚å­—ç¬¦ä¸²ï¼ˆä¾‹å¦‚ server_name/uri-stringï¼‰ï¼Œå¯¹è™šæ‹Ÿä¸»æœºåç§°ï¼ˆä¹Ÿå¯ä»¥æ˜¯IPåˆ«åï¼‰ä¹‹å¤–çš„å­—ç¬¦ä¸²ï¼ˆä¾‹å¦‚ å‰é¢çš„ /uri-stringï¼‰è¿›è¡ŒåŒ¹é…ï¼Œå¯¹ç‰¹å®šçš„è¯·æ±‚è¿›è¡Œå¤„ç†ã€‚åœ°å€å®šå‘ã€æ•°æ®ç¼“å­˜å’Œåº”ç­”æ§åˆ¶ç­‰åŠŸèƒ½ï¼Œè¿˜æœ‰è®¸å¤šç¬¬ä¸‰æ–¹æ¨¡å—çš„é…ç½®ä¹Ÿåœ¨è¿™é‡Œè¿›è¡Œã€‚ ","date":"2022-02-16","objectID":"/nginx%E5%AD%A6%E4%B9%A0/:3:3","tags":["Nginx"],"title":"Nginxå­¦ä¹ ","uri":"/nginx%E5%AD%A6%E4%B9%A0/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"åå‘ä»£ç† ","date":"2022-02-16","objectID":"/nginx%E5%AD%A6%E4%B9%A0/:4:0","tags":["Nginx"],"title":"Nginxå­¦ä¹ ","uri":"/nginx%E5%AD%A6%E4%B9%A0/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"ä»£ç†å®šä¹‰ Nginx ä¸»è¦èƒ½å¤Ÿä»£ç†å¦‚ä¸‹å‡ ç§åè®®ï¼Œå…¶ä¸­ç”¨åˆ°çš„æœ€å¤šçš„å°±æ˜¯åšHttpä»£ç†æœåŠ¡å™¨ã€‚ åœ¨Javaè®¾è®¡æ¨¡å¼ä¸­ï¼Œä»£ç†æ¨¡å¼æ˜¯è¿™æ ·å®šä¹‰çš„ï¼šç»™æŸä¸ªå¯¹è±¡æä¾›ä¸€ä¸ªä»£ç†å¯¹è±¡ï¼Œå¹¶ç”±ä»£ç†å¯¹è±¡æ§åˆ¶åŸå¯¹è±¡çš„å¼•ç”¨ã€‚ ä»£ç†ç®€å•æ¥è¯´ï¼Œå°±æ˜¯å¦‚æœæˆ‘ä»¬æƒ³åšä»€ä¹ˆï¼Œä½†åˆä¸æƒ³ç›´æ¥å»åšï¼Œé‚£ä¹ˆè¿™æ—¶å€™å°±æ‰¾å¦å¤–ä¸€ä¸ªäººå¸®æˆ‘ä»¬å»åšã€‚é‚£ä¹ˆè¿™ä¸ªä¾‹å­é‡Œé¢çš„ä¸­ä»‹å…¬å¸å°±æ˜¯ç»™æˆ‘ä»¬åšä»£ç†æœåŠ¡çš„ï¼Œæˆ‘ä»¬å§”æ‰˜ä¸­ä»‹å…¬å¸å¸®æˆ‘ä»¬æ‰¾æˆ¿å­ã€‚ ","date":"2022-02-16","objectID":"/nginx%E5%AD%A6%E4%B9%A0/:4:1","tags":["Nginx"],"title":"Nginxå­¦ä¹ ","uri":"/nginx%E5%AD%A6%E4%B9%A0/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"æ­£å‘ä»£ç†å®šä¹‰ å¼„æ¸…æ¥šä»€ä¹ˆæ˜¯ä»£ç†äº†ï¼Œé‚£ä¹ˆä»€ä¹ˆåˆæ˜¯æ­£å‘ä»£ç†å‘¢ï¼Ÿ è¿™é‡Œæˆ‘å†ä¸¾ä¸€ä¸ªä¾‹å­ï¼šå¤§å®¶éƒ½çŸ¥é“ï¼Œç°åœ¨å›½å†…æ˜¯è®¿é—®ä¸äº† Googleçš„ï¼Œé‚£ä¹ˆæ€ä¹ˆæ‰èƒ½è®¿é—® Googleå‘¢ï¼Ÿæˆ‘ä»¬åˆæƒ³ï¼Œç¾å›½äººä¸æ˜¯èƒ½è®¿é—® Googleå—ï¼ˆè¿™ä¸åºŸè¯ï¼ŒGoogleå°±æ˜¯ç¾å›½çš„ï¼‰ï¼Œå¦‚æœæˆ‘ä»¬ç”µè„‘çš„å¯¹å¤–å…¬ç½‘ IP åœ°å€èƒ½å˜æˆç¾å›½çš„ IP åœ°å€ï¼Œé‚£ä¸å°±å¯ä»¥è®¿é—® Googleäº†ã€‚ä½ å¾ˆèªæ˜ï¼ŒVPN å°±æ˜¯è¿™æ ·äº§ç”Ÿçš„ã€‚æˆ‘ä»¬åœ¨è®¿é—® Google æ—¶ï¼Œå…ˆè¿ä¸Š VPN æœåŠ¡å™¨å°†æˆ‘ä»¬çš„ IP åœ°å€å˜æˆç¾å›½çš„ IP åœ°å€ï¼Œç„¶åå°±å¯ä»¥é¡ºåˆ©çš„è®¿é—®äº†ã€‚ è¿™é‡Œçš„ VPN å°±æ˜¯åšæ­£å‘ä»£ç†çš„ã€‚æ­£å‘ä»£ç†æœåŠ¡å™¨ä½äºå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´ï¼Œä¸ºäº†å‘æœåŠ¡å™¨è·å–æ•°æ®ï¼Œå®¢æˆ·ç«¯è¦å‘ä»£ç†æœåŠ¡å™¨å‘é€ä¸€ä¸ªè¯·æ±‚ï¼Œå¹¶æŒ‡å®šç›®æ ‡æœåŠ¡å™¨ï¼Œä»£ç†æœåŠ¡å™¨å°†ç›®æ ‡æœåŠ¡å™¨è¿”å›çš„æ•°æ®è½¬äº¤ç»™å®¢æˆ·ç«¯ã€‚è¿™é‡Œå®¢æˆ·ç«¯æ˜¯è¦è¿›è¡Œä¸€äº›æ­£å‘ä»£ç†çš„è®¾ç½®çš„ã€‚ PSï¼šè¿™é‡Œä»‹ç»ä¸€ä¸‹ä»€ä¹ˆæ˜¯ VPNï¼ŒVPN é€šä¿—çš„è®²å°±æ˜¯ä¸€ç§ä¸­è½¬æœåŠ¡ï¼Œå½“æˆ‘ä»¬ç”µè„‘æ¥å…¥ VPN åï¼Œæˆ‘ä»¬å¯¹å¤– IP åœ°å€å°±ä¼šå˜æˆ VPN æœåŠ¡å™¨çš„ å…¬ç½‘ IPï¼Œæˆ‘ä»¬è¯·æ±‚æˆ–æ¥å—ä»»ä½•æ•°æ®éƒ½ä¼šé€šè¿‡è¿™ä¸ªVPN æœåŠ¡å™¨ç„¶åä¼ å…¥åˆ°æˆ‘ä»¬æœ¬æœºã€‚è¿™æ ·åšæœ‰ä»€ä¹ˆå¥½å¤„å‘¢ï¼Ÿæ¯”å¦‚ VPN æ¸¸æˆåŠ é€Ÿæ–¹é¢çš„åŸç†ï¼Œæˆ‘ä»¬è¦ç©ç½‘é€šåŒºçš„ LOLï¼Œä½†æ˜¯æœ¬æœºæ¥å…¥çš„æ˜¯ç”µä¿¡çš„å®½å¸¦ï¼Œç©ç½‘é€šåŒºçš„ä¼šæ¯”è¾ƒå¡ï¼Œè¿™æ—¶å€™å°±åˆ©ç”¨ VPN å°†ç”µä¿¡ç½‘ç»œå˜ä¸ºç½‘é€šç½‘ç»œï¼Œç„¶ååœ¨ç©ç½‘é€šåŒºçš„LOLå°±ä¸ä¼šå¡äº†ï¼ˆæ³¨æ„ï¼šVPN æ˜¯ä¸èƒ½å¢åŠ å¸¦å®½çš„ï¼Œä¸è¦ä»¥ä¸ºä¸å¡äº†æ˜¯å› ä¸ºç½‘é€Ÿæå‡äº†ï¼‰ã€‚ å¯èƒ½å¬åˆ°è¿™é‡Œå¤§å®¶è¿˜æ˜¯å¾ˆæŠ½è±¡ï¼Œæ²¡å…³ç³»ï¼Œå’Œä¸‹é¢çš„åå‘ä»£ç†å¯¹æ¯”ç†è§£å°±ç®€å•äº†ã€‚ ","date":"2022-02-16","objectID":"/nginx%E5%AD%A6%E4%B9%A0/:4:2","tags":["Nginx"],"title":"Nginxå­¦ä¹ ","uri":"/nginx%E5%AD%A6%E4%B9%A0/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"åå‘ä»£ç†å®šä¹‰ åå‘ä»£ç†å’Œæ­£å‘ä»£ç†çš„åŒºåˆ«å°±æ˜¯ï¼šæ­£å‘ä»£ç†ä»£ç†å®¢æˆ·ç«¯ï¼Œåå‘ä»£ç†ä»£ç†æœåŠ¡å™¨ã€‚ åå‘ä»£ç†ï¼Œå…¶å®å®¢æˆ·ç«¯å¯¹ä»£ç†æ˜¯æ— æ„ŸçŸ¥çš„ï¼Œå› ä¸ºå®¢æˆ·ç«¯ä¸éœ€è¦ä»»ä½•é…ç½®å°±å¯ä»¥è®¿é—®ï¼Œæˆ‘ä»¬åªéœ€è¦å°†è¯·æ±‚å‘é€åˆ°åå‘ä»£ç†æœåŠ¡å™¨ï¼Œç”±åå‘ä»£ç†æœåŠ¡å™¨å»é€‰æ‹©ç›®æ ‡æœåŠ¡å™¨è·å–æ•°æ®åï¼Œåœ¨è¿”å›ç»™å®¢æˆ·ç«¯ï¼Œæ­¤æ—¶åå‘ä»£ç†æœåŠ¡å™¨å’Œç›®æ ‡æœåŠ¡å™¨å¯¹å¤–å°±æ˜¯ä¸€ä¸ªæœåŠ¡å™¨ï¼Œæš´éœ²çš„æ˜¯ä»£ç†æœåŠ¡å™¨åœ°å€ï¼Œéšè—äº†çœŸå®æœåŠ¡å™¨IPåœ°å€ã€‚ ä¸‹é¢æˆ‘ä»¬é€šè¿‡ä¸¤å¼ å›¾æ¥å¯¹æ¯”æ­£å‘ä»£ç†å’Œæ–¹å‘ä»£ç†ï¼š ç†è§£è¿™ä¸¤ç§ä»£ç†çš„å…³é”®åœ¨äºä»£ç†æœåŠ¡å™¨æ‰€ä»£ç†çš„å¯¹è±¡æ˜¯ä»€ä¹ˆï¼Œæ­£å‘ä»£ç†ä»£ç†çš„æ˜¯å®¢æˆ·ç«¯ï¼Œæˆ‘ä»¬éœ€è¦åœ¨å®¢æˆ·ç«¯è¿›è¡Œä¸€äº›ä»£ç†çš„è®¾ç½®ã€‚è€Œåå‘ä»£ç†ä»£ç†çš„æ˜¯æœåŠ¡å™¨ï¼Œä½œä¸ºå®¢æˆ·ç«¯çš„æˆ‘ä»¬æ˜¯æ— æ³•æ„ŸçŸ¥åˆ°æœåŠ¡å™¨çš„çœŸå®å­˜åœ¨çš„ã€‚ æ€»ç»“èµ·æ¥è¿˜æ˜¯ä¸€å¥è¯ï¼šæ­£å‘ä»£ç†ä»£ç†å®¢æˆ·ç«¯ï¼Œåå‘ä»£ç†ä»£ç†æœåŠ¡å™¨ã€‚ ","date":"2022-02-16","objectID":"/nginx%E5%AD%A6%E4%B9%A0/:4:3","tags":["Nginx"],"title":"Nginxå­¦ä¹ ","uri":"/nginx%E5%AD%A6%E4%B9%A0/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"Nginx åå‘ä»£ç† ç›¸å…³æŒ‡ä»¤ listen è¯¥æŒ‡ä»¤ç”¨äºé…ç½®ç½‘ç»œç›‘å¬ã€‚ä¸»è¦æœ‰å¦‚ä¸‹ä¸‰ç§é…ç½®è¯­æ³•ç»“æ„ï¼š â‘  é…ç½®ç›‘å¬çš„IPåœ°å€ listen address[:port] [default_server] [setfib=number] [backlog=number] [rcvbuf=size] [sndbuf=size] [deferred] [accept_filter=filter] [bind] [ssl]; â‘¡ é…ç½®ç›‘å¬ç«¯å£ listen port [default_server] [setfib=number] [backlog=number] [rcvbuf=size] [sndbuf=size] [accept_filter=filter] [deffered] [bind] [ipv6only=on|off] [ssl]; â‘¢ é…ç½® UNIX Domain Socket listen unix:path [default_server] [backlog=number] [rcvbuf=size] [sndbuf=size] [accept_filter=filter] [deffered] [bind] [ssl] ä¸Šé¢çš„é…ç½®çœ‹ä¼¼æ¯”è¾ƒå¤æ‚ï¼Œå…¶å®ä½¿ç”¨èµ·æ¥æ˜¯æ¯”è¾ƒç®€å•çš„ï¼š listen *:80 | *:8080 #ç›‘å¬æ‰€æœ‰80ç«¯å£å’Œ8080ç«¯å£ listen IP_address:port #ç›‘å¬æŒ‡å®šçš„åœ°å€å’Œç«¯å£å· listen IP_address #ç›‘å¬æŒ‡å®šipåœ°å€æ‰€æœ‰ç«¯å£ listen port #ç›‘å¬è¯¥ç«¯å£çš„æ‰€æœ‰IPè¿æ¥ ä¸‹é¢åˆ†åˆ«è§£é‡Šæ¯ä¸ªé€‰é¡¹çš„å…·ä½“å«ä¹‰ï¼š 1ã€address:IPåœ°å€ï¼Œå¦‚æœæ˜¯ IPV6åœ°å€ï¼Œéœ€è¦ä½¿ç”¨ä¸­æ‹¬å·[] æ‹¬èµ·æ¥ï¼Œæ¯”å¦‚[fe80::1]ç­‰ã€‚ 2ã€port:ç«¯å£å·ï¼Œå¦‚æœåªå®šä¹‰äº†IPåœ°å€ï¼Œæ²¡æœ‰å®šä¹‰ç«¯å£å·ï¼Œé‚£ä¹ˆå°±ä½¿ç”¨80ç«¯å£ã€‚ 3ã€path:socketæ–‡ä»¶è·¯å¾„ï¼Œå¦‚ var/run/nginx.sockç­‰ã€‚ 4ã€default_server:æ ‡è¯†ç¬¦ï¼Œå°†æ­¤è™šæ‹Ÿä¸»æœºè®¾ç½®ä¸º address:port çš„é»˜è®¤ä¸»æœºã€‚ï¼ˆåœ¨ nginx-0.8.21 ä¹‹å‰ä½¿ç”¨çš„æ˜¯ default æŒ‡ä»¤ï¼‰ 5ã€ setfib=number:Nginx-0.8.44 ä¸­ä½¿ç”¨è¿™ä¸ªå˜é‡ç›‘å¬ socket å…³è”è·¯ç”±è¡¨ï¼Œç›®å‰åªå¯¹ FreeBSD èµ·ä½œç”¨ï¼Œä¸å¸¸ç”¨ã€‚ 6ã€backlog=number:è®¾ç½®ç›‘å¬å‡½æ•°listen()æœ€å¤šå…è®¸å¤šå°‘ç½‘ç»œè¿æ¥åŒæ—¶å¤„äºæŒ‚èµ·çŠ¶æ€ï¼Œåœ¨ FreeBSD ä¸­é»˜è®¤ä¸º -1,å…¶ä»–å¹³å°é»˜è®¤ä¸º511. 7ã€rcvbuf=size:è®¾ç½®ç›‘å¬socketæ¥æ”¶ç¼“å­˜åŒºå¤§å°ã€‚ 8ã€sndbuf=size:è®¾ç½®ç›‘å¬socketå‘é€ç¼“å­˜åŒºå¤§å°ã€‚ 9ã€deferred:æ ‡è¯†ç¬¦ï¼Œå°†accept()è®¾ç½®ä¸ºDeferredæ¨¡å¼ã€‚ 10ã€accept_filter=filter:è®¾ç½®ç›‘å¬ç«¯å£å¯¹æ‰€æœ‰è¯·æ±‚è¿›è¡Œè¿‡æ»¤ï¼Œè¢«è¿‡æ»¤çš„å†…å®¹ä¸èƒ½è¢«æ¥æ”¶å’Œå¤„ç†ï¼Œæœ¬æŒ‡ä»¤åªåœ¨ FreeBSD å’Œ NetBSD 5.0+ å¹³å°ä¸‹æœ‰æ•ˆã€‚filter å¯ä»¥è®¾ç½®ä¸º dataready æˆ– httpready ã€‚ 11ã€bind:æ ‡è¯†ç¬¦ï¼Œä½¿ç”¨ç‹¬ç«‹çš„bind() å¤„ç†æ­¤address:portï¼Œä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå¯¹äºç«¯å£ç›¸åŒè€ŒIPåœ°å€ä¸åŒçš„å¤šä¸ªè¿æ¥ï¼ŒNginx æœåŠ¡å™¨å°†åªä½¿ç”¨ä¸€ä¸ªç›‘å¬æŒ‡ä»¤ï¼Œå¹¶ä½¿ç”¨ bind() å¤„ç†ç«¯å£ç›¸åŒçš„æ‰€æœ‰è¿æ¥ã€‚ 12ã€ssl:æ ‡è¯†ç¬¦ï¼Œè®¾ç½®ä¼šè¯è¿æ¥ä½¿ç”¨ SSLæ¨¡å¼è¿›è¡Œï¼Œæ­¤æ ‡è¯†ç¬¦å’ŒNginxæœåŠ¡å™¨æä¾›çš„ HTTPS æœåŠ¡æœ‰å…³ã€‚ server_name è¯¥æŒ‡ä»¤ç”¨äºè™šæ‹Ÿä¸»æœºçš„é…ç½®ã€‚é€šå¸¸åˆ†ä¸ºä»¥ä¸‹ä¸¤ç§ï¼š 1ã€åŸºäºåç§°çš„è™šæ‹Ÿä¸»æœºé…ç½® è¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼š server_name name ...; ä¸€ã€å¯¹äºname æ¥è¯´ï¼Œå¯ä»¥åªæœ‰ä¸€ä¸ªåç§°ï¼Œä¹Ÿå¯ä»¥æœ‰å¤šä¸ªåç§°ï¼Œä¸­é—´ç”¨ç©ºæ ¼éš”å¼€ã€‚è€Œæ¯ä¸ªåå­—ç”±ä¸¤æ®µæˆ–è€…ä¸‰æ®µç»„æˆï¼Œæ¯æ®µä¹‹é—´ç”¨â€œ.â€éš”å¼€ã€‚ server_name 123.com www.123.com äºŒã€å¯ä»¥ä½¿ç”¨é€šé…ç¬¦â€œ*â€ï¼Œä½†é€šé…ç¬¦åªèƒ½ç”¨åœ¨ç”±ä¸‰æ®µå­—ç¬¦ç»„æˆçš„é¦–æ®µæˆ–è€…å°¾ç«¯ï¼Œæˆ–è€…ç”±ä¸¤ç«¯å­—ç¬¦ç»„æˆçš„å°¾ç«¯ã€‚ server_name *.123.com www.123.* ä¸‰ã€è¿˜å¯ä»¥ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ï¼Œç”¨â€œ~â€ä½œä¸ºæ­£åˆ™è¡¨è¾¾å¼å­—ç¬¦ä¸²çš„å¼€å§‹æ ‡è®°ã€‚ server_name ~^www\\d+\\.123\\.com$; è¯¥è¡¨è¾¾å¼â€œ~â€è¡¨ç¤ºåŒ¹é…æ­£åˆ™è¡¨è¾¾å¼ï¼Œä»¥wwwå¼€å¤´ï¼ˆâ€œ^â€è¡¨ç¤ºå¼€å¤´ï¼‰ï¼Œç´§è·Ÿç€ä¸€ä¸ª0~9ä¹‹é—´çš„æ•°å­—ï¼Œåœ¨ç´§è·Ÿâ€œ.123.coâ€ï¼Œæœ€åè·Ÿç€â€œmâ€($è¡¨ç¤ºç»“å°¾) ä»¥ä¸ŠåŒ¹é…çš„é¡ºåºä¼˜å…ˆçº§å¦‚ä¸‹ï¼š 1 â‘ ã€å‡†ç¡®åŒ¹é… server_name 2 â‘¡ã€é€šé…ç¬¦åœ¨å¼€å§‹æ—¶åŒ¹é… server_name æˆåŠŸ 3 â‘¢ã€é€šé…ç¬¦åœ¨ç»“å°¾æ—¶åŒ¹é… server_name æˆåŠŸ 4 â‘£ã€æ­£åˆ™è¡¨è¾¾å¼åŒ¹é… server_name æˆåŠŸ 2ã€åŸºäº IP åœ°å€çš„è™šæ‹Ÿä¸»æœºé…ç½® è¯­æ³•ç»“æ„å’ŒåŸºäºåŸŸååŒ¹é…ä¸€æ ·ï¼Œè€Œä¸”ä¸éœ€è¦è€ƒè™‘é€šé…ç¬¦å’Œæ­£åˆ™è¡¨è¾¾å¼çš„é—®é¢˜ã€‚ server_name 192.168.1.1 location è¯¥æŒ‡ä»¤ç”¨äºåŒ¹é… URLã€‚ è¯­æ³•å¦‚ä¸‹ï¼š location [ = | ~ | ~* | ^~] uri { } 1ã€= ï¼šç”¨äºä¸å«æ­£åˆ™è¡¨è¾¾å¼çš„ uri å‰ï¼Œè¦æ±‚è¯·æ±‚å­—ç¬¦ä¸²ä¸ uri ä¸¥æ ¼åŒ¹é…ï¼Œå¦‚æœåŒ¹é…æˆåŠŸï¼Œå°±åœæ­¢ç»§ç»­å‘ä¸‹æœç´¢å¹¶ç«‹å³å¤„ç†è¯¥è¯·æ±‚ã€‚ 2ã€~ï¼šç”¨äºè¡¨ç¤º uri åŒ…å«æ­£åˆ™è¡¨è¾¾å¼ï¼Œå¹¶ä¸”åŒºåˆ†å¤§å°å†™ã€‚ 3ã€~*ï¼šç”¨äºè¡¨ç¤º uri åŒ…å«æ­£åˆ™è¡¨è¾¾å¼ï¼Œå¹¶ä¸”ä¸åŒºåˆ†å¤§å°å†™ã€‚ 4ã€^~ï¼šç”¨äºä¸å«æ­£åˆ™è¡¨è¾¾å¼çš„ uri å‰ï¼Œè¦æ±‚ Nginx æœåŠ¡å™¨æ‰¾åˆ°æ ‡è¯† uri å’Œè¯·æ±‚å­—ç¬¦ä¸²åŒ¹é…åº¦æœ€é«˜çš„ location åï¼Œç«‹å³ä½¿ç”¨æ­¤ location å¤„ç†è¯·æ±‚ï¼Œè€Œä¸å†ä½¿ç”¨ location å—ä¸­çš„æ­£åˆ™ uri å’Œè¯·æ±‚å­—ç¬¦ä¸²åšåŒ¹é…ã€‚ æ³¨æ„ï¼šå¦‚æœ uri åŒ…å«æ­£åˆ™è¡¨è¾¾å¼ï¼Œåˆ™å¿…é¡»è¦æœ‰ ~ æˆ–è€… ~* æ ‡è¯†ã€‚ proxy_pass è¯¥æŒ‡ä»¤ç”¨äºè®¾ç½®è¢«ä»£ç†æœåŠ¡å™¨çš„åœ°å€ã€‚å¯ä»¥æ˜¯ä¸»æœºåç§°ã€IPåœ°å€åŠ ç«¯å£å·çš„å½¢å¼ã€‚ è¯­æ³•ç»“æ„å¦‚ä¸‹ï¼š proxy_pass URL; URL ä¸ºè¢«ä»£ç†æœåŠ¡å™¨çš„åœ°å€ï¼Œå¯ä»¥åŒ…å«ä¼ è¾“åè®®ã€ä¸»æœºåç§°æˆ–IPåœ°å€åŠ ç«¯å£å·ï¼ŒURIç­‰ã€‚ proxy_pass http://www.123.com/uri; index è¯¥æŒ‡ä»¤ç”¨äºè®¾ç½®ç½‘ç«™çš„é»˜è®¤é¦–é¡µã€‚ è¯­æ³•ä¸ºï¼š index filename ...; åé¢çš„æ–‡ä»¶åç§°å¯ä»¥æœ‰å¤šä¸ªï¼Œä¸­é—´ç”¨ç©ºæ ¼éš”å¼€ã€‚ index index.html index.jsp; é€šå¸¸è¯¥æŒ‡ä»¤æœ‰ä¸¤ä¸ªä½œç”¨ï¼šç¬¬ä¸€ä¸ªæ˜¯ç”¨æˆ·åœ¨è¯·æ±‚è®¿é—®ç½‘ç«™æ—¶ï¼Œè¯·æ±‚åœ°å€å¯ä»¥ä¸å†™é¦–é¡µåç§°ï¼›ç¬¬äºŒä¸ªæ˜¯å¯ä»¥å¯¹ä¸€ä¸ªè¯·æ±‚ï¼Œæ ¹æ®è¯·æ±‚å†…å®¹è€Œè®¾ç½®ä¸åŒçš„é¦–é¡µã€‚ ","date":"2022-02-16","objectID":"/nginx%E5%AD%A6%E4%B9%A0/:4:4","tags":["Nginx"],"title":"Nginxå­¦ä¹ ","uri":"/nginx%E5%AD%A6%E4%B9%A0/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"é…ç½®æ¡ˆä¾‹ server { listen 80; server_name localhost; charset utf-8; location / { root /home/ruoyi/projects/ruoyi-ui; try_files $uri $uri/ /index.html; index index.html index.htm; } location /prod-api/ { proxy_set_header Host $http_host; proxy_set_header X-Real-IP $remote_addr; proxy_set_header REMOTE-HOST $remote_addr; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; proxy_pass http://localhost:8080/; } error_page 500 502 503 504 /50x.html; location = /50x.html { root html; } } ","date":"2022-02-16","objectID":"/nginx%E5%AD%A6%E4%B9%A0/:4:5","tags":["Nginx"],"title":"Nginxå­¦ä¹ ","uri":"/nginx%E5%AD%A6%E4%B9%A0/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"è´Ÿè½½å‡è¡¡ ","date":"2022-02-16","objectID":"/nginx%E5%AD%A6%E4%B9%A0/:5:0","tags":["Nginx"],"title":"Nginxå­¦ä¹ ","uri":"/nginx%E5%AD%A6%E4%B9%A0/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"è´Ÿè½½å‡è¡¡çš„ç”±æ¥ æ—©æœŸçš„ç³»ç»Ÿæ¶æ„ï¼ŒåŸºæœ¬ä¸Šéƒ½æ˜¯å¦‚ä¸‹å½¢å¼çš„ï¼š å®¢æˆ·ç«¯å‘é€å¤šä¸ªè¯·æ±‚åˆ°æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨å¤„ç†è¯·æ±‚ï¼Œæœ‰ä¸€äº›å¯èƒ½è¦ä¸æ•°æ®åº“è¿›è¡Œäº¤äº’ï¼ŒæœåŠ¡å™¨å¤„ç†å®Œæ¯•åï¼Œå†å°†ç»“æœè¿”å›ç»™å®¢æˆ·ç«¯ã€‚ è¿™ç§æ¶æ„æ¨¡å¼å¯¹äºæ—©æœŸçš„ç³»ç»Ÿç›¸å¯¹å•ä¸€ï¼Œå¹¶å‘è¯·æ±‚ç›¸å¯¹è¾ƒå°‘çš„æƒ…å†µä¸‹æ˜¯æ¯”è¾ƒé€‚åˆçš„ï¼Œæˆæœ¬ä¹Ÿä½ã€‚ä½†æ˜¯éšç€ä¿¡æ¯æ•°é‡çš„ä¸æ–­å¢é•¿ï¼Œè®¿é—®é‡å’Œæ•°æ®é‡çš„é£é€Ÿå¢é•¿ï¼Œä»¥åŠç³»ç»Ÿä¸šåŠ¡çš„å¤æ‚åº¦å¢åŠ ï¼Œè¿™ç§æ¶æ„ä¼šé€ æˆæœåŠ¡å™¨ç›¸åº”å®¢æˆ·ç«¯çš„è¯·æ±‚æ—¥ç›Šç¼“æ…¢ï¼Œå¹¶å‘é‡ç‰¹åˆ«å¤§çš„æ—¶å€™ï¼Œè¿˜å®¹æ˜“é€ æˆæœåŠ¡å™¨ç›´æ¥å´©æºƒã€‚å¾ˆæ˜æ˜¾è¿™æ˜¯ç”±äºæœåŠ¡å™¨æ€§èƒ½çš„ç“¶é¢ˆé€ æˆçš„é—®é¢˜ï¼Œé‚£ä¹ˆå¦‚ä½•è§£å†³è¿™ç§æƒ…å†µå‘¢ï¼Ÿ æˆ‘ä»¬é¦–å…ˆæƒ³åˆ°çš„å¯èƒ½æ˜¯å‡çº§æœåŠ¡å™¨çš„é…ç½®ï¼Œæ¯”å¦‚æé«˜CPUæ‰§è¡Œé¢‘ç‡ï¼ŒåŠ å¤§å†…å­˜ç­‰æé«˜æœºå™¨çš„ç‰©ç†æ€§èƒ½æ¥è§£å†³æ­¤é—®é¢˜ï¼Œä½†æ˜¯æˆ‘ä»¬çŸ¥é“æ‘©å°”å®šå¾‹çš„æ—¥ç›Šå¤±æ•ˆï¼Œç¡¬ä»¶çš„æ€§èƒ½æå‡å·²ç»ä¸èƒ½æ»¡è¶³æ—¥ç›Šæå‡çš„éœ€æ±‚äº†ã€‚æœ€æ˜æ˜¾çš„ä¸€ä¸ªä¾‹å­ï¼Œå¤©çŒ«åŒåä¸€å½“å¤©ï¼ŒæŸä¸ªçƒ­é”€å•†å“çš„ç¬æ—¶è®¿é—®é‡æ˜¯æå…¶åºå¤§çš„ï¼Œé‚£ä¹ˆç±»ä¼¼ä¸Šé¢çš„ç³»ç»Ÿæ¶æ„ï¼Œå°†æœºå™¨éƒ½å¢åŠ åˆ°ç°æœ‰çš„é¡¶çº§ç‰©ç†é…ç½®ï¼Œéƒ½æ˜¯ä¸èƒ½å¤Ÿæ»¡è¶³éœ€æ±‚çš„ã€‚é‚£ä¹ˆæ€ä¹ˆåŠå‘¢ï¼Ÿ ä¸Šé¢çš„åˆ†ææˆ‘ä»¬å»æ‰äº†å¢åŠ æœåŠ¡å™¨ç‰©ç†é…ç½®æ¥è§£å†³é—®é¢˜çš„åŠæ³•ï¼Œä¹Ÿå°±æ˜¯è¯´çºµå‘è§£å†³é—®é¢˜çš„åŠæ³•è¡Œä¸é€šäº†ï¼Œé‚£ä¹ˆæ¨ªå‘å¢åŠ æœåŠ¡å™¨çš„æ•°é‡å‘¢ï¼Ÿè¿™æ—¶å€™é›†ç¾¤çš„æ¦‚å¿µäº§ç”Ÿäº†ï¼Œå•ä¸ªæœåŠ¡å™¨è§£å†³ä¸äº†ï¼Œæˆ‘ä»¬å¢åŠ æœåŠ¡å™¨çš„æ•°é‡ï¼Œç„¶åå°†è¯·æ±‚åˆ†å‘åˆ°å„ä¸ªæœåŠ¡å™¨ä¸Šï¼Œå°†åŸå…ˆè¯·æ±‚é›†ä¸­åˆ°å•ä¸ªæœåŠ¡å™¨ä¸Šçš„æƒ…å†µæ”¹ä¸ºå°†è¯·æ±‚åˆ†å‘åˆ°å¤šä¸ªæœåŠ¡å™¨ä¸Šï¼Œå°†è´Ÿè½½åˆ†å‘åˆ°ä¸åŒçš„æœåŠ¡å™¨ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬æ‰€è¯´çš„è´Ÿè½½å‡è¡¡ã€‚ è´Ÿè½½å‡è¡¡å®Œç¾çš„è§£å†³äº†å•ä¸ªæœåŠ¡å™¨ç¡¬ä»¶æ€§èƒ½ç“¶é¢ˆçš„é—®é¢˜ï¼Œä½†æ˜¯éšç€è€Œæ¥çš„å¦‚ä½•å®ç°è´Ÿè½½å‡è¡¡å‘¢ï¼Ÿå®¢æˆ·ç«¯æ€ä¹ˆçŸ¥é“è¦å°†è¯·æ±‚å‘é€åˆ°é‚£ä¸ªæœåŠ¡å™¨å»å¤„ç†å‘¢ï¼Ÿ ","date":"2022-02-16","objectID":"/nginx%E5%AD%A6%E4%B9%A0/:5:1","tags":["Nginx"],"title":"Nginxå­¦ä¹ ","uri":"/nginx%E5%AD%A6%E4%B9%A0/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"Nginx å®ç°è´Ÿè½½å‡è¡¡ Nginx æœåŠ¡å™¨æ˜¯ä»‹äºå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´çš„ä¸­ä»‹ï¼Œé€šè¿‡ä¸Šä¸€èŠ‚çš„åå‘ä»£ç†çš„åŠŸèƒ½ï¼Œå®¢æˆ·ç«¯å‘é€çš„è¯·æ±‚å…ˆç»è¿‡ Nginx ï¼Œç„¶åé€šè¿‡ Nginx å°†è¯·æ±‚æ ¹æ®ç›¸åº”çš„è§„åˆ™åˆ†å‘åˆ°ç›¸åº”çš„æœåŠ¡å™¨ã€‚ ä¸»è¦é…ç½®æŒ‡ä»¤ä¸ºä¸Šä¸€è®²çš„ pass_proxy æŒ‡ä»¤ä»¥åŠ upstream æŒ‡ä»¤ã€‚è´Ÿè½½å‡è¡¡ä¸»è¦é€šè¿‡ä¸“é—¨çš„ç¡¬ä»¶è®¾å¤‡æˆ–è€…è½¯ä»¶ç®—æ³•å®ç°ã€‚é€šè¿‡ç¡¬ä»¶è®¾å¤‡å®ç°çš„è´Ÿè½½å‡è¡¡æ•ˆæœå¥½ã€æ•ˆç‡é«˜ã€æ€§èƒ½ç¨³å®šï¼Œä½†æ˜¯æˆæœ¬è¾ƒé«˜ã€‚è€Œé€šè¿‡è½¯ä»¶å®ç°çš„è´Ÿè½½å‡è¡¡ä¸»è¦ä¾èµ–äºå‡è¡¡ç®—æ³•çš„é€‰æ‹©å’Œç¨‹åºçš„å¥å£®æ€§ã€‚å‡è¡¡ç®—æ³•åˆä¸»è¦åˆ†ä¸ºä¸¤å¤§ç±»ï¼š é™æ€è´Ÿè½½å‡è¡¡ç®—æ³•ï¼šä¸»è¦åŒ…æ‹¬è½®è¯¢ç®—æ³•ã€åŸºäºæ¯”ç‡çš„åŠ æƒè½®è¯¢ç®—æ³•æˆ–è€…åŸºäºä¼˜å…ˆçº§çš„åŠ æƒè½®è¯¢ç®—æ³•ã€‚ åŠ¨æ€è´Ÿè½½å‡è¡¡ç®—æ³•ï¼šä¸»è¦åŒ…æ‹¬åŸºäºä»»åŠ¡é‡çš„æœ€å°‘è¿æ¥ä¼˜åŒ–ç®—æ³•ã€åŸºäºæ€§èƒ½çš„æœ€å¿«å“åº”ä¼˜å…ˆç®—æ³•ã€é¢„æµ‹ç®—æ³•åŠåŠ¨æ€æ€§èƒ½åˆ†é…ç®—æ³•ç­‰ã€‚ é™æ€è´Ÿè½½å‡è¡¡ç®—æ³•åœ¨ä¸€èˆ¬ç½‘ç»œç¯å¢ƒä¸‹ä¹Ÿèƒ½è¡¨ç°çš„æ¯”è¾ƒå¥½ï¼ŒåŠ¨æ€è´Ÿè½½å‡è¡¡ç®—æ³•æ›´åŠ é€‚ç”¨äºå¤æ‚çš„ç½‘ç»œç¯å¢ƒã€‚ ä¾‹å­ï¼š æ™®é€šè½®è¯¢ç®—æ³• upstream OrdinaryPolling { server 127.0.0.1:8080; server 127.0.0.1:8081; } server { listen 80; server_name localhost; location / { proxy_pass http://OrdinaryPolling; index index.html index.htm index.jsp; } } åŸºäºæ¯”ä¾‹åŠ æƒè½®è¯¢ upstream OrdinaryPolling { server 127.0.0.1:8080 weight=5; server 127.0.0.1:8081 weight=2; } server { listen 80; server_name localhost; location / { proxy_pass http://OrdinaryPolling; index index.html index.htm index.jsp; } } åŸºäºIPè·¯ç”±è´Ÿè½½ æˆ‘ä»¬çŸ¥é“ä¸€ä¸ªè¯·æ±‚åœ¨ç»è¿‡ä¸€ä¸ªæœåŠ¡å™¨å¤„ç†æ—¶ï¼ŒæœåŠ¡å™¨ä¼šä¿å­˜ç›¸å…³çš„ä¼šè¯ä¿¡æ¯ï¼Œæ¯”å¦‚sessionï¼Œä½†æ˜¯è¯¥è¯·æ±‚å¦‚æœç¬¬ä¸€ä¸ªæœåŠ¡å™¨æ²¡å¤„ç†å®Œï¼Œé€šè¿‡nginxè½®è¯¢åˆ°ç¬¬äºŒä¸ªæœåŠ¡å™¨ä¸Šï¼Œé‚£ä¹ˆè¿™ä¸ªæœåŠ¡å™¨æ˜¯æ²¡æœ‰ä¼šè¯ä¿¡æ¯çš„ã€‚ æœ€å…¸å‹çš„ä¸€ä¸ªä¾‹å­ï¼šç”¨æˆ·ç¬¬ä¸€æ¬¡è¿›å…¥ä¸€ä¸ªç³»ç»Ÿæ˜¯éœ€è¦è¿›è¡Œç™»å½•èº«ä»½éªŒè¯çš„ï¼Œé¦–å…ˆå°†è¯·æ±‚è·³è½¬åˆ°Tomcat1æœåŠ¡å™¨è¿›è¡Œå¤„ç†ï¼Œç™»å½•ä¿¡æ¯æ˜¯ä¿å­˜åœ¨Tomcat1 ä¸Šçš„ï¼Œè¿™æ—¶å€™éœ€è¦è¿›è¡Œåˆ«çš„æ“ä½œï¼Œé‚£ä¹ˆå¯èƒ½ä¼šå°†è¯·æ±‚è½®è¯¢åˆ°ç¬¬äºŒä¸ªTomcat2ä¸Šï¼Œé‚£ä¹ˆç”±äºTomcat2 æ²¡æœ‰ä¿å­˜ä¼šè¯ä¿¡æ¯ï¼Œä¼šä»¥ä¸ºè¯¥ç”¨æˆ·æ²¡æœ‰ç™»å½•ï¼Œç„¶åç»§ç»­ç™»å½•ä¸€æ¬¡ï¼Œå¦‚æœæœ‰å¤šä¸ªæœåŠ¡å™¨ï¼Œæ¯æ¬¡ç¬¬ä¸€æ¬¡è®¿é—®éƒ½è¦è¿›è¡Œç™»å½•ï¼Œè¿™æ˜¾ç„¶æ˜¯å¾ˆå½±å“ç”¨æˆ·ä½“éªŒçš„ã€‚ è¿™é‡Œäº§ç”Ÿçš„ä¸€ä¸ªé—®é¢˜ä¹Ÿå°±æ˜¯é›†ç¾¤ç¯å¢ƒä¸‹çš„ session å…±äº«ï¼Œå¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜ï¼Ÿ é€šå¸¸ç”±ä¸¤ç§æ–¹æ³•ï¼š 1ã€ç¬¬ä¸€ç§æ–¹æ³•æ˜¯é€‰æ‹©ä¸€ä¸ªä¸­é—´ä»¶ï¼Œå°†ç™»å½•ä¿¡æ¯ä¿å­˜åœ¨ä¸€ä¸ªä¸­é—´ä»¶ä¸Šï¼Œè¿™ä¸ªä¸­é—´ä»¶å¯ä»¥ä¸º Redis è¿™æ ·çš„æ•°æ®åº“ã€‚é‚£ä¹ˆç¬¬ä¸€æ¬¡ç™»å½•ï¼Œæˆ‘ä»¬å°†session ä¿¡æ¯ä¿å­˜åœ¨ Redis ä¸­ï¼Œè·³è½¬åˆ°ç¬¬äºŒä¸ªæœåŠ¡å™¨æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥å…ˆå»Redisä¸ŠæŸ¥è¯¢æ˜¯å¦æœ‰ç™»å½•ä¿¡æ¯ï¼Œå¦‚æœæœ‰ï¼Œå°±èƒ½ç›´æ¥è¿›è¡Œç™»å½•ä¹‹åçš„æ“ä½œäº†ï¼Œè€Œä¸ç”¨è¿›è¡Œé‡å¤ç™»å½•ã€‚ 2ã€ç¬¬äºŒç§æ–¹æ³•æ˜¯æ ¹æ®å®¢æˆ·ç«¯çš„IPåœ°å€åˆ’åˆ†ï¼Œæ¯æ¬¡éƒ½å°†åŒä¸€ä¸ª IP åœ°å€å‘é€çš„è¯·æ±‚éƒ½åˆ†å‘åˆ°åŒä¸€ä¸ª Tomcat æœåŠ¡å™¨ï¼Œé‚£ä¹ˆä¹Ÿä¸ä¼šå­˜åœ¨ session å…±äº«çš„é—®é¢˜ã€‚ è€Œ nginx çš„åŸºäº IP è·¯ç”±è´Ÿè½½çš„æœºåˆ¶å°±æ˜¯ä¸Šè¯‰ç¬¬äºŒç§å½¢å¼ã€‚å¤§æ¦‚é…ç½®å¦‚ä¸‹ï¼š upstream OrdinaryPolling { ip_hash; server 127.0.0.1:8080 weight=5; server 127.0.0.1:8081 weight=2; } server { listen 80; server_name localhost; location / { proxy_pass http://OrdinaryPolling; index index.html index.htm index.jsp; } } æ³¨æ„ï¼šæˆ‘ä»¬åœ¨ upstream æŒ‡ä»¤å—ä¸­å¢åŠ äº† ip_hash æŒ‡ä»¤ã€‚è¯¥æŒ‡ä»¤å°±æ˜¯å‘Šè¯‰ nginx æœåŠ¡å™¨ï¼ŒåŒä¸€ä¸ª IP åœ°å€å®¢æˆ·ç«¯å‘é€çš„è¯·æ±‚éƒ½å°†åˆ†å‘åˆ°åŒä¸€ä¸ª Tomcat æœåŠ¡å™¨è¿›è¡Œå¤„ç†ã€‚ åŸºäºæœåŠ¡å™¨å“åº”æ—¶é—´è´Ÿè½½åˆ†é… æ ¹æ®æœåŠ¡å™¨å¤„ç†è¯·æ±‚çš„æ—¶é—´æ¥è¿›è¡Œè´Ÿè½½ï¼Œå¤„ç†è¯·æ±‚è¶Šå¿«ï¼Œä¹Ÿå°±æ˜¯å“åº”æ—¶é—´è¶ŠçŸ­çš„ä¼˜å…ˆåˆ†é…ã€‚ upstream OrdinaryPolling { server 127.0.0.1:8080 weight=5; server 127.0.0.1:8081 weight=2; fair; } server { listen 80; server_name localhost; location / { proxy_pass http://OrdinaryPolling; index index.html index.htm index.jsp; } } é€šè¿‡å¢åŠ äº† fair æŒ‡ä»¤ã€‚ å¯¹ä¸åŒåŸŸåå®ç°è´Ÿè½½å‡è¡¡ é€šè¿‡é…åˆlocation æŒ‡ä»¤å—æˆ‘ä»¬è¿˜å¯ä»¥å®ç°å¯¹ä¸åŒåŸŸåå®ç°è´Ÿè½½å‡è¡¡ã€‚ upstream wordbackend { server 127.0.0.1:8080; server 127.0.0.1:8081; } upstream pptbackend { server 127.0.0.1:8082; server 127.0.0.1:8083; } server { listen 80; server_name localhost; location /word/ { proxy_pass http://wordbackend; index index.html index.htm index.jsp; } location /ppt/ { proxy_pass http://pptbackend; index index.html index.htm index.jsp; } } ","date":"2022-02-16","objectID":"/nginx%E5%AD%A6%E4%B9%A0/:5:2","tags":["Nginx"],"title":"Nginxå­¦ä¹ ","uri":"/nginx%E5%AD%A6%E4%B9%A0/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"å¼•ç”¨ ä»¥ä¸Šå­¦ä¹ ç¬”è®°å¤šå¤„æ‘˜å½•è‡ªç½‘ç»œ https://www.cnblogs.com/ysocean/p/9392912.html ","date":"2022-02-16","objectID":"/nginx%E5%AD%A6%E4%B9%A0/:6:0","tags":["Nginx"],"title":"Nginxå­¦ä¹ ","uri":"/nginx%E5%AD%A6%E4%B9%A0/"},{"categories":["ç®—æ³•å­¦ä¹ "],"content":"æœ¬ç¯‡æ–‡ç« æ˜¯å­¦ä¹ leetcodeä¸­é“¾è¡¨ç›¸å…³ç®—æ³•æ€»ç»“çš„é“¾è¡¨æŠ€å·§ ","date":"2022-01-26","objectID":"/%E7%AE%97%E6%B3%95%E5%AD%A6%E4%B9%A0-%E9%93%BE%E8%A1%A8/:0:0","tags":["ç®—æ³•"],"title":"ç®—æ³•å­¦ä¹ -é“¾è¡¨","uri":"/%E7%AE%97%E6%B3%95%E5%AD%A6%E4%B9%A0-%E9%93%BE%E8%A1%A8/"},{"categories":["ç®—æ³•å­¦ä¹ "],"content":"è™šæ‹Ÿå¤´èŠ‚ç‚¹ ","date":"2022-01-26","objectID":"/%E7%AE%97%E6%B3%95%E5%AD%A6%E4%B9%A0-%E9%93%BE%E8%A1%A8/:1:0","tags":["ç®—æ³•"],"title":"ç®—æ³•å­¦ä¹ -é“¾è¡¨","uri":"/%E7%AE%97%E6%B3%95%E5%AD%A6%E4%B9%A0-%E9%93%BE%E8%A1%A8/"},{"categories":["ç®—æ³•å­¦ä¹ "],"content":"åŠ›æ‰£ç¬¬ 21 é¢˜ã€Œåˆå¹¶ä¸¤ä¸ªæœ‰åºé“¾è¡¨ã€ ListNode *mergeTwoLists(ListNode *l1, ListNode *l2) { ListNode *head = new ListNode(-1), *p = head; while (l1 \u0026\u0026 l2) { if (l1-\u003eval \u003c l2-\u003eval) { p-\u003enext = l1; l1 = l1-\u003enext; } else { p-\u003enext = l2; l2 = l2-\u003enext; } p = p-\u003enext; } p-\u003enext = l1 ? l1 : l2; return head-\u003enext; } è¿™ä¸ªç®—æ³•çš„é€»è¾‘ç±»ä¼¼äºã€Œæ‹‰æ‹‰é“¾ã€ï¼Œl1, l2 ç±»ä¼¼äºæ‹‰é“¾ä¸¤ä¾§çš„é”¯é½¿ï¼ŒæŒ‡é’ˆ p å°±å¥½åƒæ‹‰é“¾çš„æ‹‰ç´¢ï¼Œå°†ä¸¤ä¸ªæœ‰åºé“¾è¡¨åˆå¹¶ ListNode *head = new ListNode(-1), *p = head;ä¸­ä½¿ç”¨åˆ°äº†è™šæ‹Ÿå¤´èŠ‚ç‚¹ï¼Œå¦‚æœä¸ä½¿ç”¨è™šæ‹ŸèŠ‚ç‚¹ï¼Œä»£ç ä¼šå¤æ‚å¾ˆå¤šï¼Œè€Œæœ‰äº† head èŠ‚ç‚¹è¿™ä¸ªå ä½ç¬¦ï¼Œå¯ä»¥é¿å…å¤„ç†ç©ºæŒ‡é’ˆçš„æƒ…å†µï¼Œé™ä½ä»£ç çš„å¤æ‚æ€§ ","date":"2022-01-26","objectID":"/%E7%AE%97%E6%B3%95%E5%AD%A6%E4%B9%A0-%E9%93%BE%E8%A1%A8/:1:1","tags":["ç®—æ³•"],"title":"ç®—æ³•å­¦ä¹ -é“¾è¡¨","uri":"/%E7%AE%97%E6%B3%95%E5%AD%A6%E4%B9%A0-%E9%93%BE%E8%A1%A8/"},{"categories":["ç®—æ³•å­¦ä¹ "],"content":"ä¼˜å…ˆé˜Ÿåˆ— ","date":"2022-01-26","objectID":"/%E7%AE%97%E6%B3%95%E5%AD%A6%E4%B9%A0-%E9%93%BE%E8%A1%A8/:2:0","tags":["ç®—æ³•"],"title":"ç®—æ³•å­¦ä¹ -é“¾è¡¨","uri":"/%E7%AE%97%E6%B3%95%E5%AD%A6%E4%B9%A0-%E9%93%BE%E8%A1%A8/"},{"categories":["ç®—æ³•å­¦ä¹ "],"content":"åŠ›æ‰£ç¬¬ 23 é¢˜ã€Œåˆå¹¶Kä¸ªå‡åºé“¾è¡¨ã€ struct cmp { bool operator()(ListNode *p1, ListNode *p2) { return p1-\u003eval \u003e p2-\u003eval; } }; ListNode *mergeKLists(vector\u003cListNode *\u003e \u0026lists) { if (lists.size() == 0) return nullptr; ListNode *head = new ListNode(-1), *tail = head; priority_queue\u003cListNode *, vector\u003cListNode *\u003e, cmp\u003e pq; for (auto i : lists) { if (i) pq.push(i); } while (!pq.empty()) { ListNode *node = pq.top(); pq.pop(); tail-\u003enext = node; tail = tail-\u003enext; if (node-\u003enext) pq.push(node-\u003enext); } return head-\u003enext; } è¿™é‡Œæˆ‘ä»¬å°±è¦ç”¨åˆ° ä¼˜å…ˆçº§é˜Ÿåˆ— è¿™ç§æ•°æ®ç»“æ„ï¼ŒæŠŠé“¾è¡¨èŠ‚ç‚¹æ”¾å…¥ä¸€ä¸ªæœ€å°å †ï¼Œå°±å¯ä»¥æ¯æ¬¡è·å¾— k ä¸ªèŠ‚ç‚¹ä¸­çš„æœ€å°èŠ‚ç‚¹ å®ƒçš„æ—¶é—´å¤æ‚åº¦æ˜¯å¤šå°‘å‘¢ï¼Ÿ ä¼˜å…ˆé˜Ÿåˆ— pq ä¸­çš„å…ƒç´ ä¸ªæ•°æœ€å¤šæ˜¯ kï¼Œæ‰€ä»¥ä¸€æ¬¡ poll æˆ–è€… add æ–¹æ³•çš„æ—¶é—´å¤æ‚åº¦æ˜¯ O(logk)ï¼›æ‰€æœ‰çš„é“¾è¡¨èŠ‚ç‚¹éƒ½ä¼šè¢«åŠ å…¥å’Œå¼¹å‡º pqï¼Œæ‰€ä»¥ç®—æ³•æ•´ä½“çš„æ—¶é—´å¤æ‚åº¦æ˜¯ O(Nlogk)ï¼Œå…¶ä¸­ k æ˜¯é“¾è¡¨çš„æ¡æ•°ï¼ŒN æ˜¯è¿™äº›é“¾è¡¨çš„èŠ‚ç‚¹æ€»æ•°ã€‚ ","date":"2022-01-26","objectID":"/%E7%AE%97%E6%B3%95%E5%AD%A6%E4%B9%A0-%E9%93%BE%E8%A1%A8/:2:1","tags":["ç®—æ³•"],"title":"ç®—æ³•å­¦ä¹ -é“¾è¡¨","uri":"/%E7%AE%97%E6%B3%95%E5%AD%A6%E4%B9%A0-%E9%93%BE%E8%A1%A8/"},{"categories":["ç®—æ³•å­¦ä¹ "],"content":"å•é“¾è¡¨çš„å€’æ•°ç¬¬kä¸ªèŠ‚ç‚¹ ","date":"2022-01-26","objectID":"/%E7%AE%97%E6%B3%95%E5%AD%A6%E4%B9%A0-%E9%93%BE%E8%A1%A8/:3:0","tags":["ç®—æ³•"],"title":"ç®—æ³•å­¦ä¹ -é“¾è¡¨","uri":"/%E7%AE%97%E6%B3%95%E5%AD%A6%E4%B9%A0-%E9%93%BE%E8%A1%A8/"},{"categories":["ç®—æ³•å­¦ä¹ "],"content":"åŠ›æ‰£ç¬¬ 19 é¢˜ã€Œåˆ é™¤é“¾è¡¨çš„å€’æ•°ç¬¬ N ä¸ªç»“ç‚¹ã€ ListNode *removeNthFromEnd(ListNode *head, int n) { ListNode *dummy = new ListNode(-1); dummy-\u003enext = head; auto temp = FindFromEnd(dummy, n + 1); temp-\u003enext = temp-\u003enext-\u003enext; return dummy-\u003enext; } ListNode *FindFromEnd(ListNode *head, int n) { ListNode *first = head, *second = head; while (n--) { first = first-\u003enext; } while (first) { first = first-\u003enext; second = second-\u003enext; } return second; } é¦–å…ˆï¼Œæˆ‘ä»¬å…ˆè®©ä¸€ä¸ªæŒ‡é’ˆ p1 æŒ‡å‘é“¾è¡¨çš„å¤´èŠ‚ç‚¹ headï¼Œç„¶åèµ° k æ­¥ ç°åœ¨çš„ p1ï¼Œåªè¦å†èµ° n - k æ­¥ï¼Œå°±èƒ½èµ°åˆ°é“¾è¡¨æœ«å°¾çš„ç©ºæŒ‡é’ˆäº†å¯¹å§ï¼Ÿè¶è¿™ä¸ªæ—¶å€™ï¼Œå†ç”¨ä¸€ä¸ªæŒ‡é’ˆ p2 æŒ‡å‘é“¾è¡¨å¤´èŠ‚ç‚¹ head æ¥ä¸‹æ¥å°±å¾ˆæ˜¾ç„¶äº†ï¼Œè®© p1 å’Œ p2 åŒæ—¶å‘å‰èµ°ï¼Œp1 èµ°åˆ°é“¾è¡¨æœ«å°¾çš„ç©ºæŒ‡é’ˆæ—¶èµ°äº† n - k æ­¥ï¼Œp2 ä¹Ÿèµ°äº† n - k æ­¥ï¼Œä¹Ÿå°±æ˜¯é“¾è¡¨çš„å€’æ•°ç¬¬ k ä¸ªèŠ‚ç‚¹ è¿™æ ·ï¼Œåªéå†äº†ä¸€æ¬¡é“¾è¡¨ï¼Œå°±è·å¾—äº†å€’æ•°ç¬¬ k ä¸ªèŠ‚ç‚¹ p2 ä¸è¿‡æ³¨æ„æˆ‘ä»¬åˆä½¿ç”¨äº†è™šæ‹Ÿå¤´ç»“ç‚¹çš„æŠ€å·§ï¼Œä¹Ÿæ˜¯ä¸ºäº†é˜²æ­¢å‡ºç°ç©ºæŒ‡é’ˆçš„æƒ…å†µï¼Œæ¯”å¦‚è¯´é“¾è¡¨æ€»å…±æœ‰ 5 ä¸ªèŠ‚ç‚¹ï¼Œé¢˜ç›®å°±è®©ä½ åˆ é™¤å€’æ•°ç¬¬ 5 ä¸ªèŠ‚ç‚¹ï¼Œä¹Ÿå°±æ˜¯ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ï¼Œé‚£æŒ‰ç…§ç®—æ³•é€»è¾‘ï¼Œåº”è¯¥é¦–å…ˆæ‰¾åˆ°å€’æ•°ç¬¬ 6 ä¸ªèŠ‚ç‚¹ã€‚ä½†ç¬¬ä¸€ä¸ªèŠ‚ç‚¹å‰é¢å·²ç»æ²¡æœ‰èŠ‚ç‚¹äº†ï¼Œè¿™å°±ä¼šå‡ºé”™ã€‚ ä½†æœ‰äº†æˆ‘ä»¬è™šæ‹ŸèŠ‚ç‚¹ dummy çš„å­˜åœ¨ï¼Œå°±é¿å…äº†è¿™ä¸ªé—®é¢˜ï¼Œèƒ½å¤Ÿå¯¹è¿™ç§æƒ…å†µè¿›è¡Œæ­£ç¡®çš„åˆ é™¤ã€‚ ","date":"2022-01-26","objectID":"/%E7%AE%97%E6%B3%95%E5%AD%A6%E4%B9%A0-%E9%93%BE%E8%A1%A8/:3:1","tags":["ç®—æ³•"],"title":"ç®—æ³•å­¦ä¹ -é“¾è¡¨","uri":"/%E7%AE%97%E6%B3%95%E5%AD%A6%E4%B9%A0-%E9%93%BE%E8%A1%A8/"},{"categories":["ç®—æ³•å­¦ä¹ "],"content":"åŒæŒ‡é’ˆ ","date":"2022-01-26","objectID":"/%E7%AE%97%E6%B3%95%E5%AD%A6%E4%B9%A0-%E9%93%BE%E8%A1%A8/:4:0","tags":["ç®—æ³•"],"title":"ç®—æ³•å­¦ä¹ -é“¾è¡¨","uri":"/%E7%AE%97%E6%B3%95%E5%AD%A6%E4%B9%A0-%E9%93%BE%E8%A1%A8/"},{"categories":["ç®—æ³•å­¦ä¹ "],"content":"åŠ›æ‰£ç¬¬ 876 é¢˜ã€Œé“¾è¡¨çš„ä¸­é—´ç»“ç‚¹ã€ å¦‚æœæƒ³ä¸€æ¬¡éå†å°±å¾—åˆ°ä¸­é—´èŠ‚ç‚¹ï¼Œä¹Ÿéœ€è¦è€ç‚¹å°èªæ˜ï¼Œä½¿ç”¨ã€Œå¿«æ…¢æŒ‡é’ˆã€çš„æŠ€å·§ï¼š æˆ‘ä»¬è®©ä¸¤ä¸ªæŒ‡é’ˆ slow å’Œ fast åˆ†åˆ«æŒ‡å‘é“¾è¡¨å¤´ç»“ç‚¹ headã€‚ æ¯å½“æ…¢æŒ‡é’ˆ slow å‰è¿›ä¸€æ­¥ï¼Œå¿«æŒ‡é’ˆ fast å°±å‰è¿›ä¸¤æ­¥ï¼Œè¿™æ ·ï¼Œå½“ fast èµ°åˆ°é“¾è¡¨æœ«å°¾æ—¶ï¼Œslow å°±æŒ‡å‘äº†é“¾è¡¨ä¸­ç‚¹ã€‚ ListNode *middleNode(ListNode *head) { ListNode *slow = head, *fast = head; while (fast \u0026\u0026 fast-\u003enext) { slow = slow-\u003enext; fast = fast-\u003enext-\u003enext; } return slow; } ","date":"2022-01-26","objectID":"/%E7%AE%97%E6%B3%95%E5%AD%A6%E4%B9%A0-%E9%93%BE%E8%A1%A8/:4:1","tags":["ç®—æ³•"],"title":"ç®—æ³•å­¦ä¹ -é“¾è¡¨","uri":"/%E7%AE%97%E6%B3%95%E5%AD%A6%E4%B9%A0-%E9%93%BE%E8%A1%A8/"},{"categories":["ç®—æ³•å­¦ä¹ "],"content":"åŠ›æ‰£ç¬¬ 141 é¢˜ã€Œç¯å½¢é“¾è¡¨ã€ åˆ¤æ–­é“¾è¡¨æ˜¯å¦åŒ…å«ç¯å±äºç»å…¸é—®é¢˜äº†ï¼Œè§£å†³æ–¹æ¡ˆä¹Ÿæ˜¯ç”¨å¿«æ…¢æŒ‡é’ˆï¼š æ¯å½“æ…¢æŒ‡é’ˆ slow å‰è¿›ä¸€æ­¥ï¼Œå¿«æŒ‡é’ˆ fast å°±å‰è¿›ä¸¤æ­¥ã€‚ å¦‚æœ fast æœ€ç»ˆé‡åˆ°ç©ºæŒ‡é’ˆï¼Œè¯´æ˜é“¾è¡¨ä¸­æ²¡æœ‰ç¯ï¼›å¦‚æœ fast æœ€ç»ˆå’Œ slow ç›¸é‡ï¼Œé‚£è‚¯å®šæ˜¯ fast è¶…è¿‡äº† slow ä¸€åœˆï¼Œè¯´æ˜é“¾è¡¨ä¸­å«æœ‰ç¯ã€‚ bool hasCycle(ListNode *head) { ListNode *slow = head, *fast = head; while (fast \u0026\u0026 fast-\u003enext) { slow = slow-\u003enext; fast = fast-\u003enext-\u003enext; if (slow == fast) return true; } return false; } å½“ç„¶ï¼Œè¿™ä¸ªé—®é¢˜è¿˜æœ‰è¿›é˜¶ç‰ˆï¼šå¦‚æœé“¾è¡¨ä¸­å«æœ‰ç¯ï¼Œå¦‚ä½•è®¡ç®—è¿™ä¸ªç¯çš„èµ·ç‚¹ï¼Ÿ è¿™é‡Œç®€å•æä¸€ä¸‹è§£æ³•ï¼š ListNode detectCycle(ListNode head) { ListNode fast, slow; fast = slow = head; while (fast != null \u0026\u0026 fast.next != null) { fast = fast.next.next; slow = slow.next; if (fast == slow) break; } // ä¸Šé¢çš„ä»£ç ç±»ä¼¼ hasCycle å‡½æ•° if (fast == null || fast.next == null) { // fast é‡åˆ°ç©ºæŒ‡é’ˆè¯´æ˜æ²¡æœ‰ç¯ return null; } // é‡æ–°æŒ‡å‘å¤´ç»“ç‚¹ slow = head; // å¿«æ…¢æŒ‡é’ˆåŒæ­¥å‰è¿›ï¼Œç›¸äº¤ç‚¹å°±æ˜¯ç¯èµ·ç‚¹ while (slow != fast) { fast = fast.next; slow = slow.next; } return slow; } ","date":"2022-01-26","objectID":"/%E7%AE%97%E6%B3%95%E5%AD%A6%E4%B9%A0-%E9%93%BE%E8%A1%A8/:4:2","tags":["ç®—æ³•"],"title":"ç®—æ³•å­¦ä¹ -é“¾è¡¨","uri":"/%E7%AE%97%E6%B3%95%E5%AD%A6%E4%B9%A0-%E9%93%BE%E8%A1%A8/"},{"categories":["ç®—æ³•å­¦ä¹ "],"content":"åŠ›æ‰£ç¬¬ 160 é¢˜ã€Œç›¸äº¤é“¾è¡¨ã€ ListNode *getIntersectionNode(ListNode *headA, ListNode *headB) { ListNode *A = headA, *B = headB; while (A != B) { if (A) A = A-\u003enext; else A = headB; if (B) B = B-\u003enext; else B = headA; } return A; } å¦‚æœç”¨ä¸¤ä¸ªæŒ‡é’ˆ p1 å’Œ p2 åˆ†åˆ«åœ¨ä¸¤æ¡é“¾è¡¨ä¸Šå‰è¿›ï¼Œå¹¶ä¸èƒ½åŒæ—¶èµ°åˆ°å…¬å…±èŠ‚ç‚¹ï¼Œä¹Ÿå°±æ— æ³•å¾—åˆ°ç›¸äº¤èŠ‚ç‚¹ c1ã€‚ è§£å†³è¿™ä¸ªé—®é¢˜çš„å…³é”®æ˜¯ï¼Œé€šè¿‡æŸäº›æ–¹å¼ï¼Œè®© p1 å’Œ p2 èƒ½å¤ŸåŒæ—¶åˆ°è¾¾ç›¸äº¤èŠ‚ç‚¹ c1ã€‚ æ‰€ä»¥ï¼Œæˆ‘ä»¬å¯ä»¥è®© p1 éå†å®Œé“¾è¡¨ A ä¹‹åå¼€å§‹éå†é“¾è¡¨ Bï¼Œè®© p2 éå†å®Œé“¾è¡¨ B ä¹‹åå¼€å§‹éå†é“¾è¡¨ Aï¼Œè¿™æ ·ç›¸å½“äºã€Œé€»è¾‘ä¸Šã€ä¸¤æ¡é“¾è¡¨æ¥åœ¨äº†ä¸€èµ·ã€‚ å¦‚æœè¿™æ ·è¿›è¡Œæ‹¼æ¥ï¼Œå°±å¯ä»¥è®© p1 å’Œ p2 åŒæ—¶è¿›å…¥å…¬å…±éƒ¨åˆ†ï¼Œä¹Ÿå°±æ˜¯åŒæ—¶åˆ°è¾¾ç›¸äº¤èŠ‚ç‚¹ c1ï¼š é‚£ä½ å¯èƒ½ä¼šé—®ï¼Œå¦‚æœè¯´ä¸¤ä¸ªé“¾è¡¨æ²¡æœ‰ç›¸äº¤ç‚¹ï¼Œæ˜¯å¦èƒ½å¤Ÿæ­£ç¡®çš„è¿”å› null å‘¢ï¼Ÿ è¿™ä¸ªé€»è¾‘å¯ä»¥è¦†ç›–è¿™ç§æƒ…å†µçš„ï¼Œç›¸å½“äº c1 èŠ‚ç‚¹æ˜¯ null ç©ºæŒ‡é’ˆå˜›ï¼Œå¯ä»¥æ­£ç¡®è¿”å› nullã€‚ è¿™æ ·ï¼Œè¿™é“é¢˜å°±è§£å†³äº†ï¼Œç©ºé—´å¤æ‚åº¦ä¸º O(1)ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º O(N)ã€‚ ","date":"2022-01-26","objectID":"/%E7%AE%97%E6%B3%95%E5%AD%A6%E4%B9%A0-%E9%93%BE%E8%A1%A8/:4:3","tags":["ç®—æ³•"],"title":"ç®—æ³•å­¦ä¹ -é“¾è¡¨","uri":"/%E7%AE%97%E6%B3%95%E5%AD%A6%E4%B9%A0-%E9%93%BE%E8%A1%A8/"},{"categories":["ä¸ªäººç½‘ç«™"],"content":"å®‰è£…Hugo åˆ° Hugo Releases ä¸‹è½½å¯¹åº”çš„æ“ä½œç³»ç»Ÿç‰ˆæœ¬çš„HugoäºŒè¿›åˆ¶æ–‡ä»¶ï¼ˆhugoæˆ–è€…hugo.exeï¼‰ Macä¸‹ç›´æ¥ä½¿ç”¨ Homebrew å®‰è£…ï¼š brew install hugo ","date":"2020-10-15","objectID":"/hugo%E4%B8%AA%E4%BA%BA%E9%9D%99%E6%80%81%E7%BD%91%E9%A1%B5%E7%94%9F%E6%88%90/:0:1","tags":["Blog"],"title":"Hugoä¸ªäººé™æ€ç½‘é¡µç”Ÿæˆ","uri":"/hugo%E4%B8%AA%E4%BA%BA%E9%9D%99%E6%80%81%E7%BD%91%E9%A1%B5%E7%94%9F%E6%88%90/"},{"categories":["ä¸ªäººç½‘ç«™"],"content":"ç”Ÿæˆç«™ç‚¹ ä½¿ç”¨Hugoå¿«é€Ÿç”Ÿæˆç«™ç‚¹ï¼Œæ¯”å¦‚å¸Œæœ›ç”Ÿæˆåˆ° /path/to/site è·¯å¾„ï¼š $ hugo new site /path/to/site è¿™æ ·å°±åœ¨ /path/to/site ç›®å½•é‡Œç”Ÿæˆäº†åˆå§‹ç«™ç‚¹ï¼Œè¿›å»ç›®å½•ï¼š $ cd /path/to/site ç«™ç‚¹ç›®å½•ç»“æ„ï¼š â–¸ archetypes/ â–¸ content/ â–¸ layouts/ â–¸ static/ config.toml ","date":"2020-10-15","objectID":"/hugo%E4%B8%AA%E4%BA%BA%E9%9D%99%E6%80%81%E7%BD%91%E9%A1%B5%E7%94%9F%E6%88%90/:0:2","tags":["Blog"],"title":"Hugoä¸ªäººé™æ€ç½‘é¡µç”Ÿæˆ","uri":"/hugo%E4%B8%AA%E4%BA%BA%E9%9D%99%E6%80%81%E7%BD%91%E9%A1%B5%E7%94%9F%E6%88%90/"},{"categories":["ä¸ªäººç½‘ç«™"],"content":"åˆ›å»ºæ–‡ç«  åˆ›å»ºä¸€ä¸ª about é¡µé¢ï¼š $ hugo new about.md about.md è‡ªåŠ¨ç”Ÿæˆåˆ°äº† content/about.md ï¼Œæ‰“å¼€ about.md çœ‹ä¸‹ï¼š +++ date = \"2015-10-25T08:36:54-07:00\" draft = true title = \"about\" +++ æ­£æ–‡å†…å®¹ å†…å®¹æ˜¯ Markdown æ ¼å¼çš„ï¼Œ+++ ä¹‹é—´çš„å†…å®¹æ˜¯ TOML æ ¼å¼çš„ï¼Œæ ¹æ®ä½ çš„å–œå¥½ï¼Œä½ å¯ä»¥æ¢æˆ YAML æ ¼å¼ï¼ˆä½¿ç”¨ --- æ ‡è®°ï¼‰æˆ–è€… JSON æ ¼å¼ã€‚ åˆ›å»ºç¬¬ä¸€ç¯‡æ–‡ç« ï¼Œæ”¾åˆ° post ç›®å½•ï¼Œæ–¹ä¾¿ä¹‹åç”Ÿæˆèšåˆé¡µé¢ã€‚ $ hugo new post/first.md ","date":"2020-10-15","objectID":"/hugo%E4%B8%AA%E4%BA%BA%E9%9D%99%E6%80%81%E7%BD%91%E9%A1%B5%E7%94%9F%E6%88%90/:0:3","tags":["Blog"],"title":"Hugoä¸ªäººé™æ€ç½‘é¡µç”Ÿæˆ","uri":"/hugo%E4%B8%AA%E4%BA%BA%E9%9D%99%E6%80%81%E7%BD%91%E9%A1%B5%E7%94%9F%E6%88%90/"},{"categories":["ä¸ªäººç½‘ç«™"],"content":"å®‰è£…çš®è‚¤ åˆ° çš®è‚¤åˆ—è¡¨ æŒ‘é€‰ä¸€ä¸ªå¿ƒä»ªçš„çš®è‚¤ï¼Œæ¯”å¦‚ä½ è§‰å¾— Hyde çš®è‚¤ä¸é”™ï¼Œæ‰¾åˆ°ç›¸å…³çš„ GitHub åœ°å€ï¼Œåˆ›å»ºç›®å½• themesï¼Œåœ¨ themes ç›®å½•é‡ŒæŠŠçš®è‚¤ git clone ä¸‹æ¥ï¼š # åˆ›å»º themes ç›®å½• $ cd themes $ git clone https://github.com/spf13/hyde.git ","date":"2020-10-15","objectID":"/hugo%E4%B8%AA%E4%BA%BA%E9%9D%99%E6%80%81%E7%BD%91%E9%A1%B5%E7%94%9F%E6%88%90/:0:4","tags":["Blog"],"title":"Hugoä¸ªäººé™æ€ç½‘é¡µç”Ÿæˆ","uri":"/hugo%E4%B8%AA%E4%BA%BA%E9%9D%99%E6%80%81%E7%BD%91%E9%A1%B5%E7%94%9F%E6%88%90/"},{"categories":["ä¸ªäººç½‘ç«™"],"content":"è¿è¡ŒHugo åœ¨ä½ çš„ç«™ç‚¹æ ¹ç›®å½•æ‰§è¡Œ Hugo å‘½ä»¤è¿›è¡Œè°ƒè¯•ï¼š $ hugo server --theme=hyde --buildDrafts è‹¥åœ¨config.tomlè®¾ç½®äº†themeå’ŒbuildDraftsï¼š $ hugo server æµè§ˆå™¨é‡Œæ‰“å¼€ï¼š http://localhost:1313 ","date":"2020-10-15","objectID":"/hugo%E4%B8%AA%E4%BA%BA%E9%9D%99%E6%80%81%E7%BD%91%E9%A1%B5%E7%94%9F%E6%88%90/:0:5","tags":["Blog"],"title":"Hugoä¸ªäººé™æ€ç½‘é¡µç”Ÿæˆ","uri":"/hugo%E4%B8%AA%E4%BA%BA%E9%9D%99%E6%80%81%E7%BD%91%E9%A1%B5%E7%94%9F%E6%88%90/"},{"categories":["ä¸ªäººç½‘ç«™"],"content":"éƒ¨ç½² å‡è®¾ä½ éœ€è¦éƒ¨ç½²åœ¨ GitHub Pages ä¸Šï¼Œé¦–å…ˆåœ¨GitHubä¸Šåˆ›å»ºä¸€ä¸ªRepositoryï¼Œå‘½åä¸ºï¼šcoderzh.github.ioï¼ˆcoderzhæ›¿æ¢ä¸ºä½ çš„githubç”¨æˆ·åï¼‰ã€‚ åœ¨ç«™ç‚¹æ ¹ç›®å½•æ‰§è¡Œ Hugo å‘½ä»¤ç”Ÿæˆæœ€ç»ˆé¡µé¢ï¼š $ hugo --theme=hyde --baseUrl=\"http://coderzh.github.io/\" æˆ–è€… $ hugo ï¼ˆæ³¨æ„ï¼Œä»¥ä¸Šå‘½ä»¤å¹¶ä¸ä¼šç”Ÿæˆè‰ç¨¿é¡µé¢ï¼Œå¦‚æœæœªç”Ÿæˆä»»ä½•æ–‡ç« ï¼Œè¯·å»æ‰æ–‡ç« å¤´éƒ¨çš„ draft=true å†é‡æ–°ç”Ÿæˆã€‚ï¼‰ å¦‚æœä¸€åˆ‡é¡ºåˆ©ï¼Œæ‰€æœ‰é™æ€é¡µé¢éƒ½ä¼šç”Ÿæˆåˆ° public ç›®å½•ï¼Œå°†pubilcç›®å½•é‡Œæ‰€æœ‰æ–‡ä»¶ push åˆ°åˆšåˆ›å»ºçš„Repositoryçš„ master åˆ†æ”¯ã€‚ æµè§ˆå™¨é‡Œè®¿é—®ï¼šhttp://coderzh.github.io/ ","date":"2020-10-15","objectID":"/hugo%E4%B8%AA%E4%BA%BA%E9%9D%99%E6%80%81%E7%BD%91%E9%A1%B5%E7%94%9F%E6%88%90/:0:6","tags":["Blog"],"title":"Hugoä¸ªäººé™æ€ç½‘é¡µç”Ÿæˆ","uri":"/hugo%E4%B8%AA%E4%BA%BA%E9%9D%99%E6%80%81%E7%BD%91%E9%A1%B5%E7%94%9F%E6%88%90/"},{"categories":["ä¸ªäººç½‘ç«™"],"content":"å…¶ä»–ç›¸å…³ å…³äºæ–‡ç« å†…å®¹ å®ƒä½¿æ‚¨å¯ä»¥ç›´æ¥åŒ…å«å†…å®¹çš„å…ƒæ•°æ®ã€‚Hugoæ”¯æŒå‡ ç§ä¸åŒçš„æ ¼å¼ï¼Œæ¯ç§æ ¼å¼éƒ½æœ‰è‡ªå·±çš„è¯†åˆ«ä»¤ç‰Œã€‚ æ”¯æŒçš„æ ¼å¼ï¼š TOMLï¼Œä»¥â€œ+++â€æ ‡è¯†ã€‚ YAMLï¼Œç”±â€œ---â€æ ‡è¯†ã€‚ JSONï¼Œä¸€ä¸ªå•ç‹¬çš„JSONå¯¹è±¡ï¼Œç”±â€™{â€˜å’Œâ€™}â€˜åŒ…å›´ï¼Œæ¯è¡Œå„è‡ªã€‚ YAML Example --- title: \"spf13-vim 3.0 release and new website\" description: \"spf13-vim is a cross platform distribution of vim plugins and resources for Vim.\" tags: [ \".vimrc\", \"plugins\", \"spf13-vim\", \"vim\" ] lastmod: 2015-12-23 date: \"2012-04-06\" categories: - \"Development\" - \"VIM\" slug: \"spf13-vim-3-0-release-and-new-website\" --- Content of the file goes Here Required variables title The title for the content description The description for the content date The date the content will be sorted by taxonomies These will use the field name of the plural form of the index (see tags and categories above) Optional variables aliases An array of one or more aliases (e.g. old published path of a renamed content) that would be created to redirect to this content. See Aliases for details. draft If true, the content will not be rendered unless hugo is called with --buildDrafts publishdate If in the future, content will not be rendered unless hugo is called with --buildFuture type The type of the content (will be derived from the directory automatically if unset) isCJKLanguage If true, explicitly treat the content as CJKLanguage (.Summary and .WordCount can work properly in CJKLanguage) weight Used for sorting markup (Experimental) Specify \"rst\" for reStructuredText (requires rst2html) or \"md\" (default) for Markdown slug The token to appear in the tail of the URL, or url The full path to the content from the web root. If neither slug or url is present, the filename will be used. å…³äºé…ç½® é€šå¸¸çš„ä½¿ç”¨æƒ…å†µä¸‹ï¼Œä¸€ä¸ªç½‘ç«™å¹¶ä¸éœ€è¦ä¸€ä¸ªé…ç½®æ–‡ä»¶ï¼Œå› ä¸ºå®ƒçš„ç›®å½•ç»“æ„å’Œæ¨¡æ¿å°±æä¾›äº†ä¸»è¦çš„é…ç½®ã€‚ Hugo éœ€è¦åœ¨æºç›®å½•æŸ¥æ‰¾ä¸€ä¸ª config.toml çš„é…ç½®æ–‡ä»¶ã€‚å¦‚æœè¿™ä¸ªæ–‡ä»¶ä¸å­˜åœ¨ï¼Œå°†ä¼šæŸ¥æ‰¾ config.yamlï¼Œç„¶åæ˜¯ config.json ã€‚ è¿™ä¸ªé…ç½®æ–‡ä»¶æ˜¯ä¸€ä¸ªæ•´ç«™çš„é…ç½®ã€‚å®ƒç»™ Hugo æä¾›äº†å¦‚ä½•æ„å»ºç«™ç‚¹çš„æ–¹å¼ï¼Œæ¯”å¦‚å…¨å±€çš„å‚æ•°å’Œèœå•ã€‚ é…ç½®å˜é‡ ä¸‹é¢æ˜¯ Hugo å®šä¹‰å¥½çš„å˜é‡åˆ—è¡¨ï¼Œä»¥åŠä»–ä»¬çš„é»˜è®¤å€¼ï¼Œä½ å¯ä»¥è®¾ç½®ä»–ä»¬ï¼š --- archetypedir: \"archetype\" # hostname (and path) to the root, e.g. http://spf13.com/ baseURL: \"\" # include content marked as draft buildDrafts: false # include content with publishdate in the future buildFuture: false # enable this to make all relative URLs relative to content root. Note that this does not affect absolute URLs. relativeURLs: false canonifyURLs: false # config file (default is path/config.yaml|json|toml) config: \"config.toml\" contentdir: \"content\" dataDir: \"data\" defaultExtension: \"html\" defaultLayout: \"post\" disableLiveReload: false # Do not build RSS files disableRSS: false # Do not build Sitemap file disableSitemap: false # edit new content with this editor, if provided editor: \"\" footnoteAnchorPrefix: \"\" footnoteReturnLinkContents: \"\" # google analytics tracking id googleAnalytics: \"\" languageCode: \"\" layoutdir: \"layouts\" # Enable Logging log: false # Log File path (if set, logging enabled automatically) logFile: \"\" # \"yaml\", \"toml\", \"json\" metaDataFormat: \"toml\" newContentEditor: \"\" # Don't sync modification time of files noTimes: false paginate: 10 paginatePath: \"page\" permalinks: # Pluralize titles in lists using inflect pluralizeListTitles: true # Preserve special characters in taxonomy names (\"GÃ©rard Depardieu\" vs \"Gerard Depardieu\") preserveTaxonomyNames: false # filesystem path to write files to publishdir: \"public\" # color-codes for highlighting derived from this style pygmentsStyle: \"monokai\" # true: use pygments-css or false: color-codes directly pygmentsUseClasses: false # default sitemap configuration map sitemap: # filesystem path to read files relative from source: \"\" staticdir: \"static\" # display memory and timing of different steps of the program stepAnalysis: false # theme to use (located in /doc/themes/THEMENAME/) theme: \"\" title: \"\" # if true, use /filename.html instead of /filename/ uglyURLs: false # Do not make the url/path to lowercase disablePathToLower: false # if true, auto-detect Chinese/Japanese/Korean Languages in the content. (.Summary and .WordCount can work properly in CJKLanguage) hasCJKLanguage false # verbose output verbose: false # verbose logging verboseLog: false ","date":"2020-10-15","objectID":"/hugo%E4%B8%AA%E4%BA%BA%E9%9D%99%E6%80%81%E7%BD%91%E9%A1%B5%E7%94%9F%E6%88%90/:0:7","tags":["Blog"],"title":"Hugoä¸ªäººé™æ€ç½‘é¡µç”Ÿæˆ","uri":"/hugo%E4%B8%AA%E4%BA%BA%E9%9D%99%E6%80%81%E7%BD%91%E9%A1%B5%E7%94%9F%E6%88%90/"},{"categories":["ä¸ªäººç½‘ç«™"],"content":"GitHub Pages GitHub Pagesæ˜¯GitHubæä¾›ç»™å¤§å®¶çš„å¿«é€Ÿéƒ¨ç½²é™æ€ç½‘é¡µçš„åŠŸèƒ½ï¼Œä½†æ˜¯ç”±äºå›½å†…è®¿é—®æ¯”è¾ƒæ…¢ï¼Œè¿™é‡Œæä¾›ä¸€ä¸ªç›¸å¯¹è¾ƒå¿«çš„è§£å†³åŠæ³•ï¼Œå°±æ˜¯ç”¨GitHubåŠ Vercelã€‚ ","date":"2020-10-14","objectID":"/%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E7%BD%91%E7%AB%99github%E5%8A%A0vercel/:0:1","tags":["Blog"],"title":"æ­å»ºä¸ªäººç½‘ç«™:GitHubåŠ Vercel","uri":"/%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E7%BD%91%E7%AB%99github%E5%8A%A0vercel/"},{"categories":["ä¸ªäººç½‘ç«™"],"content":"ç¬¬ä¸€æ­¥ï¼šæ³¨å†Œç™»å½•Vercel æˆ‘æƒ³å¤§å®¶åº”è¯¥éƒ½æœ‰GitHubè´¦å·å§ï¼Œè¿™é‡Œå°±ä¸å¤šè¯´äº†ã€‚ ç‚¹å‡»Vercelå®˜ç½‘,å¹¶ä½¿ç”¨GitHubç™»å½•ã€‚ æ³¨æ„âš ï¸ï¼šGitHubè´¦å·ä¸è¦ä½¿ç”¨QQé‚®ç®±ä½œä¸ºä¸»é‚®ç®±ã€‚å¦‚æœå·²ç»ç”¨QQé‚®ç®±æ³¨å†Œäº†GitHubï¼Œå¯ä»¥åˆ°Setting -\u003e Emailsé‡Œä¿®æ”¹è‡ªå·±çš„ä¸»é‚®ç®±ã€‚ ","date":"2020-10-14","objectID":"/%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E7%BD%91%E7%AB%99github%E5%8A%A0vercel/:0:2","tags":["Blog"],"title":"æ­å»ºä¸ªäººç½‘ç«™:GitHubåŠ Vercel","uri":"/%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E7%BD%91%E7%AB%99github%E5%8A%A0vercel/"},{"categories":["ä¸ªäººç½‘ç«™"],"content":"ç¬¬äºŒæ­¥ï¼šå¯¼å…¥ä»“åº“ å®ƒä¼šè®©ä½ é€‰æ‹©ä¸€ç§ç™»å½•Vercelçš„æ–¹æ³•ï¼Œæ”¯æŒä½¿ç”¨GitHubï¼ŒGitLabå’ŒBitbucketç™»å½•ï¼Œè¿™é‡Œæˆ‘ä»¬é€‰GitHubï¼Œåé¢å°±æ˜¯æ— è„‘Nextçš„æ­¥éª¤ã€‚ é¡ºåˆ©çš„è¯ç¨ç­‰ç‰‡åˆ»å°±ä¼šå¼¹å‡ºéƒ¨ç½²æˆåŠŸçš„é¡µé¢ï¼Œè¿˜æœ‰æµ®å¤¸çš„æ’’èŠ±ã€‚ éƒ¨ç½²å®Œæˆä¹‹åå¯ä»¥ç‚¹å‡»visitè¿›å…¥ç½‘é¡µçœ‹çœ‹æ•ˆæœã€‚ ","date":"2020-10-14","objectID":"/%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E7%BD%91%E7%AB%99github%E5%8A%A0vercel/:0:3","tags":["Blog"],"title":"æ­å»ºä¸ªäººç½‘ç«™:GitHubåŠ Vercel","uri":"/%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E7%BD%91%E7%AB%99github%E5%8A%A0vercel/"},{"categories":["ä¸ªäººç½‘ç«™"],"content":"ç¬¬ä¸‰æ­¥ï¼šé…ç½®åŸŸå 1.ç‚¹å‡»view Domainsè¿›è¡Œç»‘å®šè‡ªå·±çš„åŸŸåæˆ–è€…ç‚¹å‡»SettingsğŸ‘‰DomainsğŸ‘‰è¾“å…¥è‡ªå·±çš„åŸŸå 2.è¾“å…¥è‡ªå·±çš„åŸŸåï¼Œç„¶åç‚¹Addï¼Œå®ƒä¼šå¼¹å‡ºæ¥ä¸€äº›éœ€è¦åšçš„é…ç½®ï¼Œæ¥ä¸‹æ¥éœ€è¦å»æˆ‘ä»¬çš„åŸŸåæä¾›å•†é‚£é‡Œæ ¹æ®Vercelç»™å‡ºçš„è¦æ±‚è¿›è¡Œé…ç½®ã€‚éœ€è¦ä¿®æ”¹çš„æœ‰ï¼šName Serversä»¥åŠåŸŸåè§£æ æœ€åç­‰å¾…ç­‰è¿™ä¸¤ä¸ªæ”¹åŠ¨éƒ½ç”Ÿæ•ˆä¹‹åå°±å¯ä»¥ç”¨æˆ‘ä»¬è‡ªå·±çš„åŸŸåè®¿é—®åˆšåˆšå»ºç«‹çš„ç½‘ç«™å•¦~ ä»¥åæƒ³è¦ä¿®æ”¹ç½‘ç«™çš„è¯ï¼Œåªéœ€è¦å°†æ”¹åŠ¨pushåˆ°GitHubä¸Šï¼Œvercelä¼šè‡ªåŠ¨æŠŠæ”¹åŠ¨åŒæ­¥è¿‡æ¥ï¼Œå®Œå…¨ä¸ç”¨ç®¡ï¼Œè¶…çœå¿ƒã€‚ åœ¨ä¸€çº§åŸŸåé…ç½®å¥½ä¹‹åï¼Œä¹Ÿå¯ä»¥ç›´æ¥åœ¨vercelä¸­ä½¿ç”¨äºŒçº§åŸŸåï¼Œæ— éœ€è¿›è¡Œé¢å¤–è®¾ç½®ã€‚ ","date":"2020-10-14","objectID":"/%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E7%BD%91%E7%AB%99github%E5%8A%A0vercel/:0:4","tags":["Blog"],"title":"æ­å»ºä¸ªäººç½‘ç«™:GitHubåŠ Vercel","uri":"/%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E7%BD%91%E7%AB%99github%E5%8A%A0vercel/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"ä¸€ã€å¼•å…¥ä¾èµ– \u003cdependency\u003e \u003cgroupId\u003eorg.thymeleaf.extras\u003c/groupId\u003e \u003cartifactId\u003ethymeleaf-extras-springsecurity4\u003c/artifactId\u003e \u003cversion\u003e3.0.4.RELEASE\u003c/version\u003e \u003c/dependency\u003e \u003cdependency\u003e \u003cgroupId\u003eorg.springframework.boot\u003c/groupId\u003e \u003cartifactId\u003espring-boot-starter-security\u003c/artifactId\u003e \u003c/dependency\u003e ","date":"2020-10-12","objectID":"/%E6%B5%85%E5%AD%A6springsecurity-mybatis/:0:1","tags":["SpringBoot"],"title":"æµ…å­¦SpringSecurity+Mybatis","uri":"/%E6%B5%85%E5%AD%A6springsecurity-mybatis/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"äºŒã€é…ç½®WebSecurityConfigurerAdapter ä½¿ç”¨å†…å­˜ç”¨æˆ·å‚¨å­˜ä¸”è®¤è¯ @EnableWebSecurity @EnableGlobalMethodSecurity(prePostEnabled = true) // å¼€å¯æ–¹æ³•çº§å®‰å…¨éªŒè¯ public class SecurityConfig extends WebSecurityConfigurerAdapter { @Override protected void configure(HttpSecurity http) throws Exception { http.authorizeRequests()//è¡¨ç¤ºä¸‹é¢æ˜¯è®¤è¯çš„é…ç½® .antMatchers(\"/login\").permitAll() .antMatchers(\"/login/form\").permitAll() .antMatchers(\"/css/**\").permitAll() .antMatchers(\"/js/**\").permitAll() .anyRequest()//ä»»ä½•è¯·æ±‚ .authenticated();//éƒ½éœ€è¦èº«ä»½è®¤è¯ http.formLogin()//è¡¨å•è®¤è¯ .loginPage(\"/login\")//ä½¿ç”¨æœ¬äººåˆ¶ä½œçš„ç™»å½•ç•Œé¢ .usernameParameter(\"user\")//usernameæ›´æ”¹ .loginProcessingUrl(\"/login/form\")//è¡¨å•æäº¤çš„api .defaultSuccessUrl(\"/\")//ç™»å½•æˆåŠŸè·³è½¬é¡µé¢ .failureUrl(\"/login/error\").permitAll();//ç™»å½•é”™è¯¯è·³è½¬ç•Œé¢ http.logout().logoutSuccessUrl(\"/login\");//ç™»å‡º http.csrf().disable();//é˜²æ­¢è·¨ç«™æ”»å‡» } @Override protected void configure(AuthenticationManagerBuilder auth) throws Exception { auth.inMemoryAuthentication()//ä½¿ç”¨å†…å­˜ç”¨æˆ·å‚¨å­˜ //é…ç½®äº†ä¸€ä¸ªuserç”¨æˆ·å’Œä¸€ä¸ªadminç”¨æˆ· .withUser(\"user\").password(\"password\").roles(\"USER\").and() .withUser(\"admin\").password(\"password\").roles(\"USER\", \"ADMIN\"); } } ","date":"2020-10-12","objectID":"/%E6%B5%85%E5%AD%A6springsecurity-mybatis/:0:2","tags":["SpringBoot"],"title":"æµ…å­¦SpringSecurity+Mybatis","uri":"/%E6%B5%85%E5%AD%A6springsecurity-mybatis/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"ä¸‰ã€ç”±æ•°æ®åº“è®¤è¯ç™»å½• åœ¨MySQLä¸­åˆ›å»ºç”¨æˆ·è¡¨ CREATE TABLE `admin` ( `username` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci DEFAULT NULL, `password` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci DEFAULT NULL, `id` int(11) NOT NULL AUTO_INCREMENT, `role` varchar(255) DEFAULT NULL, PRIMARY KEY (`id`) ) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8; INSERT INTO `admin` VALUES ('admin', '123', 1, 'admin'); entityå±‚åˆ›å»ºå®ä½“ @Data //ä½¿ç”¨lombok,ç®€åŒ–get,set public class UserInfo { private Integer id; private String username; private String password; private String role; } daoå±‚åˆ›å»ºæ•°æ®å­˜å–å¯¹è±¡ @Mapper//mapper.xmlåˆ†ç¦» @Repository public interface UserInfoDao { UserInfo getUserInfoByUsername(String username); } åˆ›å»ºdaoå¯¹åº”çš„mapper.xml \u003c?xml version=\"1.0\" encoding=\"UTF-8\" ?\u003e \u003c!DOCTYPE mapper PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\" \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\"\u003e \u003cmapper namespace=\"cn.llssit.ls.dao.UserInfoDao\"\u003e \u003cselect id=\"getUserInfoByUsername\" resultType=\"UserInfo\"\u003e select * from admin where username = #{username} \u003c/select\u003e \u003c/mapper\u003e serviceå±‚ interface public interface UserInfoSevice { UserInfo getUserInfoByUsername(String username); } impl @Service public class UserInfoServiceImpl implements UserInfoSevice { @Autowired private UserInfoDao userInfoDao; @Override public UserInfo getUserInfoByUsername(String username) { return userInfoDao.getUserInfoByUsername(username); } } controllerå±‚æˆ–è€…å…¶ä»–è¿ç”¨ springsecurityæ•°æ®åº“è®¤è¯ é¦–å…ˆéœ€è¦é‡å†™æ¥å£loadUserByUsername @Component public class MyUserDetailService implements UserDetailsService { @Autowired private UserInfoSevice userInfoService; @Override public UserDetails loadUserByUsername(String s) throws UsernameNotFoundException { // é€šè¿‡ç”¨æˆ·åä»æ•°æ®åº“è·å–ç”¨æˆ·ä¿¡æ¯ UserInfo userInfo = userInfoService.getUserInfoByUsername(s); if (userInfo == null) { throw new UsernameNotFoundException(\"ç”¨æˆ·ä¸å­˜åœ¨\"); } // å¾—åˆ°ç”¨æˆ·è§’è‰² String role = userInfo.getRole(); // è§’è‰²é›†åˆ List\u003cGrantedAuthority\u003e authorities = new ArrayList\u003c\u003e(); // è§’è‰²å¿…é¡»ä»¥`ROLE_`å¼€å¤´ï¼Œæ•°æ®åº“ä¸­æ²¡æœ‰ï¼Œåˆ™åœ¨è¿™é‡ŒåŠ  authorities.add(new SimpleGrantedAuthority(\"ROLE_\" + role)); return new User( userInfo.getUsername(), // å› ä¸ºæ•°æ®åº“æ˜¯æ˜æ–‡ï¼Œæ‰€ä»¥è¿™é‡Œéœ€åŠ å¯†å¯†ç  new BCryptPasswordEncoder().encode(userInfo.getPassword()), authorities ); } } ç„¶ååˆ›å»ºSecurityçš„é…ç½®ç±»WebSecurityConfigç»§æ‰¿WebSecurityConfigurerAdapterï¼Œå¹¶é‡å†™configure(auth)æ–¹æ³• @EnableWebSecurity @EnableGlobalMethodSecurity(prePostEnabled = true) // å¼€å¯æ–¹æ³•çº§å®‰å…¨éªŒè¯ public class SecurityConfig extends WebSecurityConfigurerAdapter { @Autowired private MyUserDetailService userDatailService; @Override protected void configure(HttpSecurity http) throws Exception { http.authorizeRequests() .antMatchers(\"/login\").permitAll() .antMatchers(\"/login/form\").permitAll() .antMatchers(\"/css/**\").permitAll() .antMatchers(\"/js/**\").permitAll() .anyRequest() .authenticated(); http.formLogin() .loginPage(\"/login\") .usernameParameter(\"user\") .loginProcessingUrl(\"/login/form\") .defaultSuccessUrl(\"/\") .failureUrl(\"/login/error\").permitAll(); http.logout().logoutSuccessUrl(\"/login\"); http.csrf().disable(); } @Override protected void configure(AuthenticationManagerBuilder auth) throws Exception { auth // ä»æ•°æ®åº“è¯»å–çš„ç”¨æˆ·è¿›è¡Œèº«ä»½è®¤è¯ .userDetailsService(userDatailService) .passwordEncoder(new BCryptPasswordEncoder()); } } è§’è‰²è®¿é—® @EnableGlobalMethodSecurity(prePostEnabled = true) // å¼€å¯æ–¹æ³•çº§å®‰å…¨éªŒè¯ ä¿®æ”¹Controller.javaç±»ï¼Œå¢åŠ æ–¹æ³•çš„è®¿é—®æƒé™@PreAuthorize(\"hasAnyRole('admin')\") ","date":"2020-10-12","objectID":"/%E6%B5%85%E5%AD%A6springsecurity-mybatis/:0:3","tags":["SpringBoot"],"title":"æµ…å­¦SpringSecurity+Mybatis","uri":"/%E6%B5%85%E5%AD%A6springsecurity-mybatis/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"Javaé›†åˆæ¡†æ¶ å¯¼å…¥åŒ… import java.util.*; ArrayList ä¸€ã€å®šä¹‰ä¸€ä¸ªArrayList //é»˜è®¤åˆ›å»ºä¸€ä¸ªArrayListé›†åˆ List\u003cString\u003e list = new ArrayList\u003c\u003e(); //åˆ›å»ºä¸€ä¸ªåˆå§‹åŒ–é•¿åº¦ä¸º100çš„ArrayListé›†åˆ List\u003cString\u003e initlist = new ArrayList\u003c\u003e(100); //å°†å…¶ä»–ç±»å‹çš„é›†åˆè½¬ä¸ºArrayList List\u003cString\u003e setList = new ArrayList\u003c\u003e(new HashSet()); äºŒã€ArrayListå¸¸ç”¨æ–¹æ³• add(E element) set(int index, E element) å› ä¸ºArrayListåº•å±‚æ˜¯ç”±æ•°ç»„å®ç°çš„ï¼Œsetå®ç°éå¸¸ç®€å•ï¼Œè°ƒç”¨ set(4, \"4\") é€šè¿‡ä¼ å…¥çš„æ•°å­—ä¸‹æ ‡æ‰¾åˆ°å¯¹åº”çš„ä½ç½®ï¼Œæ›¿æ¢å…¶ä¸­çš„å…ƒç´ ï¼Œå‰æä¹Ÿéœ€è¦é¦–å…ˆåˆ¤æ–­ä¼ å…¥çš„æ•°ç»„ä¸‹æ ‡æ˜¯å¦è¶Šç•Œã€‚ get(int index) remove(int index) remove(Object o) å…¶ä»–æ–¹æ³• size() : è·å–é›†åˆé•¿åº¦ï¼Œé€šè¿‡å®šä¹‰åœ¨ArrayListä¸­çš„ç§æœ‰å˜é‡sizeå¾—åˆ° isEmpty()ï¼šæ˜¯å¦ä¸ºç©ºï¼Œé€šè¿‡å®šä¹‰åœ¨ArrayListä¸­çš„ç§æœ‰å˜é‡sizeå¾—åˆ° contains(Object o)ï¼šæ˜¯å¦åŒ…å«æŸä¸ªå…ƒç´ ï¼Œé€šè¿‡éå†åº•å±‚æ•°ç»„elementDataï¼Œé€šè¿‡equalsæˆ–==è¿›è¡Œåˆ¤æ–­ clear()ï¼šé›†åˆæ¸…ç©ºï¼Œé€šè¿‡éå†åº•å±‚æ•°ç»„elementDataï¼Œè®¾ç½®ä¸ºnull ArrayListçš„éå† List\u003cString\u003e list=new ArrayList\u003cString\u003e(); list.add(\"Hello\"); list.add(\"World\"); list.add(\"HAHAHAHA\"); //ç¬¬ä¸€ç§éå†æ–¹æ³•ä½¿ç”¨ For-Each éå† List for (String str : list) { //ä¹Ÿå¯ä»¥æ”¹å†™ for(int i=0;i\u003clist.size();i++) è¿™ç§å½¢å¼ System.out.println(str); } //ç¬¬äºŒç§éå†ï¼ŒæŠŠé“¾è¡¨å˜ä¸ºæ•°ç»„ç›¸å…³çš„å†…å®¹è¿›è¡Œéå† String[] strArray=new String[list.size()]; list.toArray(strArray); for(int i=0;i\u003cstrArray.length;i++) //è¿™é‡Œä¹Ÿå¯ä»¥æ”¹å†™ä¸º for(String str:strArray) è¿™ç§å½¢å¼ { System.out.println(strArray[i]); } //ç¬¬ä¸‰ç§éå† ä½¿ç”¨è¿­ä»£å™¨è¿›è¡Œç›¸å…³éå† Iterator\u003cString\u003e ite=list.iterator(); while(ite.hasNext())//åˆ¤æ–­ä¸‹ä¸€ä¸ªå…ƒç´ ä¹‹åæœ‰å€¼ { System.out.println(ite.next()); } HashMap ä¸€ã€å®šä¹‰ä¸€ä¸ªHashMap Map\u003cString, String\u003e map = new HashMap\u003c\u003e(); äºŒã€HashMapå¸¸ç”¨æ–¹æ³• public V put(K key, V value) :æ’å…¥é”®å€¼å¯¹æ•°æ® public V get(Object key) :æ ¹æ®é”®å€¼è·å–é”®å€¼å¯¹å€¼æ•°æ® public int size() :è·å–Mapä¸­é”®å€¼å¯¹çš„ä¸ªæ•° public boolean containsKey(Object key) :åˆ¤æ–­Mapé›†åˆä¸­æ˜¯å¦åŒ…å«é”®ä¸ºkeyçš„é”®å€¼å¯¹ boolean containsValue(Object value) :åˆ¤æ–­Mapé›†åˆä¸­æ˜¯å¦åŒ…å«å€¼ä¸ºvalueçš„é”®å€¼å¯¹ public boolean isEmpty() :åˆ¤æ–­Mapé›†åˆä¸­æ˜¯å¦æ²¡æœ‰ä»»ä½•é”®å€¼å¯¹ public V remove(Object key) :æ ¹æ®é”®å€¼åˆ é™¤Mapä¸­é”®å€¼å¯¹ public void clear() :æ¸…ç©ºMapé›†åˆä¸­æ‰€æœ‰çš„é”®å€¼å¯¹ HashMapçš„éå† Map\u003cString, String\u003e map = new HashMap\u003cString, String\u003e(); map.put(\"1\", \"value1\"); map.put(\"2\", \"value2\"); map.put(\"3\", \"value3\"); //ç¬¬ä¸€ç§ï¼šæ™®éä½¿ç”¨ï¼ŒäºŒæ¬¡å–å€¼ System.out.println(\"é€šè¿‡Map.keySetéå†keyå’Œvalueï¼š\"); for (String key : map.keySet()) { System.out.println(\"key= \"+ key + \" and value= \" + map.get(key)); } //ç¬¬äºŒç§ System.out.println(\"é€šè¿‡Map.entrySetä½¿ç”¨iteratoréå†keyå’Œvalueï¼š\"); Iterator\u003cMap.Entry\u003cString, String\u003e\u003e it = map.entrySet().iterator(); while (it.hasNext()) { Map.Entry\u003cString, String\u003e entry = it.next(); System.out.println(\"key= \" + entry.getKey() + \" and value= \" + entry.getValue()); } //ç¬¬ä¸‰ç§ï¼šæ¨èï¼Œå°¤å…¶æ˜¯å®¹é‡å¤§æ—¶ System.out.println(\"é€šè¿‡Map.entrySetéå†keyå’Œvalue\"); for (Map.Entry\u003cString, String\u003e entry : map.entrySet()) { System.out.println(\"key= \" + entry.getKey() + \" and value= \" + entry.getValue()); } //ç¬¬å››ç§ System.out.println(\"é€šè¿‡Map.values()éå†æ‰€æœ‰çš„valueï¼Œä½†ä¸èƒ½éå†key\"); for (String v : map.values()) { System.out.println(\"value= \" + v); } ","date":"2020-10-12","objectID":"/java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/:0:1","tags":["Java"],"title":"Javaå­¦ä¹ ç¬”è®°","uri":"/java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"Javaå¤šçº¿ç¨‹ Java ç»™å¤šçº¿ç¨‹ç¼–ç¨‹æä¾›äº†å†…ç½®çš„æ”¯æŒã€‚ ä¸€æ¡çº¿ç¨‹æŒ‡çš„æ˜¯è¿›ç¨‹ä¸­ä¸€ä¸ªå•ä¸€é¡ºåºçš„æ§åˆ¶æµï¼Œä¸€ä¸ªè¿›ç¨‹ä¸­å¯ä»¥å¹¶å‘å¤šä¸ªçº¿ç¨‹ï¼Œæ¯æ¡çº¿ç¨‹å¹¶è¡Œæ‰§è¡Œä¸åŒçš„ä»»åŠ¡ã€‚ å¤šçº¿ç¨‹æ˜¯å¤šä»»åŠ¡çš„ä¸€ç§ç‰¹åˆ«çš„å½¢å¼ï¼Œä½†å¤šçº¿ç¨‹ä½¿ç”¨äº†æ›´å°çš„èµ„æºå¼€é”€ã€‚ è¿™é‡Œå®šä¹‰å’Œçº¿ç¨‹ç›¸å…³çš„å¦ä¸€ä¸ªæœ¯è¯­ - è¿›ç¨‹ï¼šä¸€ä¸ªè¿›ç¨‹åŒ…æ‹¬ç”±æ“ä½œç³»ç»Ÿåˆ†é…çš„å†…å­˜ç©ºé—´ï¼ŒåŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªçº¿ç¨‹ã€‚ä¸€ä¸ªçº¿ç¨‹ä¸èƒ½ç‹¬ç«‹çš„å­˜åœ¨ï¼Œå®ƒå¿…é¡»æ˜¯è¿›ç¨‹çš„ä¸€éƒ¨åˆ†ã€‚ä¸€ä¸ªè¿›ç¨‹ä¸€ç›´è¿è¡Œï¼Œç›´åˆ°æ‰€æœ‰çš„éå®ˆæŠ¤çº¿ç¨‹éƒ½ç»“æŸè¿è¡Œåæ‰èƒ½ç»“æŸã€‚ å¤šçº¿ç¨‹èƒ½æ»¡è¶³ç¨‹åºå‘˜ç¼–å†™é«˜æ•ˆç‡çš„ç¨‹åºæ¥è¾¾åˆ°å……åˆ†åˆ©ç”¨ CPU çš„ç›®çš„ã€‚ ä¸€ä¸ªçº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸ çº¿ç¨‹æ˜¯ä¸€ä¸ªåŠ¨æ€æ‰§è¡Œçš„è¿‡ç¨‹ï¼Œå®ƒä¹Ÿæœ‰ä¸€ä¸ªä»äº§ç”Ÿåˆ°æ­»äº¡çš„è¿‡ç¨‹ã€‚ ä¸‹å›¾æ˜¾ç¤ºäº†ä¸€ä¸ªçº¿ç¨‹å®Œæ•´çš„ç”Ÿå‘½å‘¨æœŸã€‚ æ–°å»ºçŠ¶æ€ï¼š ä½¿ç”¨ new å…³é”®å­—å’Œ Thread ç±»æˆ–å…¶å­ç±»å»ºç«‹ä¸€ä¸ªçº¿ç¨‹å¯¹è±¡åï¼Œè¯¥çº¿ç¨‹å¯¹è±¡å°±å¤„äºæ–°å»ºçŠ¶æ€ã€‚å®ƒä¿æŒè¿™ä¸ªçŠ¶æ€ç›´åˆ°ç¨‹åº start() è¿™ä¸ªçº¿ç¨‹ã€‚ å°±ç»ªçŠ¶æ€ï¼š å½“çº¿ç¨‹å¯¹è±¡è°ƒç”¨äº†start()æ–¹æ³•ä¹‹åï¼Œè¯¥çº¿ç¨‹å°±è¿›å…¥å°±ç»ªçŠ¶æ€ã€‚å°±ç»ªçŠ¶æ€çš„çº¿ç¨‹å¤„äºå°±ç»ªé˜Ÿåˆ—ä¸­ï¼Œè¦ç­‰å¾…JVMé‡Œçº¿ç¨‹è°ƒåº¦å™¨çš„è°ƒåº¦ã€‚ è¿è¡ŒçŠ¶æ€ï¼š å¦‚æœå°±ç»ªçŠ¶æ€çš„çº¿ç¨‹è·å– CPU èµ„æºï¼Œå°±å¯ä»¥æ‰§è¡Œ run()ï¼Œæ­¤æ—¶çº¿ç¨‹ä¾¿å¤„äºè¿è¡ŒçŠ¶æ€ã€‚å¤„äºè¿è¡ŒçŠ¶æ€çš„çº¿ç¨‹æœ€ä¸ºå¤æ‚ï¼Œå®ƒå¯ä»¥å˜ä¸ºé˜»å¡çŠ¶æ€ã€å°±ç»ªçŠ¶æ€å’Œæ­»äº¡çŠ¶æ€ã€‚ é˜»å¡çŠ¶æ€ï¼š å¦‚æœä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œäº†sleepï¼ˆç¡çœ ï¼‰ã€suspendï¼ˆæŒ‚èµ·ï¼‰ç­‰æ–¹æ³•ï¼Œå¤±å»æ‰€å ç”¨èµ„æºä¹‹åï¼Œè¯¥çº¿ç¨‹å°±ä»è¿è¡ŒçŠ¶æ€è¿›å…¥é˜»å¡çŠ¶æ€ã€‚åœ¨ç¡çœ æ—¶é—´å·²åˆ°æˆ–è·å¾—è®¾å¤‡èµ„æºåå¯ä»¥é‡æ–°è¿›å…¥å°±ç»ªçŠ¶æ€ã€‚å¯ä»¥åˆ†ä¸ºä¸‰ç§ï¼š ç­‰å¾…é˜»å¡ï¼šè¿è¡ŒçŠ¶æ€ä¸­çš„çº¿ç¨‹æ‰§è¡Œ wait() æ–¹æ³•ï¼Œä½¿çº¿ç¨‹è¿›å…¥åˆ°ç­‰å¾…é˜»å¡çŠ¶æ€ã€‚ åŒæ­¥é˜»å¡ï¼šçº¿ç¨‹åœ¨è·å– synchronized åŒæ­¥é”å¤±è´¥(å› ä¸ºåŒæ­¥é”è¢«å…¶ä»–çº¿ç¨‹å ç”¨)ã€‚ å…¶ä»–é˜»å¡ï¼šé€šè¿‡è°ƒç”¨çº¿ç¨‹çš„ sleep() æˆ– join() å‘å‡ºäº† I/O è¯·æ±‚æ—¶ï¼Œçº¿ç¨‹å°±ä¼šè¿›å…¥åˆ°é˜»å¡çŠ¶æ€ã€‚å½“sleep() çŠ¶æ€è¶…æ—¶ï¼Œjoin() ç­‰å¾…çº¿ç¨‹ç»ˆæ­¢æˆ–è¶…æ—¶ï¼Œæˆ–è€… I/O å¤„ç†å®Œæ¯•ï¼Œçº¿ç¨‹é‡æ–°è½¬å…¥å°±ç»ªçŠ¶æ€ã€‚ æ­»äº¡çŠ¶æ€ï¼š ä¸€ä¸ªè¿è¡ŒçŠ¶æ€çš„çº¿ç¨‹å®Œæˆä»»åŠ¡æˆ–è€…å…¶ä»–ç»ˆæ­¢æ¡ä»¶å‘ç”Ÿæ—¶ï¼Œè¯¥çº¿ç¨‹å°±åˆ‡æ¢åˆ°ç»ˆæ­¢çŠ¶æ€ã€‚ çº¿ç¨‹çš„ä¼˜å…ˆçº§ æ¯ä¸€ä¸ª Java çº¿ç¨‹éƒ½æœ‰ä¸€ä¸ªä¼˜å…ˆçº§ï¼Œè¿™æ ·æœ‰åŠ©äºæ“ä½œç³»ç»Ÿç¡®å®šçº¿ç¨‹çš„è°ƒåº¦é¡ºåºã€‚ Java çº¿ç¨‹çš„ä¼˜å…ˆçº§æ˜¯ä¸€ä¸ªæ•´æ•°ï¼Œå…¶å–å€¼èŒƒå›´æ˜¯ 1 ï¼ˆThread.MIN_PRIORITY ï¼‰ - 10 ï¼ˆThread.MAX_PRIORITY ï¼‰ã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼Œæ¯ä¸€ä¸ªçº¿ç¨‹éƒ½ä¼šåˆ†é…ä¸€ä¸ªä¼˜å…ˆçº§ NORM_PRIORITYï¼ˆ5ï¼‰ã€‚ å…·æœ‰è¾ƒé«˜ä¼˜å…ˆçº§çš„çº¿ç¨‹å¯¹ç¨‹åºæ›´é‡è¦ï¼Œå¹¶ä¸”åº”è¯¥åœ¨ä½ä¼˜å…ˆçº§çš„çº¿ç¨‹ä¹‹å‰åˆ†é…å¤„ç†å™¨èµ„æºã€‚ä½†æ˜¯ï¼Œçº¿ç¨‹ä¼˜å…ˆçº§ä¸èƒ½ä¿è¯çº¿ç¨‹æ‰§è¡Œçš„é¡ºåºï¼Œè€Œä¸”éå¸¸ä¾èµ–äºå¹³å°ã€‚ Thread æ–¹æ³• åºå· æ–¹æ³•æè¿° 1 public void start()ä½¿è¯¥çº¿ç¨‹å¼€å§‹æ‰§è¡Œï¼›==Java== è™šæ‹Ÿæœºè°ƒç”¨è¯¥çº¿ç¨‹çš„ run æ–¹æ³•ã€‚ 2 public void run()å¦‚æœè¯¥çº¿ç¨‹æ˜¯ä½¿ç”¨ç‹¬ç«‹çš„ Runnable è¿è¡Œå¯¹è±¡æ„é€ çš„ï¼Œåˆ™è°ƒç”¨è¯¥ Runnable å¯¹è±¡çš„ run æ–¹æ³•ï¼›å¦åˆ™ï¼Œè¯¥æ–¹æ³•ä¸æ‰§è¡Œä»»ä½•æ“ä½œå¹¶è¿”å›ã€‚ 3 public final void setName(String name)æ”¹å˜çº¿ç¨‹åç§°ï¼Œä½¿ä¹‹ä¸å‚æ•° name ç›¸åŒã€‚ 4 public final void setPriority(int priority) æ›´æ”¹çº¿ç¨‹çš„ä¼˜å…ˆçº§ã€‚ 5 public final void setDaemon(boolean on)å°†è¯¥çº¿ç¨‹æ ‡è®°ä¸ºå®ˆæŠ¤çº¿ç¨‹æˆ–ç”¨æˆ·çº¿ç¨‹ã€‚ 6 public final void join(long millisec)ç­‰å¾…è¯¥çº¿ç¨‹ç»ˆæ­¢çš„æ—¶é—´æœ€é•¿ä¸º millis æ¯«ç§’ã€‚ 7 public void interrupt()ä¸­æ–­çº¿ç¨‹ã€‚ 8 public final boolean isAlive()æµ‹è¯•çº¿ç¨‹æ˜¯å¦å¤„äºæ´»åŠ¨çŠ¶æ€ã€‚ æµ‹è¯•çº¿ç¨‹æ˜¯å¦å¤„äºæ´»åŠ¨çŠ¶æ€ã€‚ ä¸Šè¿°æ–¹æ³•æ˜¯è¢«Threadå¯¹è±¡è°ƒç”¨çš„ã€‚ä¸‹é¢çš„æ–¹æ³•æ˜¯Threadç±»çš„é™æ€æ–¹æ³•ã€‚ åºå· æ–¹æ³•æè¿° 1 public static void yield()æš‚åœå½“å‰æ­£åœ¨æ‰§è¡Œçš„çº¿ç¨‹å¯¹è±¡ï¼Œå¹¶æ‰§è¡Œå…¶ä»–çº¿ç¨‹ã€‚ 2 public static void sleep(long millisec)åœ¨æŒ‡å®šçš„æ¯«ç§’æ•°å†…è®©å½“å‰æ­£åœ¨æ‰§è¡Œçš„çº¿ç¨‹ä¼‘çœ ï¼ˆæš‚åœæ‰§è¡Œï¼‰ï¼Œæ­¤æ“ä½œå—åˆ°ç³»ç»Ÿè®¡æ—¶å™¨å’Œè°ƒåº¦ç¨‹åºç²¾åº¦å’Œå‡†ç¡®æ€§çš„å½±å“ã€‚ 3 public static boolean holdsLock(Object x)å½“ä¸”ä»…å½“å½“å‰çº¿ç¨‹åœ¨æŒ‡å®šçš„å¯¹è±¡ä¸Šä¿æŒç›‘è§†å™¨é”æ—¶ï¼Œæ‰è¿”å› trueã€‚ 4 public static Thread currentThread()è¿”å›å¯¹å½“å‰æ­£åœ¨æ‰§è¡Œçš„çº¿ç¨‹å¯¹è±¡çš„å¼•ç”¨ã€‚ 5 public static void dumpStack()å°†å½“å‰çº¿ç¨‹çš„å †æ ˆè·Ÿè¸ªæ‰“å°è‡³æ ‡å‡†é”™è¯¯æµã€‚ åˆ›å»ºä¸€ä¸ªçº¿ç¨‹ Java æä¾›äº†ä¸‰ç§åˆ›å»ºçº¿ç¨‹çš„æ–¹æ³•ï¼š é€šè¿‡å®ç° Runnable æ¥å£ï¼› é€šè¿‡ç»§æ‰¿ Thread ç±»æœ¬èº«ï¼› é€šè¿‡ Callable å’Œ Future åˆ›å»ºçº¿ç¨‹ã€‚ é€šè¿‡å®ç°Runnable æ¥å£æ¥åˆ›å»ºçº¿ç¨‹ åˆ›å»ºä¸€ä¸ªçº¿ç¨‹ï¼Œæœ€ç®€å•çš„æ–¹æ³•æ˜¯åˆ›å»ºä¸€ä¸ªå®ç° Runnable æ¥å£çš„ç±»ã€‚ ä¸ºäº†å®ç° Runnableï¼Œä¸€ä¸ªç±»åªéœ€è¦æ‰§è¡Œä¸€ä¸ªæ–¹æ³•è°ƒç”¨ run()ï¼Œå£°æ˜å¦‚ä¸‹ï¼š public void run() ä½ å¯ä»¥é‡å†™è¯¥æ–¹æ³•ï¼Œé‡è¦çš„æ˜¯ç†è§£çš„ run() å¯ä»¥è°ƒç”¨å…¶ä»–æ–¹æ³•ï¼Œä½¿ç”¨å…¶ä»–ç±»ï¼Œå¹¶å£°æ˜å˜é‡ï¼Œå°±åƒä¸»çº¿ç¨‹ä¸€æ ·ã€‚ åœ¨åˆ›å»ºä¸€ä¸ªå®ç° Runnable æ¥å£çš„ç±»ä¹‹åï¼Œä½ å¯ä»¥åœ¨ç±»ä¸­å®ä¾‹åŒ–ä¸€ä¸ªçº¿ç¨‹å¯¹è±¡ã€‚ Thread å®šä¹‰äº†å‡ ä¸ªæ„é€ æ–¹æ³•ï¼Œä¸‹é¢çš„è¿™ä¸ªæ˜¯æˆ‘ä»¬ç»å¸¸ä½¿ç”¨çš„ï¼š Thread(Runnable threadOb,String threadName); è¿™é‡Œï¼ŒthreadOb æ˜¯ä¸€ä¸ªå®ç° Runnable æ¥å£çš„ç±»çš„å®ä¾‹ï¼Œå¹¶ä¸” threadName æŒ‡å®šæ–°çº¿ç¨‹çš„åå­—ã€‚ æ–°çº¿ç¨‹åˆ›å»ºä¹‹åï¼Œä½ è°ƒç”¨å®ƒçš„ start() æ–¹æ³•å®ƒæ‰ä¼šè¿è¡Œã€‚ void start(); ä¸‹é¢æ˜¯ä¸€ä¸ªåˆ›å»ºçº¿ç¨‹å¹¶å¼€å§‹è®©å®ƒæ‰§è¡Œçš„å®ä¾‹ï¼š class RunnableDemo implements Runnable { private Thread t; private String threadName; RunnableDemo( String name) { threadName = name; System.out.println(\"Creating \" + threadName ); } public void run() { System.out.println(\"Running \" + threadName ); try { for(int i = 4; i \u003e 0; i--) { System.out.println(\"Thread: \" + threadName + \", \" + i); // è®©çº¿ç¨‹ç¡çœ ä¸€ä¼š Thread.sleep(50); } }catch (InterruptedException e) { System.out.println(\"Thread \" + threadName + \" interrupted.\"); } System.out.println(\"Thread \" + threadName + \" exiting.\"); } public void start () { System.out.println(\"Starting \" + threadName ); if (t == null) { t = new Thread (this, threadName); t.start (); } } } public class TestThread { public static void main(String args[]) { RunnableDemo R1 = new RunnableDemo( \"Thread-1\"); R1.start(); RunnableDemo R2 = new RunnableDemo( \"Thread-2\"); R2.start(); } } é€šè¿‡ç»§æ‰¿Threadæ¥åˆ›å»ºçº¿ç¨‹ åˆ›å»ºä¸€ä¸ªçº¿ç¨‹çš„ç¬¬äºŒç§æ–¹æ³•æ˜¯åˆ›å»ºä¸€ä¸ªæ–°çš„ç±»ï¼Œè¯¥ç±»ç»§æ‰¿ Thread ç±»ï¼Œç„¶ååˆ›å»ºä¸€ä¸ªè¯¥ç±»çš„å®ä¾‹ã€‚ ç»§æ‰¿ç±»å¿…é¡»é‡å†™ run() æ–¹æ³•ï¼Œè¯¥æ–¹æ³•æ˜¯æ–°çº¿ç¨‹çš„å…¥å£ç‚¹ã€‚å®ƒä¹Ÿå¿…é¡»è°ƒç”¨ start() æ–¹æ³•æ‰èƒ½æ‰§è¡Œã€‚ è¯¥æ–¹æ³•å°½ç®¡è¢«åˆ—ä¸ºä¸€ç§å¤šçº¿ç¨‹å®ç°æ–¹å¼ï¼Œä½†æ˜¯æœ¬è´¨ä¸Šä¹Ÿæ˜¯å®ç°äº† Runnable æ¥å£çš„ä¸€ä¸ªå®ä¾‹ã€‚ class ThreadDemo extends Thread { private Thread t; private String threadName; ThreadDemo( String name) { threadName = name; System.out.println(\"Creating \" + threadName ); } public void run() { System.out.println(\"Running \" + threadName ); try { for(int i = 4; i \u003e 0; i--) { System.out.println(\"Thread: \" + threadName + \", \" + i); // è®©çº¿ç¨‹ç¡çœ ä¸€ä¼š Thread.sleep(50); } }catch (InterruptedException e) { System.out.println(\"Thread \" + threadName + \" interrupted.\"); } System.out.println(\"Thread \" + t","date":"2020-10-12","objectID":"/java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/:0:2","tags":["Java"],"title":"Javaå­¦ä¹ ç¬”è®°","uri":"/java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"ä¸€ã€å†™å‰å‡†å¤‡ åœ¨atomæ–‡æœ¬ç¼–è¯‘å™¨ä¸­è‡ªå¸¦ç€markdownçš„ç¼–å†™ä¸æµè§ˆåŠŸèƒ½ã€‚ æµè§ˆä½¿ç”¨å¿«æ·é”®ctl+shift+må°±å¯ä»¥æ‰“å¼€markdowné¢„è§ˆã€‚ ç®€ä¹¦ä¸­åœ¨è®¾ç½®-\u003eé»˜è®¤ç¼–è¾‘å™¨-\u003emarkdownç¼–è¯‘ï¼Œå°±å¯ä»¥è®¾ç½®markdownã€‚ ","date":"2020-10-12","objectID":"/markdown%E7%AC%94%E8%AE%B0/:1:0","tags":["Markdown"],"title":"Markdownç¬”è®°","uri":"/markdown%E7%AC%94%E8%AE%B0/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"äºŒã€æ ‡é¢˜ åœ¨æƒ³è¦è®¾ç½®ä¸ºæ ‡é¢˜çš„æ–‡å­—å‰é¢åŠ #æ¥è¡¨ç¤ºæ ‡é¢˜ ä¸€ä¸ª#å·æ˜¯ä»¥åŠæ ‡é¢˜ï¼Œä¸¤ä¸ª#æ˜¯äºŒçº§æ ‡é¢˜ï¼Œæœ€å¤šæœ‰å…­çº§æ ‡é¢˜ æ ‡å‡†è¯­æ³•éœ€è¦åœ¨#ååŠ ç©ºæ ¼æ‰èƒ½è¡¨ç¤º ","date":"2020-10-12","objectID":"/markdown%E7%AC%94%E8%AE%B0/:2:0","tags":["Markdown"],"title":"Markdownç¬”è®°","uri":"/markdown%E7%AC%94%E8%AE%B0/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"ä¸‰ã€å­—ä½“ åŠ ç²— åœ¨è¦åŠ ç²—çš„æ–‡å­—å·¦å³åˆ†åˆ«ç”¨ä¸¤ä¸ª*æ ‡æ³¨ æ–œä½“ åœ¨è¦å€¾æ–œçš„æ–‡å­—å·¦å³åˆ†åˆ«ç”¨ä¸€ä¸ª*æ ‡æ³¨ æ–œä½“åŠ ç²— åœ¨è¦å€¾æ–œå’ŒåŠ ç²—çš„æ–‡å­—å·¦å³åˆ†åˆ«ç”¨ä¸‰ä¸ª*æ ‡æ³¨ åˆ é™¤çº¿ åœ¨è¦åŠ åˆ é™¤çº¿çš„æ–‡å­—å·¦å³åˆ†åˆ«ç”¨ä¸¤ä¸ªï½æ ‡æ³¨ ä¾‹å¦‚ï¼š **åŠ ç²—å­—ä½“** *æ–œä½“å­—ä½“* ***æ–œä½“åŠ ç²—å­—ä½“*** ~~åˆ é™¤å­—ä½“~~ æ•ˆæœï¼š åŠ ç²—å­—ä½“ï¼Œæ–œä½“å­—ä½“ï¼Œæ–œä½“åŠ ç²—å­—ä½“ï¼Œåˆ é™¤å­—ä½“ ","date":"2020-10-12","objectID":"/markdown%E7%AC%94%E8%AE%B0/:3:0","tags":["Markdown"],"title":"Markdownç¬”è®°","uri":"/markdown%E7%AC%94%E8%AE%B0/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"å››ã€å¼•ç”¨ åœ¨å¼•ç”¨æ–‡å­—å‰åŠ \u003eã€‚å¼•ç”¨å¯ä»¥åµŒå¥—ï¼Œå¦‚ä¸€ä¸ª\u003eã€ä¸¤ä¸ª\u003eç­‰ç­‰ ","date":"2020-10-12","objectID":"/markdown%E7%AC%94%E8%AE%B0/:4:0","tags":["Markdown"],"title":"Markdownç¬”è®°","uri":"/markdown%E7%AC%94%E8%AE%B0/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"äº”ã€\u0008åˆ†å‰²çº¿ ä¸‰ä¸ªæˆ–ä¸‰ä¸ªä»¥ä¸Šçš„-æˆ–è€…*\u0008\u0008 ä¾‹ï¼š --- *** \u0008æ•ˆæœ: ","date":"2020-10-12","objectID":"/markdown%E7%AC%94%E8%AE%B0/:5:0","tags":["Markdown"],"title":"Markdownç¬”è®°","uri":"/markdown%E7%AC%94%E8%AE%B0/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"å…­ã€\u0008å›¾ç‰‡ ä½¿ç”¨æ–¹æ³•ï¼š ![å›¾ç‰‡alt](å›¾ç‰‡åœ°å€ ''å›¾ç‰‡title'') å›¾ç‰‡altå°±æ˜¯æ˜¾ç¤ºåœ¨å›¾ç‰‡ä¸‹é¢çš„æ–‡å­—ï¼Œç›¸å½“äºå¯¹å›¾ç‰‡å†…å®¹çš„è§£é‡Šã€‚ å›¾ç‰‡titleæ˜¯å›¾ç‰‡çš„æ ‡é¢˜ï¼Œå½“é¼ æ ‡ç§»åˆ°å›¾ç‰‡ä¸Šæ—¶æ˜¾ç¤ºçš„å†…å®¹ã€‚titleå¯åŠ å¯ä¸åŠ  ","date":"2020-10-12","objectID":"/markdown%E7%AC%94%E8%AE%B0/:6:0","tags":["Markdown"],"title":"Markdownç¬”è®°","uri":"/markdown%E7%AC%94%E8%AE%B0/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"ä¸ƒã€è¶…é“¾æ¥ ä½¿ç”¨æ–¹æ³•ï¼š [è¶…é“¾æ¥å](è¶…é“¾æ¥åœ°å€ \"è¶…é“¾æ¥title\") titleå¯åŠ å¯ä¸åŠ  æ³¨ï¼šMarkdownæœ¬èº«è¯­æ³•ä¸æ”¯æŒé“¾æ¥åœ¨æ–°é¡µé¢ä¸­æ‰“å¼€ï¼Œè²Œä¼¼ç®€ä¹¦åšäº†å¤„ç†ï¼Œæ˜¯å¯ä»¥çš„ã€‚åˆ«çš„å¹³å°å¯èƒ½å°±ä¸è¡Œäº†ï¼Œå¦‚æœæƒ³è¦åœ¨æ–°é¡µé¢ä¸­æ‰“å¼€çš„è¯å¯ä»¥ç”¨htmlè¯­è¨€çš„aæ ‡ç­¾ä»£æ›¿ã€‚ \u003ca href=\"è¶…é“¾æ¥åœ°å€\" target=\"_blank\"\u003eè¶…é“¾æ¥å\u003c/a\u003e ç¤ºä¾‹ \u003ca href=\"https://www.jianshu.com/u/1f5ac0cf6a8b\" target=\"_blank\"\u003eç®€ä¹¦\u003c/a\u003e ","date":"2020-10-12","objectID":"/markdown%E7%AC%94%E8%AE%B0/:7:0","tags":["Markdown"],"title":"Markdownç¬”è®°","uri":"/markdown%E7%AC%94%E8%AE%B0/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"å…«ã€åˆ—è¡¨ æ— åºåˆ—è¡¨ ä½¿ç”¨æ–¹æ³•ï¼šæ— åºåˆ—è¡¨ç”¨ - + * ä»»ä½•ä¸€ç§éƒ½å¯ä»¥ - åˆ—è¡¨å†…å®¹ + åˆ—è¡¨å†…å®¹ * åˆ—è¡¨å†…å®¹ æ³¨æ„ï¼š- + * è·Ÿå†…å®¹ä¹‹é—´éƒ½è¦æœ‰ä¸€ä¸ªç©ºæ ¼ æœ‰åºåˆ—è¡¨ ä½¿ç”¨æ–¹æ³•ï¼šæ•°å­—åŠ ç‚¹ 1.åˆ—è¡¨å†…å®¹ 2.åˆ—è¡¨å†…å®¹ 3.åˆ—è¡¨å†…å®¹ æ³¨æ„ï¼šåºå·è·Ÿå†…å®¹ä¹‹é—´è¦æœ‰ç©ºæ ¼ åˆ—è¡¨åµŒå¥— ä½¿ç”¨æ–¹æ³•ï¼šä¸Šä¸€çº§å’Œä¸‹ä¸€çº§ä¹‹é—´æ•²ä¸‰ä¸ªç©ºæ ¼ ","date":"2020-10-12","objectID":"/markdown%E7%AC%94%E8%AE%B0/:8:0","tags":["Markdown"],"title":"Markdownç¬”è®°","uri":"/markdown%E7%AC%94%E8%AE%B0/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"ä¹ã€è¡¨æ ¼ ä½¿ç”¨æ–¹æ³•ï¼š | è¡¨å¤´ | è¡¨å¤´ | è¡¨å¤´ | | ---- | :---: | ---: | | å†…å®¹ | å†…å®¹ | å†…å®¹ | | å†…å®¹ | å†…å®¹ | å†…å®¹ | ç¬¬äºŒè¡Œåˆ†å‰²è¡¨å¤´å’Œå†…å®¹ã€‚ -æœ‰ä¸€ä¸ªå°±è¡Œ æ–‡å­—é»˜è®¤å±…å·¦ -ä¸¤è¾¹åŠ ï¼šè¡¨ç¤ºæ–‡å­—å±…ä¸­ -å³è¾¹åŠ ï¼šè¡¨ç¤ºæ–‡å­—å±…å³ æ³¨ï¼šåŸç”Ÿçš„è¯­æ³•ä¸¤è¾¹éƒ½è¦ç”¨ | åŒ…èµ·æ¥ã€‚æ­¤å¤„çœç•¥ æ•ˆæœï¼š è¡¨å¤´ è¡¨å¤´ è¡¨å¤´ å†…å®¹ å†…å®¹ å†…å®¹ å†…å®¹ å†…å®¹ å†…å®¹ ","date":"2020-10-12","objectID":"/markdown%E7%AC%94%E8%AE%B0/:9:0","tags":["Markdown"],"title":"Markdownç¬”è®°","uri":"/markdown%E7%AC%94%E8%AE%B0/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"åã€ä»£ç  ä½¿ç”¨æ–¹æ³•ï¼š å•è¡Œä»£ç ï¼šä»£ç ä¹‹é—´åˆ†åˆ«ç”¨ä¸€ä¸ªåå¼•å·åŒ…èµ·æ¥ ä»£ç å—ï¼šä»£ç ä¹‹é—´åˆ†åˆ«ç”¨ä¸‰ä¸ªåå¼•å·åŒ…èµ·æ¥ï¼Œä¸”ä¸¤è¾¹çš„åå¼•å·å•ç‹¬å ä¸€è¡Œ ä»£ç \u0008é«˜äº®ï¼šåœ¨ç¬¬ä¸€è¡Œåå¼•å·åé¢è¾“å…¥ä»£ç å—æ‰€ä½¿ç”¨çš„è¯­è¨€ ä»£ç é«˜äº®æ¼”ç¤ºï¼š `c #include \"stdio.h\" int main(){ printf(\"hello world\\n\"); return 0; } ` #include \"stdio.h\" int main(){ printf(\"hello world\\n\"); return 0; } ","date":"2020-10-12","objectID":"/markdown%E7%AC%94%E8%AE%B0/:10:0","tags":["Markdown"],"title":"Markdownç¬”è®°","uri":"/markdown%E7%AC%94%E8%AE%B0/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"åä¸€ã€æµç¨‹å›¾ ä½¿ç”¨æ–¹æ³•ï¼š st=\u003estart: å¼€å§‹ op=\u003eoperation: My Operation cond=\u003econdition: Yes or No? e=\u003eend st-\u003eop-\u003econd cond(yes)-\u003ee cond(no)-\u003eop ","date":"2020-10-12","objectID":"/markdown%E7%AC%94%E8%AE%B0/:11:0","tags":["Markdown"],"title":"Markdownç¬”è®°","uri":"/markdown%E7%AC%94%E8%AE%B0/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"åäºŒã€æ•°å­¦è¡¨è¾¾å¼ ç”¨åå¼•å·å°†æ•°å­¦è¡¨è¾¾å¼å°è£…,å¹¶åœ¨ç¬¬ä¸‰ä¸ªå·åæ ‡æ³¨mathä»£è¡¨æ•°å­¦å…¬å¼. E = mc^2 ","date":"2020-10-12","objectID":"/markdown%E7%AC%94%E8%AE%B0/:12:0","tags":["Markdown"],"title":"Markdownç¬”è®°","uri":"/markdown%E7%AC%94%E8%AE%B0/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"åä¸‰ã€å¾…åŠäº‹é¡¹ åœ¨å¾…åŠçš„äº‹é¡¹æ–‡æœ¬æˆ–è€…æ¸…å•æ–‡æœ¬å‰åŠ ä¸Š- ã€- [x]å³å¯ - [ ] è¡¨ç¤ºæœªå®Œæˆï¼Œ- [x] è¡¨ç¤ºå·²å®Œæˆã€‚ æ³¨ï¼šé”®å…¥å­—ç¬¦ä¸å­—ç¬¦ä¹‹é—´éƒ½è¦ä¿ç•™ä¸€ä¸ªå­—ç¬¦çš„ç©ºæ ¼ã€‚ æ•ˆæœ åˆ†æéœ€æ±‚ ç ”å‘ æµ‹è¯• ","date":"2020-10-12","objectID":"/markdown%E7%AC%94%E8%AE%B0/:13:0","tags":["Markdown"],"title":"Markdownç¬”è®°","uri":"/markdown%E7%AC%94%E8%AE%B0/"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"ç»“è¯­ Markdownæ¢è¡Œæ–¹æ³•ï¼š åœ¨æœ¬è¡Œæœ€åæ•²ä¸¤ä¸ªç©ºæ ¼å³å¯ æ¯è¡Œé—´ç©ºä¸€è¡Œå³å¯ Macä¸Šåå¼•å·æ–¹æ³•ï¼š åœ¨è‹±æ–‡çŠ¶æ€ä¸‹æŒ‰ä½optioné”®+æ•°å­—1å·¦è¾¹çš„é”® æœ¬æ–‡ç« ä¸ºä¸ªäººå­¦ä¹ ç¬”è®°ï¼Œè½¬è½½äº†å¤šäººçš„åšå®¢ï¼Œå¦‚æœ‰é›·åŒè¯·è§è°…ã€‚ ","date":"2020-10-12","objectID":"/markdown%E7%AC%94%E8%AE%B0/:14:0","tags":["Markdown"],"title":"Markdownç¬”è®°","uri":"/markdown%E7%AC%94%E8%AE%B0/"}]